var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=Math.pow,a=(t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,l=(e,t)=>{for(var i in t||(t={}))r.call(t,i)&&a(e,i,t[i]);if(s)for(var i of s(t))n.call(t,i)&&a(e,i,t[i]);return e},c=(e,s)=>t(e,i(s)),d=(e,t,i)=>new Promise(((s,r)=>{var n=e=>{try{a(i.next(e))}catch(t){r(t)}},o=e=>{try{a(i.throw(e))}catch(t){r(t)}},a=e=>e.done?s(e.value):Promise.resolve(e.value).then(n,o);a((i=i.apply(e,t)).next())}));const h="modulepreload",u=function(e,t){return new URL(e,t).href},p={},f=function(e,t,i){if(!t||0===t.length)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if(e=u(e,i),e in p)return;p[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"",n=!!i;if(n)for(let i=s.length-1;i>=0;i--){const r=s[i];if(r.href===e&&(!t||"stylesheet"===r.rel))return}else if(document.querySelector(`link[href="${e}"]${r}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":h,t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((t,i)=>{o.addEventListener("load",t),o.addEventListener("error",(()=>i(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e())).catch((e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))},g="[]",m="",v="!0",y="!1",b={bindTouchStart:m,bindTouchMove:m,bindTouchEnd:m,bindTouchCancel:m,bindLongTap:m},w={animation:m,bindAnimationStart:m,bindAnimationIteration:m,bindAnimationEnd:m,bindTransitionEnd:m};function E(e){return`'${e}'`}const T=Object.assign(Object.assign({"hover-class":E("none"),"hover-stop-propagation":y,"hover-start-time":"50","hover-stay-time":"400"},b),w),S={type:m,size:"23",color:m},A=Object.assign({longitude:m,latitude:m,scale:"16",markers:g,covers:m,polyline:g,circles:g,controls:g,"include-points":g,"show-location":m,"layer-style":"1",bindMarkerTap:m,bindControlTap:m,bindCalloutTap:m,bindUpdated:m},b),x={percent:m,"stroke-width":"6",color:E("#09BB07"),activeColor:E("#09BB07"),backgroundColor:E("#EBEBEB"),active:y,"active-mode":E("backwards"),"show-info":y},k={nodes:g},L=Object.assign({selectable:y,space:m,decode:y},b),C=Object.assign({size:E("default"),type:m,plain:y,disabled:m,loading:y,"form-type":m,"open-type":m,"hover-class":E("button-hover"),"hover-stop-propagation":y,"hover-start-time":"20","hover-stay-time":"70",name:m,bindagreeprivacyauthorization:m},b),_={value:m,disabled:m,checked:y,color:E("#09BB07"),name:m},R={bindChange:m,name:m},I={"report-submit":y,bindSubmit:m,bindReset:m,name:m},D={value:m,type:E(m),password:y,placeholder:m,"placeholder-style":m,"placeholder-class":E("input-placeholder"),disabled:m,maxlength:"140","cursor-spacing":"0",focus:y,"confirm-type":E("done"),"confirm-hold":y,cursor:"-1","selection-start":"-1","selection-end":"-1",bindInput:m,bindFocus:m,bindBlur:m,bindConfirm:m,name:m},P=Object.assign({for:m,name:m},b),M={mode:E("selector"),disabled:m,range:m,"range-key":m,value:m,start:m,end:m,fields:E("day"),"custom-item":m,name:m,bindCancel:m,bindChange:m,bindColumnChange:m},O={value:m,"indicator-style":m,"indicator-class":m,"mask-style":m,"mask-class":m,bindChange:m,name:m},N={name:m},F={value:m,checked:y,disabled:m,color:E("#09BB07"),name:m},B={bindChange:m,name:m},$={min:"0",max:"100",step:"1",disabled:m,value:"0",activeColor:E("#1aad19"),backgroundColor:E("#e9e9e9"),"block-size":"28","block-color":E("#ffffff"),"show-value":y,bindChange:m,bindChanging:m,name:m},U={checked:y,disabled:m,type:E("switch"),color:E("#04BE02"),bindChange:m,name:m},G={value:m,placeholder:m,"placeholder-style":m,"placeholder-class":E("textarea-placeholder"),disabled:m,maxlength:"140","auto-focus":y,focus:y,"auto-height":y,fixed:y,"cursor-spacing":"0",cursor:"-1","selection-start":"-1","selection-end":"-1",bindFocus:m,bindBlur:m,bindLineChange:m,bindInput:m,bindConfirm:m,name:m},H={src:m,bindLoad:"eh",bindError:"eh"},j=Object.assign({"scroll-top":y},b),z={"scale-area":y},V=Object.assign(Object.assign({direction:"none",inertia:y,"out-of-bounds":y,x:m,y:m,damping:"20",friction:"2",disabled:m,scale:y,"scale-min":"0.5","scale-max":"10","scale-value":"1",bindChange:m,bindScale:m,bindHTouchMove:m,bindVTouchMove:m,width:E("10px"),height:E("10px")},b),w),Y=Object.assign(Object.assign({"scroll-x":y,"scroll-y":y,"upper-threshold":"50","lower-threshold":"50","scroll-top":m,"scroll-left":m,"scroll-into-view":m,"scroll-with-animation":y,"enable-back-to-top":y,bindScrollToUpper:m,bindScrollToLower:m,bindScroll:m},b),w),W=Object.assign({"indicator-dots":y,"indicator-color":E("rgba(0, 0, 0, .3)"),"indicator-active-color":E("#000000"),autoplay:y,current:"0",interval:"5000",duration:"500",circular:y,vertical:y,"previous-margin":E("0px"),"next-margin":E("0px"),"display-multiple-items":"1",bindChange:m,bindTransition:m,bindAnimationFinish:m},b),K={"item-id":m},q={url:m,"open-type":E("navigate"),delta:"1","hover-class":E("navigator-hover"),"hover-stop-propagation":y,"hover-start-time":"50","hover-stay-time":"600",bindSuccess:m,bindFail:m,bindComplete:m},X={id:m,src:m,loop:y,controls:y,poster:m,name:m,author:m,bindError:m,bindPlay:m,bindPause:m,bindTimeUpdate:m,bindEnded:m},Z={"device-position":E("back"),flash:E("auto"),bindStop:m,bindError:m},Q=Object.assign({src:m,mode:E("scaleToFill"),"lazy-load":y,bindError:m,bindLoad:m},b),J=Object.assign({src:m,autoplay:y,muted:y,orientation:E("vertical"),"object-fit":E("contain"),"background-mute":y,"min-cache":"1","max-cache":"3",bindStateChange:m,bindFullScreenChange:m,bindNetStatus:m},w),ee=Object.assign({src:m,duration:m,controls:v,"danmu-list":m,"danmu-btn":m,"enable-danmu":m,autoplay:y,loop:y,muted:y,"initial-time":"0","page-gesture":y,direction:m,"show-progress":v,"show-fullscreen-btn":v,"show-play-btn":v,"show-center-play-btn":v,"enable-progress-gesture":v,"object-fit":E("contain"),poster:m,"show-mute-btn":y,bindPlay:m,bindPause:m,bindEnded:m,bindTimeUpdate:m,bindFullScreenChange:m,bindWaiting:m,bindError:m},w),te=Object.assign({"canvas-id":m,"disable-scroll":y,bindError:m},b),ie={"unit-id":m,"ad-intervals":m,bindLoad:m,bindError:m,bindClose:m},se={src:m,bindMessage:m,bindLoad:m,bindError:m},re={},ne={name:m},oe={name:m},ae={name:m},le={},ce={View:T,Icon:S,Progress:x,RichText:k,Text:L,Button:C,Checkbox:_,CheckboxGroup:R,Form:I,Input:D,Label:P,Picker:M,PickerView:O,PickerViewColumn:N,Radio:F,RadioGroup:B,Slider:$,Switch:U,CoverImage:H,Textarea:G,CoverView:j,MovableArea:z,MovableView:V,ScrollView:Y,Swiper:W,SwiperItem:K,Navigator:q,Audio:X,Camera:Z,Image:Q,LivePlayer:J,Video:ee,Canvas:te,Ad:ie,WebView:se,Block:re,Map:A,Slot:oe,SlotView:ne,NativeSlot:ae,Script:le};var de;(function(e){e["MINI"]="mini",e["WEB"]="web",e["RN"]="rn",e["HARMONY"]="harmony",e["QUICK"]="quickapp"})(de||(de={})),de.WEB,de.HARMONY,de.MINI,de.RN,de.QUICK;let he=class e{constructor(e){var t;this.callbacks=null!==(t=null===e||void 0===e?void 0:e.callbacks)&&void 0!==t?t:{}}on(t,i,s){let r,n,o;if(!i)return this;o="symbol"===typeof t?[t]:t.split(e.eventSplitter),this.callbacks||(this.callbacks={});const a=this.callbacks;while(r=o.shift()){const e=a[r],t=e?e.tail:{};t.next=n={},t.context=s,t.callback=i,a[r]={tail:n,next:e?e.next:t}}return this}once(e,t,i){const s=(...r)=>{t.apply(this,r),this.off(e,s,i)};return this.on(e,s,i),this}off(t,i,s){let r,n,o;if(!(n=this.callbacks))return this;if(!(t||i||s))return delete this.callbacks,this;o="symbol"===typeof t?[t]:t?t.split(e.eventSplitter):Object.keys(n);while(r=o.shift()){let e=n[r];if(delete n[r],!e||!i&&!s)continue;const t=e.tail;while((e=e.next)!==t){const t=e.callback,n=e.context;(i&&t!==i||s&&n!==s)&&this.on(r,t,n)}}return this}trigger(t,...i){let s,r,n,o;if(!(n=this.callbacks))return this;o="symbol"===typeof t?[t]:t.split(e.eventSplitter);while(s=o.shift())if(r=n[s]){const e=r.tail;while((r=r.next)!==e)r.callback.apply(r.context||this,i)}return this}};he.eventSplitter=",";class ue extends he{constructor(){super(...arguments),this.exeList=[]}on(e,t){return super.on(e,t,this),this.exeList=this.exeList.reduce(((t,i)=>(i.eventName===e?super.trigger(i.eventName,i.data):t.push(i),t)),[]),this}emit(e,t){ge.trigger(e,t)}}const pe=new ue;class fe extends he{emit(e,t){pe.off(e),pe.exeList.push({eventName:e,data:t})}addEvents(e){e&&"object"===typeof e&&Object.keys(e).forEach((t=>{this.off(t),this.on(t,e[t],this)}))}}const ge=new fe,me={pageChannel:pe,routeChannel:ge};function ve(e){return"undefined"===typeof e}function ye(e){return null===e}function be(e){return null!==e&&"object"===typeof e}function we(e){return"function"===typeof e}const Ee=Array.isArray;var Te;(function(e){e[e["SINGLE"]=0]="SINGLE",e[e["MULTI"]=1]="MULTI",e[e["WATERFALL"]=2]="WATERFALL"})(Te||(Te={}));const Se={app:["onLaunch","onShow","onHide"],page:["onLoad","onUnload","onReady","onShow","onHide",["onPullDownRefresh","onReachBottom","onPageScroll","onResize","defer:onTabItemTap","onTitleClick","onOptionMenuClick","onPopMenuClick","onPullIntercept","onAddToFavorites"],["onShareAppMessage","onShareTimeline"]],component:["attached","detached"]};function Ae(e,t){return{type:e,initial:t||null}}class xe extends he{constructor(e,t){super(t),this.hooks=e;for(const i in e){const{initial:t}=e[i];we(t)&&this.on(i,t)}}tapOneOrMany(e,t){const i=we(t)?[t]:t;i.forEach((t=>this.on(e,t)))}tap(e,t){const i=this.hooks,{type:s,initial:r}=i[e];s===Te.SINGLE?(this.off(e),this.on(e,we(t)?t:t[t.length-1])):(r&&this.off(e,r),this.tapOneOrMany(e,t))}call(e,...t){var i;const s=this.hooks[e];if(!s)return;const{type:r}=s,n=this.callbacks;if(!n)return;const o=n[e];if(o){const e=o.tail;let s,n=o.next,a=t;while(n!==e){if(s=null===(i=n.callback)||void 0===i?void 0:i.apply(n.context||this,a),r===Te.WATERFALL){const e=[s];a=e}n=n.next}return s}}isExist(e){var t;return Boolean(null===(t=this.callbacks)||void 0===t?void 0:t[e])}}const ke=new xe({getMiniLifecycle:Ae(Te.SINGLE,(e=>e)),getMiniLifecycleImpl:Ae(Te.SINGLE,(function(){return this.call("getMiniLifecycle",Se)})),getLifecycle:Ae(Te.SINGLE,((e,t)=>e[t])),modifyRecursiveComponentConfig:Ae(Te.SINGLE,(e=>e)),getPathIndex:Ae(Te.SINGLE,(e=>`[${e}]`)),getEventCenter:Ae(Te.SINGLE,(e=>new e)),isBubbleEvents:Ae(Te.SINGLE,(e=>{const t=new Set(["touchstart","touchmove","touchcancel","touchend","touchforcechange","tap","longpress","longtap","transitionend","animationstart","animationiteration","animationend"]);return t.has(e)})),getSpecialNodes:Ae(Te.SINGLE,(()=>["view","text","image"])),onRemoveAttribute:Ae(Te.SINGLE),batchedEventUpdates:Ae(Te.SINGLE),mergePageInstance:Ae(Te.SINGLE),modifyPageObject:Ae(Te.SINGLE),createPullDownComponent:Ae(Te.SINGLE),getDOMNode:Ae(Te.SINGLE),modifyHydrateData:Ae(Te.SINGLE),transferHydrateData:Ae(Te.SINGLE),modifySetAttrPayload:Ae(Te.SINGLE),modifyRmAttrPayload:Ae(Te.SINGLE),onAddEvent:Ae(Te.SINGLE),proxyToRaw:Ae(Te.SINGLE,(function(e){return e})),modifyMpEvent:Ae(Te.MULTI),modifyMpEventImpl:Ae(Te.SINGLE,(function(e){try{this.call("modifyMpEvent",e)}catch(t){console.warn("[Taro modifyMpEvent hook Error]: "+(null===t||void 0===t?void 0:t.message))}})),injectNewStyleProperties:Ae(Te.SINGLE),modifyTaroEvent:Ae(Te.MULTI),dispatchTaroEvent:Ae(Te.SINGLE,((e,t)=>{t.dispatchEvent(e)})),dispatchTaroEventFinish:Ae(Te.MULTI),modifyTaroEventReturn:Ae(Te.SINGLE,(()=>{})),modifyDispatchEvent:Ae(Te.MULTI),initNativeApi:Ae(Te.MULTI),patchElement:Ae(Te.MULTI),modifyAddEventListener:Ae(Te.SINGLE),modifyRemoveEventListener:Ae(Te.SINGLE),getMemoryLevel:Ae(Te.SINGLE)}),Le={},Ce=(...e)=>{};function _e(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function Re(e){let t="",i=!1;for(let s=0;s<e.length;s++)"-"!==e[s]?(t+=i?e[s].toUpperCase():e[s],i=!1):i=!0;return t}function Ie(e,t){if(!e)throw new Error(t)}function De(e){const t={},i=e.View,s={"#text":{},StaticView:i,StaticImage:e.Image,StaticText:e.Text,PureView:i,CatchView:i};return e=Object.assign(Object.assign({},e),s),Object.keys(e).sort(((e,t)=>{const i=/^(Static|Pure|Catch)*(View|Image|Text)$/,s=i.test(e),r=i.test(t);return s&&r?e>t?1:-1:s?-1:r||e>=t?1:-1})).forEach(((i,s)=>{const r={_num:String(s)};Object.keys(e[i]).filter((e=>!/^bind/.test(e)&&!["focus","blur"].includes(e))).sort().forEach(((e,t)=>{r[Re(e)]="p"+t})),t[_e(i)]=r})),t}var Pe;(new Date).getTime().toString(),function(e){e["Container"]="container",e["Childnodes"]="cn",e["Text"]="v",e["NodeType"]="nt",e["NodeName"]="nn",e["Style"]="st",e["Class"]="cl",e["Src"]="src"}(Pe||(Pe={}));const Me="\u9875\u9762\u521d\u59cb\u5316",Oe="root",Ne="document-fragment",Fe="id",Be="uid",$e="class",Ue="style",Ge="focus",He="view",je="static-view",ze="pure-view",Ve="props",Ye="dataset",We="object",Ke="input",qe="target",Xe="currentTarget",Ze="type",Qe="confirm",Je="timeStamp",et="keyCode",tt="touchmove",it="compileMode",st="catchMove",rt="catch-view",nt="comment",ot="onLoad",at="onReady",lt="onShow",ct="onHide",dt="e_result";var ht;(function(e){e["INIT"]="0",e["RESTORE"]="1",e["RECOVER"]="2",e["DESTORY"]="3"})(ht||(ht={}));const ut=[];class pt{constructor(e){this.records=[],this.callback=e}observe(e,t){this.disconnect(),this.target=e,this.options=t||{},ut.push(this)}disconnect(){this.target=null;const e=ut.indexOf(this);e>=0&&ut.splice(e,1)}takeRecords(){return this.records.splice(0,this.records.length)}}const ft=(e,t)=>!!e&&e.sid===(null===t||void 0===t?void 0:t.sid),gt=(e,t)=>{const{characterData:i,characterDataOldValue:s,attributes:r,attributeOldValue:n,childList:o}=t;switch(e.type){case"characterData":return!!i&&(s||(e.oldValue=null),!0);case"attributes":return!!r&&(n||(e.oldValue=null),!0);case"childList":return!!o}};let mt=!1;function vt(e,t){e.records.push(t),mt||(mt=!0,Promise.resolve().then((()=>{mt=!1,ut.forEach((e=>e.callback(e.takeRecords())))})))}function yt(e){ut.forEach((t=>{const{options:i}=t;for(let s=e.target;s;s=s.parentNode){if(ft(t.target,s)&&gt(e,i)){vt(t,e);break}if(!i.subtree)break}}))}let bt=class{constructor(e){ENABLE_MUTATION_OBSERVER?this.core=new pt(e):this.core={observe:Ce,disconnect:Ce,takeRecords:Ce}}observe(...e){this.core.observe(...e)}disconnect(){this.core.disconnect()}takeRecords(){return this.core.takeRecords()}static record(e){yt(e)}};const wt=ke.call("getEventCenter",he),Et={window:window,document:document};function Tt(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i}function St(e,t,i,s){function r(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,n){function o(e){try{l(s.next(e))}catch(t){n(t)}}function a(e){try{l(s["throw"](e))}catch(t){n(t)}}function l(e){e.done?i(e.value):r(e.value).then(o,a)}l((s=s.apply(e,t||[])).next())}))}function At(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)}"function"===typeof SuppressedError&&SuppressedError;const xt={app:null,router:null,page:null},kt=()=>xt;(function(){"undefined"!==typeof performance&&null!==performance&&performance.now||Date.now||(new Date).getTime()})();const Lt=requestAnimationFrame,Ct=Et.window,_t=Ct.location,Rt=()=>{const e=[];for(let s=65;s<=90;s++)e.push(s);for(let s=97;s<=122;s++)e.push(s);const t=e.length-1,i=[0,0];return()=>{const s=i.map((t=>e[t])),r=String.fromCharCode(...s);let n=i.length-1;i[n]++;while(i[n]>t){if(i[n]=0,n-=1,n<0){i.push(0);break}i[n]++}return r}};function It(e){return 1===e.nodeType}function Dt(e){return 3===e.nodeType}function Pt(e){return e.nodeName===nt}function Mt(e){const t=Object.keys(e.props).find((e=>!(/^(class|style|id)$/.test(e)||e.startsWith("data-"))));return Boolean(t)}function Ot(e,t){var i;while(e=(null===e||void 0===e?void 0:e.parentElement)||null){if(!e||e.nodeName===Oe||"root-portal"===e.nodeName)return!1;if(null===(i=e.__handlers[t])||void 0===i?void 0:i.length)return!0}return!1}function Nt(e){switch(e){case Ue:return"st";case Fe:return Be;case $e:return"cl";default:return e}}function Ft(e,t,i){we(i)&&(i={value:i}),Object.defineProperty(e.prototype,t,Object.assign({configurable:!0,enumerable:!0},i))}let Bt;function $t(){return Bt||(Bt=De(ce)),Bt}class Ut{constructor(e,t){this.tokenList=[],this.el=t,e.trim().split(/\s+/).forEach((e=>this.tokenList.push(e)))}get value(){return this.toString()}get length(){return this.tokenList.length}add(){let e=0,t=!1;const i=arguments,s=i.length,r=this.tokenList;do{const s=i[e];this.checkTokenIsValid(s)&&!~r.indexOf(s)&&(r.push(s),t=!0)}while(++e<s);t&&this._update()}remove(){let e=0,t=!1;const i=arguments,s=i.length,r=this.tokenList;do{const s=i[e]+"";if(!this.checkTokenIsValid(s))continue;const n=r.indexOf(s);~r.indexOf(s)&&(r.splice(n,1),t=!0)}while(++e<s);t&&this._update()}contains(e){return!!this.checkTokenIsValid(e)&&!!~this.tokenList.indexOf(e)}toggle(e,t){const i=this.contains(e),s=i?!0!==t&&"remove":!1!==t&&"add";return s&&this[s](e),!0===t||!1===t?t:!i}replace(e,t){if(!this.checkTokenIsValid(e)||!this.checkTokenIsValid(t))return;const i=this.tokenList.indexOf(e);~i&&(this.tokenList.splice(i,1,t),this._update())}toString(){return this.tokenList.filter((e=>""!==e)).join(" ")}checkTokenIsValid(e){return""!==e&&!/\s/.test(e)}_update(){this.el.className=this.value}}class Gt extends Map{removeNode(e){const{sid:t,uid:i}=e;this.delete(t),i!==t&&i&&this.delete(i)}removeNodeTree(e){this.removeNode(e);const{childNodes:t}=e;t.forEach((e=>this.removeNodeTree(e)))}}const Ht=new Gt;let jt,zt;function Vt(e){var t;zt||(zt=$t()),jt||(jt=ke.call("getSpecialNodes"));const i=e.nodeName;let s=null;if(Dt(e))return{sid:e.sid,["v"]:e.nodeValue,["nn"]:(null===(t=zt[i])||void 0===t?void 0:t._num)||"8"};const r={["nn"]:i,sid:e.sid};e.uid!==e.sid&&(r.uid=e.uid),!e.isAnyEventBinded()&&jt.indexOf(i)>-1&&(r["nn"]=`static-${i}`,i!==He||Mt(e)||(r["nn"]=ze));const{props:n}=e;for(const d in n){const e=Re(d);d.startsWith("data-")||d===$e||d===Ue||d===Fe||e===st||e===it||(r[e]=n[d]),i===He&&e===st&&!1!==n[d]&&(r["nn"]=rt),e===it&&(s=n[d])}r["cn"]=e.childNodes.filter((e=>!Pt(e))).map(Vt),""!==e.className&&(r["cl"]=e.className);const o=e.cssText;""!==o&&"swiper-item"!==i&&(r["st"]=o),ke.call("modifyHydrateData",r,e);const a=r["nn"],l=zt[a];if(l){r["nn"]=l._num;for(const e in r)e in l&&(r[l[e]]=r[e],delete r[e])}null!==s&&(r["nn"]=s);const c=ke.call("transferHydrateData",r,e,l);return c||r}class Yt{constructor(){this.__handlers={}}addEventListener(e,t,i){if(e=e.toLowerCase(),ke.call("onAddEvent",e,t,i,this),"regionchange"===e)return this.addEventListener("begin",t,i),void this.addEventListener("end",t,i);let s=!1;if(be(i)&&(Boolean(i.capture),s=Boolean(i.once)),s){const s=function(){t.apply(this,arguments),this.removeEventListener(e,s)};return void this.addEventListener(e,s,Object.assign(Object.assign({},i),{once:!1}))}const r=t;t=function(){return r.apply(this,arguments)},t.oldHandler=r;const n=this.__handlers[e];Ee(n)?n.push(t):this.__handlers[e]=[t]}removeEventListener(e,t){if(e=e.toLowerCase(),"regionchange"===e)return this.removeEventListener("begin",t),void this.removeEventListener("end",t);if(!t)return;const i=this.__handlers[e];if(!Ee(i))return;const s=i.findIndex((e=>{if(e===t||e.oldHandler===t)return!0}));i.splice(s,1)}isAnyEventBinded(){const e=this.__handlers,t=Object.keys(e).find((t=>e[t].length));return Boolean(t)}}const Wt="cn",Kt=Rt();class qt extends Yt{constructor(){super(),this.parentNode=null,this.childNodes=[],this.hydrate=e=>()=>Vt(e),this.uid="_"+Kt(),this.sid=this.uid,Ht.set(this.sid,this)}updateChildNodes(e){const t=()=>[],i=()=>{const e=this.childNodes.filter((e=>!Pt(e)));return e.map(Vt)};this.enqueueUpdate({path:`${this._path}.${Wt}`,value:e?t:i})}updateSingleChild(e){this.childNodes.forEach(((t,i)=>{Pt(t)||e&&i<e||this.enqueueUpdate({path:t._path,value:this.hydrate(t)})}))}get _root(){var e;return(null===(e=this.parentNode)||void 0===e?void 0:e._root)||null}findIndex(e){const t=this.childNodes.indexOf(e);return Ie(-1!==t,"The node to be replaced is not a child of this node."),t}get _path(){const e=this.parentNode;if(e){const t=e.childNodes.filter((e=>!Pt(e))),i=t.indexOf(this),s=ke.call("getPathIndex",i);return`${e._path}.${Wt}.${s}`}return""}get nextSibling(){const e=this.parentNode;return(null===e||void 0===e?void 0:e.childNodes[e.findIndex(this)+1])||null}get previousSibling(){const e=this.parentNode;return(null===e||void 0===e?void 0:e.childNodes[e.findIndex(this)-1])||null}get parentElement(){const e=this.parentNode;return 1===(null===e||void 0===e?void 0:e.nodeType)?e:null}get firstChild(){return this.childNodes[0]||null}get lastChild(){const e=this.childNodes;return e[e.length-1]||null}set textContent(e){const t=this.childNodes.slice(),i=[];while(this.firstChild)this.removeChild(this.firstChild,{doUpdate:!1});if(""===e)this.updateChildNodes(!0);else{const t=Et.document.createTextNode(e);i.push(t),this.appendChild(t),this.updateChildNodes()}bt.record({type:"childList",target:this,removedNodes:t,addedNodes:i})}insertBefore(e,t,i){if(e.nodeName===Ne)return e.childNodes.reduceRight(((e,t)=>(this.insertBefore(t,e),t)),t),e;e.remove({cleanRef:!1});let s=0;e.parentNode=this,t?(s=this.findIndex(t),this.childNodes.splice(s,0,e)):this.childNodes.push(e);const r=this.childNodes.length;if(this._root)if(t)if(i)this.enqueueUpdate({path:e._path,value:this.hydrate(e)});else{const e=2*r/3;e>s?this.updateChildNodes():this.updateSingleChild(s)}else{const t=1===r;t?this.updateChildNodes():this.enqueueUpdate({path:e._path,value:this.hydrate(e)})}return bt.record({type:"childList",target:this,addedNodes:[e],removedNodes:i?[t]:[],nextSibling:i?t.nextSibling:t||null,previousSibling:e.previousSibling}),e}appendChild(e){return this.insertBefore(e)}replaceChild(e,t){if(t.parentNode===this)return this.insertBefore(e,t,!0),t.remove({doUpdate:!1}),t}removeChild(e,t={}){const{cleanRef:i,doUpdate:s}=t;!1!==i&&!1!==s&&bt.record({type:"childList",target:this,removedNodes:[e],nextSibling:e.nextSibling,previousSibling:e.previousSibling});const r=this.findIndex(e);return this.childNodes.splice(r,1),e.parentNode=null,!1!==i&&Ht.removeNodeTree(e),this._root&&!1!==s&&this.updateChildNodes(),e}remove(e){var t;null===(t=this.parentNode)||void 0===t||t.removeChild(this,e)}hasChildNodes(){return this.childNodes.length>0}enqueueUpdate(e){var t;null===(t=this._root)||void 0===t||t.enqueueUpdate(e)}get ownerDocument(){return Et.document}static extend(e,t){Ft(qt,e,t)}}const Xt="webkit",Zt=["all","appearance","blockOverflow","blockSize","bottom","clear","contain","content","continue","cursor","direction","display","filter","float","gap","height","inset","isolation","left","letterSpacing","lightingColor","markerSide","mixBlendMode","opacity","order","position","quotes","resize","right","rowGap","tabSize","tableLayout","top","userSelect","verticalAlign","visibility","voiceFamily","volume","whiteSpace","widows","width","zIndex","pointerEvents","aspectRatio"];function Qt(e,t,i){!i&&Zt.push(e),t.forEach((t=>{Zt.push(e+t),e===Xt&&Zt.push("Webkit"+t)}))}const Jt="Color",ei="Style",ti="Width",ii="Image",si="Size",ri=[Jt,ei,ti],ni=["FitLength","FitWidth",ii],oi=[...ni,"Radius"],ai=[...ri,...ni],li=["EndRadius","StartRadius"],ci=["Bottom","Left","Right","Top"],di=["End","Start"],hi=["Content","Items","Self"],ui=["BlockSize","Height","InlineSize",ti],pi=["After","Before"];function fi(e){bt.record({type:"attributes",target:e._element,attributeName:"style",oldValue:e.cssText})}function gi(e){const t=e._element;t._root&&t.enqueueUpdate({path:`${t._path}.st`,value:e.cssText})}function mi(e,t){const i=this[t];i!==e&&(!this._pending&&fi(this),ye(e)||ve(e)||""===e?(this._usedStyleProp.delete(t),delete this._value[t]):(this._usedStyleProp.add(t),this._value[t]=e),!this._pending&&gi(this))}function vi(e,t){const i={};for(let s=0;s<t.length;s++){const r=t[s];if(e[r])return;i[r]={get(){const e=this._value[r];return ye(e)||ve(e)?"":e},set(e){mi.call(this,e,r)}}}Object.defineProperties(e.prototype,i)}function yi(e){return/^--/.test(e)}Qt("borderBlock",ri),Qt("borderBlockEnd",ri),Qt("borderBlockStart",ri),Qt("outline",[...ri,"Offset"]),Qt("border",[...ri,"Boundary","Break","Collapse","Radius","Spacing"]),Qt("borderFit",["Length",ti]),Qt("borderInline",ri),Qt("borderInlineEnd",ri),Qt("borderInlineStart",ri),Qt("borderLeft",ai),Qt("borderRight",ai),Qt("borderTop",ai),Qt("borderBottom",ai),Qt("textDecoration",[Jt,ei,"Line"]),Qt("textEmphasis",[Jt,ei,"Position"]),Qt("scrollMargin",ci),Qt("scrollPadding",ci),Qt("padding",ci),Qt("margin",[...ci,"Trim"]),Qt("scrollMarginBlock",di),Qt("scrollMarginInline",di),Qt("scrollPaddingBlock",di),Qt("scrollPaddingInline",di),Qt("gridColumn",di),Qt("gridRow",di),Qt("insetBlock",di),Qt("insetInline",di),Qt("marginBlock",di),Qt("marginInline",di),Qt("paddingBlock",di),Qt("paddingInline",di),Qt("pause",pi),Qt("cue",pi),Qt("mask",["Clip","Composite",ii,"Mode","Origin","Position","Repeat",si,"Type"]),Qt("borderImage",["Outset","Repeat","Slice","Source","Transform",ti]),Qt("maskBorder",["Mode","Outset","Repeat","Slice","Source",ti]),Qt("font",["Family","FeatureSettings","Kerning","LanguageOverride","MaxSize","MinSize","OpticalSizing","Palette",si,"SizeAdjust","Stretch",ei,"Weight","VariationSettings"]),Qt("transform",["Box","Origin",ei]),Qt("background",[Jt,ii,"Attachment","BlendMode","Clip","Origin","Position","Repeat",si]),Qt("listStyle",[ii,"Position","Type"]),Qt("scrollSnap",["Align","Stop","Type"]),Qt("grid",["Area","AutoColumns","AutoFlow","AutoRows"]),Qt("gridTemplate",["Areas","Columns","Rows"]),Qt("overflow",["Block","Inline","Wrap","X","Y"]),Qt("transition",["Delay","Duration","Property","TimingFunction"]),Qt("color",["Adjust","InterpolationFilters","Scheme"]),Qt("textAlign",["All","Last"]),Qt("page",["BreakAfter","BreakBefore","BreakInside"]),Qt("animation",["Delay","Direction","Duration","FillMode","IterationCount","Name","PlayState","TimingFunction"]),Qt("flex",["Basis","Direction","Flow","Grow","Shrink","Wrap"]),Qt("offset",[...pi,...di,"Anchor","Distance","Path","Position","Rotate"]),Qt("perspective",["Origin"]),Qt("clip",["Path","Rule"]),Qt("flow",["From","Into"]),Qt("align",["Content","Items","Self"],!0),Qt("alignment",["Adjust","Baseline"],!0),Qt("borderStart",li,!0),Qt("borderEnd",li,!0),Qt("borderCorner",["Fit",ii,"ImageTransform"],!0),Qt("borderTopLeft",oi,!0),Qt("borderTopRight",oi,!0),Qt("borderBottomLeft",oi,!0),Qt("borderBottomRight",oi,!0),Qt("column",["s","Count","Fill","Gap","Rule","RuleColor","RuleStyle","RuleWidth","Span",ti],!0),Qt("break",[...pi,"Inside"],!0),Qt("wrap",[...pi,"Flow","Inside","Through"],!0),Qt("justify",hi,!0),Qt("place",hi,!0),Qt("max",[...ui,"Lines"],!0),Qt("min",ui,!0),Qt("line",["Break","Clamp","Grid","Height","Padding","Snap"],!0),Qt("inline",["BoxAlign",si,"Sizing"],!0),Qt("text",["CombineUpright","GroupAlign","Height","Indent","Justify","Orientation","Overflow","Shadow","SpaceCollapse","SpaceTrim","Spacing","Transform","UnderlinePosition","Wrap"],!0),Qt("shape",["ImageThreshold","Inside","Margin","Outside"],!0),Qt("word",["Break","Spacing","Wrap"],!0),Qt("object",["Fit","Position"],!0),Qt("box",["DecorationBreak","Shadow","Sizing","Snap"],!0),Qt(Xt,["LineClamp","BoxOrient","TextFillColor","TextStroke","TextStrokeColor","TextStrokeWidth"],!0);class bi{constructor(e){this._element=e,this._usedStyleProp=new Set,this._value={}}setCssVariables(e){this.hasOwnProperty(e)||Object.defineProperty(this,e,{enumerable:!0,configurable:!0,get:()=>this._value[e]||"",set:t=>{mi.call(this,t,e)}})}get cssText(){if(!this._usedStyleProp.size)return"";const e=[];return this._usedStyleProp.forEach((t=>{const i=this[t];if(ye(i)||ve(i))return;let s=yi(t)?t:_e(t);0!==s.indexOf("webkit")&&0!==s.indexOf("Webkit")||(s=`-${s}`),e.push(`${s}: ${i};`)})),e.join(" ")}set cssText(e){if(this._pending=!0,fi(this),this._usedStyleProp.forEach((e=>{this.removeProperty(e)})),""===e||ve(e)||ye(e))return this._pending=!1,void gi(this);const t=e.split(";");for(let i=0;i<t.length;i++){const e=t[i].trim();if(""===e)continue;const[s,...r]=e.split(":"),n=r.join(":");ve(n)||this.setProperty(s.trim(),n.trim())}this._pending=!1,gi(this)}setProperty(e,t){"-"===e[0]?this.setCssVariables(e):e=Re(e),ye(t)||ve(t)?this.removeProperty(e):this[e]=t}removeProperty(e){if(e=Re(e),!this._usedStyleProp.has(e))return"";const t=this[e];return this[e]=void 0,t}getPropertyValue(e){e=Re(e);const t=this[e];return t||""}}function wi(){return!0}function Ei(e,t){const i=[],s=null!==t&&void 0!==t?t:wi;let r=e;while(r)1===r.nodeType&&s(r)&&i.push(r),r=Ti(r,e);return i}function Ti(e,t){const i=e.firstChild,s=1===e.nodeType||9===e.nodeType;if(i&&s)return i;let r=e;do{if(r===t)return null;const e=r.nextSibling;if(e)return e;r=r.parentElement}while(r);return null}vi(bi,Zt),ke.tap("injectNewStyleProperties",(e=>{if(Ee(e))vi(bi,e);else{if("string"!==typeof e)return;vi(bi,[e])}}));class Si extends qt{constructor(){super(),this.props={},this.dataset=Le,this.nodeType=1,this.style=new bi(this),ke.call("patchElement",this)}_stopPropagation(e){let t=this;while(t=t.parentNode){const i=t.__handlers[e.type];if(Ee(i))for(let e=i.length;e--;){const t=i[e];t._stop=!0}}}get id(){return this.getAttribute(Fe)}set id(e){this.setAttribute(Fe,e)}get className(){return this.getAttribute($e)||""}set className(e){this.setAttribute($e,e)}get cssText(){return this.getAttribute(Ue)||""}get classList(){return new Ut(this.className,this)}get children(){return this.childNodes.filter(It)}get attributes(){const e=this.props,t=Object.keys(e),i=this.style.cssText,s=t.map((t=>({name:t,value:e[t]})));return s.concat(i?{name:Ue,value:i}:[])}get textContent(){let e="";const t=this.childNodes;for(let i=0;i<t.length;i++)e+=t[i].textContent;return e}set textContent(e){super.textContent=e}hasAttribute(e){return!ve(this.props[e])}hasAttributes(){return this.attributes.length>0}get focus(){return function(){this.setAttribute(Ge,!0)}}set focus(e){this.setAttribute(Ge,e)}blur(){this.setAttribute(Ge,!1)}setAttribute(e,t){const i=this.nodeName===He&&!Mt(this)&&!this.isAnyEventBinded();switch(e!==Ue&&bt.record({target:this,type:"attributes",attributeName:e,oldValue:this.getAttribute(e)}),e){case Ue:this.style.cssText=t;break;case Fe:this.uid!==this.sid&&Ht.delete(this.uid),t=String(t),this.props[e]=this.uid=t,Ht.set(t,this);break;default:this.props[e]=t,e.startsWith("data-")&&(this.dataset===Le&&(this.dataset=Object.create(null)),this.dataset[Re(e.replace(/^data-/,""))]=t);break}if(!this._root)return;const s=$t(),r=s[this.nodeName],n=s[He]._num,o=s[je]._num,a=s[rt]._num,l=this._path;e=Nt(e);const c=Re(e),d={path:`${l}.${c}`,value:we(t)?()=>t:t};if(ke.call("modifySetAttrPayload",this,e,d,s),r){const t=r[c]||e;d.path=`${l}.${Re(t)}`}this.enqueueUpdate(d),this.nodeName===He&&(c===st?this.enqueueUpdate({path:`${l}.nn`,value:t?a:this.isAnyEventBinded()?n:o}):i&&Mt(this)&&this.enqueueUpdate({path:`${l}.nn`,value:o}))}removeAttribute(e){const t=this.nodeName===He&&Mt(this)&&!this.isAnyEventBinded();if(bt.record({target:this,type:"attributes",attributeName:e,oldValue:this.getAttribute(e)}),e===Ue)this.style.cssText="";else{const t=ke.call("onRemoveAttribute",this,e);if(t)return;if(!this.props.hasOwnProperty(e))return;delete this.props[e]}if(!this._root)return;const i=$t(),s=i[this.nodeName],r=i[He]._num,n=i[je]._num,o=i[ze]._num,a=this._path;e=Nt(e);const l=Re(e),c={path:`${a}.${l}`,value:""};if(ke.call("modifyRmAttrPayload",this,e,c,i),s){const t=s[l]||e;c.path=`${a}.${Re(t)}`}this.enqueueUpdate(c),this.nodeName===He&&(l===st?this.enqueueUpdate({path:`${a}.nn`,value:this.isAnyEventBinded()?r:Mt(this)?n:o}):t&&!Mt(this)&&this.enqueueUpdate({path:`${a}.nn`,value:o}))}getAttribute(e){const t=e===Ue?this.style.cssText:this.props[e];return null!==t&&void 0!==t?t:""}getElementsByTagName(e){return Ei(this,(t=>t.nodeName===e||"*"===e&&this!==t))}getElementsByClassName(e){const t=e.trim().split(/\s+/);return Ei(this,(e=>{const i=e.classList;return t.every((e=>i.contains(e)))}))}dispatchEvent(e){const t=e.cancelable,i=this.__handlers[e.type];if(!Ee(i))return!1;for(let s=i.length;s--;){const r=i[s];let n;if(r._stop?r._stop=!1:(ke.call("modifyDispatchEvent",e,this),n=r.call(this,e)),(!1===n||e._end)&&t&&(e.defaultPrevented=!0),!ve(n)&&e.mpEvent){const t=ke.call("modifyTaroEventReturn",this,e,n);t&&(e.mpEvent[dt]=n)}if(e._end&&e._stop)break}return e._stop&&this._stopPropagation(e),null!=i}addEventListener(e,t,i){const s=this.nodeName,r=ke.call("getSpecialNodes");let n=!0;if(be(i)&&!1===i.sideEffect&&(n=!1,delete i.sideEffect),ke.call("modifyAddEventListener",this,n,$t),!1!==n&&!this.isAnyEventBinded()&&r.indexOf(s)>-1){const e=$t(),t=e[s]._num;this.enqueueUpdate({path:`${this._path}.nn`,value:t})}super.addEventListener(e,t,i)}removeEventListener(e,t,i=!0){super.removeEventListener(e,t);const s=this.nodeName,r=ke.call("getSpecialNodes");if(ke.call("modifyRemoveEventListener",this,i,$t),!1!==i&&!this.isAnyEventBinded()&&r.indexOf(s)>-1){const e=$t(),t=Mt(this)?`static-${s}`:`pure-${s}`,i=e[t]._num;this.enqueueUpdate({path:`${this._path}.nn`,value:i})}}static extend(e,t){Ft(Si,e,t)}}const Ai={prerender:!0,debug:!1};function xi(){return{index:0,column:0,line:0}}function ki(e,t,i){const s=e.index,r=e.index=s+i;for(let n=s;n<r;n++){const i=t.charAt(n);"\n"===i?(e.line++,e.column=0):e.column++}}function Li(e,t,i){const s=i-e.index;return ki(e,t,s)}function Ci(e){return{index:e.index,line:e.line,column:e.column}}const _i=/\s/;function Ri(e){return _i.test(e)}const Ii=/=/;function Di(e){return Ii.test(e)}function Pi(e){const t=e.toLowerCase();return!!Ai.html.skipElements.has(t)}const Mi=/[A-Za-z0-9]/;function Oi(e,t){while(1){const i=e.indexOf("<",t);if(-1===i)return i;const s=e.charAt(i+1);if("/"===s||"!"===s||Mi.test(s))return i;t=i+1}}function Ni(e,t,i){if(!Ri(i.charAt(e)))return!1;const s=i.length;for(let r=e-1;r>t;r--){const e=i.charAt(r);if(!Ri(e)){if(Di(e))return!1;break}}for(let r=e+1;r<s;r++){const e=i.charAt(r);if(!Ri(e))return!Di(e)}}class Fi{constructor(e){this.tokens=[],this.position=xi(),this.html=e}scan(){const{html:e,position:t}=this,i=e.length;while(t.index<i){const i=t.index;if(this.scanText(),t.index===i){const t=e.startsWith("!--",i+1);if(t)this.scanComment();else{const e=this.scanTag();Pi(e)&&this.scanSkipTag(e)}}}return this.tokens}scanText(){const e="text",{html:t,position:i}=this;let s=Oi(t,i.index);if(s===i.index)return;-1===s&&(s=t.length);const r=Ci(i),n=t.slice(i.index,s);Li(i,t,s);const o=Ci(i);this.tokens.push({type:e,content:n,position:{start:r,end:o}})}scanComment(){const e="comment",{html:t,position:i}=this,s=Ci(i);ki(i,t,4);let r=t.indexOf("--\x3e",i.index),n=r+3;-1===r&&(r=n=t.length);const o=t.slice(i.index,r);Li(i,t,n),this.tokens.push({type:e,content:o,position:{start:s,end:Ci(i)}})}scanTag(){this.scanTagStart();const e=this.scanTagName();return this.scanAttrs(),this.scanTagEnd(),e}scanTagStart(){const e="tag-start",{html:t,position:i}=this,s=t.charAt(i.index+1),r="/"===s,n=Ci(i);ki(i,t,r?2:1),this.tokens.push({type:e,close:r,position:{start:n}})}scanTagEnd(){const e="tag-end",{html:t,position:i}=this,s=t.charAt(i.index),r="/"===s;ki(i,t,r?2:1);const n=Ci(i);this.tokens.push({type:e,close:r,position:{end:n}})}scanTagName(){const e="tag",{html:t,position:i}=this,s=t.length;let r=i.index;while(r<s){const e=t.charAt(r),i=!(Ri(e)||"/"===e||">"===e);if(i)break;r++}let n=r+1;while(n<s){const e=t.charAt(n),i=!(Ri(e)||"/"===e||">"===e);if(!i)break;n++}Li(i,t,n);const o=t.slice(r,n);return this.tokens.push({type:e,content:o}),o}scanAttrs(){const{html:e,position:t,tokens:i}=this;let s=t.index,r=null,n=s;const o=[],a=e.length;while(s<a){const t=e.charAt(s);if(r){const e=t===r;e&&(r=null),s++;continue}const i="/"===t||">"===t;if(i){s!==n&&o.push(e.slice(n,s));break}if(Ni(s,n,e)){s!==n&&o.push(e.slice(n,s)),n=s+1,s++;continue}const a="'"===t||'"'===t;a?(r=t,s++):s++}Li(t,e,s);const l=o.length,c="attribute";for(let d=0;d<l;d++){const e=o[d],t=e.includes("=");if(t){const t=o[d+1];if(t&&t.startsWith("=")){if(t.length>1){const s=e+t;i.push({type:c,content:s}),d+=1;continue}const s=o[d+2];if(d+=1,s){const t=e+"="+s;i.push({type:c,content:t}),d+=1;continue}}}if(e.endsWith("=")){const t=o[d+1];if(t&&!t.includes("=")){const s=e+t;i.push({type:c,content:s}),d+=1;continue}const s=e.slice(0,-1);i.push({type:c,content:s})}else i.push({type:c,content:e})}}scanSkipTag(e){const{html:t,position:i}=this,s=e.toLowerCase(),r=t.length;while(i.index<r){const e=t.indexOf("</",i.index);if(-1===e){this.scanText();break}Li(i,t,e);const r=this.scanTag();if(s===r.toLowerCase())break}}}function Bi(e){const t=e.charAt(0),i=e.length-1,s='"'===t||"'"===t;return s&&t===e.charAt(i)?e.slice(1,i):e}const $i="{",Ui="}",Gi=".",Hi="#",ji=">",zi="~",Vi="+";class Yi{constructor(){this.styles=[]}extractStyle(e){const t=/<style\s?[^>]*>((.|\n|\s)+?)<\/style>/g;let i=e;return i=i.replace(t,((e,t)=>{const i=t.trim();return this.stringToSelector(i),""})),i.trim()}stringToSelector(e){let t=e.indexOf($i);while(t>-1){const i=e.indexOf(Ui),s=e.slice(0,t).trim();let r=e.slice(t+1,i);r=r.replace(/:(.*);/g,(function(e,t){const i=t.trim().replace(/ +/g,"+++");return`:${i};`})),r=r.replace(/ /g,""),r=r.replace(/\+\+\+/g," "),/;$/.test(r)||(r+=";"),s.split(",").forEach((e=>{const t=this.parseSelector(e);this.styles.push({content:r,selectorList:t})})),e=e.slice(i+1),t=e.indexOf($i)}}parseSelector(e){const t=e.trim().replace(/ *([>~+]) */g," $1").replace(/ +/g," ").replace(/\[\s*([^[\]=\s]+)\s*=\s*([^[\]=\s]+)\s*\]/g,"[$1=$2]").split(" "),i=t.map((e=>{const t=e.charAt(0),i={isChild:t===ji,isGeneralSibling:t===zi,isAdjacentSibling:t===Vi,tag:null,id:null,class:[],attrs:[]};return e=e.replace(/^[>~+]/,""),e=e.replace(/\[(.+?)\]/g,(function(e,t){const[s,r]=t.split("="),n=-1===t.indexOf("="),o={all:n,key:s,value:n?null:r};return i.attrs.push(o),""})),e=e.replace(/([.#][A-Za-z0-9-_]+)/g,(function(e,t){return t[0]===Hi?i.id=t.substr(1):t[0]===Gi&&i.class.push(t.substr(1)),""})),""!==e&&(i.tag=e),i}));return i}matchStyle(e,t,i){const s=Ki(this.styles).reduce(((s,{content:r,selectorList:n},o)=>{let a=i[o],l=n[a];const c=n[a+1];((null===c||void 0===c?void 0:c.isGeneralSibling)||(null===c||void 0===c?void 0:c.isAdjacentSibling))&&(l=c,a+=1,i[o]+=1);let d=this.matchCurrent(e,t,l);if(d&&l.isGeneralSibling){let e=Wi(t);while(e){if(e.h5tagName&&this.matchCurrent(e.h5tagName,e,n[a-1])){d=!0;break}e=Wi(e),d=!1}}if(d&&l.isAdjacentSibling){const e=Wi(t);if(e&&e.h5tagName){const t=this.matchCurrent(e.h5tagName,e,n[a-1]);t||(d=!1)}else d=!1}if(d){if(a===n.length-1)return s+r;a<n.length-1&&(i[o]+=1)}else l.isChild&&a>0&&(i[o]-=1,this.matchCurrent(e,t,n[i[o]])&&(i[o]+=1));return s}),"");return s}matchCurrent(e,t,i){if(i.tag&&i.tag!==e)return!1;if(i.id&&i.id!==t.id)return!1;if(i.class.length){const e=t.className.split(" ");for(let t=0;t<i.class.length;t++){const s=i.class[t];if(-1===e.indexOf(s))return!1}}if(i.attrs.length)for(let s=0;s<i.attrs.length;s++){const{all:e,key:r,value:n}=i.attrs[s];if(e&&!t.hasAttribute(r))return!1;{const e=t.getAttribute(r);if(e!==Bi(n||""))return!1}}return!0}}function Wi(e){const t=e.parentElement;if(!t)return null;const i=e.previousSibling;return i?1===i.nodeType?i:Wi(i):null}function Ki(e){return e.sort(((e,t)=>{const i=qi(e.selectorList),s=qi(t.selectorList);if(i!==s)return i-s;const r=Xi(e.selectorList),n=Xi(t.selectorList);if(r!==n)return r-n;const o=Zi(e.selectorList),a=Zi(t.selectorList);return o-a}))}function qi(e){return e.reduce(((e,t)=>e+(t.id?1:0)),0)}function Xi(e){return e.reduce(((e,t)=>e+t.class.length+t.attrs.length),0)}function Zi(e){return e.reduce(((e,t)=>e+(t.tag?1:0)),0)}function Qi(e,t){const i=Object.create(null),s=e.split(",");for(let r=0;r<s.length;r++)i[s[r]]=!0;return e=>!!i[e.toLowerCase()]}const Ji={img:"image",iframe:"web-view"},es=Object.keys(ce).map((e=>e.toLowerCase())).join(","),ts=Qi(es),is=Qi("a,i,abbr,iframe,select,acronym,slot,small,span,bdi,kbd,strong,big,map,sub,sup,br,mark,mark,meter,template,canvas,textarea,cite,object,time,code,output,u,data,picture,tt,datalist,var,dfn,del,q,em,s,embed,samp,b"),ss=Qi("address,fieldset,li,article,figcaption,main,aside,figure,nav,blockquote,footer,ol,details,form,p,dialog,h1,h2,h3,h4,h5,h6,pre,dd,header,section,div,hgroup,table,dl,hr,ul,dt"),rs={li:["ul","ol","menu"],dt:["dl"],dd:["dl"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table"],td:["table"]};function ns(e,t){const i=rs[e];if(i){let s=t.length-1;while(s>=0){const r=t[s].tagName;if(r===e)break;if(i&&i.includes(r))return!0;s--}}return!1}function os(e){return Ai.html.renderHTMLTag?e:Ji[e]?Ji[e]:ts(e)?e:ss(e)?"view":is(e)?"text":"view"}function as(e){const t="=",i=e.indexOf(t);if(-1===i)return[e];const s=e.slice(0,i).trim(),r=e.slice(i+t.length).trim();return[s,r]}function ls(e,t,i,s){return e.filter((e=>"comment"!==e.type&&("text"!==e.type||""!==e.content))).map((e=>{if("text"===e.type){let i=t.createTextNode(e.content);return we(Ai.html.transformText)&&(i=Ai.html.transformText(i,e)),null===s||void 0===s||s.appendChild(i),i}const r=t.createElement(os(e.tagName));r.h5tagName=e.tagName,null===s||void 0===s||s.appendChild(r),Ai.html.renderHTMLTag||(r.className=`h5-${e.tagName}`);for(let t=0;t<e.attributes.length;t++){const i=e.attributes[t],[s,n]=as(i);if("class"===s)r.className+=" "+Bi(n);else{if("o"===s[0]&&"n"===s[1])continue;r.setAttribute(s,null==n||Bi(n))}}const{styleTagParser:n,descendantList:o}=i,a=o.slice(),l=n.matchStyle(e.tagName,r,a);return r.setAttribute("style",l+r.style.cssText),ls(e.children,t,{styleTagParser:n,descendantList:a},r),we(Ai.html.transformElement)?Ai.html.transformElement(r,e):r}))}function cs(e,t){const i=new Yi;e=i.extractStyle(e);const s=new Fi(e).scan(),r={tagName:"",children:[],type:"element",attributes:[]},n={tokens:s,options:Ai,cursor:0,stack:[r]};return ds(n),ls(r.children,t,{styleTagParser:i,descendantList:Array(i.styles.length).fill(0)})}function ds(e){const{tokens:t,stack:i}=e;let{cursor:s}=e;const r=t.length;let n=i[i.length-1].children;while(s<r){const e=t[s];if("tag-start"!==e.type){n.push(e),s++;continue}const o=t[++s];s++;const a=o.content.toLowerCase();if(e.close){let e=i.length,n=!1;while(--e>-1)if(i[e].tagName===a){n=!0;break}while(s<r){const e=t[s];if("tag-end"!==e.type)break;s++}if(n){i.splice(e);break}continue}const l=Ai.html.closingElements.has(a);let c=l;if(c&&(c=!ns(a,i)),c){let e=i.length-1;while(e>0){if(a===i[e].tagName){i.splice(e);const t=e-1;n=i[t].children;break}e-=1}}const d=[];let h;while(s<r){if(h=t[s],"tag-end"===h.type)break;d.push(h.content),s++}s++;const u=[],p={type:"element",tagName:o.content,attributes:d,children:u};n.push(p);const f=!(h.close||Ai.html.voidElements.has(a));if(f){i.push({tagName:a,children:u});const e={tokens:t,cursor:s,stack:i};ds(e),s=e.cursor}}e.cursor=s}function hs(e,t){while(e.firstChild)e.removeChild(e.firstChild);const i=cs(t,e.ownerDocument);for(let s=0;s<i.length;s++)e.appendChild(i[s])}function us(){return Ai.miniGlobal?new Promise((e=>{const t=Ai.miniGlobal.createSelectorQuery();t.select(`#${this.uid}`).boundingClientRect((t=>{e(t)})).exec()})):Promise.resolve(null)}function ps(e){if("template"===e.nodeName){const t=e.ownerDocument,i=t.createElement(Ne);return i.childNodes=e.childNodes,e.childNodes=[i],i.parentNode=e,i.childNodes.forEach((e=>{e.parentNode=i})),i}}function fs(e,t){var i,s;const r=cs(t,this.ownerDocument);for(let n=0;n<r.length;n++){const t=r[n];switch(e){case"beforebegin":null===(i=this.parentNode)||void 0===i||i.insertBefore(t,this);break;case"afterbegin":this.hasChildNodes()?this.insertBefore(t,this.childNodes[0]):this.appendChild(t);break;case"beforeend":this.appendChild(t);break;case"afterend":null===(s=this.parentNode)||void 0===s||s.appendChild(t);break}}}function gs(e=!1){const t=this.ownerDocument;let i;1===this.nodeType?i=t.createElement(this.nodeName):3===this.nodeType&&(i=t.createTextNode(""));for(const s in this){const e=this[s];[Ve,Ye].includes(s)&&typeof e===We?i[s]=Object.assign({},e):"_value"===s?i[s]=e:s===Ue&&(i.style._value=Object.assign({},e._value),i.style._usedStyleProp=new Set(Array.from(e._usedStyleProp)))}return e&&(i.childNodes=this.childNodes.map((e=>e.cloneNode(!0)))),i}function ms(e){let t=!1;return this.childNodes.some((i=>{const{uid:s}=i;if(s===e.uid||s===e.id||i.contains(e))return t=!0,!0})),t}Ai.html={skipElements:new Set(["style","script"]),voidElements:new Set(["!doctype","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),closingElements:new Set(["html","head","body","p","dt","dd","li","option","thead","th","tbody","tr","td","tfoot","colgroup"]),renderHTMLTag:!1},"web"!==de.WEB&&"web"!==de.HARMONY&&(ENABLE_INNER_HTML&&(qt.extend("innerHTML",{set(e){hs.call(this,this,e)},get(){return""}}),ENABLE_ADJACENT_HTML&&qt.extend("insertAdjacentHTML",fs)),ENABLE_CLONE_NODE&&qt.extend("cloneNode",gs),ENABLE_CONTAINS&&qt.extend("contains",ms),ENABLE_SIZE_APIS&&Si.extend("getBoundingClientRect",us),ENABLE_TEMPLATE_CONTENT&&Si.extend("content",{get(){return ps(this)}}));class vs{constructor(e,t,i){this._stop=!1,this._end=!1,this.defaultPrevented=!1,this.button=0,this.timeStamp=Date.now(),this.type=e.toLowerCase(),this.mpEvent=i,this.bubbles=Boolean(t&&t.bubbles),this.cancelable=Boolean(t&&t.cancelable)}stopPropagation(){this._stop=!0}stopImmediatePropagation(){this._end=this._stop=!0}preventDefault(){this.defaultPrevented=!0}get target(){var e,t,i,s,r;const n=this.cacheTarget;if(n)return n;{const n=Object.create((null===(e=this.mpEvent)||void 0===e?void 0:e.target)||null),o=Et.document.getElementById((null===(t=n.dataset)||void 0===t?void 0:t.sid)||n.id||null),a=Et.document.getElementById((null===(i=n.targetDataset)||void 0===i?void 0:i.sid)||(null===(s=n.dataset)||void 0===s?void 0:s.sid)||n.id||null);n.dataset=Object.assign(Object.assign({},null!==o?o.dataset:Le),null!==a?a.dataset:Le);for(const e in null===(r=this.mpEvent)||void 0===r?void 0:r.detail)n[e]=this.mpEvent.detail[e];return this.cacheTarget=n,n}}get currentTarget(){var e,t,i,s,r,n,o,a;const l=this.cacheCurrentTarget;if(l)return l;{const l=Et.document,c=Object.create((null===(e=this.mpEvent)||void 0===e?void 0:e.currentTarget)||null),d=l.getElementById((null===(t=c.dataset)||void 0===t?void 0:t.sid)||c.id||null),h=l.getElementById((null===(r=null===(s=null===(i=this.mpEvent)||void 0===i?void 0:i.target)||void 0===s?void 0:s.dataset)||void 0===r?void 0:r.sid)||(null===(o=null===(n=this.mpEvent)||void 0===n?void 0:n.target)||void 0===o?void 0:o.id)||null);if(null===d||d&&d===h)return this.cacheCurrentTarget=this.target,this.target;c.dataset=d.dataset;for(const e in null===(a=this.mpEvent)||void 0===a?void 0:a.detail)c[e]=this.mpEvent.detail[e];return this.cacheCurrentTarget=c,c}}}function ys(e,t){if("string"===typeof e)return new vs(e,{bubbles:!0,cancelable:!0});const i=new vs(e.type,{bubbles:!0,cancelable:!0},e);for(const s in e)s!==Xe&&s!==qe&&s!==Ze&&s!==Je&&(i[s]=e[s]);return i.type===Qe&&(null===t||void 0===t?void 0:t.nodeName)===Ke&&(i[et]=13),i}const bs={};function ws(e){const t=e[dt];return ve(t)||delete e[dt],t}function Es(e){var t,i;void 0===e.type&&Object.defineProperty(e,"type",{value:e._type}),void 0===e.detail&&Object.defineProperty(e,"detail",{value:e._detail||Object.assign({},e)}),e.currentTarget=e.currentTarget||e.target||Object.assign({},e),ke.call("modifyMpEventImpl",e);const s=e.currentTarget,r=(null===(t=s.dataset)||void 0===t?void 0:t.sid)||s.id||(null===(i=e.detail)||void 0===i?void 0:i.id)||"",n=Et.document.getElementById(r);if(n){const t=()=>{const t=ys(e,n);ke.call("modifyTaroEvent",t,n),ke.call("dispatchTaroEvent",t,n),ke.call("dispatchTaroEventFinish",t,n)};if(!ke.isExist("batchedEventUpdates"))return t(),ws(e);{const i=e.type;if(!ke.call("isBubbleEvents",i)||!Ot(n,i)||i===tt&&n.props.catchMove)return ke.call("batchedEventUpdates",(()=>{bs[i]&&(bs[i].forEach((e=>e())),delete bs[i]),t()})),ws(e);(bs[i]||(bs[i]=[])).push(t)}}}function Ts(e,t=250,i){let s;return function(...r){const n=i||this;clearTimeout(s),s=setTimeout((function(){e.apply(n,r)}),t)}}var Ss,As;class xs{constructor(){Ss.add(this),this.recorder=new Map}start(e){Ai.debug&&this.recorder.set(e,Date.now())}stop(e,t=Date.now()){if(!Ai.debug)return;const i=this.recorder.get(e);if(!(i>=0))return;this.recorder.delete(e);const s=t-i;console.log(`${e} \u65f6\u957f\uff1a ${s}ms \u5f00\u59cb\u65f6\u95f4\uff1a${At(this,Ss,"m",As).call(this,i)} \u7ed3\u675f\u65f6\u95f4\uff1a${At(this,Ss,"m",As).call(this,t)}`)}delayStop(e,t=500){if(Ai.debug)return Ts(((t=Date.now(),i)=>{this.stop(e,t),null===i||void 0===i||i()}),t)}}Ss=new WeakSet,As=function(e){const t=new Date(e);return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}.${`${t.getMilliseconds()}`.padStart(3,"0")}`};const ks=new xs,Ls=(e="")=>"/"===e.charAt(0)?e:"/"+e,Cs=(e="",t="")=>new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)||e===t,_s=(e="",t="")=>Cs(e,t)?e.substring(t.length):e,Rs=(e="")=>e.replace(/[?#][\s\S]*$/,""),Is=(e="",t="")=>e.includes(t)?e.substring(0,e.length-t.length):e,Ds=(e="",t="",i={},s="")=>{var r;const n=Ls(_s(e,t)),o=(null===(r=Object.entries(i).find((([e])=>e===n)))||void 0===r?void 0:r[1])||n;return s||("string"===typeof o?o:o[0])||t},Ps=(e="hash",t="/")=>{const i="hash"===e?_t.hash.slice(1).split("?")[0]:_t.pathname;return Ls(_s(i,t))},Ms=new Map,Os=Rt();function Ns(e,t){ke.call("mergePageInstance",Ms.get(t),e),Ms.set(t,e)}function Fs(e){return Ms.get(e)}function Bs(e,t,...i){const s=Ms.get(e);if(null==s)return;const r=ke.call("getLifecycle",s,t);if(Ee(r)){const e=r.map((e=>e.apply(s,i)));return e[0]}return we(r)?r.apply(s,i):void 0}function $s(e){if(null==e)return"";const t=Object.keys(e).map((t=>t+"="+e[t])).join("&");return""===t?t:"?"+t}function Us(e,t){const i=e.indexOf("?");return`${i>-1?e.substring(0,i):e}${$s((null===t||void 0===t?void 0:t.stamp)?{stamp:t.stamp}:{})}`}function Gs(e){return e+"."+at}function Hs(e){return e+"."+lt}function js(e){return e+"."+ct}function zs(e,t,i,s){const r=null!==t&&void 0!==t?t:`taro_page_${Os()}`,[n,o,a,l,c,d,h]=ke.call("getMiniLifecycleImpl").page;let u,p,f=null,g=!1,m=[];function v(e){const t=e.$taroPath;xt.router={params:e.$taroParams,path:Ls(t),$taroPath:e.$taroPath,onReady:Gs(r),onShow:Hs(r),onHide:js(r)},ve(e.exitState)||(xt.router.exitState=e.exitState)}const y={[n](t={},i){p=new Promise((e=>{u=e})),ks.start(Me),xt.page=this,this.config=s||{};const n=Object.assign({},t,{$taroTimestamp:Date.now()}),o=this.$taroPath=Us(r,n);y.path=o,null==this.$taroParams&&(this.$taroParams=n),v(this);const a=()=>{xt.app.mount(e,o,(()=>{f=Et.document.getElementById(o),Ie(null!==f,"\u6ca1\u6709\u627e\u5230\u9875\u9762\u5b9e\u4f8b\u3002"),Bs(o,ot,this.$taroParams),u(),we(i)&&i()}))};g?m.push(a):a()},[o](){const e=this.$taroPath;Bs(e,o),g=!0,xt.app.unmount(e,(()=>{g=!1,Ms.delete(e),f&&(f.ctx=null,f=null),m.length&&(m.forEach((e=>e())),m=[])}))},[a](){p.then((()=>{Bs(this.$taroPath,at),Lt((()=>wt.trigger(Gs(r)))),this.onReady.called=!0}))},[l](e={}){p.then((()=>{xt.page=this,v(this),Bs(this.$taroPath,lt,e),Lt((()=>wt.trigger(Hs(r))))}))},[c](){xt.page===this&&(xt.page=null,xt.router=null),Bs(this.$taroPath,ct),wt.trigger(js(r))},getOpenerEventChannel:()=>me.pageChannel};return d.forEach((e=>{let t=!1;e=e.replace(/^defer:/,(()=>(t=!0,""))),y[e]=function(){const i=()=>Bs(this.$taroPath,e,...arguments);if(!t)return i();p.then(i)}})),h.forEach((t=>{var i;(e[t]||(null===(i=e.prototype)||void 0===i?void 0:i[t])||e[t.replace(/^on/,"enable")]||(null===s||void 0===s?void 0:s[t.replace(/^on/,"enable")]))&&(y[t]=function(...e){var i;const s=null===(i=e[0])||void 0===i?void 0:i.target;if(null===s||void 0===s?void 0:s.id){const e=s.id,t=Et.document.getElementById(e);t&&(s.dataset=t.dataset)}return Bs(this.$taroPath,t,...e)})})),y.eh=Es,ve(i)||(y.data=i),ke.call("modifyPageObject",y),y}const Vs=100,Ys=(e,t)=>{const i=Date.now(),s=xt.router,r=()=>{setTimeout((function(){t?e.call(t):e()}),1)};if(null===s)return r();const n=s.$taroPath;function o(){var e,t,s;const a=Et.document.getElementById(n);(null===a||void 0===a?void 0:a.pendingUpdate)?null!==(s=null===(t=null===(e=a.firstChild)||void 0===e?void 0:e["componentOnReady"])||void 0===t?void 0:t.call(e).then((()=>{r()})))&&void 0!==s||r():Date.now()-i>Vs?r():setTimeout((()=>o()),20)}o()};function Ws(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return e=>e in t}const Ks={},qs=[],Xs=()=>{},Zs=()=>!1,Qs=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Js=e=>e.startsWith("onUpdate:"),er=Object.assign,tr=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},ir=Object.prototype.hasOwnProperty,sr=(e,t)=>ir.call(e,t),rr=Array.isArray,nr=e=>"[object Map]"===pr(e),or=e=>"[object Set]"===pr(e),ar=e=>"function"===typeof e,lr=e=>"string"===typeof e,cr=e=>"symbol"===typeof e,dr=e=>null!==e&&"object"===typeof e,hr=e=>(dr(e)||ar(e))&&ar(e.then)&&ar(e.catch),ur=Object.prototype.toString,pr=e=>ur.call(e),fr=e=>pr(e).slice(8,-1),gr=e=>"[object Object]"===pr(e),mr=e=>lr(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,vr=Ws(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yr=e=>{const t=Object.create(null);return i=>{const s=t[i];return s||(t[i]=e(i))}},br=/-(\w)/g,wr=yr((e=>e.replace(br,((e,t)=>t?t.toUpperCase():"")))),Er=/\B([A-Z])/g,Tr=yr((e=>e.replace(Er,"-$1").toLowerCase())),Sr=yr((e=>e.charAt(0).toUpperCase()+e.slice(1))),Ar=yr((e=>{const t=e?`on${Sr(e)}`:"";return t})),xr=(e,t)=>!Object.is(e,t),kr=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},Lr=(e,t,i,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:i})},Cr=e=>{const t=parseFloat(e);return isNaN(t)?e:t},_r=e=>{const t=lr(e)?Number(e):NaN;return isNaN(t)?e:t};let Rr;const Ir=()=>Rr||(Rr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{});function Dr(e){if(rr(e)){const t={};for(let i=0;i<e.length;i++){const s=e[i],r=lr(s)?Nr(s):Dr(s);if(r)for(const e in r)t[e]=r[e]}return t}if(lr(e)||dr(e))return e}const Pr=/;(?![^(]*\))/g,Mr=/:([^]+)/,Or=/\/\*[^]*?\*\//g;function Nr(e){const t={};return e.replace(Or,"").split(Pr).forEach((e=>{if(e){const i=e.split(Mr);i.length>1&&(t[i[0].trim()]=i[1].trim())}})),t}function Fr(e){let t="";if(lr(e))t=e;else if(rr(e))for(let i=0;i<e.length;i++){const s=Fr(e[i]);s&&(t+=s+" ")}else if(dr(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const Br="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$r=Ws(Br);function Ur(e){return!!e||""===e}const Gr=e=>!(!e||!0!==e["__v_isRef"]),Hr=e=>lr(e)?e:null==e?"":rr(e)||dr(e)&&(e.toString===ur||!ar(e.toString))?Gr(e)?Hr(e.value):JSON.stringify(e,jr,2):String(e),jr=(e,t)=>Gr(t)?jr(e,t.value):nr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,i],s)=>(e[zr(t,s)+" =>"]=i,e)),{})}:or(t)?{[`Set(${t.size})`]:[...t.values()].map((e=>zr(e)))}:cr(t)?zr(t):!dr(t)||rr(t)||gr(t)?t:String(t),zr=(e,t="")=>{var i;return cr(e)?`Symbol(${null!=(i=e.description)?i:t})`:e};let Vr,Yr;class Wr{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Vr,!e&&Vr&&(this.index=(Vr.scopes||(Vr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;if(this._isPaused=!0,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){let e,t;if(this._isPaused=!1,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Vr;try{return Vr=this,e()}finally{Vr=t}}}on(){Vr=this}off(){Vr=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function Kr(e){return new Wr(e)}function qr(){return Vr}function Xr(e,t=!1){Vr&&Vr.cleanups.push(e)}const Zr=new WeakSet;class Qr{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.nextEffect=void 0,this.cleanup=void 0,this.scheduler=void 0,Vr&&Vr.active&&Vr.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,Zr.has(this)&&(Zr.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||(this.flags|=8,this.nextEffect=Jr,Jr=this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,fn(this),rn(this);const e=Yr,t=dn;Yr=this,dn=!0;try{return this.fn()}finally{nn(this),Yr=e,dn=t,this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)ln(e);this.deps=this.depsTail=void 0,fn(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?Zr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){on(this)&&this.run()}get dirty(){return on(this)}}let Jr,en=0;function tn(){en++}function sn(){if(--en>0)return;let e;while(Jr){let i=Jr;Jr=void 0;while(i){const s=i.nextEffect;if(i.nextEffect=void 0,i.flags&=-9,1&i.flags)try{i.trigger()}catch(t){e||(e=t)}i=s}}if(e)throw e}function rn(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function nn(e){let t,i=e.depsTail;for(let s=i;s;s=s.prevDep)-1===s.version?(s===i&&(i=s.prevDep),ln(s),cn(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0;e.deps=t,e.depsTail=i}function on(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&an(t.dep.computed)||t.dep.version!==t.version)return!0;return!!e._dirty}function an(e){if(4&e.flags&&!(16&e.flags))return;if(e.flags&=-17,e.globalVersion===gn)return;e.globalVersion=gn;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&!on(e))return void(e.flags&=-3);const i=Yr,s=dn;Yr=e,dn=!0;try{rn(e);const i=e.fn(e._value);(0===t.version||xr(i,e._value))&&(e._value=i,t.version++)}catch(r){throw t.version++,r}finally{Yr=i,dn=s,nn(e),e.flags&=-3}}function ln(e){const{dep:t,prevSub:i,nextSub:s}=e;if(i&&(i.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=i,e.nextSub=void 0),t.subs===e&&(t.subs=i),!t.subs&&t.computed){t.computed.flags&=-5;for(let e=t.computed.deps;e;e=e.nextDep)ln(e)}}function cn(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let dn=!0;const hn=[];function un(){hn.push(dn),dn=!1}function pn(){const e=hn.pop();dn=void 0===e||e}function fn(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const e=Yr;Yr=void 0;try{t()}finally{Yr=e}}}let gn=0;class mn{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0}track(e){if(!Yr||!dn||Yr===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==Yr)t=this.activeLink={dep:this,sub:Yr,version:this.version,nextDep:void 0,prevDep:void 0,nextSub:void 0,prevSub:void 0,prevActiveLink:void 0},Yr.deps?(t.prevDep=Yr.depsTail,Yr.depsTail.nextDep=t,Yr.depsTail=t):Yr.deps=Yr.depsTail=t,4&Yr.flags&&vn(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=Yr.depsTail,t.nextDep=void 0,Yr.depsTail.nextDep=t,Yr.depsTail=t,Yr.deps===t&&(Yr.deps=e)}return t}trigger(e){this.version++,gn++,this.notify(e)}notify(e){tn();try{0;for(let e=this.subs;e;e=e.prevSub)e.sub.notify()}finally{sn()}}}function vn(e){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)vn(e)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}const yn=new WeakMap,bn=Symbol(""),wn=Symbol(""),En=Symbol("");function Tn(e,t,i){if(dn&&Yr){let t=yn.get(e);t||yn.set(e,t=new Map);let s=t.get(i);s||t.set(i,s=new mn),s.track()}}function Sn(e,t,i,s,r,n){const o=yn.get(e);if(!o)return void gn++;const a=e=>{e&&e.trigger()};if(tn(),"clear"===t)o.forEach(a);else{const r=rr(e),n=r&&mr(i);if(r&&"length"===i){const e=Number(s);o.forEach(((t,i)=>{("length"===i||i===En||!cr(i)&&i>=e)&&a(t)}))}else switch(void 0!==i&&a(o.get(i)),n&&a(o.get(En)),t){case"add":r?n&&a(o.get("length")):(a(o.get(bn)),nr(e)&&a(o.get(wn)));break;case"delete":r||(a(o.get(bn)),nr(e)&&a(o.get(wn)));break;case"set":nr(e)&&a(o.get(bn));break}}sn()}function An(e,t){var i;return null==(i=yn.get(e))?void 0:i.get(t)}function xn(e){const t=xo(e);return t===e?t:(Tn(t,"iterate",En),So(e)?t:t.map(Lo))}function kn(e){return Tn(e=xo(e),"iterate",En),e}const Ln={__proto__:null,[Symbol.iterator](){return Cn(this,Symbol.iterator,Lo)},concat(...e){return xn(this).concat(...e.map((e=>rr(e)?xn(e):e)))},entries(){return Cn(this,"entries",(e=>(e[1]=Lo(e[1]),e)))},every(e,t){return Rn(this,"every",e,t,void 0,arguments)},filter(e,t){return Rn(this,"filter",e,t,(e=>e.map(Lo)),arguments)},find(e,t){return Rn(this,"find",e,t,Lo,arguments)},findIndex(e,t){return Rn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Rn(this,"findLast",e,t,Lo,arguments)},findLastIndex(e,t){return Rn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Rn(this,"forEach",e,t,void 0,arguments)},includes(...e){return Dn(this,"includes",e)},indexOf(...e){return Dn(this,"indexOf",e)},join(e){return xn(this).join(e)},lastIndexOf(...e){return Dn(this,"lastIndexOf",e)},map(e,t){return Rn(this,"map",e,t,void 0,arguments)},pop(){return Pn(this,"pop")},push(...e){return Pn(this,"push",e)},reduce(e,...t){return In(this,"reduce",e,t)},reduceRight(e,...t){return In(this,"reduceRight",e,t)},shift(){return Pn(this,"shift")},some(e,t){return Rn(this,"some",e,t,void 0,arguments)},splice(...e){return Pn(this,"splice",e)},toReversed(){return xn(this).toReversed()},toSorted(e){return xn(this).toSorted(e)},toSpliced(...e){return xn(this).toSpliced(...e)},unshift(...e){return Pn(this,"unshift",e)},values(){return Cn(this,"values",Lo)}};function Cn(e,t,i){const s=kn(e),r=s[t]();return s===e||So(e)||(r._next=r.next,r.next=()=>{const e=r._next();return e.value&&(e.value=i(e.value)),e}),r}const _n=Array.prototype;function Rn(e,t,i,s,r,n){const o=kn(e),a=o!==e&&!So(e),l=o[t];if(l!==_n[t]){const t=l.apply(e,n);return a?Lo(t):t}let c=i;o!==e&&(a?c=function(t,s){return i.call(this,Lo(t),s,e)}:i.length>2&&(c=function(t,s){return i.call(this,t,s,e)}));const d=l.call(o,c,s);return a&&r?r(d):d}function In(e,t,i,s){const r=kn(e);let n=i;return r!==e&&(So(e)?i.length>3&&(n=function(t,s,r){return i.call(this,t,s,r,e)}):n=function(t,s,r){return i.call(this,t,Lo(s),r,e)}),r[t](n,...s)}function Dn(e,t,i){const s=xo(e);Tn(s,"iterate",En);const r=s[t](...i);return-1!==r&&!1!==r||!Ao(i[0])?r:(i[0]=xo(i[0]),s[t](...i))}function Pn(e,t,i=[]){un(),tn();const s=xo(e)[t].apply(e,i);return sn(),pn(),s}const Mn=Ws("__proto__,__v_isRef,__isVue"),On=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(cr));function Nn(e){cr(e)||(e=String(e));const t=xo(this);return Tn(t,"has",e),t.hasOwnProperty(e)}class Fn{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){const s=this._isReadonly,r=this._isShallow;if("__v_isReactive"===t)return!s;if("__v_isReadonly"===t)return s;if("__v_isShallow"===t)return r;if("__v_raw"===t)return i===(s?r?fo:po:r?uo:ho).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const n=rr(e);if(!s){let e;if(n&&(e=Ln[t]))return e;if("hasOwnProperty"===t)return Nn}const o=Reflect.get(e,t,_o(e)?e:i);return(cr(t)?On.has(t):Mn(t))?o:(s||Tn(e,"get",t),r?o:_o(o)?n&&mr(t)?o:o.value:dr(o)?s?bo(o):vo(o):o)}}class Bn extends Fn{constructor(e=!1){super(!1,e)}set(e,t,i,s){let r=e[t];if(!this._isShallow){const t=To(r);if(So(i)||To(i)||(r=xo(r),i=xo(i)),!rr(e)&&_o(r)&&!_o(i))return!t&&(r.value=i,!0)}const n=rr(e)&&mr(t)?Number(t)<e.length:sr(e,t),o=Reflect.set(e,t,i,_o(e)?e:s);return e===xo(s)&&(n?xr(i,r)&&Sn(e,"set",t,i):Sn(e,"add",t,i)),o}deleteProperty(e,t){const i=sr(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&i&&Sn(e,"delete",t,void 0),s}has(e,t){const i=Reflect.has(e,t);return cr(t)&&On.has(t)||Tn(e,"has",t),i}ownKeys(e){return Tn(e,"iterate",rr(e)?"length":bn),Reflect.ownKeys(e)}}class $n extends Fn{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Un=new Bn,Gn=new $n,Hn=new Bn(!0),jn=e=>e,zn=e=>Reflect.getPrototypeOf(e);function Vn(e,t,i=!1,s=!1){e=e["__v_raw"];const r=xo(e),n=xo(t);i||(xr(t,n)&&Tn(r,"get",t),Tn(r,"get",n));const{has:o}=zn(r),a=s?jn:i?Co:Lo;return o.call(r,t)?a(e.get(t)):o.call(r,n)?a(e.get(n)):void(e!==r&&e.get(t))}function Yn(e,t=!1){const i=this["__v_raw"],s=xo(i),r=xo(e);return t||(xr(e,r)&&Tn(s,"has",e),Tn(s,"has",r)),e===r?i.has(e):i.has(e)||i.has(r)}function Wn(e,t=!1){return e=e["__v_raw"],!t&&Tn(xo(e),"iterate",bn),Reflect.get(e,"size",e)}function Kn(e,t=!1){t||So(e)||To(e)||(e=xo(e));const i=xo(this),s=zn(i),r=s.has.call(i,e);return r||(i.add(e),Sn(i,"add",e,e)),this}function qn(e,t,i=!1){i||So(t)||To(t)||(t=xo(t));const s=xo(this),{has:r,get:n}=zn(s);let o=r.call(s,e);o||(e=xo(e),o=r.call(s,e));const a=n.call(s,e);return s.set(e,t),o?xr(t,a)&&Sn(s,"set",e,t):Sn(s,"add",e,t),this}function Xn(e){const t=xo(this),{has:i,get:s}=zn(t);let r=i.call(t,e);r||(e=xo(e),r=i.call(t,e)),s&&s.call(t,e);const n=t.delete(e);return r&&Sn(t,"delete",e,void 0),n}function Zn(){const e=xo(this),t=0!==e.size,i=e.clear();return t&&Sn(e,"clear",void 0,void 0),i}function Qn(e,t){return function(i,s){const r=this,n=r["__v_raw"],o=xo(n),a=t?jn:e?Co:Lo;return!e&&Tn(o,"iterate",bn),n.forEach(((e,t)=>i.call(s,a(e),a(t),r)))}}function Jn(e,t,i){return function(...s){const r=this["__v_raw"],n=xo(r),o=nr(n),a="entries"===e||e===Symbol.iterator&&o,l="keys"===e&&o,c=r[e](...s),d=i?jn:t?Co:Lo;return!t&&Tn(n,"iterate",l?wn:bn),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:a?[d(e[0]),d(e[1])]:d(e),done:t}},[Symbol.iterator](){return this}}}}function eo(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function to(){const e={get(e){return Vn(this,e)},get size(){return Wn(this)},has:Yn,add:Kn,set:qn,delete:Xn,clear:Zn,forEach:Qn(!1,!1)},t={get(e){return Vn(this,e,!1,!0)},get size(){return Wn(this)},has:Yn,add(e){return Kn.call(this,e,!0)},set(e,t){return qn.call(this,e,t,!0)},delete:Xn,clear:Zn,forEach:Qn(!1,!0)},i={get(e){return Vn(this,e,!0)},get size(){return Wn(this,!0)},has(e){return Yn.call(this,e,!0)},add:eo("add"),set:eo("set"),delete:eo("delete"),clear:eo("clear"),forEach:Qn(!0,!1)},s={get(e){return Vn(this,e,!0,!0)},get size(){return Wn(this,!0)},has(e){return Yn.call(this,e,!0)},add:eo("add"),set:eo("set"),delete:eo("delete"),clear:eo("clear"),forEach:Qn(!0,!0)},r=["keys","values","entries",Symbol.iterator];return r.forEach((r=>{e[r]=Jn(r,!1,!1),i[r]=Jn(r,!0,!1),t[r]=Jn(r,!1,!0),s[r]=Jn(r,!0,!0)})),[e,i,t,s]}const[io,so,ro,no]=to();function oo(e,t){const i=t?e?no:ro:e?so:io;return(t,s,r)=>"__v_isReactive"===s?!e:"__v_isReadonly"===s?e:"__v_raw"===s?t:Reflect.get(sr(i,s)&&s in t?i:t,s,r)}const ao={get:oo(!1,!1)},lo={get:oo(!1,!0)},co={get:oo(!0,!1)},ho=new WeakMap,uo=new WeakMap,po=new WeakMap,fo=new WeakMap;function go(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mo(e){return e["__v_skip"]||!Object.isExtensible(e)?0:go(fr(e))}function vo(e){return To(e)?e:wo(e,!1,Un,ao,ho)}function yo(e){return wo(e,!1,Hn,lo,uo)}function bo(e){return wo(e,!0,Gn,co,po)}function wo(e,t,i,s,r){if(!dr(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const n=r.get(e);if(n)return n;const o=mo(e);if(0===o)return e;const a=new Proxy(e,2===o?s:i);return r.set(e,a),a}function Eo(e){return To(e)?Eo(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function To(e){return!(!e||!e["__v_isReadonly"])}function So(e){return!(!e||!e["__v_isShallow"])}function Ao(e){return!!e&&!!e["__v_raw"]}function xo(e){const t=e&&e["__v_raw"];return t?xo(t):e}function ko(e){return!sr(e,"__v_skip")&&Object.isExtensible(e)&&Lr(e,"__v_skip",!0),e}const Lo=e=>dr(e)?vo(e):e,Co=e=>dr(e)?bo(e):e;function _o(e){return!!e&&!0===e["__v_isRef"]}function Ro(e){return Io(e,!1)}function Io(e,t){return _o(e)?e:new Do(e,t)}class Do{constructor(e,t){this.dep=new mn,this["__v_isRef"]=!0,this["__v_isShallow"]=!1,this._rawValue=t?e:xo(e),this._value=t?e:Lo(e),this["__v_isShallow"]=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,i=this["__v_isShallow"]||So(e)||To(e);e=i?e:xo(e),xr(e,t)&&(this._rawValue=e,this._value=i?e:Lo(e),this.dep.trigger())}}function Po(e){return _o(e)?e.value:e}const Mo={get:(e,t,i)=>"__v_raw"===t?e:Po(Reflect.get(e,t,i)),set:(e,t,i,s)=>{const r=e[t];return _o(r)&&!_o(i)?(r.value=i,!0):Reflect.set(e,t,i,s)}};function Oo(e){return Eo(e)?e:new Proxy(e,Mo)}function No(e){const t=rr(e)?new Array(e.length):{};for(const i in e)t[i]=Bo(e,i);return t}class Fo{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this["__v_isRef"]=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return An(xo(this._object),this._key)}}function Bo(e,t,i){const s=e[t];return _o(s)?s:new Fo(e,t,i)}class $o{constructor(e,t,i){this.fn=e,this.setter=t,this._value=void 0,this.dep=new mn(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=gn-1,this.effect=this,this["__v_isReadonly"]=!t,this.isSSR=i}notify(){this.flags|=16,Yr!==this&&this.dep.notify()}get value(){const e=this.dep.track();return an(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Uo(e,t,i=!1){let s,r;ar(e)?s=e:(s=e.get,r=e.set);const n=new $o(s,r,i);return n}const Go={},Ho=new WeakMap;let jo;function zo(e,t=!1,i=jo){if(i){let t=Ho.get(i);t||Ho.set(i,t=[]),t.push(e)}}function Vo(e,t,i=Ks){const{immediate:s,deep:r,once:n,scheduler:o,augmentJob:a,call:l}=i,c=e=>r?e:So(e)||!1===r||0===r?Yo(e,1):Yo(e);let d,h,u,p,f=!1,g=!1;if(_o(e)?(h=()=>e.value,f=So(e)):Eo(e)?(h=()=>c(e),f=!0):rr(e)?(g=!0,f=e.some((e=>Eo(e)||So(e))),h=()=>e.map((e=>_o(e)?e.value:Eo(e)?c(e):ar(e)?l?l(e,2):e():void 0))):h=ar(e)?t?l?()=>l(e,2):e:()=>{if(u){un();try{u()}finally{pn()}}const t=jo;jo=d;try{return l?l(e,3,[p]):e(p)}finally{jo=t}}:Xs,t&&r){const e=h,t=!0===r?1/0:r;h=()=>Yo(e(),t)}const m=qr(),v=()=>{d.stop(),m&&tr(m.effects,d)};if(n)if(t){const e=t;t=(...t)=>{e(...t),v()}}else{const e=h;h=()=>{e(),v()}}let y=g?new Array(e.length).fill(Go):Go;const b=e=>{if(1&d.flags&&(d.dirty||e))if(t){const e=d.run();if(r||f||(g?e.some(((e,t)=>xr(e,y[t]))):xr(e,y))){u&&u();const i=jo;jo=d;try{const i=[e,y===Go?void 0:g&&y[0]===Go?[]:y,p];l?l(t,3,i):t(...i),y=e}finally{jo=i}}}else d.run()};return a&&a(b),d=new Qr(h),d.scheduler=o?()=>o(b,!1):b,p=e=>zo(e,!1,d),u=d.onStop=()=>{const e=Ho.get(d);if(e){if(l)l(e,4);else for(const t of e)t();Ho.delete(d)}},t?s?b(!0):y=d.run():o?o(b.bind(null,!0),!0):d.run(),v.pause=d.pause.bind(d),v.resume=d.resume.bind(d),v.stop=v,v}function Yo(e,t=1/0,i){if(t<=0||!dr(e)||e["__v_skip"])return e;if(i=i||new Set,i.has(e))return e;if(i.add(e),t--,_o(e))Yo(e.value,t,i);else if(rr(e))for(let s=0;s<e.length;s++)Yo(e[s],t,i);else if(or(e)||nr(e))e.forEach((e=>{Yo(e,t,i)}));else if(gr(e)){for(const s in e)Yo(e[s],t,i);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Yo(e[s],t,i)}return e}function Wo(e,t,i,s){try{return s?e(...s):e()}catch(r){qo(r,t,i)}}function Ko(e,t,i,s){if(ar(e)){const r=Wo(e,t,i,s);return r&&hr(r)&&r.catch((e=>{qo(e,t,i)})),r}if(rr(e)){const r=[];for(let n=0;n<e.length;n++)r.push(Ko(e[n],t,i,s));return r}}function qo(e,t,i,s=!0){const r=t?t.vnode:null,{errorHandler:n,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Ks;if(t){let s=t.parent;const r=t.proxy,o=`https://vuejs.org/error-reference/#runtime-${i}`;while(s){const t=s.ec;if(t)for(let i=0;i<t.length;i++)if(!1===t[i](e,r,o))return;s=s.parent}if(n)return un(),Wo(n,null,10,[e,r,o]),void pn()}Xo(e,i,r,s,o)}function Xo(e,t,i,s=!0,r=!1){if(r)throw e;console.error(e)}let Zo=!1,Qo=!1;const Jo=[];let ea=0;const ta=[];let ia=null,sa=0;const ra=Promise.resolve();let na=null;function oa(e){const t=na||ra;return e?t.then(this?e.bind(this):e):t}function aa(e){let t=Zo?ea+1:0,i=Jo.length;while(t<i){const s=t+i>>>1,r=Jo[s],n=pa(r);n<e||n===e&&2&r.flags?t=s+1:i=s}return t}function la(e){if(!(1&e.flags)){const t=pa(e),i=Jo[Jo.length-1];!i||!(2&e.flags)&&t>=pa(i)?Jo.push(e):Jo.splice(aa(t),0,e),e.flags|=1,ca()}}function ca(){Zo||Qo||(Qo=!0,na=ra.then(fa))}function da(e){rr(e)?ta.push(...e):ia&&-1===e.id?ia.splice(sa+1,0,e):1&e.flags||(ta.push(e),e.flags|=1),ca()}function ha(e,t,i=(Zo?ea+1:0)){for(;i<Jo.length;i++){const t=Jo[i];if(t&&2&t.flags){if(e&&t.id!==e.uid)continue;Jo.splice(i,1),i--,4&t.flags&&(t.flags&=-2),t(),t.flags&=-2}}}function ua(e){if(ta.length){const e=[...new Set(ta)].sort(((e,t)=>pa(e)-pa(t)));if(ta.length=0,ia)return void ia.push(...e);for(ia=e,sa=0;sa<ia.length;sa++){const e=ia[sa];4&e.flags&&(e.flags&=-2),8&e.flags||e(),e.flags&=-2}ia=null,sa=0}}const pa=e=>null==e.id?2&e.flags?-1:1/0:e.id;function fa(e){Qo=!1,Zo=!0;try{for(ea=0;ea<Jo.length;ea++){const e=Jo[ea];!e||8&e.flags||(4&e.flags&&(e.flags&=-2),Wo(e,e.i,e.i?15:14),e.flags&=-2)}}finally{for(;ea<Jo.length;ea++){const e=Jo[ea];e&&(e.flags&=-2)}ea=0,Jo.length=0,ua(),Zo=!1,na=null,(Jo.length||ta.length)&&fa()}}let ga=null,ma=null;function va(e){const t=ga;return ga=e,ma=e&&e.type.__scopeId||null,t}function ya(e,t=ga,i){if(!t)return e;if(e._n)return e;const s=(...i)=>{s._d&&Gc(-1);const r=va(t);let n;try{n=e(...i)}finally{va(r),s._d&&Gc(1)}return n};return s._n=!0,s._c=!0,s._d=!0,s}function ba(e,t){if(null===ga)return e;const i=xd(ga),s=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[e,n,o,a=Ks]=t[r];e&&(ar(e)&&(e={mounted:e,updated:e}),e.deep&&Yo(n),s.push({dir:e,instance:i,value:n,oldValue:void 0,arg:o,modifiers:a}))}return e}function wa(e,t,i,s){const r=e.dirs,n=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];n&&(a.oldValue=n[o].value);let l=a.dir[s];l&&(un(),Ko(l,i,8,[e.el,a,e,t]),pn())}}const Ea=Symbol("_vte"),Ta=e=>e.__isTeleport,Sa=Symbol("_leaveCb"),Aa=Symbol("_enterCb");function xa(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Xa((()=>{e.isMounted=!0})),Ja((()=>{e.isUnmounting=!0})),e}const ka=[Function,Array],La={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ka,onEnter:ka,onAfterEnter:ka,onEnterCancelled:ka,onBeforeLeave:ka,onLeave:ka,onAfterLeave:ka,onLeaveCancelled:ka,onBeforeAppear:ka,onAppear:ka,onAfterAppear:ka,onAppearCancelled:ka},Ca=e=>{const t=e.subTree;return t.component?Ca(t.component):t},_a={name:"BaseTransition",props:La,setup(e,{slots:t}){const i=hd(),s=xa();return()=>{const r=t.default&&Fa(t.default(),!0);if(!r||!r.length)return;const n=Ra(r),o=xo(e),{mode:a}=o;if(s.isLeaving)return Ma(n);const l=Oa(n);if(!l)return Ma(n);let c=Pa(l,o,s,i,(e=>c=e));l.type!==Mc&&Na(l,c);const d=i.subTree,h=d&&Oa(d);if(h&&h.type!==Mc&&!Yc(l,h)&&Ca(i).type!==Mc){const e=Pa(h,o,s,i);if(Na(h,e),"out-in"===a&&l.type!==Mc)return s.isLeaving=!0,e.afterLeave=()=>{s.isLeaving=!1,8&i.job.flags||i.update(),delete e.afterLeave},Ma(n);"in-out"===a&&l.type!==Mc&&(e.delayLeave=(e,t,i)=>{const r=Da(s,h);r[String(h.key)]=h,e[Sa]=()=>{t(),e[Sa]=void 0,delete c.delayedLeave},c.delayedLeave=i})}return n}}};function Ra(e){let t=e[0];if(e.length>1)for(const i of e)if(i.type!==Mc){t=i;break}return t}const Ia=_a;function Da(e,t){const{leavingVNodes:i}=e;let s=i.get(t.type);return s||(s=Object.create(null),i.set(t.type,s)),s}function Pa(e,t,i,s,r){const{appear:n,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:h,onBeforeLeave:u,onLeave:p,onAfterLeave:f,onLeaveCancelled:g,onBeforeAppear:m,onAppear:v,onAfterAppear:y,onAppearCancelled:b}=t,w=String(e.key),E=Da(i,e),T=(e,t)=>{e&&Ko(e,s,9,t)},S=(e,t)=>{const i=t[1];T(e,t),rr(e)?e.every((e=>e.length<=1))&&i():e.length<=1&&i()},A={mode:o,persisted:a,beforeEnter(t){let s=l;if(!i.isMounted){if(!n)return;s=m||l}t[Sa]&&t[Sa](!0);const r=E[w];r&&Yc(e,r)&&r.el[Sa]&&r.el[Sa](),T(s,[t])},enter(e){let t=c,s=d,r=h;if(!i.isMounted){if(!n)return;t=v||c,s=y||d,r=b||h}let o=!1;const a=e[Aa]=t=>{o||(o=!0,T(t?r:s,[e]),A.delayedLeave&&A.delayedLeave(),e[Aa]=void 0)};t?S(t,[e,a]):a()},leave(t,s){const r=String(e.key);if(t[Aa]&&t[Aa](!0),i.isUnmounting)return s();T(u,[t]);let n=!1;const o=t[Sa]=i=>{n||(n=!0,s(),T(i?g:f,[t]),t[Sa]=void 0,E[r]===e&&delete E[r])};E[r]=e,p?S(p,[t,o]):o()},clone(e){const n=Pa(e,t,i,s,r);return r&&r(n),n}};return A}function Ma(e){if(Ha(e))return e=Jc(e),e.children=null,e}function Oa(e){if(!Ha(e))return Ta(e.type)&&e.children?Ra(e.children):e;const{shapeFlag:t,children:i}=e;if(i){if(16&t)return i[0];if(32&t&&ar(i.default))return i.default()}}function Na(e,t){6&e.shapeFlag&&e.component?(e.transition=t,Na(e.component.subTree,t)):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Fa(e,t=!1,i){let s=[],r=0;for(let n=0;n<e.length;n++){let o=e[n];const a=null==i?o.key:String(i)+String(null!=o.key?o.key:n);o.type===Dc?(128&o.patchFlag&&r++,s=s.concat(Fa(o.children,t,a))):(t||o.type!==Mc)&&s.push(null!=a?Jc(o,{key:a}):o)}if(r>1)for(let n=0;n<s.length;n++)s[n].patchFlag=-2;return s}function Ba(e,t){return ar(e)?(()=>er({name:e.name},t,{setup:e}))():e}function $a(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Ua(e,t,i,s,r=!1){if(rr(e))return void e.forEach(((e,n)=>Ua(e,t&&(rr(t)?t[n]:t),i,s,r)));if(Ga(s)&&!r)return;const n=4&s.shapeFlag?xd(s.component):s.el,o=r?null:n,{i:a,r:l}=e,c=t&&t.r,d=a.refs===Ks?a.refs={}:a.refs,h=a.setupState,u=xo(h),p=h===Ks?()=>!1:e=>sr(u,e);if(null!=c&&c!==l&&(lr(c)?(d[c]=null,p(c)&&(h[c]=null)):_o(c)&&(c.value=null)),ar(l))Wo(l,a,12,[o,d]);else{const t=lr(l),s=_o(l);if(t||s){const a=()=>{if(e.f){const i=t?p(l)?h[l]:d[l]:l.value;r?rr(i)&&tr(i,n):rr(i)?i.includes(n)||i.push(n):t?(d[l]=[n],p(l)&&(h[l]=d[l])):(l.value=[n],e.k&&(d[e.k]=l.value))}else t?(d[l]=o,p(l)&&(h[l]=o)):s&&(l.value=o,e.k&&(d[e.k]=o))};o?(a.id=-1,rc(a,i)):a()}}}const Ga=e=>!!e.type.__asyncLoader,Ha=e=>e.type.__isKeepAlive;function ja(e,t){Va(e,"a",t)}function za(e,t){Va(e,"da",t)}function Va(e,t,i=dd){const s=e.__wdc||(e.__wdc=()=>{let t=i;while(t){if(t.isDeactivated)return;t=t.parent}return e()});if(Wa(t,s,i),i){let e=i.parent;while(e&&e.parent)Ha(e.parent.vnode)&&Ya(s,t,i,e),e=e.parent}}function Ya(e,t,i,s){const r=Wa(t,e,s,!0);el((()=>{tr(s[t],r)}),i)}function Wa(e,t,i=dd,s=!1){if(i){const r=i[e]||(i[e]=[]),n=t.__weh||(t.__weh=(...s)=>{un();const r=fd(i),n=Ko(t,i,e,s);return r(),pn(),n});return s?r.unshift(n):r.push(n),n}}const Ka=e=>(t,i=dd)=>{yd&&"sp"!==e||Wa(e,((...e)=>t(...e)),i)},qa=Ka("bm"),Xa=Ka("m"),Za=Ka("bu"),Qa=Ka("u"),Ja=Ka("bum"),el=Ka("um"),tl=Ka("sp"),il=Ka("rtg"),sl=Ka("rtc");function rl(e,t=dd){Wa("ec",e,t)}const nl="components",ol="directives";function al(e,t){return dl(nl,e,!0,t)||e}const ll=Symbol.for("v-ndc");function cl(e){return dl(ol,e)}function dl(e,t,i=!0,s=!1){const r=ga||dd;if(r){const i=r.type;if(e===nl){const e=kd(i,!1);if(e&&(e===t||e===wr(t)||e===Sr(wr(t))))return i}const n=hl(r[e]||i[e],t)||hl(r.appContext[e],t);return!n&&s?i:n}}function hl(e,t){return e&&(e[t]||e[wr(t)]||e[Sr(wr(t))])}function ul(e,t,i,s){let r;const n=i&&i[s],o=rr(e);if(o||lr(e)){const i=o&&Eo(e);let s=!1;i&&(s=!So(e),e=kn(e)),r=new Array(e.length);for(let o=0,a=e.length;o<a;o++)r[o]=t(s?Lo(e[o]):e[o],o,void 0,n&&n[o])}else if("number"===typeof e){r=new Array(e);for(let i=0;i<e;i++)r[i]=t(i+1,i,void 0,n&&n[i])}else if(dr(e))if(e[Symbol.iterator])r=Array.from(e,((e,i)=>t(e,i,void 0,n&&n[i])));else{const i=Object.keys(e);r=new Array(i.length);for(let s=0,o=i.length;s<o;s++){const o=i[s];r[s]=t(e[o],o,s,n&&n[s])}}else r=[];return i&&(i[s]=r),r}const pl=e=>e?md(e)?xd(e):pl(e.parent):null,fl=er(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>pl(e.parent),$root:e=>pl(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Sl(e),$forceUpdate:e=>e.f||(e.f=()=>{la(e.update)}),$nextTick:e=>e.n||(e.n=oa.bind(e.proxy)),$watch:e=>yc.bind(e)}),gl=(e,t)=>e!==Ks&&!e.__isScriptSetup&&sr(e,t),ml={get({_:e},t){if("__v_skip"===t)return!0;const{ctx:i,setupState:s,data:r,props:n,accessCache:o,type:a,appContext:l}=e;let c;if("$"!==t[0]){const a=o[t];if(void 0!==a)switch(a){case 1:return s[t];case 2:return r[t];case 4:return i[t];case 3:return n[t]}else{if(gl(s,t))return o[t]=1,s[t];if(r!==Ks&&sr(r,t))return o[t]=2,r[t];if((c=e.propsOptions[0])&&sr(c,t))return o[t]=3,n[t];if(i!==Ks&&sr(i,t))return o[t]=4,i[t];yl&&(o[t]=0)}}const d=fl[t];let h,u;return d?("$attrs"===t&&Tn(e.attrs,"get",""),d(e)):(h=a.__cssModules)&&(h=h[t])?h:i!==Ks&&sr(i,t)?(o[t]=4,i[t]):(u=l.config.globalProperties,sr(u,t)?u[t]:void 0)},set({_:e},t,i){const{data:s,setupState:r,ctx:n}=e;return gl(r,t)?(r[t]=i,!0):s!==Ks&&sr(s,t)?(s[t]=i,!0):!sr(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(n[t]=i,!0))},has({_:{data:e,setupState:t,accessCache:i,ctx:s,appContext:r,propsOptions:n}},o){let a;return!!i[o]||e!==Ks&&sr(e,o)||gl(t,o)||(a=n[0])&&sr(a,o)||sr(s,o)||sr(fl,o)||sr(r.config.globalProperties,o)},defineProperty(e,t,i){return null!=i.get?e._.accessCache[t]=0:sr(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function vl(e){return rr(e)?e.reduce(((e,t)=>(e[t]=null,e)),{}):e}let yl=!0;function bl(e){const t=Sl(e),i=e.proxy,s=e.ctx;yl=!1,t.beforeCreate&&El(t.beforeCreate,e,"bc");const{data:r,computed:n,methods:o,watch:a,provide:l,inject:c,created:d,beforeMount:h,mounted:u,beforeUpdate:p,updated:f,activated:g,deactivated:m,beforeDestroy:v,beforeUnmount:y,destroyed:b,unmounted:w,render:E,renderTracked:T,renderTriggered:S,errorCaptured:A,serverPrefetch:x,expose:k,inheritAttrs:L,components:C,directives:_,filters:R}=t,I=null;if(c&&wl(c,s,I),o)for(const P in o){const e=o[P];ar(e)&&(s[P]=e.bind(i))}if(r){const t=r.call(i,i);dr(t)&&(e.data=vo(t))}if(yl=!0,n)for(const P in n){const e=n[P],t=ar(e)?e.bind(i,i):ar(e.get)?e.get.bind(i,i):Xs,r=!ar(e)&&ar(e.set)?e.set.bind(i):Xs,o=Cd({get:t,set:r});Object.defineProperty(s,P,{enumerable:!0,configurable:!0,get:()=>o.value,set:e=>o.value=e})}if(a)for(const P in a)Tl(a[P],s,i,P);if(l){const e=ar(l)?l.call(i):l;Reflect.ownKeys(e).forEach((t=>{Fl(t,e[t])}))}function D(e,t){rr(t)?t.forEach((t=>e(t.bind(i)))):t&&e(t.bind(i))}if(d&&El(d,e,"c"),D(qa,h),D(Xa,u),D(Za,p),D(Qa,f),D(ja,g),D(za,m),D(rl,A),D(sl,T),D(il,S),D(Ja,y),D(el,w),D(tl,x),rr(k))if(k.length){const t=e.exposed||(e.exposed={});k.forEach((e=>{Object.defineProperty(t,e,{get:()=>i[e],set:t=>i[e]=t})}))}else e.exposed||(e.exposed={});E&&e.render===Xs&&(e.render=E),null!=L&&(e.inheritAttrs=L),C&&(e.components=C),_&&(e.directives=_),x&&$a(e)}function wl(e,t,i=Xs){rr(e)&&(e=Cl(e));for(const s in e){const i=e[s];let r;r=dr(i)?"default"in i?Bl(i.from||s,i.default,!0):Bl(i.from||s):Bl(i),_o(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:e=>r.value=e}):t[s]=r}}function El(e,t,i){Ko(rr(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,i)}function Tl(e,t,i,s){let r=s.includes(".")?bc(i,s):()=>i[s];if(lr(e)){const i=t[e];ar(i)&&mc(r,i)}else if(ar(e))mc(r,e.bind(i));else if(dr(e))if(rr(e))e.forEach((e=>Tl(e,t,i,s)));else{const s=ar(e.handler)?e.handler.bind(i):t[e.handler];ar(s)&&mc(r,s,e)}}function Sl(e){const t=e.type,{mixins:i,extends:s}=t,{mixins:r,optionsCache:n,config:{optionMergeStrategies:o}}=e.appContext,a=n.get(t);let l;return a?l=a:r.length||i||s?(l={},r.length&&r.forEach((e=>Al(l,e,o,!0))),Al(l,t,o)):l=t,dr(t)&&n.set(t,l),l}function Al(e,t,i,s=!1){const{mixins:r,extends:n}=t;n&&Al(e,n,i,!0),r&&r.forEach((t=>Al(e,t,i,!0)));for(const o in t)if(s&&"expose"===o);else{const s=xl[o]||i&&i[o];e[o]=s?s(e[o],t[o]):t[o]}return e}const xl={data:kl,props:Il,emits:Il,methods:Rl,computed:Rl,beforeCreate:_l,created:_l,beforeMount:_l,mounted:_l,beforeUpdate:_l,updated:_l,beforeDestroy:_l,beforeUnmount:_l,destroyed:_l,unmounted:_l,activated:_l,deactivated:_l,errorCaptured:_l,serverPrefetch:_l,components:Rl,directives:Rl,watch:Dl,provide:kl,inject:Ll};function kl(e,t){return t?e?function(){return er(ar(e)?e.call(this,this):e,ar(t)?t.call(this,this):t)}:t:e}function Ll(e,t){return Rl(Cl(e),Cl(t))}function Cl(e){if(rr(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function _l(e,t){return e?[...new Set([].concat(e,t))]:t}function Rl(e,t){return e?er(Object.create(null),e,t):t}function Il(e,t){return e?rr(e)&&rr(t)?[...new Set([...e,...t])]:er(Object.create(null),vl(e),vl(null!=t?t:{})):t}function Dl(e,t){if(!e)return t;if(!t)return e;const i=er(Object.create(null),e);for(const s in t)i[s]=_l(e[s],t[s]);return i}function Pl(){return{app:null,config:{isNativeTag:Zs,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ml=0;function Ol(e,t){return function(i,s=null){ar(i)||(i=er({},i)),null==s||dr(s)||(s=null);const r=Pl(),n=new WeakSet,o=[];let a=!1;const l=r.app={_uid:Ml++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:Rd,get config(){return r.config},set config(e){},use(e,...t){return n.has(e)||(e&&ar(e.install)?(n.add(e),e.install(l,...t)):ar(e)&&(n.add(e),e(l,...t))),l},mixin(e){return r.mixins.includes(e)||r.mixins.push(e),l},component(e,t){return t?(r.components[e]=t,l):r.components[e]},directive(e,t){return t?(r.directives[e]=t,l):r.directives[e]},mount(n,o,c){if(!a){const d=l._ceVNode||Xc(i,s);return d.appContext=r,!0===c?c="svg":!1===c&&(c=void 0),o&&t?t(d,n):e(d,n,c),a=!0,l._container=n,n.__vue_app__=l,xd(d.component)}},onUnmount(e){o.push(e)},unmount(){a&&(Ko(o,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(e,t){return r.provides[e]=t,l},runWithContext(e){const t=Nl;Nl=l;try{return e()}finally{Nl=t}}};return l}}let Nl=null;function Fl(e,t){if(dd){let i=dd.provides;const s=dd.parent&&dd.parent.provides;s===i&&(i=dd.provides=Object.create(s)),i[e]=t}else;}function Bl(e,t,i=!1){const s=dd||ga;if(s||Nl){const r=Nl?Nl._context.provides:s?null==s.parent?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return i&&ar(t)?t.call(s&&s.proxy):t}}function $l(){return!!(dd||ga||Nl)}const Ul={},Gl=()=>Object.create(Ul),Hl=e=>Object.getPrototypeOf(e)===Ul;function jl(e,t,i,s=!1){const r={},n=Gl();e.propsDefaults=Object.create(null),Vl(e,t,r,n);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);i?e.props=s?r:yo(r):e.type.props?e.props=r:e.props=n,e.attrs=n}function zl(e,t,i,s){const{props:r,attrs:n,vnode:{patchFlag:o}}=e,a=xo(r),[l]=e.propsOptions;let c=!1;if(!(s||o>0)||16&o){let s;Vl(e,t,r,n)&&(c=!0);for(const n in a)t&&(sr(t,n)||(s=Tr(n))!==n&&sr(t,s))||(l?!i||void 0===i[n]&&void 0===i[s]||(r[n]=Yl(l,a,n,void 0,e,!0)):delete r[n]);if(n!==a)for(const e in n)t&&sr(t,e)||(delete n[e],c=!0)}else if(8&o){const i=e.vnode.dynamicProps;for(let s=0;s<i.length;s++){let o=i[s];if(Sc(e.emitsOptions,o))continue;const d=t[o];if(l)if(sr(n,o))d!==n[o]&&(n[o]=d,c=!0);else{const t=wr(o);r[t]=Yl(l,a,t,d,e,!1)}else d!==n[o]&&(n[o]=d,c=!0)}}c&&Sn(e.attrs,"set","")}function Vl(e,t,i,s){const[r,n]=e.propsOptions;let o,a=!1;if(t)for(let l in t){if(vr(l))continue;const c=t[l];let d;r&&sr(r,d=wr(l))?n&&n.includes(d)?(o||(o={}))[d]=c:i[d]=c:Sc(e.emitsOptions,l)||l in s&&c===s[l]||(s[l]=c,a=!0)}if(n){const t=xo(i),s=o||Ks;for(let o=0;o<n.length;o++){const a=n[o];i[a]=Yl(r,t,a,s[a],e,!sr(s,a))}}return a}function Yl(e,t,i,s,r,n){const o=e[i];if(null!=o){const e=sr(o,"default");if(e&&void 0===s){const e=o.default;if(o.type!==Function&&!o.skipFactory&&ar(e)){const{propsDefaults:n}=r;if(i in n)s=n[i];else{const o=fd(r);s=n[i]=e.call(null,t),o()}}else s=e;r.ce&&r.ce._setProp(i,s)}o[0]&&(n&&!e?s=!1:!o[1]||""!==s&&s!==Tr(i)||(s=!0))}return s}const Wl=new WeakMap;function Kl(e,t,i=!1){const s=i?Wl:t.propsCache,r=s.get(e);if(r)return r;const n=e.props,o={},a=[];let l=!1;if(!ar(e)){const s=e=>{l=!0;const[i,s]=Kl(e,t,!0);er(o,i),s&&a.push(...s)};!i&&t.mixins.length&&t.mixins.forEach(s),e.extends&&s(e.extends),e.mixins&&e.mixins.forEach(s)}if(!n&&!l)return dr(e)&&s.set(e,qs),qs;if(rr(n))for(let d=0;d<n.length;d++){const e=wr(n[d]);ql(e)&&(o[e]=Ks)}else if(n)for(const d in n){const e=wr(d);if(ql(e)){const t=n[d],i=o[e]=rr(t)||ar(t)?{type:t}:er({},t),s=i.type;let r=!1,l=!0;if(rr(s))for(let e=0;e<s.length;++e){const t=s[e],i=ar(t)&&t.name;if("Boolean"===i){r=!0;break}"String"===i&&(l=!1)}else r=ar(s)&&"Boolean"===s.name;i[0]=r,i[1]=l,(r||sr(i,"default"))&&a.push(e)}}const c=[o,a];return dr(e)&&s.set(e,c),c}function ql(e){return"$"!==e[0]&&!vr(e)}const Xl=e=>"_"===e[0]||"$stable"===e,Zl=e=>rr(e)?e.map(id):[id(e)],Ql=(e,t,i)=>{if(t._n)return t;const s=ya(((...e)=>Zl(t(...e))),i);return s._c=!1,s},Jl=(e,t,i)=>{const s=e._ctx;for(const r in e){if(Xl(r))continue;const i=e[r];if(ar(i))t[r]=Ql(r,i,s);else if(null!=i){const e=Zl(i);t[r]=()=>e}}},ec=(e,t)=>{const i=Zl(t);e.slots.default=()=>i},tc=(e,t,i)=>{for(const s in t)(i||"_"!==s)&&(e[s]=t[s])},ic=(e,t,i)=>{const s=e.slots=Gl();if(32&e.vnode.shapeFlag){const e=t._;e?(tc(s,t,i),i&&Lr(s,"_",e,!0)):Jl(t,s)}else t&&ec(e,t)},sc=(e,t,i)=>{const{vnode:s,slots:r}=e;let n=!0,o=Ks;if(32&s.shapeFlag){const e=t._;e?i&&1===e?n=!1:tc(r,t,i):(n=!t.$stable,Jl(t,r)),o=t}else t&&(ec(e,t),o={default:1});if(n)for(const a in r)Xl(a)||null!=o[a]||delete r[a]},rc=Ic;function nc(e){return oc(e)}function oc(e,t){const i=Ir();i.__VUE__=!0;const{insert:s,remove:r,patchProp:n,createElement:o,createText:a,createComment:l,setText:c,setElementText:d,parentNode:h,nextSibling:u,setScopeId:p=Xs,insertStaticContent:f}=e,g=(e,t,i,s=null,r=null,n=null,o=void 0,a=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!Yc(e,t)&&(s=j(e),B(e,r,n,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:d,shapeFlag:h}=t;switch(c){case Pc:m(e,t,i,s);break;case Mc:v(e,t,i,s);break;case Oc:null==e&&y(t,i,s,o);break;case Dc:C(e,t,i,s,r,n,o,a,l);break;default:1&h?E(e,t,i,s,r,n,o,a,l):6&h?_(e,t,i,s,r,n,o,a,l):(64&h||128&h)&&c.process(e,t,i,s,r,n,o,a,l,Y)}null!=d&&r&&Ua(d,e&&e.ref,n,t||e,!t)},m=(e,t,i,r)=>{if(null==e)s(t.el=a(t.children),i,r);else{const i=t.el=e.el;t.children!==e.children&&c(i,t.children)}},v=(e,t,i,r)=>{null==e?s(t.el=l(t.children||""),i,r):t.el=e.el},y=(e,t,i,s)=>{[e.el,e.anchor]=f(e.children,t,i,s,e.el,e.anchor)},b=({el:e,anchor:t},i,r)=>{let n;while(e&&e!==t)n=u(e),s(e,i,r),e=n;s(t,i,r)},w=({el:e,anchor:t})=>{let i;while(e&&e!==t)i=u(e),r(e),e=i;r(t)},E=(e,t,i,s,r,n,o,a,l)=>{"svg"===t.type?o="svg":"math"===t.type&&(o="mathml"),null==e?T(t,i,s,r,n,o,a,l):x(e,t,r,n,o,a,l)},T=(e,t,i,r,a,l,c,h)=>{let u,p;const{props:f,shapeFlag:g,transition:m,dirs:v}=e;if(u=e.el=o(e.type,l,f&&f.is,f),8&g?d(u,e.children):16&g&&A(e.children,u,null,r,a,ac(e,l),c,h),v&&wa(e,null,r,"created"),S(u,e,e.scopeId,c,r),f){for(const e in f)"value"===e||vr(e)||n(u,e,null,f[e],l,r);"value"in f&&n(u,"value",null,f.value,l),(p=f.onVnodeBeforeMount)&&od(p,r,e)}v&&wa(e,null,r,"beforeMount");const y=cc(a,m);y&&m.beforeEnter(u),s(u,t,i),((p=f&&f.onVnodeMounted)||y||v)&&rc((()=>{p&&od(p,r,e),y&&m.enter(u),v&&wa(e,null,r,"mounted")}),a)},S=(e,t,i,s,r)=>{if(i&&p(e,i),s)for(let n=0;n<s.length;n++)p(e,s[n]);if(r){let i=r.subTree;if(t===i||Rc(i.type)&&(i.ssContent===t||i.ssFallback===t)){const t=r.vnode;S(e,t,t.scopeId,t.slotScopeIds,r.parent)}}},A=(e,t,i,s,r,n,o,a,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=a?sd(e[c]):id(e[c]);g(null,l,t,i,s,r,n,o,a)}},x=(e,t,i,s,r,o,a)=>{const l=t.el=e.el;let{patchFlag:c,dynamicChildren:h,dirs:u}=t;c|=16&e.patchFlag;const p=e.props||Ks,f=t.props||Ks;let g;if(i&&lc(i,!1),(g=f.onVnodeBeforeUpdate)&&od(g,i,t,e),u&&wa(t,e,i,"beforeUpdate"),i&&lc(i,!0),(p.innerHTML&&null==f.innerHTML||p.textContent&&null==f.textContent)&&d(l,""),h?k(e.dynamicChildren,h,l,i,s,ac(t,r),o):a||M(e,t,l,null,i,s,ac(t,r),o,!1),c>0){if(16&c)L(l,p,f,i,r);else if(2&c&&p.class!==f.class&&n(l,"class",null,f.class,r),4&c&&n(l,"style",p.style,f.style,r),8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const s=e[t],o=p[s],a=f[s];a===o&&"value"!==s||n(l,s,o,a,r,i)}}1&c&&e.children!==t.children&&d(l,t.children)}else a||null!=h||L(l,p,f,i,r);((g=f.onVnodeUpdated)||u)&&rc((()=>{g&&od(g,i,t,e),u&&wa(t,e,i,"updated")}),s)},k=(e,t,i,s,r,n,o)=>{for(let a=0;a<t.length;a++){const l=e[a],c=t[a],d=l.el&&(l.type===Dc||!Yc(l,c)||70&l.shapeFlag)?h(l.el):i;g(l,c,d,null,s,r,n,o,!0)}},L=(e,t,i,s,r)=>{if(t!==i){if(t!==Ks)for(const o in t)vr(o)||o in i||n(e,o,t[o],null,r,s);for(const o in i){if(vr(o))continue;const a=i[o],l=t[o];a!==l&&"value"!==o&&n(e,o,l,a,r,s)}"value"in i&&n(e,"value",t.value,i.value,r)}},C=(e,t,i,r,n,o,l,c,d)=>{const h=t.el=e?e.el:a(""),u=t.anchor=e?e.anchor:a("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:g}=t;g&&(c=c?c.concat(g):g),null==e?(s(h,i,r),s(u,i,r),A(t.children||[],i,u,n,o,l,c,d)):p>0&&64&p&&f&&e.dynamicChildren?(k(e.dynamicChildren,f,i,n,o,l,c),(null!=t.key||n&&t===n.subTree)&&dc(e,t,!0)):M(e,t,i,u,n,o,l,c,d)},_=(e,t,i,s,r,n,o,a,l)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?r.ctx.activate(t,i,s,o,l):R(t,i,s,r,n,o,l):I(e,t,l)},R=(e,t,i,s,r,n,o)=>{const a=e.component=cd(e,s,r);if(Ha(e)&&(a.ctx.renderer=Y),bd(a,!1,o),a.asyncDep){if(r&&r.registerDep(a,D,o),!e.el){const e=a.subTree=Xc(Mc);v(null,e,t,i)}}else D(a,e,t,i,r,n,o)},I=(e,t,i)=>{const s=t.component=e.component;if(Lc(e,t,i)){if(s.asyncDep&&!s.asyncResolved)return void P(s,t,i);s.next=t,s.update()}else t.el=e.el,s.vnode=t},D=(e,t,i,s,r,n,o)=>{const a=()=>{if(e.isMounted){let{next:t,bu:i,u:s,parent:l,vnode:c}=e;{const i=uc(e);if(i)return t&&(t.el=c.el,P(e,t,o)),void i.asyncDep.then((()=>{e.isUnmounted||a()}))}let d,u=t;lc(e,!1),t?(t.el=c.el,P(e,t,o)):t=c,i&&kr(i),(d=t.props&&t.props.onVnodeBeforeUpdate)&&od(d,l,t,c),lc(e,!0);const p=Ac(e),f=e.subTree;e.subTree=p,g(f,p,h(f.el),j(f),e,r,n),t.el=p.el,null===u&&_c(e,p.el),s&&rc(s,r),(d=t.props&&t.props.onVnodeUpdated)&&rc((()=>od(d,l,t,c)),r)}else{let o;const{el:a,props:l}=t,{bm:c,m:d,parent:h,root:u,type:p}=e,f=Ga(t);if(lc(e,!1),c&&kr(c),!f&&(o=l&&l.onVnodeBeforeMount)&&od(o,h,t),lc(e,!0),a&&K){const t=()=>{e.subTree=Ac(e),K(a,e.subTree,e,r,null)};f&&p.__asyncHydrate?p.__asyncHydrate(a,e,t):t()}else{u.ce&&u.ce._injectChildStyle(p);const o=e.subTree=Ac(e);g(null,o,i,s,e,r,n),t.el=o.el}if(d&&rc(d,r),!f&&(o=l&&l.onVnodeMounted)){const e=t;rc((()=>od(o,h,e)),r)}(256&t.shapeFlag||h&&Ga(h.vnode)&&256&h.vnode.shapeFlag)&&e.a&&rc(e.a,r),e.isMounted=!0,t=i=s=null}};e.scope.on();const l=e.effect=new Qr(a);e.scope.off();const c=e.update=l.run.bind(l),d=e.job=l.runIfDirty.bind(l);d.i=e,d.id=e.uid,l.scheduler=()=>la(d),lc(e,!0),c()},P=(e,t,i)=>{t.component=e;const s=e.vnode.props;e.vnode=t,e.next=null,zl(e,t.props,s,i),sc(e,t.children,i),un(),ha(e),pn()},M=(e,t,i,s,r,n,o,a,l=!1)=>{const c=e&&e.children,h=e?e.shapeFlag:0,u=t.children,{patchFlag:p,shapeFlag:f}=t;if(p>0){if(128&p)return void N(c,u,i,s,r,n,o,a,l);if(256&p)return void O(c,u,i,s,r,n,o,a,l)}8&f?(16&h&&H(c,r,n),u!==c&&d(i,u)):16&h?16&f?N(c,u,i,s,r,n,o,a,l):H(c,r,n,!0):(8&h&&d(i,""),16&f&&A(u,i,s,r,n,o,a,l))},O=(e,t,i,s,r,n,o,a,l)=>{e=e||qs,t=t||qs;const c=e.length,d=t.length,h=Math.min(c,d);let u;for(u=0;u<h;u++){const s=t[u]=l?sd(t[u]):id(t[u]);g(e[u],s,i,null,r,n,o,a,l)}c>d?H(e,r,n,!0,!1,h):A(t,i,s,r,n,o,a,l,h)},N=(e,t,i,s,r,n,o,a,l)=>{let c=0;const d=t.length;let h=e.length-1,u=d-1;while(c<=h&&c<=u){const s=e[c],d=t[c]=l?sd(t[c]):id(t[c]);if(!Yc(s,d))break;g(s,d,i,null,r,n,o,a,l),c++}while(c<=h&&c<=u){const s=e[h],c=t[u]=l?sd(t[u]):id(t[u]);if(!Yc(s,c))break;g(s,c,i,null,r,n,o,a,l),h--,u--}if(c>h){if(c<=u){const e=u+1,h=e<d?t[e].el:s;while(c<=u)g(null,t[c]=l?sd(t[c]):id(t[c]),i,h,r,n,o,a,l),c++}}else if(c>u)while(c<=h)B(e[c],r,n,!0),c++;else{const p=c,f=c,m=new Map;for(c=f;c<=u;c++){const e=t[c]=l?sd(t[c]):id(t[c]);null!=e.key&&m.set(e.key,c)}let v,y=0;const b=u-f+1;let w=!1,E=0;const T=new Array(b);for(c=0;c<b;c++)T[c]=0;for(c=p;c<=h;c++){const s=e[c];if(y>=b){B(s,r,n,!0);continue}let d;if(null!=s.key)d=m.get(s.key);else for(v=f;v<=u;v++)if(0===T[v-f]&&Yc(s,t[v])){d=v;break}void 0===d?B(s,r,n,!0):(T[d-f]=c+1,d>=E?E=d:w=!0,g(s,t[d],i,null,r,n,o,a,l),y++)}const S=w?hc(T):qs;for(v=S.length-1,c=b-1;c>=0;c--){const e=f+c,h=t[e],u=e+1<d?t[e+1].el:s;0===T[c]?g(null,h,i,u,r,n,o,a,l):w&&(v<0||c!==S[v]?F(h,i,u,2):v--)}}},F=(e,t,i,r,n=null)=>{const{el:o,type:a,transition:l,children:c,shapeFlag:d}=e;if(6&d)return void F(e.component.subTree,t,i,r);if(128&d)return void e.suspense.move(t,i,r);if(64&d)return void a.move(e,t,i,Y);if(a===Dc){s(o,t,i);for(let e=0;e<c.length;e++)F(c[e],t,i,r);return void s(e.anchor,t,i)}if(a===Oc)return void b(e,t,i);const h=2!==r&&1&d&&l;if(h)if(0===r)l.beforeEnter(o),s(o,t,i),rc((()=>l.enter(o)),n);else{const{leave:e,delayLeave:r,afterLeave:n}=l,a=()=>s(o,t,i),c=()=>{e(o,(()=>{a(),n&&n()}))};r?r(o,a,c):c()}else s(o,t,i)},B=(e,t,i,s=!1,r=!1)=>{const{type:n,props:o,ref:a,children:l,dynamicChildren:c,shapeFlag:d,patchFlag:h,dirs:u,cacheIndex:p}=e;if(-2===h&&(r=!1),null!=a&&Ua(a,null,i,e,!0),null!=p&&(t.renderCache[p]=void 0),256&d)return void t.ctx.deactivate(e);const f=1&d&&u,g=!Ga(e);let m;if(g&&(m=o&&o.onVnodeBeforeUnmount)&&od(m,t,e),6&d)G(e.component,i,s);else{if(128&d)return void e.suspense.unmount(i,s);f&&wa(e,null,t,"beforeUnmount"),64&d?e.type.remove(e,t,i,Y,s):c&&!c.hasOnce&&(n!==Dc||h>0&&64&h)?H(c,t,i,!1,!0):(n===Dc&&384&h||!r&&16&d)&&H(l,t,i),s&&$(e)}(g&&(m=o&&o.onVnodeUnmounted)||f)&&rc((()=>{m&&od(m,t,e),f&&wa(e,null,t,"unmounted")}),i)},$=e=>{const{type:t,el:i,anchor:s,transition:n}=e;if(t===Dc)return void U(i,s);if(t===Oc)return void w(e);const o=()=>{r(i),n&&!n.persisted&&n.afterLeave&&n.afterLeave()};if(1&e.shapeFlag&&n&&!n.persisted){const{leave:t,delayLeave:s}=n,r=()=>t(i,o);s?s(e.el,o,r):r()}else o()},U=(e,t)=>{let i;while(e!==t)i=u(e),r(e),e=i;r(t)},G=(e,t,i)=>{const{bum:s,scope:r,job:n,subTree:o,um:a,m:l,a:c}=e;pc(l),pc(c),s&&kr(s),r.stop(),n&&(n.flags|=8,B(o,e,t,i)),a&&rc(a,t),rc((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},H=(e,t,i,s=!1,r=!1,n=0)=>{for(let o=n;o<e.length;o++)B(e[o],t,i,s,r)},j=e=>{if(6&e.shapeFlag)return j(e.component.subTree);if(128&e.shapeFlag)return e.suspense.next();const t=u(e.anchor||e.el),i=t&&t[Ea];return i?u(i):t};let z=!1;const V=(e,t,i)=>{null==e?t._vnode&&B(t._vnode,null,null,!0):g(t._vnode||null,e,t,null,null,null,i),t._vnode=e,z||(z=!0,ha(),ua(),z=!1)},Y={p:g,um:B,m:F,r:$,mt:R,mc:A,pc:M,pbc:k,n:j,o:e};let W,K;return t&&([W,K]=t(Y)),{render:V,hydrate:W,createApp:Ol(V,W)}}function ac({type:e,props:t},i){return"svg"===i&&"foreignObject"===e||"mathml"===i&&"annotation-xml"===e&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function lc({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function cc(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function dc(e,t,i=!1){const s=e.children,r=t.children;if(rr(s)&&rr(r))for(let n=0;n<s.length;n++){const e=s[n];let t=r[n];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=r[n]=sd(r[n]),t.el=e.el),i||-2===t.patchFlag||dc(e,t)),t.type===Pc&&(t.el=e.el)}}function hc(e){const t=e.slice(),i=[0];let s,r,n,o,a;const l=e.length;for(s=0;s<l;s++){const l=e[s];if(0!==l){if(r=i[i.length-1],e[r]<l){t[s]=r,i.push(s);continue}n=0,o=i.length-1;while(n<o)a=n+o>>1,e[i[a]]<l?n=a+1:o=a;l<e[i[n]]&&(n>0&&(t[s]=i[n-1]),i[n]=s)}}n=i.length,o=i[n-1];while(n-- >0)i[n]=o,o=t[o];return i}function uc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:uc(t)}function pc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const fc=Symbol.for("v-scx"),gc=()=>{{const e=Bl(fc);return e}};function mc(e,t,i){return vc(e,t,i)}function vc(e,t,i=Ks){const{immediate:s,deep:r,flush:n,once:o}=i,a=er({},i);let l;if(yd)if("sync"===n){const e=gc();l=e.__watcherHandles||(e.__watcherHandles=[])}else{if(t&&!s)return{stop:Xs,resume:Xs,pause:Xs};a.once=!0}const c=dd;a.call=(e,t,i)=>Ko(e,c,t,i);let d=!1;"post"===n?a.scheduler=e=>{rc(e,c&&c.suspense)}:"sync"!==n&&(d=!0,a.scheduler=(e,t)=>{t?e():la(e)}),a.augmentJob=e=>{t&&(e.flags|=4),d&&(e.flags|=2,c&&(e.id=c.uid,e.i=c))};const h=Vo(e,t,a);return l&&l.push(h),h}function yc(e,t,i){const s=this.proxy,r=lr(e)?e.includes(".")?bc(s,e):()=>s[e]:e.bind(s,s);let n;ar(t)?n=t:(n=t.handler,i=t);const o=fd(this),a=vc(r,n.bind(s),i);return o(),a}function bc(e,t){const i=t.split(".");return()=>{let t=e;for(let e=0;e<i.length&&t;e++)t=t[i[e]];return t}}const wc=(e,t)=>"modelValue"===t||"model-value"===t?e.modelModifiers:e[`${t}Modifiers`]||e[`${wr(t)}Modifiers`]||e[`${Tr(t)}Modifiers`];function Ec(e,t,...i){if(e.isUnmounted)return;const s=e.vnode.props||Ks;let r=i;const n=t.startsWith("update:"),o=n&&wc(s,t.slice(7));let a;o&&(o.trim&&(r=i.map((e=>lr(e)?e.trim():e))),o.number&&(r=i.map(Cr)));let l=s[a=Ar(t)]||s[a=Ar(wr(t))];!l&&n&&(l=s[a=Ar(Tr(t))]),l&&Ko(l,e,6,r);const c=s[a+"Once"];if(c){if(e.emitted){if(e.emitted[a])return}else e.emitted={};e.emitted[a]=!0,Ko(c,e,6,r)}}function Tc(e,t,i=!1){const s=t.emitsCache,r=s.get(e);if(void 0!==r)return r;const n=e.emits;let o={},a=!1;if(!ar(e)){const s=e=>{const i=Tc(e,t,!0);i&&(a=!0,er(o,i))};!i&&t.mixins.length&&t.mixins.forEach(s),e.extends&&s(e.extends),e.mixins&&e.mixins.forEach(s)}return n||a?(rr(n)?n.forEach((e=>o[e]=null)):er(o,n),dr(e)&&s.set(e,o),o):(dr(e)&&s.set(e,null),null)}function Sc(e,t){return!(!e||!Qs(t))&&(t=t.slice(2).replace(/Once$/,""),sr(e,t[0].toLowerCase()+t.slice(1))||sr(e,Tr(t))||sr(e,t))}function Ac(e){const{type:t,vnode:i,proxy:s,withProxy:r,propsOptions:[n],slots:o,attrs:a,emit:l,render:c,renderCache:d,props:h,data:u,setupState:p,ctx:f,inheritAttrs:g}=e,m=va(e);let v,y;try{if(4&i.shapeFlag){const e=r||s,t=e;v=id(c.call(t,e,d,h,p,u,f)),y=a}else{const e=t;0,v=id(e.length>1?e(h,{attrs:a,slots:o,emit:l}):e(h,null)),y=t.props?a:xc(a)}}catch(w){Nc.length=0,qo(w,e,1),v=Xc(Mc)}let b=v;if(y&&!1!==g){const e=Object.keys(y),{shapeFlag:t}=b;e.length&&7&t&&(n&&e.some(Js)&&(y=kc(y,n)),b=Jc(b,y,!1,!0))}return i.dirs&&(b=Jc(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(i.dirs):i.dirs),i.transition&&Na(b,i.transition),v=b,va(m),v}const xc=e=>{let t;for(const i in e)("class"===i||"style"===i||Qs(i))&&((t||(t={}))[i]=e[i]);return t},kc=(e,t)=>{const i={};for(const s in e)Js(s)&&s.slice(9)in t||(i[s]=e[s]);return i};function Lc(e,t,i){const{props:s,children:r,component:n}=e,{props:o,children:a,patchFlag:l}=t,c=n.emitsOptions;if(t.dirs||t.transition)return!0;if(!(i&&l>=0))return!(!r&&!a||a&&a.$stable)||s!==o&&(s?!o||Cc(s,o,c):!!o);if(1024&l)return!0;if(16&l)return s?Cc(s,o,c):!!o;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const i=e[t];if(o[i]!==s[i]&&!Sc(c,i))return!0}}return!1}function Cc(e,t,i){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let r=0;r<s.length;r++){const n=s[r];if(t[n]!==e[n]&&!Sc(i,n))return!0}return!1}function _c({vnode:e,parent:t},i){while(t){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s!==e)break;(e=t.vnode).el=i,t=t.parent}}const Rc=e=>e.__isSuspense;function Ic(e,t){t&&t.pendingBranch?rr(e)?t.effects.push(...e):t.effects.push(e):da(e)}const Dc=Symbol.for("v-fgt"),Pc=Symbol.for("v-txt"),Mc=Symbol.for("v-cmt"),Oc=Symbol.for("v-stc"),Nc=[];let Fc=null;function Bc(e=!1){Nc.push(Fc=e?null:[])}function $c(){Nc.pop(),Fc=Nc[Nc.length-1]||null}let Uc=1;function Gc(e){Uc+=e,e<0&&Fc&&(Fc.hasOnce=!0)}function Hc(e){return e.dynamicChildren=Uc>0?Fc||qs:null,$c(),Uc>0&&Fc&&Fc.push(e),e}function jc(e,t,i,s,r,n){return Hc(qc(e,t,i,s,r,n,!0))}function zc(e,t,i,s,r){return Hc(Xc(e,t,i,s,r,!0))}function Vc(e){return!!e&&!0===e.__v_isVNode}function Yc(e,t){return e.type===t.type&&e.key===t.key}const Wc=({key:e})=>null!=e?e:null,Kc=({ref:e,ref_key:t,ref_for:i})=>("number"===typeof e&&(e=""+e),null!=e?lr(e)||_o(e)||ar(e)?{i:ga,r:e,k:t,f:!!i}:e:null);function qc(e,t=null,i=null,s=0,r=null,n=(e===Dc?0:1),o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Wc(t),ref:t&&Kc(t),scopeId:ma,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:ga};return a?(rd(l,i),128&n&&e.normalize(l)):i&&(l.shapeFlag|=lr(i)?8:16),Uc>0&&!o&&Fc&&(l.patchFlag>0||6&n)&&32!==l.patchFlag&&Fc.push(l),l}const Xc=Zc;function Zc(e,t=null,i=null,s=0,r=null,n=!1){if(e&&e!==ll||(e=Mc),Vc(e)){const s=Jc(e,t,!0);return i&&rd(s,i),Uc>0&&!n&&Fc&&(6&s.shapeFlag?Fc[Fc.indexOf(e)]=s:Fc.push(s)),s.patchFlag=-2,s}if(Ld(e)&&(e=e.__vccOpts),t){t=Qc(t);let{class:e,style:i}=t;e&&!lr(e)&&(t.class=Fr(e)),dr(i)&&(Ao(i)&&!rr(i)&&(i=er({},i)),t.style=Dr(i))}const o=lr(e)?1:Rc(e)?128:Ta(e)?64:dr(e)?4:ar(e)?2:0;return qc(e,t,i,s,r,o,n,!0)}function Qc(e){return e?Ao(e)||Hl(e)?er({},e):e:null}function Jc(e,t,i=!1,s=!1){const{props:r,ref:n,patchFlag:o,children:a,transition:l}=e,c=t?nd(r||{},t):r,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Wc(c),ref:t&&t.ref?i&&n?rr(n)?n.concat(Kc(t)):[n,Kc(t)]:Kc(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Dc?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Jc(e.ssContent),ssFallback:e.ssFallback&&Jc(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&Na(d,l.clone(d)),d}function ed(e=" ",t=0){return Xc(Pc,null,e,t)}function td(e="",t=!1){return t?(Bc(),zc(Mc,null,e)):Xc(Mc,null,e)}function id(e){return null==e||"boolean"===typeof e?Xc(Mc):rr(e)?Xc(Dc,null,e.slice()):"object"===typeof e?sd(e):Xc(Pc,null,String(e))}function sd(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:Jc(e)}function rd(e,t){let i=0;const{shapeFlag:s}=e;if(null==t)t=null;else if(rr(t))i=16;else if("object"===typeof t){if(65&s){const i=t.default;return void(i&&(i._c&&(i._d=!1),rd(e,i()),i._c&&(i._d=!0)))}{i=32;const s=t._;s||Hl(t)?3===s&&ga&&(1===ga.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=ga}}else ar(t)?(t={default:t,_ctx:ga},i=32):(t=String(t),64&s?(i=16,t=[ed(t)]):i=8);e.children=t,e.shapeFlag|=i}function nd(...e){const t={};for(let i=0;i<e.length;i++){const s=e[i];for(const e in s)if("class"===e)t.class!==s.class&&(t.class=Fr([t.class,s.class]));else if("style"===e)t.style=Dr([t.style,s.style]);else if(Qs(e)){const i=t[e],r=s[e];!r||i===r||rr(i)&&i.includes(r)||(t[e]=i?[].concat(i,r):r)}else""!==e&&(t[e]=s[e])}return t}function od(e,t,i,s=null){Ko(e,t,7,[i,s])}const ad=Pl();let ld=0;function cd(e,t,i){const s=e.type,r=(t?t.appContext:e.appContext)||ad,n={uid:ld++,vnode:e,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Wr(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Kl(s,r),emitsOptions:Tc(s,r),emit:null,emitted:null,propsDefaults:Ks,inheritAttrs:s.inheritAttrs,ctx:Ks,data:Ks,props:Ks,attrs:Ks,slots:Ks,refs:Ks,setupState:Ks,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=t?t.root:n,n.emit=Ec.bind(null,n),e.ce&&e.ce(n),n}let dd=null;const hd=()=>dd||ga;let ud,pd;{const e=Ir(),t=(t,i)=>{let s;return(s=e[t])||(s=e[t]=[]),s.push(i),e=>{s.length>1?s.forEach((t=>t(e))):s[0](e)}};ud=t("__VUE_INSTANCE_SETTERS__",(e=>dd=e)),pd=t("__VUE_SSR_SETTERS__",(e=>yd=e))}const fd=e=>{const t=dd;return ud(e),e.scope.on(),()=>{e.scope.off(),ud(t)}},gd=()=>{dd&&dd.scope.off(),ud(null)};function md(e){return 4&e.vnode.shapeFlag}let vd,yd=!1;function bd(e,t=!1,i=!1){t&&pd(t);const{props:s,children:r}=e.vnode,n=md(e);jl(e,s,n,t),ic(e,r,i);const o=n?wd(e,t):void 0;return t&&pd(!1),o}function wd(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ml);const{setup:s}=i;if(s){const i=e.setupContext=s.length>1?Ad(e):null,r=fd(e);un();const n=Wo(s,e,0,[e.props,i]);if(pn(),r(),hr(n)){if(Ga(e)||$a(e),n.then(gd,gd),t)return n.then((i=>{Ed(e,i,t)})).catch((t=>{qo(t,e,0)}));e.asyncDep=n}else Ed(e,n,t)}else Td(e,t)}function Ed(e,t,i){ar(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:dr(t)&&(e.setupState=Oo(t)),Td(e,i)}function Td(e,t,i){const s=e.type;if(!e.render){if(!t&&vd&&!s.render){const t=s.template||Sl(e).template;if(t){const{isCustomElement:i,compilerOptions:r}=e.appContext.config,{delimiters:n,compilerOptions:o}=s,a=er(er({isCustomElement:i,delimiters:n},r),o);s.render=vd(t,a)}}e.render=s.render||Xs}{const t=fd(e);un();try{bl(e)}finally{pn(),t()}}}const Sd={get(e,t){return Tn(e,"get",""),e[t]}};function Ad(e){const t=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,Sd),slots:e.slots,emit:e.emit,expose:t}}function xd(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Oo(ko(e.exposed)),{get(t,i){return i in t?t[i]:i in fl?fl[i](e):void 0},has(e,t){return t in e||t in fl}})):e.proxy}function kd(e,t=!0){return ar(e)?e.displayName||e.name:e.name||t&&e.__name}function Ld(e){return ar(e)&&"__vccOpts"in e}const Cd=(e,t)=>{const i=Uo(e,t,yd);return i};function _d(e,t,i){const s=arguments.length;return 2===s?dr(t)&&!rr(t)?Vc(t)?Xc(e,null,[t]):Xc(e,t):Xc(e,null,t):(s>3?i=Array.prototype.slice.call(arguments,2):3===s&&Vc(i)&&(i=[i]),Xc(e,t,i))}const Rd="3.5.4";let Id;const Dd="undefined"!==typeof window&&window.trustedTypes;if(Dd)try{Id=Dd.createPolicy("vue",{createHTML:e=>e})}catch(N$){}const Pd=Id?e=>Id.createHTML(e):e=>e,Md="http://www.w3.org/2000/svg",Od="http://www.w3.org/1998/Math/MathML",Nd="undefined"!==typeof document?document:null,Fd=Nd&&Nd.createElement("template"),Bd={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,s)=>{const r="svg"===t?Nd.createElementNS(Md,e):"mathml"===t?Nd.createElementNS(Od,e):i?Nd.createElement(e,{is:i}):Nd.createElement(e);return"select"===e&&s&&null!=s.multiple&&r.setAttribute("multiple",s.multiple),r},createText:e=>Nd.createTextNode(e),createComment:e=>Nd.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Nd.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,s,r,n){const o=i?i.previousSibling:t.lastChild;if(r&&(r===n||r.nextSibling)){while(1)if(t.insertBefore(r.cloneNode(!0),i),r===n||!(r=r.nextSibling))break}else{Fd.innerHTML=Pd("svg"===s?`<svg>${e}</svg>`:"mathml"===s?`<math>${e}</math>`:e);const r=Fd.content;if("svg"===s||"mathml"===s){const e=r.firstChild;while(e.firstChild)r.appendChild(e.firstChild);r.removeChild(e)}t.insertBefore(r,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},$d="transition",Ud="animation",Gd=Symbol("_vtc"),Hd={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},jd=er({},La,Hd),zd=e=>(e.displayName="Transition",e.props=jd,e),Vd=zd(((e,{slots:t})=>_d(Ia,Kd(e),t))),Yd=(e,t=[])=>{rr(e)?e.forEach((e=>e(...t))):e&&e(...t)},Wd=e=>!!e&&(rr(e)?e.some((e=>e.length>1)):e.length>1);function Kd(e){const t={};for(const C in e)C in Hd||(t[C]=e[C]);if(!1===e.css)return t;const{name:i="v",type:s,duration:r,enterFromClass:n=`${i}-enter-from`,enterActiveClass:o=`${i}-enter-active`,enterToClass:a=`${i}-enter-to`,appearFromClass:l=n,appearActiveClass:c=o,appearToClass:d=a,leaveFromClass:h=`${i}-leave-from`,leaveActiveClass:u=`${i}-leave-active`,leaveToClass:p=`${i}-leave-to`}=e,f=qd(r),g=f&&f[0],m=f&&f[1],{onBeforeEnter:v,onEnter:y,onEnterCancelled:b,onLeave:w,onLeaveCancelled:E,onBeforeAppear:T=v,onAppear:S=y,onAppearCancelled:A=b}=t,x=(e,t,i)=>{Qd(e,t?d:a),Qd(e,t?c:o),i&&i()},k=(e,t)=>{e._isLeaving=!1,Qd(e,h),Qd(e,p),Qd(e,u),t&&t()},L=e=>(t,i)=>{const r=e?S:y,o=()=>x(t,e,i);Yd(r,[t,o]),Jd((()=>{Qd(t,e?l:n),Zd(t,e?d:a),Wd(r)||th(t,s,g,o)}))};return er(t,{onBeforeEnter(e){Yd(v,[e]),Zd(e,n),Zd(e,o)},onBeforeAppear(e){Yd(T,[e]),Zd(e,l),Zd(e,c)},onEnter:L(!1),onAppear:L(!0),onLeave(e,t){e._isLeaving=!0;const i=()=>k(e,t);Zd(e,h),Zd(e,u),nh(),Jd((()=>{e._isLeaving&&(Qd(e,h),Zd(e,p),Wd(w)||th(e,s,m,i))})),Yd(w,[e,i])},onEnterCancelled(e){x(e,!1),Yd(b,[e])},onAppearCancelled(e){x(e,!0),Yd(A,[e])},onLeaveCancelled(e){k(e),Yd(E,[e])}})}function qd(e){if(null==e)return null;if(dr(e))return[Xd(e.enter),Xd(e.leave)];{const t=Xd(e);return[t,t]}}function Xd(e){const t=_r(e);return t}function Zd(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e[Gd]||(e[Gd]=new Set)).add(t)}function Qd(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const i=e[Gd];i&&(i.delete(t),i.size||(e[Gd]=void 0))}function Jd(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let eh=0;function th(e,t,i,s){const r=e._endId=++eh,n=()=>{r===e._endId&&s()};if(i)return setTimeout(n,i);const{type:o,timeout:a,propCount:l}=ih(e,t);if(!o)return s();const c=o+"end";let d=0;const h=()=>{e.removeEventListener(c,u),n()},u=t=>{t.target===e&&++d>=l&&h()};setTimeout((()=>{d<l&&h()}),a+1),e.addEventListener(c,u)}function ih(e,t){const i=window.getComputedStyle(e),s=e=>(i[e]||"").split(", "),r=s(`${$d}Delay`),n=s(`${$d}Duration`),o=sh(r,n),a=s(`${Ud}Delay`),l=s(`${Ud}Duration`),c=sh(a,l);let d=null,h=0,u=0;t===$d?o>0&&(d=$d,h=o,u=n.length):t===Ud?c>0&&(d=Ud,h=c,u=l.length):(h=Math.max(o,c),d=h>0?o>c?$d:Ud:null,u=d?d===$d?n.length:l.length:0);const p=d===$d&&/\b(transform|all)(,|$)/.test(s(`${$d}Property`).toString());return{type:d,timeout:h,propCount:u,hasTransform:p}}function sh(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map(((t,i)=>rh(t)+rh(e[i]))))}function rh(e){return"auto"===e?0:1e3*Number(e.slice(0,-1).replace(",","."))}function nh(){return document.body.offsetHeight}function oh(e,t,i){const s=e[Gd];s&&(t=(t?[t,...s]:[...s]).join(" ")),null==t?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const ah=Symbol("_vod"),lh=Symbol("_vsh"),ch=Symbol(""),dh=/(^|;)\s*display\s*:/;function hh(e,t,i){const s=e.style,r=lr(i);let n=!1;if(i&&!r){if(t)if(lr(t))for(const e of t.split(";")){const t=e.slice(0,e.indexOf(":")).trim();null==i[t]&&ph(s,t,"")}else for(const e in t)null==i[e]&&ph(s,e,"");for(const e in i)"display"===e&&(n=!0),ph(s,e,i[e])}else if(r){if(t!==i){const e=s[ch];e&&(i+=";"+e),s.cssText=i,n=dh.test(i)}}else t&&e.removeAttribute("style");ah in e&&(e[ah]=n?s.display:"",e[lh]&&(s.display="none"))}const uh=/\s*!important$/;function ph(e,t,i){if(rr(i))i.forEach((i=>ph(e,t,i)));else if(null==i&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const s=mh(e,t);uh.test(i)?e.setProperty(Tr(s),i.replace(uh,""),"important"):e[s]=i}}const fh=["Webkit","Moz","ms"],gh={};function mh(e,t){const i=gh[t];if(i)return i;let s=wr(t);if("filter"!==s&&s in e)return gh[t]=s;s=Sr(s);for(let r=0;r<fh.length;r++){const i=fh[r]+s;if(i in e)return gh[t]=i}return t}const vh="http://www.w3.org/1999/xlink";function yh(e,t,i,s,r,n=$r(t)){s&&t.startsWith("xlink:")?null==i?e.removeAttributeNS(vh,t.slice(6,t.length)):e.setAttributeNS(vh,t,i):null==i||n&&!Ur(i)?e.removeAttribute(t):e.setAttribute(t,n?"":cr(i)?String(i):i)}function bh(e,t,i,s){if("innerHTML"===t||"textContent"===t)return void(null!=i&&(e[t]="innerHTML"===t?Pd(i):i));const r=e.tagName;if("value"===t&&"PROGRESS"!==r&&!r.includes("-")){const s="OPTION"===r?e.getAttribute("value")||"":e.value,n=null==i?"checkbox"===e.type?"on":"":String(i);return s===n&&"_value"in e||(e.value=n),null==i&&e.removeAttribute(t),void(e._value=i)}let n=!1;if(""===i||null==i){const s=typeof e[t];"boolean"===s?i=Ur(i):null==i&&"string"===s?(i="",n=!0):"number"===s&&(i=0,n=!0)}try{e[t]=i}catch(N$){}n&&e.removeAttribute(t)}function wh(e,t,i,s){e.addEventListener(t,i,s)}function Eh(e,t,i,s){e.removeEventListener(t,i,s)}const Th=Symbol("_vei");function Sh(e,t,i,s,r=null){const n=e[Th]||(e[Th]={}),o=n[t];if(s&&o)o.value=s;else{const[i,a]=xh(t);if(s){const o=n[t]=_h(s,r);wh(e,i,o,a)}else o&&(Eh(e,i,o,a),n[t]=void 0)}}const Ah=/(?:Once|Passive|Capture)$/;function xh(e){let t;if(Ah.test(e)){let i;t={};while(i=e.match(Ah))e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}const i=":"===e[2]?e.slice(3):Tr(e.slice(2));return[i,t]}let kh=0;const Lh=Promise.resolve(),Ch=()=>kh||(Lh.then((()=>kh=0)),kh=Date.now());function _h(e,t){const i=e=>{if(e._vts){if(e._vts<=i.attached)return}else e._vts=Date.now();Ko(Rh(e,i.value),t,5,[e])};return i.value=e,i.attached=Ch(),i}function Rh(e,t){if(rr(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}const Ih=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Dh=(e,t,i,s,r,n)=>{const o="svg"===r;"class"===t?oh(e,s,o):"style"===t?hh(e,i,s):Qs(t)?Js(t)||Sh(e,t,i,s,n):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):Ph(e,t,s,o))?(bh(e,t,s),e.tagName.includes("-")||"value"!==t&&"checked"!==t&&"selected"!==t||yh(e,t,s,o,n,"value"!==t)):("true-value"===t?e._trueValue=s:"false-value"===t&&(e._falseValue=s),yh(e,t,s,o))};function Ph(e,t,i,s){if(s)return"innerHTML"===t||"textContent"===t||!!(t in e&&Ih(t)&&ar(i));if("spellcheck"===t||"draggable"===t||"translate"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){const t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}return(!Ih(t)||!lr(i))&&(t in e||!(!e._isVueCE||!/[A-Z]/.test(t)&&lr(i)))}const Mh=new WeakMap,Oh=new WeakMap,Nh=Symbol("_moveCb"),Fh=Symbol("_enterCb"),Bh=e=>(delete e.props.mode,e),$h=Bh({name:"TransitionGroup",props:er({},jd,{tag:String,moveClass:String}),setup(e,{slots:t}){const i=hd(),s=xa();let r,n;return Qa((()=>{if(!r.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!zh(r[0].el,i.vnode.el,t))return;r.forEach(Gh),r.forEach(Hh);const s=r.filter(jh);nh(),s.forEach((e=>{const i=e.el,s=i.style;Zd(i,t),s.transform=s.webkitTransform=s.transitionDuration="";const r=i[Nh]=e=>{e&&e.target!==i||e&&!/transform$/.test(e.propertyName)||(i.removeEventListener("transitionend",r),i[Nh]=null,Qd(i,t))};i.addEventListener("transitionend",r)}))})),()=>{const o=xo(e),a=Kd(o);let l=o.tag||Dc;if(r=[],n)for(let e=0;e<n.length;e++){const t=n[e];t.el&&t.el instanceof Element&&(r.push(t),Na(t,Pa(t,a,s,i)),Mh.set(t,t.el.getBoundingClientRect()))}n=t.default?Fa(t.default()):[];for(let e=0;e<n.length;e++){const t=n[e];null!=t.key&&Na(t,Pa(t,a,s,i))}return Xc(l,null,n)}}}),Uh=$h;function Gh(e){const t=e.el;t[Nh]&&t[Nh](),t[Fh]&&t[Fh]()}function Hh(e){Oh.set(e,e.el.getBoundingClientRect())}function jh(e){const t=Mh.get(e),i=Oh.get(e),s=t.left-i.left,r=t.top-i.top;if(s||r){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${s}px,${r}px)`,t.transitionDuration="0s",e}}function zh(e,t,i){const s=e.cloneNode(),r=e[Gd];r&&r.forEach((e=>{e.split(/\s+/).forEach((e=>e&&s.classList.remove(e)))})),i.split(/\s+/).forEach((e=>e&&s.classList.add(e))),s.style.display="none";const n=1===t.nodeType?t:t.parentNode;n.appendChild(s);const{hasTransform:o}=ih(s);return n.removeChild(s),o}const Vh=er({patchProp:Dh},Bd);let Yh;function Wh(){return Yh||(Yh=nc(Vh))}const Kh=(...e)=>{const t=Wh().createApp(...e),{mount:i}=t;return t.mount=e=>{const s=Xh(e);if(!s)return;const r=t._component;ar(r)||r.render||r.template||(r.template=s.innerHTML),1===s.nodeType&&(s.textContent="");const n=i(s,!1,qh(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),n},t};function qh(e){return e instanceof SVGElement?"svg":"function"===typeof MathMLElement&&e instanceof MathMLElement?"mathml":void 0}function Xh(e){if(lr(e)){const t=document.querySelector(e);return t}return e}function Zh(e){return t=>{const i=Bl("id"),s=Ro(t);let r,n;Xa((()=>{r=Fs(i),void 0===r&&(r=Object.create({$options:{}}),Ns(r,i)),r=r.$options,n=(...e)=>s.value(...e);const t=r[e];ve(t)?r[e]=n:we(t)?r[e]=[r[e],n]:Ee(t)&&(r[e]=[...t,n])})),el((()=>{if(!r||!n)return;const t=r[e];t===n?r[e]=void 0:Ee(t)&&(r[e]=t.filter((e=>e!==n))),r=null,n=null}))}}const Qh=Zh("onShow"),Jh=Zh("onHide"),eu=Zh("onError"),tu=Zh("onUnhandledRejection"),iu=Zh("onLaunch"),su=Zh("onPageNotFound"),ru=Zh("onLoad"),nu=Zh("onPageScroll"),ou=Zh("onPullDownRefresh"),au=Zh("onPullIntercept"),lu=Zh("onReachBottom"),cu=Zh("onResize"),du=Zh("onUnload"),hu=Zh("onAddToFavorites"),uu=Zh("onOptionMenuClick"),pu=Zh("onSaveExitState"),fu=Zh("onShareAppMessage"),gu=Zh("onShareTimeline"),mu=Zh("onTitleClick"),vu=Zh("onReady"),yu=()=>xt.router,bu=Zh("onTabItemTap");var wu=Object.freeze({__proto__:null,useAddToFavorites:hu,useDidHide:Jh,useDidShow:Qh,useError:eu,useLaunch:iu,useLoad:ru,useOptionMenuClick:uu,usePageNotFound:su,usePageScroll:nu,usePullDownRefresh:ou,usePullIntercept:au,useReachBottom:lu,useReady:vu,useResize:cu,useRouter:yu,useSaveExitState:pu,useShareAppMessage:fu,useShareTimeline:gu,useTabItemTap:bu,useTitleClick:mu,useUnhandledRejection:tu,useUnload:du});const Eu={install:(e,t)=>{e.taroGlobalData=t}};function Tu(e){return e.writable=!0,e.enumerable=!0,e}function Su(e){xt.router=Object.assign({params:null===e||void 0===e?void 0:e.query},e)}function Au(){ke.tap("getLifecycle",(function(e,t){return e.$options[t]})),ke.tap("createPullDownComponent",((e,t,i,s,r)=>{const n={props:{tid:String},created(){const e=r?Us(t,{stamp:r}):t;Ns(this,e)}};return e.mixins=Ee(e.mixins)?e.mixins.push(n):[n],{render(){return i("taro-pull-to-refresh-core",{class:"hydrated"},[i(e,this.$slots.default)])}}})),ke.tap("getDOMNode",(e=>e.$el))}function xu(e,t){return function(i){var s,r,n,o;i=Lu(i)?i.__vccOpts:i;const a={props:{tid:String},created(){Ns(this,t)}};if(Ee(i.mixins)){const e=i.mixins,t=e.length-1;(null===(s=e[t].props)||void 0===s?void 0:s.tid)?i.mixins[t]=a:i.mixins.push(a)}else i.mixins=[a];const l={setup(){Fl("id",t)},render(){return this.$slots.default()}},c="div",d=Object.assign({},i),h=(null===(o=null===(n=null===(r=d.props)||void 0===r?void 0:r.option)||void 0===n?void 0:n.default)||void 0===o?void 0:o.call(n))||{};return e(l,{key:t},{default(){return[e(c,{id:t,class:"taro_page"},[e(d,{tid:t,option:h})])]}})}}function ku(e,t,i){let s,r=[];Ie(!(we(e._component)&&!Lu(e._component)),"\u5165\u53e3\u7ec4\u4ef6\u4e0d\u652f\u6301\u4f7f\u7528\u51fd\u6570\u5f0f\u7ec4\u4ef6"),Au(),e._component.render=function(){return r.slice()};const[n,o,a]=ke.call("getMiniLifecycleImpl").app,l=Object.create({mount(e,i,s){const n=xu(t,i)(e);r.push(n),this.updateAppInstance(s)},unmount(e,t){r=r.filter((t=>t.key!==e)),this.updateAppInstance(t)},updateAppInstance(e){s.$forceUpdate(),s.$nextTick(e)}},{config:Tu({configurable:!0,value:i}),[n]:Tu({value(t){var r;if(Su(t),s=e.mount(`#${i.appId||"app"}`),e["taroGlobalData"]){const t=e["taroGlobalData"],i=Object.keys(t),s=Object.getOwnPropertyDescriptors(t);i.forEach((e=>{Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get(){return t[e]},set(i){t[e]=i}})})),Object.defineProperties(this,s)}const n=null===(r=null===s||void 0===s?void 0:s.$options)||void 0===r?void 0:r.onLaunch;we(n)&&n.call(s,t)}}),[o]:Tu({value(e){var t;Su(e);const i=null===(t=null===s||void 0===s?void 0:s.$options)||void 0===t?void 0:t.onShow;we(i)&&i.call(s,e)}}),[a]:Tu({value(e){var t;const i=null===(t=null===s||void 0===s?void 0:s.$options)||void 0===t?void 0:t.onHide;we(i)&&i.call(s,e)}}),onError:Tu({value(e){var t;const i=null===(t=null===s||void 0===s?void 0:s.$options)||void 0===t?void 0:t.onError;we(i)&&i.call(s,e)}}),onUnhandledRejection:Tu({value(e){var t;const i=null===(t=null===s||void 0===s?void 0:s.$options)||void 0===t?void 0:t.onUnhandledRejection;we(i)&&i.call(s,e)}}),onPageNotFound:Tu({value(e){var t;const i=null===(t=null===s||void 0===s?void 0:s.$options)||void 0===t?void 0:t.onPageNotFound;we(i)&&i.call(s,e)}})});return xt.app=l,l}function Lu(e){return we(e)&&"__vccOpts"in e}Rt(),ke.tap("initNativeApi",(function(e){for(const t in wu)e[t]=wu[t];e.setGlobalDataPlugin=Eu})),ke.tap("proxyToRaw",(function(e){return xo(e)}));var Cu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};function _u(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}const Ru={WEAPP:"WEAPP",SWAN:"SWAN",ALIPAY:"ALIPAY",TT:"TT",QQ:"QQ",JD:"JD",WEB:"WEB",RN:"RN",HARMONY:"HARMONY",QUICKAPP:"QUICKAPP",HARMONYHYBRID:"HARMONYHYBRID"};function Iu(){return Ru.WEB}class Du{constructor(e,t,i){this.index=i||0,this.requestParams=e||{},this.interceptors=t||[]}proceed(e={}){if(this.requestParams=e,this.index>=this.interceptors.length)throw new Error("chain \u53c2\u6570\u9519\u8bef, \u8bf7\u52ff\u76f4\u63a5\u4fee\u6539 request.chain");const t=this._getNextInterceptor(),i=this._getNextChain(),s=t(i),r=s.catch((e=>Promise.reject(e)));return Object.keys(s).forEach((e=>we(s[e])&&(r[e]=s[e]))),r}_getNextInterceptor(){return this.interceptors[this.index]}_getNextChain(){return new Du(this.requestParams,this.interceptors,this.index+1)}}let Pu=class{constructor(e){this.taroInterceptor=e,this.chain=new Du}request(e){const t=this.chain,i=this.taroInterceptor;return t.interceptors=t.interceptors.filter((e=>e!==i)).concat(i),t.proceed(Object.assign({},e))}addInterceptor(e){this.chain.interceptors.push(e)}cleanInterceptors(){this.chain=new Du}};function Mu(e){return new Pu((function(t){return e(t.requestParams)}))}function Ou(e){const t=e.requestParams;let i;const s=new Promise(((s,r)=>{const n=setTimeout((()=>{clearTimeout(n),r(new Error("\u7f51\u7edc\u94fe\u63a5\u8d85\u65f6,\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01"))}),t&&t.timeout||6e4);i=e.proceed(t),i.then((e=>{n&&(clearTimeout(n),s(e))})).catch((e=>{n&&clearTimeout(n),r(e)}))}));return!ve(i)&&we(i.abort)&&(s.abort=i.abort),s}function Nu(e){const t=e.requestParams,{method:i,data:s,url:r}=t;console.log(`http ${i||"GET"} --\x3e ${r} data: `,s);const n=e.proceed(t),o=n.then((e=>(console.log(`http <-- ${r} result:`,e),e)));return we(n.abort)&&(o.abort=n.abort),o}const Fu=Object.freeze(Object.defineProperty({__proto__:null,logInterceptor:Nu,timeoutInterceptor:Ou},Symbol.toStringTag,{value:"Module"}));function Bu(e){return e}function $u(e){return function(t,i){e.preloadData=be(t)?t:{[t]:i}}}const Uu=750,Gu={640:1.17,750:1,828:.905},Hu=20,ju=5,zu="rpx";function Vu(e){return function(t){const{designWidth:i=Uu,deviceRatio:s=Gu,baseFontSize:r=Hu,targetUnit:n=zu,unitPrecision:o=ju}=t;e.config=e.config||{},e.config.designWidth=i,e.config.deviceRatio=s,e.config.baseFontSize=r,e.config.targetUnit=n,e.config.unitPrecision=o}}function Yu(e){return function(t){const i=e.config||{},s=i.baseFontSize,r=i.deviceRatio||Gu,n=((e=0)=>we(i.designWidth)?i.designWidth(e):i.designWidth||Uu)(t);if(!(n in r))throw new Error(`deviceRatio \u914d\u7f6e\u4e2d\u4e0d\u5b58\u5728 ${n} \u7684\u8bbe\u7f6e\uff01`);const o=i.targetUnit||zu,a=i.unitPrecision||ju,l=~~t;let c=1/r[n];switch(o){case"rem":c*=2*s;break;case"px":c*=2;break}let d=l/c;return a>=0&&a<=100&&(d=Number(d.toFixed(a))),d+o}}const Wu={Behavior:Bu,getEnv:Iu,ENV_TYPE:Ru,Link:Pu,interceptors:Fu,Current:xt,getCurrentInstance:kt,options:Ai,nextTick:Ys,eventCenter:wt,Events:he,getInitPxTransform:Vu,interceptorify:Mu};function Ku(e=300){const t=`\nbody {\n  /* \u9632\u6b62 iOS \u9875\u9762\u6eda\u52a8 */\n  overflow: hidden;\n}\n.taro_router > .taro_page {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #fff;\n  transform: translate(100%, 0);\n  transition: transform ${e}ms;\n  z-index: 0;\n}\n\n.taro_router > .taro_page.taro_tabbar_page,\n.taro_router > .taro_page.taro_page_show.taro_page_stationed {\n  transform: none;\n  transition: none;\n}\n\n.taro_router > .taro_page.taro_page_show {\n  transform: translate(0, 0);\n}\n`;Zu(t)}function qu(e,t,i){const s=`\n  .taro_router {\n    position: relative;\n    width: 100%;\n    height: 100%;\n  }\n\n  .taro_page {\n    width: 100%;\n    height: 100%;\n${t?"":"\n    overflow-x: hidden;\n    overflow-y: scroll;\n    max-height: 100vh;\n"}\n  }\n${e?"\n  .taro-tabbar__container > .taro-tabbar__panel {\n    overflow: hidden;\n  }\n\n  .taro-tabbar__container > .taro-tabbar__panel > .taro_page.taro_tabbar_page {\n    max-height: calc(100vh - var(--taro-tabbar-height) - constant(safe-area-inset-bottom));\n    max-height: calc(100vh - var(--taro-tabbar-height) - env(safe-area-inset-bottom));\n  }\n\n":""}\n${i?".taro_page_shade:has(+.taro_page_stationed),\n  .taro_page_shade.taro_tabbar_page,\n  .taro_router > .taro_page.taro_page_show.taro_page_stationed:not(.taro_page_shade):not(.taro_tabbar_page):not(:last-child):has(+.taro_page_stationed) {\n    display: none;\n  }":" .taro_page_shade,\n  .taro_router > .taro_page.taro_page_show.taro_page_stationed:not(.taro_page_shade):not(.taro_tabbar_page):not(:last-child) {\n    display: none;\n  }"} \n`;Zu(s)}function Xu(){const e="\n  .taro-navigation-bar-show {\n    display: flex;\n    background: white;\n    position: sticky;\n    z-index: 500;\n    top: 0;\n    padding-bottom: 8px;\n    padding-top: calc(env(safe-area-inset-top) + 8px);\n    justify-content: center;\n    align-items: center;\n  }\n\n  .taro-navigation-bar-hide {\n    display: none;\n  }\n\n  .taro-navigation-bar-title-wrap {\n    display: flex;\n    height: 24px;\n  }\n\n  .taro-navigation-bar-title-wrap > .taro-navigation-bar-loading {\n    display: none;\n    animation: loading 2s linear infinite;\n  }\n\n  .taro-navigation-bar-title-wrap .taro-navigation-bar-loading.taro-navigation-bar-loading-show {\n    display: flex;\n  }\n\n  .taro-navigation-bar-title-wrap > .taro-navigation-bar-title {\n    font-size: 24px;\n    height: 24px;\n    line-height: 24px;\n    max-width: 100px;\n    white-space: nowrap;\n    overflow: hidden;\n    line-height: 24px;\n    text-overflow: ellipsis;\n  }\n\n  @keyframes loading {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  @keyframes loading {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  .taro-navigation-bar-no-icon > .taro-navigation-bar-home {\n    display: none;\n  }\n\n  .taro-navigation-bar-no-icon > .taro-navigation-bar-back {\n    display: none;\n  }\n\n  .taro-navigation-bar-home-icon > .taro-navigation-bar-home {\n    display: flex;\n    left: 8px;\n    position: absolute;\n    width: 24px;\n    height: 24px;\n  }\n\n  .taro-navigation-bar-back-icon > .taro-navigation-bar-back {\n    display: flex;\n    left: 8px;\n    position: absolute;\n    width: 24px;\n    height: 24px;\n  }\n";Zu(e)}function Zu(e){if(!e)return;const t=document.createElement("style");t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t)}Wu.initPxTransform=Vu(Wu),Wu.preload=$u(xt),Wu.pxTransform=Yu(Wu);const Qu='\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M23.8899 12.2737C23.8232 12.3584 23.7237 12.3997 23.6198 12.3974H20.7994V23.5996C20.7994 23.8194 20.6213 24 20.4001 24H14.7994C14.5791 24 14.4002 23.8194 14.4002 23.5996V15.6H9.59963V23.5996C9.59963 23.8194 9.42075 24 9.20033 24H3.59968C3.48981 24 3.38964 23.954 3.31764 23.8811C3.24495 23.8091 3.2004 23.7087 3.2004 23.5996V12.3975H0.398546V12.3967C0.296893 12.396 0.194446 12.3544 0.11579 12.2738C-0.0371146 12.114 -0.0400714 11.864 0.11579 11.7076L11.7201 0.117284C11.8767 -0.0390948 12.1298 -0.0390948 12.2863 0.117284L23.8899 11.7076C24.0465 11.864 24.0265 12.0995 23.8899 12.2737ZM12.0029 0.964625L1.37086 11.5854L3.59968 11.5839V11.5999C3.65537 11.5999 3.70804 11.611 3.75557 11.6307C3.89952 11.692 4.00046 11.8339 4.00046 11.9996V23.1991H8.79955V15.2003C8.79955 14.9789 8.97917 14.8002 9.20033 14.8002H14.7995C15.0207 14.8002 15.2003 14.9789 15.2003 15.2003V23.1991H20.0001V11.9996C20.0001 11.8339 20.1003 11.692 20.2443 11.6307C20.2918 11.611 20.3453 11.5999 20.4001 11.5999V11.5713L22.6193 11.5691L12.0029 0.964625Z" fill="currentColor"/>\n</svg>\n',Ju='\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M17.8206 22.9016L7.45515 11.8756L17.8206 1.09845C18.0598 0.849741 18.0598 0.435233 17.8206 0.186528C17.5814 -0.0621762 17.1827 -0.0621762 16.9435 0.186528L6.1794 11.4611C5.9402 11.7098 5.9402 12.1244 6.1794 12.3731L16.9435 23.8135C17.1827 24.0622 17.5814 24.0622 17.8206 23.8135C18.0598 23.5648 18.0598 23.1503 17.8206 22.9016Z" fill="currentColor"/>\n</svg>\n',ep='\n<svg t="1709608074670" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4741" width="24" height="24"><path d="M256 529.066667H85.333333a17.066667 17.066667 0 1 1 0-34.133334h170.666667a17.066667 17.066667 0 0 1 0 34.133334z" opacity=".278" p-id="4742"></path><path d="M99.84 640a17.066667 17.066667 0 0 1-4.437333-33.553067l164.693333-44.373333a17.066667 17.066667 0 1 1 8.891733 32.9728l-164.693333 44.373333a17.544533 17.544533 0 0 1-4.4544 0.580267z" opacity=".322" p-id="4743"></path><path d="M264.533333 462.523733a16.896 16.896 0 0 1-4.369066-0.580266l-164.693334-43.52a17.0496 17.0496 0 1 1 8.721067-32.989867l164.693333 43.52a17.066667 17.066667 0 1 1-4.352 33.570133z" opacity=".239" p-id="4744"></path><path d="M384.017067 307.2a17.032533 17.032533 0 0 1-14.7968-8.533333l-85.333334-147.626667a17.066667 17.066667 0 0 1 29.559467-17.083733l85.333333 147.626666A17.066667 17.066667 0 0 1 384.017067 307.2z" opacity=".122" p-id="4745"></path><path d="M639.982933 307.2a17.0496 17.0496 0 0 1-14.762666-25.6l85.333333-147.626667a17.066667 17.066667 0 1 1 29.559467 17.066667l-85.333334 147.626667a17.032533 17.032533 0 0 1-14.7968 8.533333z" opacity=".922" p-id="4746"></path><path d="M692.906667 347.306667a17.066667 17.066667 0 0 1-12.117334-29.098667l120.337067-121.173333a17.066667 17.066667 0 1 1 24.234667 24.046933l-120.337067 121.173333a17.1008 17.1008 0 0 1-12.117333 5.051734z" opacity=".878" p-id="4747"></path><path d="M733.883733 401.066667a17.066667 17.066667 0 0 1-8.5504-31.8464l147.626667-85.333334a17.0496 17.0496 0 1 1 17.066667 29.5424l-147.626667 85.333334a16.776533 16.776533 0 0 1-8.516267 2.304z" opacity=".839" p-id="4748"></path><path d="M512 273.066667a17.066667 17.066667 0 0 1-17.066667-17.066667V85.333333a17.066667 17.066667 0 0 1 34.133334 0v170.666667a17.066667 17.066667 0 0 1-17.066667 17.066667z" p-id="4749"></path><path d="M578.577067 281.6a17.066667 17.066667 0 0 1-16.520534-21.418667l43.52-164.693333a17.066667 17.066667 0 0 1 33.006934 8.721067l-43.52 164.693333a17.066667 17.066667 0 0 1-16.4864 12.6976z" opacity=".961" p-id="4750"></path><path d="M445.44 282.453333a17.066667 17.066667 0 0 1-16.469333-12.629333l-44.373334-164.693333a17.066667 17.066667 0 0 1 32.955734-8.891734l44.373333 164.693334a17.066667 17.066667 0 0 1-16.4864 21.521066z" opacity=".078" p-id="4751"></path><path d="M924.177067 640c-1.4848 0-2.9696-0.187733-4.4544-0.580267l-164.693334-44.373333a17.066667 17.066667 0 0 1 8.874667-32.9728l164.693333 44.373333a17.066667 17.066667 0 0 1-4.420266 33.553067z" opacity=".722" p-id="4752"></path><path d="M881.476267 742.4a17.015467 17.015467 0 0 1-8.482134-2.269867l-148.48-85.333333a17.0496 17.0496 0 1 1 16.9984-29.5936l148.48 85.333333a17.0496 17.0496 0 0 1-8.516266 31.863467z" opacity=".678" p-id="4753"></path><path d="M813.226667 830.293333a17.015467 17.015467 0 0 1-12.066134-5.000533l-120.337066-120.337067a17.0496 17.0496 0 1 1 24.132266-24.132266l120.337067 120.337066a17.0496 17.0496 0 0 1-12.066133 29.1328z" opacity=".639" p-id="4754"></path><path d="M938.666667 529.066667H768a17.066667 17.066667 0 1 1 0-34.133334h170.666667a17.066667 17.066667 0 1 1 0 34.133334z" opacity=".761" p-id="4755"></path><path d="M401.066667 941.226667a17.066667 17.066667 0 0 1-16.4864-21.504l44.373333-164.693334a17.066667 17.066667 0 1 1 32.955733 8.874667l-44.373333 164.693333a17.066667 17.066667 0 0 1-16.469333 12.629334z" opacity=".478" p-id="4756"></path><path d="M298.6496 898.56a17.066667 17.066667 0 0 1-14.779733-25.565867l85.333333-148.48a17.083733 17.083733 0 0 1 29.5936 16.9984l-85.333333 148.48a17.032533 17.032533 0 0 1-14.813867 8.567467z" opacity=".439" p-id="4757"></path><path d="M512 955.733333a17.066667 17.066667 0 0 1-17.066667-17.066666V768a17.066667 17.066667 0 1 1 34.133334 0v170.666667a17.066667 17.066667 0 0 1-17.066667 17.066666z" opacity=".522" p-id="4758"></path><path d="M725.3504 898.56a17.032533 17.032533 0 0 1-14.7968-8.533333l-85.333333-147.626667a17.066667 17.066667 0 0 1 29.559466-17.066667l85.333334 147.626667a17.066667 17.066667 0 0 1-14.762667 25.6z" opacity=".6" p-id="4759"></path><path d="M622.062933 942.08c-7.509333 0-14.421333-5.0176-16.469333-12.629333l-44.3904-164.693334a17.066667 17.066667 0 1 1 32.9728-8.874666l44.3904 164.693333a17.066667 17.066667 0 0 1-16.503467 21.504z" opacity=".561" p-id="4760"></path><path d="M759.4496 463.36a17.083733 17.083733 0 0 1-4.420267-33.553067l164.693334-44.373333a17.066667 17.066667 0 0 1 8.874666 32.955733l-164.693333 44.373334a16.657067 16.657067 0 0 1-4.4544 0.597333z" opacity=".702" p-id="4761"></path><path d="M330.24 347.306667a17.015467 17.015467 0 0 1-12.066133-5.000534l-120.32-120.32a17.0496 17.0496 0 1 1 24.132266-24.132266l120.32 120.32a17.0496 17.0496 0 0 1-12.066133 29.1328z" opacity=".161" p-id="4762"></path><path d="M290.116267 401.066667a17.032533 17.032533 0 0 1-8.533334-2.286934l-147.626666-85.333333a17.066667 17.066667 0 1 1 17.083733-29.5424l147.626667 85.333333a17.066667 17.066667 0 0 1-8.5504 31.829334z" opacity=".2" p-id="4763"></path><path d="M142.523733 742.4a17.066667 17.066667 0 0 1-8.567466-31.8464l147.626666-85.333333a17.066667 17.066667 0 1 1 17.083734 29.559466l-147.626667 85.333334a16.930133 16.930133 0 0 1-8.516267 2.286933z" opacity=".361" p-id="4764"></path><path d="M209.92 830.293333a17.066667 17.066667 0 0 1-12.117333-29.098666l120.32-121.173334a17.066667 17.066667 0 0 1 24.2176 24.029867l-120.32 121.1904a16.896 16.896 0 0 1-12.100267 5.051733z" opacity=".4" p-id="4765"></path></svg>\n';function tp(e,t){if("multi"===e.router.mode)return;const i=document.createElement("div");i.classList.add("taro-navigation-bar-no-icon");const s=document.createElement("div");s.classList.add("taro-navigation-bar-back");const r=document.createElement("div");r.classList.add("taro-navigation-bar-home"),s.innerHTML=Ju,r.innerHTML=Qu;const n=document.createElement("div");n.classList.add("taro-navigation-bar-title-wrap");const o=document.createElement("div");o.classList.add("taro-navigation-bar-loading"),o.innerHTML=ep;const a=document.createElement("div");a.classList.add("taro-navigation-bar-title"),n.appendChild(o),n.appendChild(a),i.appendChild(r),i.appendChild(s),i.appendChild(n),i.id="taro-navigation-bar",t.prepend(i),Xu()}const ip={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let sp,rp,np,op=!1,ap=!1,lp=!1,cp=!1,dp=null,hp=!1;const up=(e,t="")=>()=>{},pp="http://www.w3.org/1999/xlink",fp={},gp="http://www.w3.org/2000/svg",mp="http://www.w3.org/1999/xhtml",vp=e=>null!=e,yp=e=>(e=typeof e,"object"===e||"function"===e);function bp(e){var t,i,s;return null!==(s=null===(i=null===(t=e.head)||void 0===t?void 0:t.querySelector('meta[name="csp-nonce"]'))||void 0===i?void 0:i.getAttribute("content"))&&void 0!==s?s:void 0}const wp=(e,t,...i)=>{let s=null,r=null,n=null,o=!1,a=!1;const l=[],c=t=>{for(let i=0;i<t.length;i++)s=t[i],Array.isArray(s)?c(s):null!=s&&"boolean"!==typeof s&&((o="function"!==typeof e&&!yp(s))&&(s=String(s)),o&&a?l[l.length-1].$text$+=s:l.push(o?Ep(null,s):s),a=o)};if(c(i),t){t.key&&(r=t.key),t.name&&(n=t.name);{const e=t.className||t.class;e&&(t.class="object"!==typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}}if("function"===typeof e)return e(null===t?{}:t,l,Ap);const d=Ep(e,null);return d.$attrs$=t,l.length>0&&(d.$children$=l),d.$key$=r,d.$name$=n,d},Ep=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return i},Tp={},Sp=e=>e&&e.$tag$===Tp,Ap={forEach:(e,t)=>e.map(xp).forEach(t),map:(e,t)=>e.map(xp).map(t).map(kp)},xp=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),kp=e=>{if("function"===typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),wp(e.vtag,t,...e.vchildren||[])}const t=Ep(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Lp=e=>Rf.map((t=>t(e))).find((e=>!!e)),Cp=(e,t)=>null==e||yp(e)?e:4&t?"false"!==e&&(""===e||!!e):2&t?parseFloat(e):1&t?String(e):e,_p=e=>e,Rp=(e,t,i)=>{const s=_p(e);return{emit:e=>Ip(s,t,{bubbles:!!(4&i),composed:!!(2&i),cancelable:!!(1&i),detail:e})}},Ip=(e,t,i)=>{const s=Mf.ce(t,i);return e.dispatchEvent(s),s},Dp=new WeakMap,Pp=(e,t,i)=>{let s=_f.get(e);Ff&&i?(s=s||new CSSStyleSheet,"string"===typeof s?s=t:s.replaceSync(t)):s=t,_f.set(e,s)},Mp=(e,t,i,s)=>{var r;let n=Np(t,i);const o=_f.get(n);if(e=11===e.nodeType?e:Df,o)if("string"===typeof o){e=e.head||e;let t,i=Dp.get(e);if(i||Dp.set(e,i=new Set),!i.has(n)){{t=Df.createElement("style"),t.innerHTML=o;const i=null!==(r=Mf.$nonce$)&&void 0!==r?r:bp(Df);null!=i&&t.setAttribute("nonce",i),e.insertBefore(t,e.querySelector("link"))}i&&i.add(n)}}else e.adoptedStyleSheets.includes(o)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return n},Op=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,s=t.$flags$,r=up("attachStyles",t.$tagName$),n=Mp(i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);10&s&&(i["s-sc"]=n,i.classList.add(n+"-h"),2&s&&i.classList.add(n+"-s")),r()},Np=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),Fp=(e,t,i,s,r,n)=>{if(i!==s){let o=Lf(e,t),a=t.toLowerCase();if("class"===t){const t=e.classList,r=$p(i),n=$p(s);t.remove(...r.filter((e=>e&&!n.includes(e)))),t.add(...n.filter((e=>e&&!r.includes(e))))}else if("style"===t){for(const t in i)s&&null!=s[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in s)i&&s[t]===i[t]||(t.includes("-")?e.style.setProperty(t,s[t]):e.style[t]=s[t])}else if("key"===t);else if("ref"===t)s&&s(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const l=yp(s);if((o||l&&null!==s)&&!r)try{if(e.tagName.includes("-"))e[t]=s;else{const r=null==s?"":s;"list"===t?o=!1:null!=i&&e[t]==r||(e[t]=r)}}catch(N$){}let c=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,c=!0),null==s||!1===s?!1===s&&""!==e.getAttribute(t)||(c?e.removeAttributeNS(pp,t):e.removeAttribute(t)):(!o||4&n||r)&&!l&&(s=!0===s?"":s,c?e.setAttributeNS(pp,t,s):e.setAttribute(t,s))}else t="-"===t[2]?t.slice(3):Lf(If,a)?a.slice(2):a[2]+t.slice(3),i&&Mf.rel(e,t,i,!1),s&&Mf.ael(e,t,s,!1)}},Bp=/\s/,$p=e=>e?e.split(Bp):[],Up=(e,t,i,s)=>{const r=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,n=e&&e.$attrs$||fp,o=t.$attrs$||fp;for(s in n)s in o||Fp(r,s,n[s],void 0,i,t.$flags$);for(s in o)Fp(r,s,n[s],o[s],i,t.$flags$)},Gp=(e,t,i,s)=>{const r=t.$children$[i];let n,o,a,l=0;if(op||(lp=!0,"slot"===r.$tag$&&(sp&&s.classList.add(sp+"-s"),r.$flags$|=r.$children$?2:1)),null!==r.$text$)n=r.$elm$=Df.createTextNode(r.$text$);else if(1&r.$flags$)n=r.$elm$=Df.createTextNode("");else{if(cp||(cp="svg"===r.$tag$),n=r.$elm$=Df.createElementNS(cp?gp:mp,2&r.$flags$?"slot-fb":r.$tag$),cp&&"foreignObject"===r.$tag$&&(cp=!1),Up(null,r,cp),vp(sp)&&n["s-si"]!==sp&&n.classList.add(n["s-si"]=sp),r.$children$)for(l=0;l<r.$children$.length;++l)o=Gp(e,r,l,n),o&&n.appendChild(o);"svg"===r.$tag$?cp=!1:"foreignObject"===n.tagName&&(cp=!0)}return n["s-hn"]=np,3&r.$flags$&&(n["s-sr"]=!0,n["s-cr"]=rp,n["s-sn"]=r.$name$||"",a=e&&e.$children$&&e.$children$[i],a&&a.$tag$===r.$tag$&&e.$elm$&&Hp(e.$elm$,!1)),n},Hp=(e,t)=>{Mf.$flags$|=1;const i=e.childNodes;for(let s=i.length-1;s>=0;s--){const e=i[s];e["s-hn"]!==np&&e["s-ol"]&&(Kp(e).insertBefore(e,Wp(e)),e["s-ol"].remove(),e["s-ol"]=void 0,lp=!0),t&&Hp(e,t)}Mf.$flags$&=-2},jp=(e,t,i,s,r,n)=>{let o,a=e["s-cr"]&&e["s-cr"].parentNode||e;for(a.shadowRoot&&a.tagName===np&&(a=a.shadowRoot);r<=n;++r)s[r]&&(o=Gp(null,i,r,e),o&&(s[r].$elm$=o,a.insertBefore(o,Wp(t))))},zp=(e,t,i,s,r)=>{for(;t<=i;++t)(s=e[t])&&(r=s.$elm$,ef(s),ap=!0,r["s-ol"]?r["s-ol"].remove():Hp(r,!0),r.remove())},Vp=(e,t,i,s)=>{let r,n,o=0,a=0,l=0,c=0,d=t.length-1,h=t[0],u=t[d],p=s.length-1,f=s[0],g=s[p];while(o<=d&&a<=p)if(null==h)h=t[++o];else if(null==u)u=t[--d];else if(null==f)f=s[++a];else if(null==g)g=s[--p];else if(Yp(h,f))qp(h,f),h=t[++o],f=s[++a];else if(Yp(u,g))qp(u,g),u=t[--d],g=s[--p];else if(Yp(h,g))"slot"!==h.$tag$&&"slot"!==g.$tag$||Hp(h.$elm$.parentNode,!1),qp(h,g),e.insertBefore(h.$elm$,u.$elm$.nextSibling),h=t[++o],g=s[--p];else if(Yp(u,f))"slot"!==h.$tag$&&"slot"!==g.$tag$||Hp(u.$elm$.parentNode,!1),qp(u,f),e.insertBefore(u.$elm$,h.$elm$),u=t[--d],f=s[++a];else{for(l=-1,c=o;c<=d;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===f.$key$){l=c;break}l>=0?(n=t[l],n.$tag$!==f.$tag$?r=Gp(t&&t[a],i,l,e):(qp(n,f),t[l]=void 0,r=n.$elm$),f=s[++a]):(r=Gp(t&&t[a],i,a,e),f=s[++a]),r&&Kp(h.$elm$).insertBefore(r,Wp(h.$elm$))}o>d?jp(e,null==s[p+1]?null:s[p+1].$elm$,i,s,a,p):a>p&&zp(t,o,d)},Yp=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),Wp=e=>e&&e["s-ol"]||e,Kp=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,qp=(e,t)=>{const i=t.$elm$=e.$elm$,s=e.$children$,r=t.$children$,n=t.$tag$,o=t.$text$;let a;null===o?(cp="svg"===n||"foreignObject"!==n&&cp,"slot"===n||Up(e,t,cp),null!==s&&null!==r?Vp(i,s,t,r):null!==r?(null!==e.$text$&&(i.textContent=""),jp(i,null,t,r,0,r.length-1)):null!==s&&zp(s,0,s.length-1),cp&&"svg"===n&&(cp=!1)):(a=i["s-cr"])?a.parentNode.textContent=o:e.$text$!==o&&(i.data=o)},Xp=e=>{const t=e.childNodes;let i,s,r,n,o,a;for(s=0,r=t.length;s<r;s++)if(i=t[s],1===i.nodeType){if(i["s-sr"])for(o=i["s-sn"],i.hidden=!1,n=0;n<r;n++)if(a=t[n].nodeType,t[n]["s-hn"]!==i["s-hn"]||""!==o){if(1===a&&o===t[n].getAttribute("slot")){i.hidden=!0;break}}else if(1===a||3===a&&""!==t[n].textContent.trim()){i.hidden=!0;break}Xp(i)}},Zp=[],Qp=e=>{let t,i,s,r,n,o,a=0;const l=e.childNodes,c=l.length;for(;a<c;a++){if(t=l[a],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(s=i.parentNode.childNodes,r=t["s-sn"],o=s.length-1;o>=0;o--)i=s[o],i["s-cn"]||i["s-nr"]||i["s-hn"]===t["s-hn"]||(Jp(i,r)?(n=Zp.find((e=>e.$nodeToRelocate$===i)),ap=!0,i["s-sn"]=i["s-sn"]||r,n?n.$slotRefNode$=t:Zp.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&Zp.map((e=>{Jp(e.$nodeToRelocate$,i["s-sn"])&&(n=Zp.find((e=>e.$nodeToRelocate$===i)),n&&!e.$slotRefNode$&&(e.$slotRefNode$=n.$slotRefNode$))}))):Zp.some((e=>e.$nodeToRelocate$===i))||Zp.push({$nodeToRelocate$:i}));1===t.nodeType&&Qp(t)}},Jp=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,ef=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(ef)},tf=(e,t)=>{const i=e.$hostElement$,s=e.$cmpMeta$,r=e.$vnode$||Ep(null,null),n=Sp(t)?t:wp(null,null,t);if(np=i.tagName,s.$attrsToReflect$&&(n.$attrs$=n.$attrs$||{},s.$attrsToReflect$.map((([e,t])=>n.$attrs$[t]=i[e]))),n.$tag$=null,n.$flags$|=4,e.$vnode$=n,n.$elm$=r.$elm$=i.shadowRoot||i,sp=i["s-sc"],rp=i["s-cr"],op=0!==(1&s.$flags$),ap=!1,qp(r,n),Mf.$flags$|=1,lp){let e,t,i,s,r,o;Qp(n.$elm$);let a=0;for(;a<Zp.length;a++)e=Zp[a],t=e.$nodeToRelocate$,t["s-ol"]||(i=Df.createTextNode(""),i["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=i,t));for(a=0;a<Zp.length;a++)if(e=Zp[a],t=e.$nodeToRelocate$,e.$slotRefNode$){s=e.$slotRefNode$.parentNode,r=e.$slotRefNode$.nextSibling,i=t["s-ol"];while(i=i.previousSibling)if(o=i["s-nr"],o&&o["s-sn"]===t["s-sn"]&&s===o.parentNode&&(o=o.nextSibling,!o||!o["s-nr"])){r=o;break}(!r&&s!==t.parentNode||t.nextSibling!==r)&&t!==r&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),s.insertBefore(t,r))}else 1===t.nodeType&&(t.hidden=!0)}ap&&Xp(n.$elm$),Mf.$flags$&=-2,Zp.length=0},sf=(e,t)=>{},rf=(e,t)=>{e.$flags$|=16,sf(e,e.$ancestorComponent$);const i=()=>nf(e,t);return zf(i)},nf=(e,t)=>{const i=e.$hostElement$,s=up("scheduleUpdate",e.$cmpMeta$.$tagName$),r=i;let n;return n=cf(r,t?"componentWillLoad":"componentWillUpdate"),n=df(n,(()=>cf(r,"componentWillRender"))),s(),df(n,(()=>of(e,r,t)))},of=(e,t,i)=>d(void 0,null,(function*(){const s=e.$hostElement$,r=up("update",e.$cmpMeta$.$tagName$);s["s-rc"],i&&Op(e);const n=up("render",e.$cmpMeta$.$tagName$);af(e,t,s),n(),r(),lf(e)})),af=(e,t,i)=>{const s=!1,r=!1,n=!0,o=!0;try{dp=t,t=(s||t.render)&&t.render(),o&&n&&(e.$flags$&=-17),(o||r)&&(e.$flags$|=2),(ip.hasRenderFn||ip.reflect)&&(ip.vdomRender||ip.reflect)&&(ip.hydrateServerSide||tf(e,t))}catch(N$){Cf(N$,e.$hostElement$)}return dp=null,null},lf=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,s=up("postUpdate",t),r=i;e.$ancestorComponent$,cf(r,"componentDidRender"),64&e.$flags$?(cf(r,"componentDidUpdate"),s()):(e.$flags$|=64,cf(r,"componentDidLoad"),s())},cf=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(N$){Cf(N$)}},df=(e,t)=>e&&e.then?e.then(t):t(),hf=(e,t)=>xf(e).$instanceValues$.get(t),uf=(e,t,i,s)=>{const r=xf(e),n=e,o=r.$instanceValues$.get(t),a=r.$flags$,l=n;i=Cp(i,s.$members$[t][0]);const c=Number.isNaN(o)&&Number.isNaN(i),d=i!==o&&!c;if(d){if(r.$instanceValues$.set(t,i),s.$watchers$&&128&a){const e=s.$watchers$[t];e&&e.map((e=>{try{l[e](i,o,t)}catch(N$){Cf(N$,n)}}))}if(2===(18&a)){if(l.componentShouldUpdate&&!1===l.componentShouldUpdate(i,o,t))return;rf(r,!1)}}},pf=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const i=Object.entries(t.$members$),s=e.prototype;i.map((([e,[i]])=>{(31&i||32&i)&&Object.defineProperty(s,e,{get(){return hf(this,e)},set(i){uf(this,e,i,t)},configurable:!0,enumerable:!0})}));{const r=new Map;s.attributeChangedCallback=function(e,t,i){Mf.jmp((()=>{const t=r.get(e);if(this.hasOwnProperty(t))i=this[t],delete this[t];else if(s.hasOwnProperty(t)&&"number"===typeof this[t]&&this[t]==i)return;this[t]=(null!==i||"boolean"!==typeof this[t])&&i}))},e.observedAttributes=i.filter((([e,t])=>15&t[0])).map((([e,i])=>{const s=i[1]||e;return r.set(s,e),512&i[0]&&t.$attrsToReflect$.push([e,s]),s}))}}return e},ff=(e,t,i,s,r)=>d(void 0,null,(function*(){if(0===(32&t.$flags$)&&(r=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then((()=>t.$flags$|=128)),r.style)){let s=r.style;"string"!==typeof s&&(s=s[t.$modeName$=Lp(e)]);const n=Np(i,t.$modeName$);if(!_f.has(n)){const e=up("registerStyles",i.$tagName$);Pp(n,s,!!(1&i.$flags$)),e()}}t.$ancestorComponent$;const s=()=>rf(t,!0);s()})),gf=e=>{},mf=e=>{if(0===(1&Mf.$flags$)){const t=xf(e),i=t.$cmpMeta$,s=up("connectedCallback",i.$tagName$);1&t.$flags$?(wf(e,t,i.$listeners$),gf(t.$lazyInstance$)):(t.$flags$|=1,12&i.$flags$&&vf(e),i.$members$&&Object.entries(i.$members$).map((([t,[i]])=>{if(31&i&&e.hasOwnProperty(t)){const i=e[t];delete e[t],e[t]=i}})),ff(e,t,i)),s()}},vf=e=>{const t=e["s-cr"]=Df.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},yf=e=>{if(0===(1&Mf.$flags$)){const t=xf(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}},bf=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};i.$members$=t[2],i.$listeners$=t[3],i.$watchers$=e.$watchers$,i.$attrsToReflect$=[];const s=e.prototype.connectedCallback,r=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){kf(this,i)},connectedCallback(){mf(this),s&&s.call(this)},disconnectedCallback(){yf(this),r&&r.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(16&i.$flags$)})}}),e.is=i.$tagName$,pf(e,i)},wf=(e,t,i,s)=>{i&&i.map((([i,s,r])=>{const n=Tf(e,i),o=Ef(t,r),a=Sf(i);Mf.ael(n,s,o,a),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>Mf.rel(n,s,o,a)))}))},Ef=(e,t)=>i=>{try{ip.lazyLoad||e.$hostElement$[t](i)}catch(N$){Cf(N$)}},Tf=(e,t)=>4&t?Df:8&t?If:16&t?Df.body:e,Sf=e=>Of?{passive:0!==(1&e),capture:0!==(2&e)}:0!==(2&e),Af=new WeakMap,xf=e=>Af.get(e),kf=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return wf(e,i,t.$listeners$),Af.set(e,i)},Lf=(e,t)=>t in e,Cf=(e,t)=>(0,console.error)(e,t),_f=new Map,Rf=[],If="undefined"!==typeof window?window:{},Df=If.document||{head:{}},Pf=If.HTMLElement||class{},Mf={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,s)=>e.addEventListener(t,i,s),rel:(e,t,i,s)=>e.removeEventListener(t,i,s),ce:(e,t)=>new CustomEvent(e,t)},Of=(()=>{let e=!1;try{Df.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(N$){}return e})(),Nf=e=>Promise.resolve(e),Ff=(()=>{try{return new CSSStyleSheet,"function"===typeof(new CSSStyleSheet).replaceSync}catch(N$){}return!1})(),Bf=[],$f=[],Uf=(e,t)=>i=>{e.push(i),hp||(hp=!0,t&&4&Mf.$flags$?jf(Hf):Mf.raf(Hf))},Gf=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(N$){Cf(N$)}e.length=0},Hf=()=>{Gf(Bf),Gf($f),(hp=Bf.length>0)&&Mf.raf(Hf)},jf=e=>Nf().then(e),zf=Uf($f,!0);function Vf(e="",t={}){console.error(`H5 \u6682\u4e0d\u652f\u6301 ${e} \u7ec4\u4ef6\uff01`),PL.eventCenter.trigger("__taroNotSupport",{name:e,instance:t,type:"component",category:"temporarily"})}function Yf(e){var t;null===(t=null===e||void 0===e?void 0:e.childNodes)||void 0===t||t.forEach((e=>{e.nodeType===document.COMMENT_NODE&&e["s-cn"]&&(e["s-cn"]=!1),e.nodeType!==document.COMMENT_NODE&&e["s-sr"]&&(e["s-sr"]=!1)}))}const Wf=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("Ad",this)}render(){return wp(Tp,null)}},[0,"taro-ad-core"]);function Kf(){if("undefined"===typeof customElements)return;const e=["taro-ad-core"];e.forEach((e=>{switch(e){case"taro-ad-core":customElements.get(e)||customElements.define(e,Wf);break}}))}const qf=Kf,Xf=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("AdCustom",this)}render(){return wp(Tp,null)}},[0,"taro-ad-custom-core"]);function Zf(){if("undefined"===typeof customElements)return;const e=["taro-ad-custom-core"];e.forEach((e=>{switch(e){case"taro-ad-custom-core":customElements.get(e)||customElements.define(e,Xf);break}}))}const Qf=Zf,Jf=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("AnimationVideo",this)}render(){return wp(Tp,null)}},[0,"taro-animation-video-core"]);function eg(){if("undefined"===typeof customElements)return;const e=["taro-animation-video-core"];e.forEach((e=>{switch(e){case"taro-animation-video-core":customElements.get(e)||customElements.define(e,Jf);break}}))}const tg=eg,ig=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("AnimationView",this)}render(){return wp(Tp,null)}},[0,"taro-animation-view-core"]);function sg(){if("undefined"===typeof customElements)return;const e=["taro-animation-view-core"];e.forEach((e=>{switch(e){case"taro-animation-view-core":customElements.get(e)||customElements.define(e,ig);break}}))}const rg=sg,ng=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("ArCamera",this)}render(){return wp(Tp,null)}},[0,"taro-ar-camera-core"]);function og(){if("undefined"===typeof customElements)return;const e=["taro-ar-camera-core"];e.forEach((e=>{switch(e){case"taro-ar-camera-core":customElements.get(e)||customElements.define(e,ng);break}}))}const ag=og,lg="audio{outline:none;max-width:100%}",cg=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onError=Rp(this,"error",7),this.onPlay=Rp(this,"play",7),this.onPause=Rp(this,"pause",7),this.onTimeUpdate=Rp(this,"timeupdate",7),this.onEnded=Rp(this,"ended",7),this.src=void 0,this.controls=!0,this.autoplay=!1,this.loop=!1,this.muted=!1,this.nativeProps={}}bindevent(){this.audio.addEventListener("timeupdate",(e=>{this.onTimeUpdate.emit({duration:e.srcElement.duration,currentTime:e.srcElement.duration})})),this.audio.addEventListener("ended",(()=>{this.onEnded.emit()})),this.audio.addEventListener("play",(()=>{this.onPlay.emit()})),this.audio.addEventListener("pause",(e=>{this.onPause.emit(e)})),this.audio.addEventListener("error",(e=>{var t;this.onError.emit({errMsg:null===(t=e.srcElement.error)||void 0===t?void 0:t.code})}))}componentDidLoad(){this.bindevent()}render(){const{src:e,controls:t,autoplay:i,loop:s,muted:r,nativeProps:n}=this;return wp("audio",Object.assign({src:e,controls:t,autoplay:i,loop:s,muted:r,ref:e=>{this.audio=e}},n))}static get style(){return lg}},[0,"taro-audio-core",{src:[1],controls:[4],autoplay:[4],loop:[4],muted:[4],nativeProps:[16]}]);function dg(){if("undefined"===typeof customElements)return;const e=["taro-audio-core"];e.forEach((e=>{switch(e){case"taro-audio-core":customElements.get(e)||customElements.define(e,cg);break}}))}const hg=dg,ug=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("AwemeData",this)}render(){return wp(Tp,null)}},[0,"taro-aweme-data-core"]);function pg(){if("undefined"===typeof customElements)return;const e=["taro-aweme-data-core"];e.forEach((e=>{switch(e){case"taro-aweme-data-core":customElements.get(e)||customElements.define(e,ug);break}}))}const fg=pg;function gg(e,t,i){return i={path:t,exports:{},require:function(e,t){return mg()}},e(i,i.exports),i.exports}function mg(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var vg=gg((function(e){(function(){var t={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var i=arguments[t];i&&(e=r(e,s(i)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var s="";for(var n in e)t.call(e,n)&&e[n]&&(s=r(s,n));return s}function r(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):window.classNames=i})()}));const yg=".weui-loading{vertical-align:middle;background:url(\"data:image/svg+xml;charset=utf8, %3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 100 100'%3E%3Cpath fill='none' d='M0 0h100v100H0z'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23E9E9E9' rx='5' ry='5' transform='translate(0 -30)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23989697' rx='5' ry='5' transform='rotate(30 105.98 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%239B999A' rx='5' ry='5' transform='rotate(60 75.98 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23A3A1A2' rx='5' ry='5' transform='rotate(90 65 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23ABA9AA' rx='5' ry='5' transform='rotate(120 58.66 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23B2B2B2' rx='5' ry='5' transform='rotate(150 54.02 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23BAB8B9' rx='5' ry='5' transform='rotate(180 50 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23C2C0C1' rx='5' ry='5' transform='rotate(-150 45.98 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23CBCBCB' rx='5' ry='5' transform='rotate(-120 41.34 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23D2D2D2' rx='5' ry='5' transform='rotate(-90 35 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23DADADA' rx='5' ry='5' transform='rotate(-60 24.02 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23E2E2E2' rx='5' ry='5' transform='rotate(-30 -5.98 65)'/%3E%3C/svg%3E\") 0 0/100% no-repeat;width:20px;height:20px;-webkit-animation:1s steps(12,end) infinite weuiLoading;animation:1s steps(12,end) infinite weuiLoading;display:inline-block}@-webkit-keyframes weuiLoading{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes weuiLoading{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.weui-btn_loading .weui-loading{margin:-.2em .34em 0 0}.weui-btn_loading.weui-btn_primary,.weui-btn_loading.weui-btn_warn{color:rgba(255,255,255,.6)}.weui-btn_loading.weui-btn_primary{background-color:#179b16}.weui-btn_loading.weui-btn_warn{background-color:#ce3c39}taro-button-core{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;text-align:center;color:#000;-webkit-tap-highlight-color:transparent;background-color:#f8f8f8;border-width:0;border-radius:5px;outline:0;width:100%;margin-left:auto;margin-right:auto;padding-left:14px;padding-right:14px;font-size:18px;line-height:2.55556;text-decoration:none;display:block;position:relative;overflow:hidden}taro-button-core:focus{outline:0}taro-button-core:not([disabled]):active{color:rgba(0,0,0,.6);background-color:#dedede}taro-button-core:after{-webkit-box-sizing:border-box;box-sizing:border-box;content:\" \";-webkit-transform-origin:0 0;transform-origin:0 0;border:1px solid rgba(0,0,0,.2);border-radius:10px;width:200%;height:200%;position:absolute;top:0;left:0;-webkit-transform:scale(.5);transform:scale(.5)}taro-button-core+taro-button-core{margin-top:15px}taro-button-core[type=default]{color:#000;background-color:#f8f8f8}taro-button-core[type=default]:not([disabled]):visited{color:#000}taro-button-core[type=default]:not([disabled]):active{color:rgba(0,0,0,.6);background-color:#dedede}taro-button-core[size=mini]{width:auto;padding:0 1.32em;font-size:13px;line-height:2.3;display:inline-block}taro-button-core[plain],taro-button-core[plain][type=default],taro-button-core[plain][type=primary]{background-color:transparent;border-width:1px}taro-button-core[disabled]{color:rgba(255,255,255,.6)}taro-button-core[disabled][type=default]{color:rgba(0,0,0,.3);background-color:#f7f7f7}taro-button-core[disabled][type=primary]{background-color:#9ed99d}taro-button-core[disabled][type=warn]{background-color:#ec8b89}taro-button-core[loading] .weui-loading{margin:-.2em .34em 0 0}taro-button-core[loading][type=primary],taro-button-core[loading][type=warn]{color:rgba(255,255,255,.6)}taro-button-core[loading][type=primary]{background-color:#179b16}taro-button-core[loading][type=warn]{background-color:#ce3c39}taro-button-core[plain][type=primary]{color:#1aad19;border:1px solid #1aad19}taro-button-core[plain][type=primary]:not([disabled]):active{color:rgba(26,173,25,.6);background-color:transparent;border-color:rgba(26,173,25,.6)}taro-button-core[plain][type=primary]:after{border-width:0}taro-button-core[plain][type=warn]{color:#e64340;border:1px solid #e64340}taro-button-core[plain][type=warn]:not([disabled]):active{color:rgba(230,67,64,.6);background-color:transparent;border-color:rgba(230,67,64,.6)}taro-button-core[plain][type=warn]:after{border-width:0}taro-button-core[plain],taro-button-core[plain][type=default]{color:#353535;border:1px solid #353535}taro-button-core[plain]:not([disabled]):active,taro-button-core[plain][type=default]:not([disabled]):active{color:rgba(53,53,53,.6);background-color:transparent;border-color:rgba(53,53,53,.6)}taro-button-core[plain]:after,taro-button-core[plain][type=default]:after{border-width:0}taro-button-core[type=primary]{color:#fff;background-color:#1aad19}taro-button-core[type=primary]:not([disabled]):visited{color:#fff}taro-button-core[type=primary]:not([disabled]):active{color:rgba(255,255,255,.6);background-color:#179b16}taro-button-core[type=warn]{color:#fff;background-color:#e64340}taro-button-core[type=warn]:not([disabled]):visited{color:#fff}taro-button-core[type=warn]:not([disabled]):active{color:rgba(255,255,255,.6);background-color:#ce3c39}taro-button-core[plain][disabled],taro-button-core[plain][disabled][type=primary]{color:rgba(0,0,0,.3);background-color:#f7f7f7;border:1px solid rgba(0,0,0,.2)}",bg=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onSubmit=Rp(this,"tarobuttonsubmit",7),this.onReset=Rp(this,"tarobuttonreset",7),this.disabled=void 0,this.hoverClass="button-hover",this.type="",this.hoverStartTime=20,this.hoverStayTime=70,this.size=void 0,this.plain=void 0,this.loading=!1,this.formType=null,this.hover=!1,this.touch=!1}onClick(e){this.disabled&&e.stopPropagation()}onTouchStart(){this.disabled||(this.touch=!0,this.hoverClass&&!this.disabled&&setTimeout((()=>{this.touch&&(this.hover=!0)}),this.hoverStartTime))}onTouchEnd(){this.disabled||(this.touch=!1,this.hoverClass&&!this.disabled&&setTimeout((()=>{this.touch||(this.hover=!1)}),this.hoverStayTime),"submit"===this.formType?this.onSubmit.emit():"reset"===this.formType&&this.onReset.emit())}render(){const{disabled:e,hoverClass:t,type:i,size:s,plain:r,loading:n,hover:o}=this,a=vg({[`${t}`]:o&&!e});return wp(Tp,{class:a,type:i,plain:r,loading:n,size:s,disabled:e},n&&wp("i",{class:"weui-loading"}),wp("slot",null))}get el(){return this}static get style(){return yg}},[4,"taro-button-core",{disabled:[4],hoverClass:[1,"hover-class"],type:[1],hoverStartTime:[2,"hover-start-time"],hoverStayTime:[2,"hover-stay-time"],size:[1],plain:[4],loading:[4],formType:[513,"form-type"],hover:[32],touch:[32]},[[0,"click","onClick"],[1,"touchstart","onTouchStart"],[1,"touchend","onTouchEnd"]]]);function wg(){if("undefined"===typeof customElements)return;const e=["taro-button-core"];e.forEach((e=>{switch(e){case"taro-button-core":customElements.get(e)||customElements.define(e,bg);break}}))}const Eg=wg,Tg=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("Camera",this)}render(){return wp(Tp,null)}},[0,"taro-camera-core"]);function Sg(){if("undefined"===typeof customElements)return;const e=["taro-camera-core"];e.forEach((e=>{switch(e){case"taro-camera-core":customElements.get(e)||customElements.define(e,Tg);break}}))}const Ag=Sg,xg="taro-canvas-core{width:300px;height:150px;display:block;position:relative}",kg=500,Lg=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onLongTap=Rp(this,"longtap",7),this.onTouchStart=()=>{this.timer=setTimeout((()=>{this.onLongTap.emit()}),kg)},this.onTouchMove=()=>{clearTimeout(this.timer)},this.onTouchEnd=()=>{clearTimeout(this.timer)},this.canvasId=void 0,this.height=void 0,this.width=void 0,this.nativeProps={}}componentDidRender(){const[e]=this.el.children;if(!this.height||!this.width){let t=window.getComputedStyle(e);this.height||(this.height=t.height),this.width||(this.width=t.width)}e.height=parseInt(this.height),e.width=parseInt(this.width)}render(){const{canvasId:e,nativeProps:t}=this;return wp("canvas",Object.assign({"canvas-id":e,style:{width:"100%",height:"100%"},onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchCancel:this.onTouchEnd,onTouchEnd:this.onTouchEnd},t))}get el(){return this}static get style(){return xg}},[0,"taro-canvas-core",{canvasId:[1,"id"],height:[1537],width:[1537],nativeProps:[16]}]);function Cg(){if("undefined"===typeof customElements)return;const e=["taro-canvas-core"];e.forEach((e=>{switch(e){case"taro-canvas-core":customElements.get(e)||customElements.define(e,Lg);break}}))}const _g=Cg,Rg=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("ChannelLive",this)}render(){return wp(Tp,null)}},[0,"taro-channel-live-core"]);function Ig(){if("undefined"===typeof customElements)return;const e=["taro-channel-live-core"];e.forEach((e=>{switch(e){case"taro-channel-live-core":customElements.get(e)||customElements.define(e,Rg);break}}))}const Dg=Ig,Pg=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("ChannelVideo",this)}render(){return wp(Tp,null)}},[0,"taro-channel-video-core"]);function Mg(){if("undefined"===typeof customElements)return;const e=["taro-channel-video-core"];e.forEach((e=>{switch(e){case"taro-channel-video-core":customElements.get(e)||customElements.define(e,Pg);break}}))}const Og=Mg,Ng='page,body{--weui-cellMarginLR:16px;--weui-cellPaddingLR:16px}.weui-cells__group{border:0}.weui-cells__group:first-child{margin-top:0}.weui-cells__group_form{margin-top:24px}.weui-cells__group_form .weui-cells{margin-left:var(--weui-cellMarginLR);margin-right:var(--weui-cellMarginLR)}.weui-cells__group_form .weui-cells:before,.weui-cells__group_form .weui-cells:after{left:var(--weui-cellPaddingLR);right:var(--weui-cellPaddingLR)}.weui-cells__group_form .weui-cell{padding:16px var(--weui-cellPaddingLR)}.weui-cells__group_form .weui-cell:before{left:var(--weui-cellPaddingLR);right:var(--weui-cellPaddingLR)}.weui-cells__group_form .weui-cell:not(.weui-cell_vertical) .weui-cell__hd{padding-right:16px}.weui-cells__group_form .weui-cell:not(.weui-cell_vertical) .weui-cell__ft{padding-left:16px}.weui-cells__group_form .weui-cells__title{margin-top:24px;margin-bottom:8px;padding:0 32px}.weui-cells__group_form:first-child .weui-cells__title{margin-top:0}.weui-cells__group_form .weui-cells__tips{padding:0 calc(var(--weui-cellMarginLR) + var(--weui-cellPaddingLR));color:var(--weui-FG-2);margin-top:8px}.weui-cells__group_form .weui-cells__tips a{font-weight:700}.weui-cells__group_form .weui-cells__tips_warn{color:var(--weui-RED)}.weui-cells__group_form .weui-label{max-width:5em;margin-right:8px}.weui-cells__group_form .weui-cell_access:active:after,.weui-cells__group_form .weui-cell_active:active:after{border-radius:8px}.weui-cells__group_form .weui-cell_warn input{color:#e64340}.weui-cells__group_form .weui-icon-warn,.weui-cells__group_form .weui-cell_switch:active:after,.weui-cells__group_form .weui-cell_vcode:active:after,.weui-cells__group_form .weui-cell_readonly:active:after,.weui-cells__group_form .weui-cell_disabled:active:after{display:none}.weui-cells__group_form input,.weui-cells__group_form textarea,.weui-cells__group_form label[for]{-webkit-tap-highlight-color:transparent}.weui-cells__group_form .weui-cell_wrap{-ms-flex-align:initial;align-items:initial;padding-top:8px;padding-bottom:8px}.weui-cells__group_form .weui-cell_wrap .weui-cell__hd{padding-right:0}.weui-cells__group_form .weui-cell_wrap .weui-label{margin-top:8px}.weui-cells__group_form .weui-cell_wrap .weui-cell__bd{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex}.weui-cells__group_form .weui-cell__control{margin:8px 0 8px 16px}.weui-cells__group_form .weui-cell__control_flex{-ms-flex:1;flex:1;min-width:30vw}.weui-cells__group_form .weui-vcode-btn{color:#000;background-color:#f8f8f8;border-radius:6px;width:auto;height:auto;padding:0 12px;font-size:16px;line-height:2}.weui-cells__group_form .weui-vcode-btn:before{display:none}.weui-cells__group_form .weui-cell_vcode.weui-cell_wrap{padding-top:4px;padding-bottom:4px}.weui-cells__group_form .weui-cell_vcode.weui-cell_wrap .weui-label{margin-top:12px}.weui-cells__group_form .weui-cell_vcode.weui-cell_wrap .weui-input{min-height:1.88235em;font-size:17px}.weui-cells__group_form .weui-cells_checkbox .weui-check__label:before{left:calc(40px + var(--weui-cellPaddingLR))}.weui-cells__group_form .weui-cell_select{padding:0}.weui-cells__group_form .weui-cell_select-before .weui-cell__hd{padding-right:0}.weui-cells__group_form .weui-cell_switch{padding:12px 16px}.weui-cells__group_form-primary{margin-top:32px}.weui-cells__group_form-primary .weui-cells{background:var(--weui-BG-1);border-radius:8px;overflow:hidden}.weui-cells__group_form-primary .weui-cells:before,.weui-cells__group_form-primary .weui-cells:after{display:none}.weui-cells__group_form-primary .weui-cell_access:active:after,.weui-cells__group_form-primary .weui-cell_active:active:after{border-radius:0}.taro-checkbox{display:inline-block;position:relative}.taro-checkbox_checked{-webkit-appearance:none;-moz-appearance:none;appearance:none;vertical-align:0;color:#1aad19;background-color:#fff;border:1px solid #d1d1d1;border-radius:3px;outline:0;width:23px;height:23px;min-height:0;font-size:23px;display:inline-block;position:relative;top:5px}.taro-checkbox_checked:checked:before{vertical-align:middle;text-decoration:inherit;text-align:center;text-transform:none;font-variant:normal;font-family:weui;font-style:normal;font-weight:400;font-size:inherit;color:inherit;content:"\uea08";speak:none;display:inline-block;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-48%)scale(.73);transform:translate(-50%,-48%)scale(.73)}',Fg=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onChange=Rp(this,"checkboxchange",7),this.handleChange=e=>{e.stopPropagation(),this.onChange.emit({value:this.value})},this.name=void 0,this.value="",this.color=void 0,this.id=void 0,this.checked=!1,this.disabled=!1,this.nativeProps={},this.isWillLoadCalled=!1}watchId(e){this.isWillLoadCalled&&e&&this.inputEl.setAttribute("id",e)}componentWillLoad(){this.isWillLoadCalled=!0}componentDidRender(){this.id&&this.el.removeAttribute("id")}render(){const{checked:e,name:t,color:i,value:s,disabled:r,nativeProps:n}=this;return wp(Tp,{className:"weui-cells_checkbox"},wp("input",Object.assign({ref:e=>{e&&(this.inputEl=e,this.id&&e.setAttribute("id",this.id))},type:"checkbox",value:s,name:t,class:"taro-checkbox_checked",style:{color:i},checked:e,disabled:r,onChange:this.handleChange},n)),wp("slot",null))}get el(){return this}static get watchers(){return{id:["watchId"]}}static get style(){return Ng}},[4,"taro-checkbox-core",{name:[1],value:[1032],color:[1],id:[1025],checked:[4],disabled:[4],nativeProps:[16],isWillLoadCalled:[32]}]);function Bg(){if("undefined"===typeof customElements)return;const e=["taro-checkbox-core"];e.forEach((e=>{switch(e){case"taro-checkbox-core":customElements.get(e)||customElements.define(e,Fg);break}}))}const $g=Bg;var Ug,Gg=function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},Hg=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};const jg=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onChange=Rp(this,"change",7),this.uniqueName=Date.now().toString(36),Ug.set(this,void 0),this.name=void 0}function(e){if(e.stopPropagation(),"TARO-CHECKBOX-CORE"!==e.target.tagName)return;const t=this.el.querySelectorAll("taro-checkbox-core");Gg(this,Ug,this.getValues(t),"f"),this.onChange.emit({value:Hg(this,Ug,"f")})}componentDidLoad(){const e=this.el.querySelectorAll("taro-checkbox-core");e.forEach((e=>{e.setAttribute("name",this.name||this.uniqueName)})),Object.defineProperty(this.el,"value",{get:()=>{if(!Hg(this,Ug,"f")){const e=this.el.querySelectorAll("taro-checkbox-core");Gg(this,Ug,this.getValues(e),"f")}return Hg(this,Ug,"f")},configurable:!0})}getValues(e){return Array.from(e).filter((e=>{const t=e.querySelector("input");return null===t||void 0===t?void 0:t.checked})).map((e=>e.value))}render(){return wp(Tp,null)}get el(){return this}},[0,"taro-checkbox-group-core",{name:[8]},[[0,"checkboxchange","function"]]]);function zg(){if("undefined"===typeof customElements)return;const e=["taro-checkbox-group-core"];e.forEach((e=>{switch(e){case"taro-checkbox-group-core":customElements.get(e)||customElements.define(e,jg);break}}))}Ug=new WeakMap;const Vg=zg,Yg=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("CommentDetail",this)}render(){return wp(Tp,null)}},[0,"taro-comment-detail-core"]);function Wg(){if("undefined"===typeof customElements)return;const e=["taro-comment-detail-core"];e.forEach((e=>{switch(e){case"taro-comment-detail-core":customElements.get(e)||customElements.define(e,Yg);break}}))}const Kg=Wg,qg=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("CommentList",this)}render(){return wp(Tp,null)}},[0,"taro-comment-list-core"]);function Xg(){if("undefined"===typeof customElements)return;const e=["taro-comment-list-core"];e.forEach((e=>{switch(e){case"taro-comment-list-core":customElements.get(e)||customElements.define(e,qg);break}}))}const Zg=Xg,Qg=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("ContactButton",this)}render(){return wp(Tp,null)}},[0,"taro-contact-button-core"]);function Jg(){if("undefined"===typeof customElements)return;const e=["taro-contact-button-core"];e.forEach((e=>{switch(e){case"taro-contact-button-core":customElements.get(e)||customElements.define(e,Qg);break}}))}const em=Jg,tm="taro-cover-image-core{width:320px;height:240px;overflow:hidden}",im=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onLoad=Rp(this,"load",7),this.onError=Rp(this,"error",7),this.src=void 0,this.nativeProps={}}imageOnLoad(){const{width:e,height:t}=this.imgRef;this.onLoad.emit({width:e,height:t})}imageOnError(e){this.onError.emit(e)}render(){const{src:e,imageOnLoad:t,imageOnError:i,nativeProps:s}=this;return wp("img",Object.assign({ref:e=>this.imgRef=e,src:e,onLoad:t.bind(this),onError:i.bind(this)},s))}static get style(){return tm}},[0,"taro-cover-image-core",{src:[1],nativeProps:[16]}]);function sm(){if("undefined"===typeof customElements)return;const e=["taro-cover-image-core"];e.forEach((e=>{switch(e){case"taro-cover-image-core":customElements.get(e)||customElements.define(e,im);break}}))}const rm=sm,nm="taro-cover-view-core{display:block}",om=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onLongPress=Rp(this,"longpress",7),this.startTime=0,this.animation=void 0,this.hoverClass=void 0,this.hoverStartTime=50,this.hoverStayTime=400,this.hover=!1,this.touch=!1}onTouchStart(){this.hoverClass&&(this.touch=!0,setTimeout((()=>{this.touch&&(this.hover=!0)}),this.hoverStartTime)),this.timeoutEvent=setTimeout((()=>{this.onLongPress.emit()}),350),this.startTime=Date.now()}onTouchMove(){clearTimeout(this.timeoutEvent)}onTouchEnd(){const e=Date.now()-this.startTime;e<350&&clearTimeout(this.timeoutEvent),this.hoverClass&&(this.touch=!1,setTimeout((()=>{this.touch||(this.hover=!1)}),this.hoverStayTime))}render(){const e=vg({[`${this.hoverClass}`]:this.hover});let t={};return this.animation&&(t["animation"]=this.animation,t["data-animation"]=this.animation),wp(Tp,Object.assign({class:e},t),wp("slot",null))}static get style(){return nm}},[4,"taro-cover-view-core",{animation:[1],hoverClass:[1,"hover-class"],hoverStartTime:[2,"hover-start-time"],hoverStayTime:[2,"hover-stay-time"],hover:[32],touch:[32]},[[1,"touchstart","onTouchStart"],[1,"touchmove","onTouchMove"],[1,"touchend","onTouchEnd"]]]);function am(){if("undefined"===typeof customElements)return;const e=["taro-cover-view-core"];e.forEach((e=>{switch(e){case"taro-cover-view-core":customElements.get(e)||customElements.define(e,om);break}}))}const lm=am,cm=bf(class extends Pf{constructor(){super(),this.__registerHost()}render(){return wp(Tp,null)}},[0,"taro-custom-wrapper-core"]);function dm(){if("undefined"===typeof customElements)return;const e=["taro-custom-wrapper-core"];e.forEach((e=>{switch(e){case"taro-custom-wrapper-core":customElements.get(e)||customElements.define(e,cm);break}}))}const hm=dm,um=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("DraggableSheet",this)}render(){return wp(Tp,null)}},[0,"taro-draggable-sheet-core"]);function pm(){if("undefined"===typeof customElements)return;const e=["taro-draggable-sheet-core"];e.forEach((e=>{switch(e){case"taro-draggable-sheet-core":customElements.get(e)||customElements.define(e,um);break}}))}const fm=pm,gm=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("Editor",this)}render(){return wp(Tp,null)}},[0,"taro-editor-core"]);function mm(){if("undefined"===typeof customElements)return;const e=["taro-editor-core"];e.forEach((e=>{switch(e){case"taro-editor-core":customElements.get(e)||customElements.define(e,gm);break}}))}const vm=mm,ym=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("FollowSwan",this)}render(){return wp(Tp,null)}},[0,"taro-follow-swan-core"]);function bm(){if("undefined"===typeof customElements)return;const e=["taro-follow-swan-core"];e.forEach((e=>{switch(e){case"taro-follow-swan-core":customElements.get(e)||customElements.define(e,ym);break}}))}const wm=bm;var Em,Tm=function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},Sm=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};const Am=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onSubmit=Rp(this,"submit",7),Em.set(this,{})}onButtonSubmit(e){e.stopPropagation(),Tm(this,Em,this.getFormValue(),"f"),this.onSubmit.emit({value:Sm(this,Em,"f")})}onButtonReset(e){e.stopPropagation(),this.form.reset()}componentDidLoad(){Tm(this,Em,this.getFormValue(),"f"),Object.defineProperty(this.el,"value",{get:()=>Sm(this,Em,"f"),configurable:!0})}componentDidRender(){if(this.originalAppendChild||(this.originalAppendChild=this.el.appendChild,this.originalInsertBefore=this.el.insertBefore,this.originalReplaceChild=this.el.replaceChild,this.originalRemoveChild=this.el.removeChild),!this.form)return this.el.appendChild=this.originalAppendChild,this.el.insertBefore=this.originalInsertBefore,this.el.replaceChild=this.originalReplaceChild,void(this.el.removeChild=this.originalRemoveChild);this.el.appendChild=e=>this.form.appendChild(e),this.el.insertBefore=(e,t)=>this.form.insertBefore(e,t),this.el.replaceChild=(e,t)=>this.form.replaceChild(e,t),this.el.removeChild=e=>this.form.removeChild(e)}getFormValue(){const e=this.el,t=[],i=e.getElementsByTagName("input");for(let a=0;a<i.length;a++)t.push(i[a]);const s={},r={};t.forEach((e=>{"string"===typeof e.name&&(-1===e.className.indexOf("weui-switch")?"radio"!==e.type?"checkbox"!==e.type?s[e.name]=e.value:e.checked?r[e.name]?s[e.name].push(e.value):(r[e.name]=!0,s[e.name]=[e.value]):r[e.name]||(s[e.name]=[]):e.checked?(r[e.name]=!0,s[e.name]=e.value):r[e.name]||(s[e.name]=""):s[e.name]=e.checked)}));const n=e.getElementsByTagName("textarea"),o=[];for(let a=0;a<n.length;a++)o.push(n[a]);return o.forEach((e=>{"string"===typeof e.name&&(s[e.name]=e.value)})),s}render(){return wp("form",{ref:e=>{this.form=e}},wp("slot",null))}get el(){return this}},[4,"taro-form-core",void 0,[[0,"tarobuttonsubmit","onButtonSubmit"],[0,"tarobuttonreset","onButtonReset"]]]);function xm(){if("undefined"===typeof customElements)return;const e=["taro-form-core"];e.forEach((e=>{switch(e){case"taro-form-core":customElements.get(e)||customElements.define(e,Am);break}}))}Em=new WeakMap;const km=xm,Lm=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("FunctionalPageNavigator",this)}render(){return wp(Tp,null)}},[0,"taro-functional-page-navigator-core"]);function Cm(){if("undefined"===typeof customElements)return;const e=["taro-functional-page-navigator-core"];e.forEach((e=>{switch(e){case"taro-functional-page-navigator-core":customElements.get(e)||customElements.define(e,Lm);break}}))}const _m=Cm,Rm=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("GridBuilder",this)}render(){return wp(Tp,null)}},[0,"taro-grid-builder-core"]);function Im(){if("undefined"===typeof customElements)return;const e=["taro-grid-builder-core"];e.forEach((e=>{switch(e){case"taro-grid-builder-core":customElements.get(e)||customElements.define(e,Rm);break}}))}const Dm=Im,Pm=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("GridView",this)}render(){return wp(Tp,null)}},[0,"taro-grid-view-core"]);function Mm(){if("undefined"===typeof customElements)return;const e=["taro-grid-view-core"];e.forEach((e=>{switch(e){case"taro-grid-view-core":customElements.get(e)||customElements.define(e,Pm);break}}))}const Om=Mm,Nm='.weui-icon-circle:before{content:"\uea01"}.weui-icon-download:before{content:"\uea02"}.weui-icon-info:before{content:"\uea03"}.weui-icon-safe-success:before{content:"\uea04"}.weui-icon-safe-warn:before{content:"\uea05"}.weui-icon-success:before{content:"\uea06"}.weui-icon-success-circle:before{content:"\uea07"}.weui-icon-success-no-circle:before{content:"\uea08"}.weui-icon-waiting:before{content:"\uea09"}.weui-icon-waiting-circle:before{content:"\uea0a"}.weui-icon-warn:before{content:"\uea0b"}.weui-icon-info-circle:before{content:"\uea0c"}.weui-icon-cancel:before{content:"\uea0d"}.weui-icon-search:before{content:"\uea0e"}.weui-icon-clear:before{content:"\uea0f"}.weui-icon-back:before{content:"\uea10"}.weui-icon-delete:before{content:"\uea11"}.weui-icon-success{color:#09bb07;font-size:23px}.weui-icon-waiting{color:#10aeff;font-size:23px}.weui-icon-warn{color:#f43530;font-size:23px}.weui-icon-info{color:#10aeff;font-size:23px}.weui-icon-success-circle,.weui-icon-success-no-circle{color:#09bb07;font-size:23px}.weui-icon-waiting-circle{color:#10aeff;font-size:23px}.weui-icon-circle{color:#c9c9c9;font-size:23px}.weui-icon-download,.weui-icon-info-circle{color:#09bb07;font-size:23px}.weui-icon-safe-success{color:#09bb07}.weui-icon-safe-warn{color:#ffbe00}.weui-icon-cancel{color:#f43530;font-size:22px}.weui-icon-search,.weui-icon-clear{color:#b2b2b2;font-size:14px}.weui-icon-delete.weui-icon_gallery-delete{color:#fff;font-size:22px}.weui-icon_msg{font-size:93px}.weui-icon_msg.weui-icon-warn{color:#f76260}.weui-icon_msg-primary{font-size:93px}.weui-icon_msg-primary.weui-icon-warn{color:#ffbe00}',Fm=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.type=void 0,this.size="23",this.color=void 0}render(){const{type:e,size:t,color:i}=this,s=null===e||void 0===e?void 0:e.replace(/_/g,"-"),r=vg({[`weui-icon-${s}`]:!0}),n={"font-size":`${t}px`,color:i};return wp(Tp,{class:r,style:n})}static get style(){return Nm}},[0,"taro-icon-core",{type:[1],size:[8],color:[1]}]);function Bm(){if("undefined"===typeof customElements)return;const e=["taro-icon-core"];e.forEach((e=>{switch(e){case"taro-icon-core":customElements.get(e)||customElements.define(e,Fm);break}}))}const $m=Bm,Um='img[src=""]{opacity:0}taro-image-core{width:320px;height:240px;font-size:0;display:inline-block;position:relative;overflow:hidden}.taro-img.taro-img__widthfix{height:100%}.taro-img__mode-scaletofill{width:100%;height:100%}.taro-img__mode-aspectfit{max-width:100%;max-height:100%}.taro-img__mode-aspectfill{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.taro-img__mode-aspectfill--width{min-width:100%;height:100%}.taro-img__mode-aspectfill--height{width:100%;min-height:100%}.taro-img__mode-widthfix{width:100%}.taro-img__mode-heightfix{height:100%}.taro-img__mode-top{width:100%}.taro-img__mode-bottom{width:100%;position:absolute;bottom:0}.taro-img__mode-left{height:100%}.taro-img__mode-right{height:100%;position:absolute;right:0}.taro-img__mode-topright{position:absolute;right:0}.taro-img__mode-bottomleft{position:absolute;bottom:0}.taro-img__mode-bottomright{position:absolute;bottom:0;right:0}',Gm=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onLoad=Rp(this,"load",7),this.onError=Rp(this,"error",7),this.src=void 0,this.mode="scaleToFill",this.lazyLoad=!1,this.nativeProps={},this.aspectFillMode="width",this.didLoad=!1}componentDidLoad(){if(!this.lazyLoad)return;const e=new IntersectionObserver((t=>{t[t.length-1].isIntersecting&&(e.unobserve(this.imgRef),this.didLoad=!0)}),{rootMargin:"300px 0px"});e.observe(this.imgRef)}imageOnLoad(){const{width:e,height:t,naturalWidth:i,naturalHeight:s}=this.imgRef;this.onLoad.emit({width:e,height:t}),this.aspectFillMode=i>s?"width":"height"}imageOnError(e){this.onError.emit(e)}render(){const{src:e,lazyLoad:t=!1,aspectFillMode:i="width",imageOnLoad:s,imageOnError:r,nativeProps:n,didLoad:o}=this,a=this.mode||"scaleToFill",l=vg({"taro-img__widthfix":"widthFix"===a}),c=vg(`taro-img__mode-${a.toLowerCase().replace(/\s/g,"")}`,{[`taro-img__mode-aspectfill--${i}`]:"aspectFill"===a});return wp(Tp,{class:l},e?wp("img",Object.assign({ref:e=>this.imgRef=e,class:c,src:t&&!o?void 0:e,onLoad:s.bind(this),onError:r.bind(this)},n)):"")}static get style(){return Um}},[0,"taro-image-core",{src:[1],mode:[1],lazyLoad:[4,"lazy-load"],nativeProps:[16],aspectFillMode:[32],didLoad:[32]}]);function Hm(){if("undefined"===typeof customElements)return;const e=["taro-image-core"];e.forEach((e=>{switch(e){case"taro-image-core":customElements.get(e)||customElements.define(e,Gm);break}}))}const jm=Hm,zm=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("InlinePaymentPanel",this)}render(){return wp(Tp,null)}},[0,"taro-inline-payment-panel-core"]);function Vm(){if("undefined"===typeof customElements)return;const e=["taro-inline-payment-panel-core"];e.forEach((e=>{switch(e){case"taro-inline-payment-panel-core":customElements.get(e)||customElements.define(e,zm);break}}))}const Ym=Vm,Wm=".weui-input{-webkit-appearance:none;font-size:inherit;color:inherit;background-color:transparent;border:0;outline:0;width:100%;height:1.47059em;line-height:1.47059}.weui-input::-webkit-outer-spin-button,.weui-input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}taro-input-core{display:block}";function Km(e,t,i){if("search"===t&&(e="search"),i&&(e="password"),"undefined"===typeof e)return"text";if(!e)throw new Error("unexpected type");return"digit"===e&&(e="number"),e}function qm(e){return null!==e&&void 0!==e?e:""}const Xm=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onInput=Rp(this,"input",7),this.onPaste=Rp(this,"paste",7),this.onFocus=Rp(this,"focus",7),this.onBlur=Rp(this,"blur",7),this.onConfirm=Rp(this,"confirm",7),this.onChange=Rp(this,"change",7),this.onKeyDown=Rp(this,"keydown",7),this.isOnComposition=!1,this.isOnPaste=!1,this.onInputExcuted=!1,this.handleInput=e=>{e.stopPropagation();const{type:t,maxlength:i,confirmType:s,password:r}=this;if(!this.isOnComposition&&!this.onInputExcuted){let n=e.target.value;const o=Km(t,s,r);this.onInputExcuted=!0,"number"===o&&n&&i>-1&&i<=n.length&&(n=n.substring(0,i),e.target.value=n),this.value=n,this.onInput.emit({value:n,cursor:n.length}),this.onInputExcuted=!1}},this.handlePaste=e=>{e.stopPropagation(),this.isOnPaste=!0,this.onPaste.emit({value:e.target.value})},this.handleFocus=e=>{e.stopPropagation(),this.onInputExcuted=!1,this.onFocus.emit({value:e.target.value})},this.handleBlur=e=>{e.stopPropagation(),this.onBlur.emit({value:e.target.value})},this.handleChange=e=>{e.stopPropagation(),this.onChange.emit({value:e.target.value}),this.isOnPaste&&(this.isOnPaste=!1,this.value=e.target.value,this.onInput.emit({value:e.target.value,cursor:e.target.value.length}))},this.handleKeyDown=e=>{e.stopPropagation();const{value:t}=e.target,i=e.keyCode||e.code;this.onInputExcuted=!1,this.onKeyDown.emit({value:t,cursor:t.length,keyCode:i}),13===i&&this.onConfirm.emit({value:t})},this.handleComposition=e=>{e.stopPropagation(),e.target instanceof HTMLInputElement&&("compositionend"===e.type?(this.isOnComposition=!1,this.value=e.target.value,this.onInput.emit({value:e.target.value,cursor:e.target.value.length})):this.isOnComposition=!0)},this.handleBeforeInput=e=>{if(!e.data)return;const t=e.data&&/[0-9]/.test(e.data);"number"!==this.type||t||e.preventDefault(),"digit"!==this.type||t||("."!==e.data||"."===e.data&&e.target.value.indexOf(".")>-1)&&e.preventDefault()},this.value="",this.type=void 0,this.password=!1,this.placeholder=void 0,this.disabled=!1,this.maxlength=140,this.autoFocus=!1,this.confirmType="done",this.name=void 0,this.nativeProps={}}focus(){return d(this,null,(function*(){this.inputRef.focus()}))}watchAutoFocus(e,t){var i;!t&&e&&(null===(i=this.inputRef)||void 0===i||i.focus())}watchValue(e){const t=qm(e);this.inputRef.value!==t&&(this.inputRef.value=t)}componentDidLoad(){var e,t,i,s,r;"file"===this.type?(this.fileListener=()=>{this.onInput.emit()},null===(e=this.inputRef)||void 0===e||e.addEventListener("change",this.fileListener)):(null===(t=this.inputRef)||void 0===t||t.addEventListener("compositionstart",this.handleComposition),null===(i=this.inputRef)||void 0===i||i.addEventListener("compositionend",this.handleComposition),null===(s=this.inputRef)||void 0===s||s.addEventListener("beforeinput",this.handleBeforeInput),null===(r=this.inputRef)||void 0===r||r.addEventListener("textInput",this.handleBeforeInput))}disconnectedCallback(){var e,t,i,s,r;"file"===this.type?null===(e=this.inputRef)||void 0===e||e.removeEventListener("change",this.fileListener):(null===(t=this.inputRef)||void 0===t||t.removeEventListener("compositionstart",this.handleComposition),null===(i=this.inputRef)||void 0===i||i.removeEventListener("compositionend",this.handleComposition),null===(s=this.inputRef)||void 0===s||s.removeEventListener("beforeinput",this.handleBeforeInput),null===(r=this.inputRef)||void 0===r||r.removeEventListener("textInput",this.handleBeforeInput))}render(){const{value:e,type:t,password:i,placeholder:s,autoFocus:r,disabled:n,maxlength:o,confirmType:a,name:l,nativeProps:c}=this;return wp("input",Object.assign({ref:e=>{this.inputRef=e,r&&e&&e.focus()},class:"weui-input",type:Km(t,a,i),placeholder:s,autoFocus:r,disabled:n,maxlength:o,name:l,onInput:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onPaste:this.handlePaste,onCompositionStart:this.handleComposition,onCompositionEnd:this.handleComposition},c,{value:qm(e)}))}get el(){return this}static get watchers(){return{autoFocus:["watchAutoFocus"],value:["watchValue"]}}static get style(){return Wm}},[0,"taro-input-core",{value:[1025],type:[1],password:[4],placeholder:[1],disabled:[4],maxlength:[2],autoFocus:[4,"focus"],confirmType:[1,"confirm-type"],name:[1],nativeProps:[16],focus:[64]}]);function Zm(){if("undefined"===typeof customElements)return;const e=["taro-input-core"];e.forEach((e=>{switch(e){case"taro-input-core":customElements.get(e)||customElements.define(e,Xm);break}}))}const Qm=Zm,Jm=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("KeyboardAccessory",this)}render(){return wp(Tp,null)}},[0,"taro-keyboard-accessory-core"]);function ev(){if("undefined"===typeof customElements)return;const e=["taro-keyboard-accessory-core"];e.forEach((e=>{switch(e){case"taro-keyboard-accessory-core":customElements.get(e)||customElements.define(e,Jm);break}}))}const tv=ev,iv=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.for=void 0}render(){return wp("label",{htmlFor:this.for},wp("slot",null))}},[4,"taro-label-core",{for:[1]}]);function sv(){if("undefined"===typeof customElements)return;const e=["taro-label-core"];e.forEach((e=>{switch(e){case"taro-label-core":customElements.get(e)||customElements.define(e,iv);break}}))}const rv=sv,nv=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("Lifestyle",this)}render(){return wp(Tp,null)}},[0,"taro-lifestyle-core"]);function ov(){if("undefined"===typeof customElements)return;const e=["taro-lifestyle-core"];e.forEach((e=>{switch(e){case"taro-lifestyle-core":customElements.get(e)||customElements.define(e,nv);break}}))}const av=ov,lv=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("Like",this)}render(){return wp(Tp,null)}},[0,"taro-like-core"]);function cv(){if("undefined"===typeof customElements)return;const e=["taro-like-core"];e.forEach((e=>{switch(e){case"taro-like-core":customElements.get(e)||customElements.define(e,lv);break}}))}const dv=cv,hv=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("ListBuilder",this)}render(){return wp(Tp,null)}},[0,"taro-list-builder-core"]);function uv(){if("undefined"===typeof customElements)return;const e=["taro-list-builder-core"];e.forEach((e=>{switch(e){case"taro-list-builder-core":customElements.get(e)||customElements.define(e,hv);break}}))}const pv=uv,fv=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("ListView",this)}render(){return wp(Tp,null)}},[0,"taro-list-view-core"]);function gv(){if("undefined"===typeof customElements)return;const e=["taro-list-view-core"];e.forEach((e=>{switch(e){case"taro-list-view-core":customElements.get(e)||customElements.define(e,fv);break}}))}const mv=gv,vv=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("LivePlayer",this)}render(){return wp(Tp,null)}},[0,"taro-live-player-core"]);function yv(){if("undefined"===typeof customElements)return;const e=["taro-live-player-core"];e.forEach((e=>{switch(e){case"taro-live-player-core":customElements.get(e)||customElements.define(e,vv);break}}))}const bv=yv,wv=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("LivePusher",this)}render(){return wp(Tp,null)}},[0,"taro-live-pusher-core"]);function Ev(){if("undefined"===typeof customElements)return;const e=["taro-live-pusher-core"];e.forEach((e=>{switch(e){case"taro-live-pusher-core":customElements.get(e)||customElements.define(e,wv);break}}))}const Tv=Ev,Sv=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("Login",this)}render(){return wp(Tp,null)}},[0,"taro-login-core"]);function Av(){if("undefined"===typeof customElements)return;const e=["taro-login-core"];e.forEach((e=>{switch(e){case"taro-login-core":customElements.get(e)||customElements.define(e,Sv);break}}))}const xv=Av,kv=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("Lottie",this)}render(){return wp(Tp,null)}},[0,"taro-lottie-core"]);function Lv(){if("undefined"===typeof customElements)return;const e=["taro-lottie-core"];e.forEach((e=>{switch(e){case"taro-lottie-core":customElements.get(e)||customElements.define(e,kv);break}}))}const Cv=Lv;var _v={exports:{}};(function(e){(function(t,i,s,r){var n,o=["","webkit","Moz","MS","ms","o"],a=i.createElement("div"),l="function",c=Math.round,d=Math.abs,h=Date.now;function u(e,t,i){return setTimeout(b(e,i),t)}function p(e,t,i){return!!Array.isArray(e)&&(f(e,i[t],i),!0)}function f(e,t,i){var s;if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==r){s=0;while(s<e.length)t.call(i,e[s],s,e),s++}else for(s in e)e.hasOwnProperty(s)&&t.call(i,e[s],s,e)}function g(e,i,s){var r="DEPRECATED METHOD: "+i+"\n"+s+" AT \n";return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",n=t.console&&(t.console.warn||t.console.log);return n&&n.call(t.console,r,s),e.apply(this,arguments)}}n="function"!==typeof Object.assign?function(e){if(e===r||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var s=arguments[i];if(s!==r&&null!==s)for(var n in s)s.hasOwnProperty(n)&&(t[n]=s[n])}return t}:Object.assign;var m=g((function(e,t,i){var s=Object.keys(t),n=0;while(n<s.length)(!i||i&&e[s[n]]===r)&&(e[s[n]]=t[s[n]]),n++;return e}),"extend","Use `assign`."),v=g((function(e,t){return m(e,t,!0)}),"merge","Use `assign`.");function y(e,t,i){var s,r=t.prototype;s=e.prototype=Object.create(r),s.constructor=e,s._super=r,i&&n(s,i)}function b(e,t){return function(){return e.apply(t,arguments)}}function w(e,t){return typeof e==l?e.apply(t&&t[0]||r,t):e}function E(e,t){return e===r?t:e}function T(e,t,i){f(k(t),(function(t){e.addEventListener(t,i,!1)}))}function S(e,t,i){f(k(t),(function(t){e.removeEventListener(t,i,!1)}))}function A(e,t){while(e){if(e==t)return!0;e=e.parentNode}return!1}function x(e,t){return e.indexOf(t)>-1}function k(e){return e.trim().split(/\s+/g)}function L(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);var s=0;while(s<e.length){if(i&&e[s][i]==t||!i&&e[s]===t)return s;s++}return-1}function C(e){return Array.prototype.slice.call(e,0)}function _(e,t,i){var s=[],r=[],n=0;while(n<e.length){var o=t?e[n][t]:e[n];L(r,o)<0&&s.push(e[n]),r[n]=o,n++}return i&&(s=t?s.sort((function(e,i){return e[t]>i[t]})):s.sort()),s}function R(e,t){var i,s,n=t[0].toUpperCase()+t.slice(1),a=0;while(a<o.length){if(i=o[a],s=i?i+n:t,s in e)return s;a++}return r}var I=1;function D(){return I++}function P(e){var i=e.ownerDocument||e;return i.defaultView||i.parentWindow||t}var M=/mobile|tablet|ip(ad|hone|od)|android/i,O="ontouchstart"in t,N=R(t,"PointerEvent")!==r,F=O&&M.test(navigator.userAgent),B="touch",$="pen",U="mouse",G="kinect",H=25,j=1,z=2,V=4,Y=8,W=1,K=2,q=4,X=8,Z=16,Q=K|q,J=X|Z,ee=Q|J,te=["x","y"],ie=["clientX","clientY"];function se(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){w(e.options.enable,[e])&&i.handler(t)},this.init()}function re(e){var t,i=e.options.inputClass;return t=i||(N?xe:F?Pe:O?Fe:we),new t(e,ne)}function ne(e,t,i){var s=i.pointers.length,r=i.changedPointers.length,n=t&j&&s-r===0,o=t&(V|Y)&&s-r===0;i.isFirst=!!n,i.isFinal=!!o,n&&(e.session={}),i.eventType=t,oe(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function oe(e,t){var i=e.session,s=t.pointers,r=s.length;i.firstInput||(i.firstInput=ce(t)),r>1&&!i.firstMultiple?i.firstMultiple=ce(t):1===r&&(i.firstMultiple=!1);var n=i.firstInput,o=i.firstMultiple,a=o?o.center:n.center,l=t.center=de(s);t.timeStamp=h(),t.deltaTime=t.timeStamp-n.timeStamp,t.angle=fe(a,l),t.distance=pe(a,l),ae(i,t),t.offsetDirection=ue(t.deltaX,t.deltaY);var c=he(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=d(c.x)>d(c.y)?c.x:c.y,t.scale=o?me(o.pointers,s):1,t.rotation=o?ge(o.pointers,s):0,t.maxPointers=i.prevInput?t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers:t.pointers.length,le(i,t);var u=e.element;A(t.srcEvent.target,u)&&(u=t.srcEvent.target),t.target=u}function ae(e,t){var i=t.center,s=e.offsetDelta||{},r=e.prevDelta||{},n=e.prevInput||{};t.eventType!==j&&n.eventType!==V||(r=e.prevDelta={x:n.deltaX||0,y:n.deltaY||0},s=e.offsetDelta={x:i.x,y:i.y}),t.deltaX=r.x+(i.x-s.x),t.deltaY=r.y+(i.y-s.y)}function le(e,t){var i,s,n,o,a=e.lastInterval||t,l=t.timeStamp-a.timeStamp;if(t.eventType!=Y&&(l>H||a.velocity===r)){var c=t.deltaX-a.deltaX,h=t.deltaY-a.deltaY,u=he(l,c,h);s=u.x,n=u.y,i=d(u.x)>d(u.y)?u.x:u.y,o=ue(c,h),e.lastInterval=t}else i=a.velocity,s=a.velocityX,n=a.velocityY,o=a.direction;t.velocity=i,t.velocityX=s,t.velocityY=n,t.direction=o}function ce(e){var t=[],i=0;while(i<e.pointers.length)t[i]={clientX:c(e.pointers[i].clientX),clientY:c(e.pointers[i].clientY)},i++;return{timeStamp:h(),pointers:t,center:de(t),deltaX:e.deltaX,deltaY:e.deltaY}}function de(e){var t=e.length;if(1===t)return{x:c(e[0].clientX),y:c(e[0].clientY)};var i=0,s=0,r=0;while(r<t)i+=e[r].clientX,s+=e[r].clientY,r++;return{x:c(i/t),y:c(s/t)}}function he(e,t,i){return{x:t/e||0,y:i/e||0}}function ue(e,t){return e===t?W:d(e)>=d(t)?e<0?K:q:t<0?X:Z}function pe(e,t,i){i||(i=te);var s=t[i[0]]-e[i[0]],r=t[i[1]]-e[i[1]];return Math.sqrt(s*s+r*r)}function fe(e,t,i){i||(i=te);var s=t[i[0]]-e[i[0]],r=t[i[1]]-e[i[1]];return 180*Math.atan2(r,s)/Math.PI}function ge(e,t){return fe(t[1],t[0],ie)+fe(e[1],e[0],ie)}function me(e,t){return pe(t[0],t[1],ie)/pe(e[0],e[1],ie)}se.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(P(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(P(this.element),this.evWin,this.domHandler)}};var ve={mousedown:j,mousemove:z,mouseup:V},ye="mousedown",be="mousemove mouseup";function we(){this.evEl=ye,this.evWin=be,this.pressed=!1,se.apply(this,arguments)}y(we,se,{handler:function(e){var t=ve[e.type];t&j&&0===e.button&&(this.pressed=!0),t&z&&1!==e.which&&(t=V),this.pressed&&(t&V&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:U,srcEvent:e}))}});var Ee={pointerdown:j,pointermove:z,pointerup:V,pointercancel:Y,pointerout:Y},Te={2:B,3:$,4:U,5:G},Se="pointerdown",Ae="pointermove pointerup pointercancel";function xe(){this.evEl=Se,this.evWin=Ae,se.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}t.MSPointerEvent&&!t.PointerEvent&&(Se="MSPointerDown",Ae="MSPointerMove MSPointerUp MSPointerCancel"),y(xe,se,{handler:function(e){var t=this.store,i=!1,s=e.type.toLowerCase().replace("ms",""),r=Ee[s],n=Te[e.pointerType]||e.pointerType,o=n==B,a=L(t,e.pointerId,"pointerId");r&j&&(0===e.button||o)?a<0&&(t.push(e),a=t.length-1):r&(V|Y)&&(i=!0),a<0||(t[a]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:n,srcEvent:e}),i&&t.splice(a,1))}});var ke={touchstart:j,touchmove:z,touchend:V,touchcancel:Y},Le="touchstart",Ce="touchstart touchmove touchend touchcancel";function _e(){this.evTarget=Le,this.evWin=Ce,this.started=!1,se.apply(this,arguments)}function Re(e,t){var i=C(e.touches),s=C(e.changedTouches);return t&(V|Y)&&(i=_(i.concat(s),"identifier",!0)),[i,s]}y(_e,se,{handler:function(e){var t=ke[e.type];if(t===j&&(this.started=!0),this.started){var i=Re.call(this,e,t);t&(V|Y)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:B,srcEvent:e})}}});var Ie={touchstart:j,touchmove:z,touchend:V,touchcancel:Y},De="touchstart touchmove touchend touchcancel";function Pe(){this.evTarget=De,this.targetIds={},se.apply(this,arguments)}function Me(e,t){var i=C(e.touches),s=this.targetIds;if(t&(j|z)&&1===i.length)return s[i[0].identifier]=!0,[i,i];var r,n,o=C(e.changedTouches),a=[],l=this.target;if(n=i.filter((function(e){return A(e.target,l)})),t===j){r=0;while(r<n.length)s[n[r].identifier]=!0,r++}r=0;while(r<o.length)s[o[r].identifier]&&a.push(o[r]),t&(V|Y)&&delete s[o[r].identifier],r++;return a.length?[_(n.concat(a),"identifier",!0),a]:void 0}y(Pe,se,{handler:function(e){var t=Ie[e.type],i=Me.call(this,e,t);i&&this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:B,srcEvent:e})}});var Oe=2500,Ne=25;function Fe(){se.apply(this,arguments);var e=b(this.handler,this);this.touch=new Pe(this.manager,e),this.mouse=new we(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Be(e,t){e&j?(this.primaryTouch=t.changedPointers[0].identifier,$e.call(this,t)):e&(V|Y)&&$e.call(this,t)}function $e(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY};this.lastTouches.push(i);var s=this.lastTouches,r=function(){var e=s.indexOf(i);e>-1&&s.splice(e,1)};setTimeout(r,Oe)}}function Ue(e){for(var t=e.srcEvent.clientX,i=e.srcEvent.clientY,s=0;s<this.lastTouches.length;s++){var r=this.lastTouches[s],n=Math.abs(t-r.x),o=Math.abs(i-r.y);if(n<=Ne&&o<=Ne)return!0}return!1}y(Fe,se,{handler:function(e,t,i){var s=i.pointerType==B,r=i.pointerType==U;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(s)Be.call(this,t,i);else if(r&&Ue.call(this,i))return;this.callback(e,t,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ge=R(a.style,"touchAction"),He=Ge!==r,je="compute",ze="auto",Ve="manipulation",Ye="none",We="pan-x",Ke="pan-y",qe=Qe();function Xe(e,t){this.manager=e,this.set(t)}function Ze(e){if(x(e,Ye))return Ye;var t=x(e,We),i=x(e,Ke);return t&&i?Ye:t||i?t?We:Ke:x(e,Ve)?Ve:ze}function Qe(){if(!He)return!1;var e={},i=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(s){e[s]=!i||t.CSS.supports("touch-action",s)})),e}Xe.prototype={set:function(e){e==je&&(e=this.compute()),He&&this.manager.element.style&&qe[e]&&(this.manager.element.style[Ge]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return f(this.manager.recognizers,(function(t){w(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),Ze(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,i=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var s=this.actions,r=x(s,Ye)&&!qe[Ye],n=x(s,Ke)&&!qe[Ke],o=x(s,We)&&!qe[We];if(r){var a=1===e.pointers.length,l=e.distance<2,c=e.deltaTime<250;if(a&&l&&c)return}if(!o||!n)return r||n&&i&Q||o&&i&J?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Je=1,et=2,tt=4,it=8,st=it,rt=16,nt=32;function ot(e){this.options=n({},this.defaults,e||{}),this.id=D(),this.manager=null,this.options.enable=E(this.options.enable,!0),this.state=Je,this.simultaneous={},this.requireFail=[]}function at(e){return e&rt?"cancel":e&it?"end":e&tt?"move":e&et?"start":""}function lt(e){return e==Z?"down":e==X?"up":e==K?"left":e==q?"right":""}function ct(e,t){var i=t.manager;return i?i.get(e):e}function dt(){ot.apply(this,arguments)}function ht(){dt.apply(this,arguments),this.pX=null,this.pY=null}function ut(){dt.apply(this,arguments)}function pt(){ot.apply(this,arguments),this._timer=null,this._input=null}function ft(){dt.apply(this,arguments)}function gt(){dt.apply(this,arguments)}function mt(){ot.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function vt(e,t){return t=t||{},t.recognizers=E(t.recognizers,vt.defaults.preset),new wt(e,t)}ot.prototype={defaults:{},set:function(e){return n(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(p(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=ct(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return p(e,"dropRecognizeWith",this)||(e=ct(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(p(e,"requireFailure",this))return this;var t=this.requireFail;return e=ct(e,this),-1===L(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(p(e,"dropRequireFailure",this))return this;e=ct(e,this);var t=L(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,i=this.state;function s(i){t.manager.emit(i,e)}i<it&&s(t.options.event+at(i)),s(t.options.event),e.additionalEvent&&s(e.additionalEvent),i>=it&&s(t.options.event+at(i))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=nt},canEmit:function(){var e=0;while(e<this.requireFail.length){if(!(this.requireFail[e].state&(nt|Je)))return!1;e++}return!0},recognize:function(e){var t=n({},e);if(!w(this.options.enable,[this,t]))return this.reset(),void(this.state=nt);this.state&(st|rt|nt)&&(this.state=Je),this.state=this.process(t),this.state&(et|tt|it|rt)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},y(dt,ot,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,s=t&(et|tt),r=this.attrTest(e);return s&&(i&Y||!r)?t|rt:s||r?i&V?t|it:t&et?t|tt:et:nt}}),y(ht,dt,{defaults:{event:"pan",threshold:10,pointers:1,direction:ee},getTouchAction:function(){var e=this.options.direction,t=[];return e&Q&&t.push(Ke),e&J&&t.push(We),t},directionTest:function(e){var t=this.options,i=!0,s=e.distance,r=e.direction,n=e.deltaX,o=e.deltaY;return r&t.direction||(t.direction&Q?(r=0===n?W:n<0?K:q,i=n!=this.pX,s=Math.abs(e.deltaX)):(r=0===o?W:o<0?X:Z,i=o!=this.pY,s=Math.abs(e.deltaY))),e.direction=r,i&&s>t.threshold&&r&t.direction},attrTest:function(e){return dt.prototype.attrTest.call(this,e)&&(this.state&et||!(this.state&et)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=lt(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),y(ut,dt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ye]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&et)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),y(pt,ot,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ze]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,s=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!s||!i||e.eventType&(V|Y)&&!r)this.reset();else if(e.eventType&j)this.reset(),this._timer=u((function(){this.state=st,this.tryEmit()}),t.time,this);else if(e.eventType&V)return st;return nt},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===st&&(e&&e.eventType&V?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}}),y(ft,dt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ye]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&et)}}),y(gt,dt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Q|J,pointers:1},getTouchAction:function(){return ht.prototype.getTouchAction.call(this)},attrTest:function(e){var t,i=this.options.direction;return i&(Q|J)?t=e.overallVelocity:i&Q?t=e.overallVelocityX:i&J&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&d(t)>this.options.velocity&&e.eventType&V},emit:function(e){var t=lt(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),y(mt,ot,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ve]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,s=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&j&&0===this.count)return this.failTimeout();if(s&&r&&i){if(e.eventType!=V)return this.failTimeout();var n=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||pe(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,o&&n?this.count+=1:this.count=1,this._input=e;var a=this.count%t.taps;if(0===a)return this.hasRequireFailures()?(this._timer=u((function(){this.state=st,this.tryEmit()}),t.interval,this),et):st}return nt},failTimeout:function(){return this._timer=u((function(){this.state=nt}),this.options.interval,this),nt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==st&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),vt.VERSION="2.0.7",vt.defaults={domEvents:!1,touchAction:je,enable:!0,inputTarget:null,inputClass:null,preset:[[ft,{enable:!1}],[ut,{enable:!1},["rotate"]],[gt,{direction:Q}],[ht,{direction:Q},["swipe"]],[mt],[mt,{event:"doubletap",taps:2},["tap"]],[pt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var yt=1,bt=2;function wt(e,t){this.options=n({},vt.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=re(this),this.touchAction=new Xe(this,this.options.touchAction),Et(this,!0),f(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function Et(e,t){var i,s=e.element;s.style&&(f(e.options.cssProps,(function(r,n){i=R(s.style,n),t?(e.oldCssProps[i]=s.style[i],s.style[i]=r):s.style[i]=e.oldCssProps[i]||""})),t||(e.oldCssProps={}))}function Tt(e,t){var s=i.createEvent("Event");s.initEvent(e,!0,!0),s.gesture=t,t.target.dispatchEvent(s)}wt.prototype={set:function(e){return n(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?bt:yt},recognize:function(e){var t=this.session;if(!t.stopped){var i;this.touchAction.preventDefaults(e);var s=this.recognizers,r=t.curRecognizer;(!r||r&&r.state&st)&&(r=t.curRecognizer=null);var n=0;while(n<s.length)i=s[n],t.stopped===bt||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(e),!r&&i.state&(et|tt|it)&&(r=t.curRecognizer=i),n++}},get:function(e){if(e instanceof ot)return e;for(var t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(p(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(p(e,"remove",this))return this;if(e=this.get(e),e){var t=this.recognizers,i=L(t,e);-1!==i&&(t.splice(i,1),this.touchAction.update())}return this},on:function(e,t){if(e!==r&&t!==r){var i=this.handlers;return f(k(e),(function(e){i[e]=i[e]||[],i[e].push(t)})),this}},off:function(e,t){if(e!==r){var i=this.handlers;return f(k(e),(function(e){t?i[e]&&i[e].splice(L(i[e],t),1):delete i[e]})),this}},emit:function(e,t){this.options.domEvents&&Tt(e,t);var i=this.handlers[e]&&this.handlers[e].slice();if(i&&i.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};var s=0;while(s<i.length)i[s](t),s++}},destroy:function(){this.element&&Et(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},n(vt,{INPUT_START:j,INPUT_MOVE:z,INPUT_END:V,INPUT_CANCEL:Y,STATE_POSSIBLE:Je,STATE_BEGAN:et,STATE_CHANGED:tt,STATE_ENDED:it,STATE_RECOGNIZED:st,STATE_CANCELLED:rt,STATE_FAILED:nt,DIRECTION_NONE:W,DIRECTION_LEFT:K,DIRECTION_RIGHT:q,DIRECTION_UP:X,DIRECTION_DOWN:Z,DIRECTION_HORIZONTAL:Q,DIRECTION_VERTICAL:J,DIRECTION_ALL:ee,Manager:wt,Input:se,TouchAction:Xe,TouchInput:Pe,MouseInput:we,PointerEventInput:xe,TouchMouseInput:Fe,SingleTouchInput:_e,Recognizer:ot,AttrRecognizer:dt,Tap:mt,Pan:ht,Swipe:gt,Pinch:ut,Rotate:ft,Press:pt,on:T,off:S,each:f,merge:v,extend:m,assign:n,inherit:y,bindFn:b,prefixed:R});var St="undefined"!==typeof t?t:"undefined"!==typeof self?self:{};St.Hammer=vt,"function"===typeof r&&r.amd?r((function(){return vt})):e.exports?e.exports=vt:t[s]=vt})(window,document,"Hammer")})(_v);var Rv=_v.exports;const Iv=_u(Rv),Dv=".BMap_cpyCtrl,.anchorBL img,.BMap_bubble_buttons{display:none}",Pv=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onTap=Rp(this,"tap",7),this.currentRotation=0,this._getCenterLocation=e=>{this.map.getOverlays().forEach((e=>{e instanceof BMapGL.Marker&&e.isCenterMarker&&this.map.removeOverlay(e)})),e.iconPath="https://img0.baidu.com/it/u=2604176863,3349829508&fm=253&fmt=auto&app=138&f=PNG?w=243&h=243";const t=new BMapGL.Icon(e.iconPath,new BMapGL.Size(20,30)),i=[this.longitude,this.latitude],s=new BMapGL.Marker(new BMapGL.Point(this.longitude,this.latitude),{icon:t});return s.isCenterMarker=!0,this.map.addOverlay(s),i},this._setLocMarkerIcon=e=>{const t=new BMapGL.Icon(e.iconPath,new BMapGL.Size(20,30)),i=new BMapGL.Point(116.404,39.915),s=new BMapGL.Marker(i,{icon:t});this.map.addOverlay(s)},this._translateMarker=e=>{let t=e.destination.latitude;const i=e.destination.longitude;t<-80&&t>=-90&&(t=e.destination.latitude+10);const s=new BMapGL.Point(i,t),r={flagId:!0,flagCoordinate:!0},n={errMsg:"animationEnd:ok"},o=this.map.getOverlays(),a=o.find((t=>t instanceof BMapGL.Marker&&t.id===e.markerId));if(!a)return console.error(`Marker "${e.markerId}" not found.`),r.flagId=!1,r;if(t>90||t<-90||i>180||i<-180||isNaN(t)||isNaN(i))return r.flagCoordinate=!1,r;const l=a.getPosition(),c={lng:(s.lng-l.lng)/(e.duration/16),lat:(s.lat-l.lat)/(e.duration/16)},d=a.getRotation(),h=e.rotate;this.currentRotation?this.currentRotation+=h:this.currentRotation=h;const u=(this.currentRotation-d)/(e.duration/16);let p=l,f=d;if(!e.moveWithRotate&&e.autoRotate){let t=0;const i=setInterval((()=>{if(p=new BMapGL.Point(p.lng+c.lng,p.lat+c.lat),a.setPosition(p),t++,t>=e.duration/16){clearInterval(i);let t=0;const s=setInterval((()=>{f+=u,a.setRotation(f),t++,t>=e.duration/16&&(clearInterval(s),null===e||void 0===e||e.animationEnd(n))}),16)}}),16)}else if(e.moveWithRotate&&e.autoRotate){let t=0;const i=setInterval((()=>{p=new BMapGL.Point(p.lng+c.lng,p.lat+c.lat),a.setPosition(p),f+=u,a.setRotation(f),t++,t>=e.duration/16&&(clearInterval(i),null===e||void 0===e||e.animationEnd(n))}),16)}else if(e.moveWithRotate&&!e.autoRotate){let t=0;const i=setInterval((()=>{p=new BMapGL.Point(p.lng+c.lng,p.lat+c.lat),a.setPosition(p),t++,t>=e.duration/16&&(clearInterval(i),null===e||void 0===e||e.animationEnd(n))}),16)}return r},this._includePoints=e=>{const t=e.points.map((e=>new BMapGL.Point(e.longitude,e.latitude))),i=this.map.getZoom(),s=this.map.getCenter(),r=this.map.getViewport(t);this.map.centerAndZoom(r.center,r.zoom);const n=this.map.getBounds();let o=!0;for(let a=0;a<t.length;a++)if(!n.containsPoint(t[a])){this.map.centerAndZoom(s,i),o=!1;break}return o},this._getRegion=()=>{const e=this.map.getBounds(),t=e.getSouthWest(),i=e.getNorthEast();return{southwest:{lat:t.lat,lng:t.lng},northeast:{lat:i.lat,lng:i.lng}}},this._getRotate=()=>{let e=this.rotate;return(e<0||e>360)&&(e=0),e},this._getSkew=()=>{let e=this.skew;return(e<0||e>40)&&(e=0),e},this._getScale=()=>{const e=this.scale;return e},this._setCenterOffset=e=>{const[t,i]=e.offset,s=this.map.getSize(),r=Math.max(.25*s.width,Math.min(.75*s.width,t*s.width)),n=Math.max(.25*s.height,Math.min(.75*s.height,i*s.height)),o=new BMapGL.Pixel(r,n),a=this.map.pixelToPoint(o);this.map.panTo(a)},this._addMarkers=e=>{e.clear&&this.map.clearOverlays(this.markers),e.markers.forEach((t=>{var i,s,r,n,o,a,l,c,d,h,u,p,f,g;if(t.latitude&&t.longitude&&t.iconPath){const m=new BMapGL.Point(t.longitude,t.latitude),v=new BMapGL.Marker(m,{enableClicking:!0});if(this.map.addOverlay(v),v.id=t.id,v.alpha=t.alpha,t.zIndex&&v.setZIndex(t.zIndex),t.width&&t.height&&t.iconPath){const e=new BMapGL.Icon(t.iconPath,new BMapGL.Size(t.width,t.height));v.setIcon(e)}else{if(!t.iconPath)return void console.error("\u6ca1\u6709\u627e\u5230iconPath\u56fe\u7247\u8def\u5f84");{const e=new Image;e.src=t.iconPath,e.style.opacity=String(t.alpha),e.onload=()=>{const i=new BMapGL.Size(e.width,e.height),s=new BMapGL.Icon(e.src,i);s.imageOffset=new BMapGL.Size(0,0,t.alpha||1),v.setIcon(s)}}}const y=t.rotate?t.rotate:0;if(y&&v.setRotation(y),t.anchor){const e=(null!==(s=null===(i=t.anchor)||void 0===i?void 0:i.x)&&void 0!==s?s:0)*(t.width||0),o=(null!==(n=null===(r=t.anchor)||void 0===r?void 0:r.y)&&void 0!==n?n:0)*(t.height||0);v.setOffset(new BMapGL.Size(e,o))}if(!t.callout&&t.title){const t=new Iv(this.mapRef);t.on("tap",(t=>{const i=t.center,s=i.x,r=i.y,n=15;e.markers.forEach((e=>{const t=document.getElementsByClassName("bmap-container")[0],i=t.getBoundingClientRect(),o=i.left,a=i.top,l=new BMapGL.Point(e.longitude,e.latitude),c=this.map.pointToPixel(l),d=c.x+o,h=c.y+a,u=Math.sqrt(Math.pow(s-d,2)+Math.pow(r-h,2));if(u<n&&e.id===v.id){const t=`<div style="text-align:center">${e.title}</div>`,i=new BMapGL.InfoWindow(t);this.map.openInfoWindow(i,m)}}))}))}if(t.callout){const i=(null===(o=t.callout)||void 0===o?void 0:o.anchorX)?null===(a=t.callout)||void 0===a?void 0:a.anchorX:0,s=(null===(l=t.callout)||void 0===l?void 0:l.anchorY)?null===(c=t.callout)||void 0===c?void 0:c.anchorY:0,r=new BMapGL.InfoWindow(`<div style="\n              padding: ${null===(d=t.callout)||void 0===d?void 0:d.padding}px;\n              color:${null===(h=t.callout)||void 0===h?void 0:h.color};\n              text-align:${null===(u=t.callout)||void 0===u?void 0:u.textAlign};"\n              >\n             <p style="font-size:${null===(p=t.callout)||void 0===p?void 0:p.fontSize}px">${(null===(f=t.callout)||void 0===f?void 0:f.content)||""}</p>\n             </div>`,{width:200,height:100,offset:new BMapGL.Size(i-24,s-20)});if(v.callout=r,this.map.addOverlay(v),"ALWAYS"===(null===(g=t.callout)||void 0===g?void 0:g.display)){v.callout.disableCloseOnClick();const e=v.getPosition();v.callout.addEventListener("open",(function(){var i,s,r,n;console.log(v.callout);const o=document.querySelector(".BMap_bubble_pop");if(o){let a=o.querySelector(".triangle");a||(a=document.createElement("div"),a.className="triangle",o.appendChild(a));const l=document.querySelector(".BMap_bubble_pop>img");l&&l.setAttribute("style",`position: absolute;transform: translate(-50%, 0); top: ${e.lat-100}px; left: ${e.lng-20}px;display:none`);const c=null===(i=t.callout)||void 0===i?void 0:i.bgColor;let d=(null===(s=t.callout)||void 0===s?void 0:s.borderWidth)||5;const h=null===(r=t.callout)||void 0===r?void 0:r.borderColor,u=null===(n=t.callout)||void 0===n?void 0:n.borderRadius;d=Math.min(d,15),a.setAttribute("style",`width:0;height:0;border-left:${d}px solid transparent;border-right:${d}px solid transparent;border-top:${d}px solid ${h};position:absolute;left:83px;bottom:-${2*d}px`),o.setAttribute("style",`background-color:${c};top:${e.lat-120}px; left:${e.lng-100}px;position: absolute;border: ${d}px solid ${h};border-radius:${u}px; `)}})),this.map.openInfoWindow(v.callout,m)}else{const t=new Iv(this.mapRef);t.on("tap",(t=>{const i=t.center,s=i.x,r=i.y,n=15;e.markers.forEach((e=>{const t=document.getElementsByClassName("bmap-container")[0],i=t.getBoundingClientRect(),o=i.left,a=i.top,l=new BMapGL.Point(e.longitude,e.latitude),c=this.map.pointToPixel(l),d=c.x+o,h=c.y+a,u=Math.sqrt(Math.pow(s-d,2)+Math.pow(r-h,2));if(u<n&&e.id===v.id){const t=v.getPosition();v.callout.addEventListener("open",(function(){var i,s,r,n;console.log(v.callout);const o=document.querySelector(".BMap_bubble_pop");if(o){let a=o.querySelector(".triangle");a||(a=document.createElement("div"),a.className="triangle",o.appendChild(a));const l=document.querySelector(".BMap_bubble_pop>img");l&&l.setAttribute("style",`position: absolute;transform: translate(-50%, 0); top: ${t.lat-100}px; left: ${t.lng-20}px;display:none`);const c=null===(i=e.callout)||void 0===i?void 0:i.bgColor;let d=(null===(s=e.callout)||void 0===s?void 0:s.borderWidth)||5;const h=null===(r=e.callout)||void 0===r?void 0:r.borderColor,u=null===(n=e.callout)||void 0===n?void 0:n.borderRadius;d=Math.min(d,15),a.setAttribute("style",`width:0;height:0;border-left:${d}px solid transparent;border-right:${d}px solid transparent;border-top:${d}px solid ${h};position:absolute;left:83px;bottom:-${2*d}px`),o.setAttribute("style",`background-color:${c};top:${t.lat-120}px; left:${t.lng-100}px;position: absolute;border: ${d}px solid ${h};border-radius:${u}px; `)}})),this.map.openInfoWindow(v.callout,m)}else v.callout.enableCloseOnClick()}))}))}}if(t.label){const e=t.label.content||"",i={position:m,offset:new BMapGL.Size(t.label.anchorX||0,t.label.anchorY||0)},s=new BMapGL.Label(e,i);s.setStyle({color:t.label.color,fontSize:t.label.fontSize+"px",borderWidth:t.label.borderWidth+"px",borderColor:t.label.borderColor,borderRadius:t.label.borderRadius+"px",background:t.label.bgColor,padding:t.label.padding+"px"}),v.setLabel(s)}}}))},this._removeMarkers=e=>{const t=this.map.getOverlays();let i={};return e.markerIds.forEach((e=>{const s=t.find((t=>t instanceof BMapGL.Marker&&String(t.id)===e));i=s,this.map.removeOverlay(s)})),i},this._moveAlong=e=>{const t=e.path,i=e.markerId,s=e.duration,r=e.autoRotate,n=this.map.getOverlays().find((e=>e instanceof BMapGL.Marker&&e.id===i)),o=t.map((e=>new BMapGL.Point(e.longitude,e.latitude))),a={flagId:!0,flagCoordinate:!0};if(!n)return console.error(`Marker "${i}" not found.`),a.flagId=!1,a;for(let l=0;l<o.length;l++){const e=o[l];if(e.lat<-80&&e.lat>=-90&&(e.lat+=10),e.lng<-180||e.lng>180||e.lat<-90||e.lat>90||isNaN(e.lng)||isNaN(e.lat))return a.flagCoordinate=!1,a}if(a.flagId&&a.flagCoordinate){const e=performance.now(),t=i=>{const a=i-e,l=Math.min(a/s,1),c=this.getPointOnPath(o,l);if(n.setPosition(c),r&&l<1){const e=this.getPointOnPath(o,Math.min(l+.01,1)),t=this.calculateRotation(c,e);n.setRotation(t)}l<1?requestAnimationFrame(t):(n.setPosition(o[o.length-1]),n.setRotation(0))};requestAnimationFrame(t)}return a},this.getPointOnPath=(e,t)=>{const i=this.calculateTotalLength(e),s=i*t;let r=0;for(let n=0;n<e.length-1;n++){const t=this.map.getDistance(e[n],e[n+1]);if(r+t>=s){const i=(s-r)/t,o=e[n+1].lng-e[n].lng,a=e[n+1].lat-e[n].lat,l=e[n].lng+o*i,c=e[n].lat+a*i;return new BMapGL.Point(l,c)}r+=t}return e[e.length-1]},this.calculateTotalLength=e=>{let t=0;for(let i=0;i<e.length-1;i++)t+=this.map.getDistance(e[i],e[i+1]);return t},this.calculateRotation=(e,t)=>{const i=t.lng-e.lng,s=t.lat-e.lat;let r=Math.atan2(s,i)*(180/Math.PI);return r=90-r,r},this._addGroundOverlay=e=>{const{src:t,opacity:i,bounds:s,visible:r,id:n,zIndex:o}=e;let a=!0;if(s.southwest.longitude>=s.northeast.longitude||s.southwest.latitude>=s.northeast.latitude)return void(a=!1);if(s.southwest.latitude>90||s.southwest.latitude<-90||s.southwest.longitude>180||s.southwest.longitude<-180||isNaN(s.southwest.latitude)||isNaN(s.southwest.longitude))return void(a=!1);if(s.northeast.latitude>90||s.northeast.latitude<-90||s.northeast.longitude>180||s.northeast.longitude<-180||isNaN(s.northeast.latitude)||isNaN(s.northeast.longitude))return void(a=!1);const l=new BMapGL.Bounds(new BMapGL.Point(s.southwest.longitude,s.southwest.latitude),new BMapGL.Point(s.northeast.longitude,s.northeast.latitude));function c(e,t,i,s,r,n,o){this._bounds=e,this._imageUrl=t,this._map=i,this._visible=s,this._opacity=r,this._zIndex=n,this._id=o}c.prototype=new BMapGL.Overlay,c.prototype.initialize=function(e){if(document.getElementById(this._id)){const e=document.getElementById(this._id);null===e||void 0===e||e.remove()}if(this._map=e,!this._div){const e=document.createElement("div");e.id=this._id,e.style.position="absolute",e.style.border="none",e.style.zIndex=this._zIndex;const t=document.createElement("img");t.src=this._imageUrl;const i=this._opacity<0?"1":this._opacity;t.style.opacity=i,e.appendChild(t),this._div=e}return e.addEventListener("zoomend",(()=>{const t=e.pointToOverlayPixel(this._bounds.getSouthWest()),i=e.pointToOverlayPixel(this._bounds.getNorthEast()),s=i.x-t.x,r=t.y-i.y;this._div.style.width=s+"px",this._div.style.height=r+"px";const n=this._div.querySelector("img");n.style.width=s+"px",n.style.height=r+"px"})),e.getPanes().labelPane.appendChild(this._div),this._div},c.prototype.draw=function(){const t={lat:e.bounds.northeast.latitude,lng:e.bounds.southwest.longitude},i=this._map.pointToOverlayPixel(t);this._div.style.left=i.x+"px",this._div.style.top=i.y+"px";const s=this._map.getBounds(),r=this._map.pointToPixel(s.getSouthWest()),n=this._map.pointToPixel(s.getNorthEast()),o=n.x-r.x,a=n.y-r.y,l=this._map.getZoom(),c=o*Math.pow(2,18-l),d=a*Math.pow(2,18-l);this._div.style.width=c+"px",this._div.style.height=d+"px",this._div.style.display=this._visible?"block":"none";const h=this._opacity<0?"1":this._opacity;this._div.getElementsByTagName("img")[0].style.opacity=h};const d=new c(l,t,this.map,r,i,o,n);this.map.addOverlay(d);const h=this.map.getOverlays().sort(((e,t)=>e._zIndex-t._zIndex));this.groundOverlay=d,h.forEach((e=>e.draw()));const u=this.map.getZoom();return u<20?(this.map.setZoom(u+1),this.map.setZoom(u)):(this.map.setZoom(u-1),this.map.setZoom(u)),a},this._updateGroundOverlay=e=>{const{src:t,opacity:i,bounds:s,visible:r,id:n,zIndex:o}=e;let a,l=!0,c=!0,d={};const h=this.map.getOverlays(),u=h.find((e=>e._id===n));if(!u)return l=!1,d={flagId:l,flagCoordinate:c},a=Object.assign({},d),a;if((s.southwest.longitude>=s.northeast.longitude||s.southwest.latitude>=s.northeast.latitude)&&(c=!1,d={flagId:l,flagCoordinate:c},a=Object.assign({},d)),(s.southwest.latitude>90||s.southwest.latitude<-90||s.southwest.longitude>180||s.southwest.longitude<-180||isNaN(s.southwest.latitude)||isNaN(s.southwest.longitude))&&(c=!1,d={flagId:l,flagCoordinate:c},a=Object.assign({},d)),(s.northeast.latitude>90||s.northeast.latitude<-90||s.northeast.longitude>180||s.northeast.longitude<-180||isNaN(s.northeast.latitude)||isNaN(s.northeast.longitude))&&(c=!1,d={flagId:l,flagCoordinate:c},a=Object.assign({},d)),l&&c){const e=new BMapGL.Bounds(new BMapGL.Point(s.southwest.longitude,s.southwest.latitude),new BMapGL.Point(s.northeast.longitude,s.northeast.latitude)),h=this.map.getZoom();if(u){const s=document.getElementById(n);if(s){const n=s.querySelector("img");if(n){const a=i<0?"1":i;s.style.opacity=a,n.style.display=r?"block":"none",s.style.zIndex=o;const l=new Image;l.onload=()=>{n.src=t;const i=e.getNorthEast().lng-e.getSouthWest().lng,s=this.map.getSize().width,r=s/Math.pow(2,18-h)*i,o=l.naturalHeight/l.naturalWidth,a=r*o;n.style.width=`${r}px`,n.style.height=`${a}px`,u._bounds=e,u.draw(),this.map.panTo(this.map.getCenter()),u.draw()},l.src=t}}}else console.error(`\u672a\u627e\u5230id\u4e3a${n}\u7684\u5143\u7d20`);return d={flagId:l,flagCoordinate:c},a=Object.assign({},d),a}return a},this._removeGroundOverlay=e=>{const t=this.map.getOverlays();let i="";const s=t.find((t=>t._id===e.id));return i=s,s&&this.map.removeOverlay(s),i},this._setBoundary=e=>{let t=e.northeast.latitude,i=e.southwest.latitude,s=!0;if(e.northeast.latitude<=-80&&e.northeast.latitude>=-90&&(t=e.northeast.latitude+10),e.southwest.latitude<=-80&&e.southwest.latitude>=-90&&(i=e.southwest.latitude+10),e.northeast.latitude<-90||e.northeast.latitude>90||e.northeast.longitude<-180||e.northeast.longitude>180||isNaN(e.northeast.latitude)||isNaN(e.northeast.longitude)||e.northeast.longitude<e.southwest.longitude||e.northeast.latitude<e.southwest.latitude)return void(s=!1);if(e.southwest.latitude<-90||e.southwest.latitude>90||e.southwest.longitude<-180||e.southwest.longitude>180||isNaN(e.southwest.latitude)||isNaN(e.southwest.longitude))return void(s=!1);const r=new BMapGL.Point(e.northeast.longitude,t),n=new BMapGL.Point(e.southwest.longitude,i),o=new BMapGL.Bounds(n,r),a=this.map.getViewport([r,n]);return this.map.centerAndZoom(new BMapGL.Point(a.center.lng,a.center.lat),a.zoom+2),this.map.addOverlay(new BMapGL.Polygon([new BMapGL.Point(o.sw.lng,o.sw.lat),new BMapGL.Point(o.sw.lng,o.ne.lat),new BMapGL.Point(o.ne.lng,o.ne.lat),new BMapGL.Point(o.ne.lng,o.sw.lat)],{fillOpacity:0})),BMapGLLib.AreaRestriction.setBounds(this.map,o),s},this.latitude=void 0,this.longitude=void 0,this.scale=void 0,this.minScale=void 0,this.maxScale=void 0,this.markers=void 0,this.polyline=void 0,this.circles=void 0,this.polygons=void 0,this.subkey=void 0,this.layerStyle=void 0,this.rotate=void 0,this.skew=void 0,this.showCompass=void 0,this.showScale=void 0,this.enableOverlooking=void 0,this.enableZoom=void 0,this.enableScroll=void 0,this.enableRotate=void 0,this.enableSatellite=void 0,this.enableTraffic=void 0,this.enableBuilding=void 0,this.enableAutoMaxOverlooking=void 0,this.enable3D=void 0,this.width="100%",this.height="100%"}componentDidLoad(){return d(this,null,(function*(){if(yield this.loadMapScript(),yield this.LoadBmapLibScript(),this.mapRef){if(this.mapRef.addEventListener("touchmove",(e=>{e.cancelable&&e.preventDefault()})),this.map=new BMapGL.Map(this.mapRef),this.map.removeControl(this.map.getMapType()),this.latitude<-90||this.latitude>90||this.longitude<-180||this.longitude>180||isNaN(this.latitude)||isNaN(this.longitude))return void console.error("\u8bf7\u6b63\u786e\u8bbe\u7f6e\u4e2d\u5fc3\u7ecf\u7eac\u5ea6");let e=isNaN(this.scale)?16:this.scale,t=isNaN(this.minScale)?3:this.minScale,i=isNaN(this.maxScale)?16:this.maxScale;const s=new BMapGL.Point(this.longitude,this.latitude);if(t<3||t>20?(t=3,this.map.setMinZoom(3)):this.map.setMinZoom(t),i>20||i<3?(i=20,this.map.setMaxZoom(20)):this.map.setMaxZoom(i),t>i&&(t=3,this.map.setMinZoom(3),i=20,this.map.setMaxZoom(20)),t<=16&&i>=16?(e>=t&&e<=i||(e=16),this.map.centerAndZoom(s,e)):e>=t&&e<=i?this.map.centerAndZoom(s,e):e<t?(e=t,this.map.centerAndZoom(s,t)):(e=i,this.map.centerAndZoom(s,i)),Array.isArray(this.markers)&&this.addMarkers(this.markers),Array.isArray(this.polyline)&&this.polyline.forEach((e=>{if(e.points){const t=e.points.map((e=>new BMapGL.Point(e.longitude,e.latitude))),i=new BMapGL.Polyline(t,{strokeColor:e.color,strokeWeight:e.width,strokeStyle:e.dottedLine?"dashed":"solid",strokeOpacity:1});this.map.addOverlay(i)}})),Array.isArray(this.circles)&&this.circles.forEach((e=>{if(e.latitude&&e.longitude&&e.radius){const t=new BMapGL.Point(e.longitude,e.latitude),i=new BMapGL.Circle(t,e.radius,{strokeColor:e.color,fillColor:e.fillColor,strokeWeight:e.strokeWidth});this.map.addOverlay(i)}})),Array.isArray(this.polygons)&&this.polygons.forEach((e=>{const t=e.points.map((e=>new BMapGL.Point(e.longitude,e.latitude))),i=new BMapGL.Polygon(t,{strokeColor:e.strokeColor,fillColor:e.fillColor,strokeWeight:e.strokeWidth});this.map.addOverlay(i)})),0===this.layerStyle){const e=this.layerStyle;e&&this.map.setMapStyleV2({styleId:this.subkey})}else{const e=this.layerStyle?this.layerStyle:1;1===e&&this.map.setMapStyleV2({styleId:this.subkey})}const r=!0===this.enable3D&&this.enable3D,n=!0===this.enableOverlooking&&this.enableOverlooking,o=!0===this.enableAutoMaxOverlooking&&this.enableAutoMaxOverlooking,a=this.skew?this.skew:0;!0===r?!0===n?!0===o?this.map.setTilt(75):this.map.setTilt(45):a>=0&&a<=40?this.map.setTilt(a):this.map.setTilt(0):this.map.setTilt(0);const l=!0===this.showCompass&&this.showCompass;if(!0===l){const e=new BMapGL.NavigationControl3D({anchor:BMAP_ANCHOR_TOP_RIGHT,type:3});this.map.addControl(e)}const c=!0===this.showScale&&this.showScale;if(!0===c){const e=new BMapGL.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT});this.map.addControl(e)}const d=!1!==this.enableZoom||this.enableZoom;!0===d&&this.map.enableScrollWheelZoom(this.enableZoom),!0===this.enableZoom&&this.mapRef?this.map.enablePinchToZoom():this.map.disablePinchToZoom();const h=!1!==this.enableScroll||this.enableScroll;!0===h?this.map.enableDragging():this.map.disableDragging();const u=this.rotate?this.rotate:0;u>=0&&this.rotate<=360?this.map.setHeading(this.rotate):this.map.setHeading(0),!0===this.enableRotate&&this.map.enableRotateGestures();const p=!0===this.enableSatellite&&this.enableSatellite;if(!0===p&&this.mapRef){const e=new BMapGL.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_SATELLITE_MAP]});this.map.addControl(e)}const f=!0===this.enableTraffic&&this.enableTraffic;!0===f&&this.mapRef&&this.map.setTrafficOn();const g=!1!==this.enableBuilding||this.enableBuilding;!1===g&&this.map.setDisplayOptions({building:!1})}if(this.map){const e=new Iv(this.mapRef);e.on("tap",(e=>{const t=this.map.pixelToPoint({x:e.center.x,y:e.center.y});this.onTap.emit({longitude:t.lng,latitude:t.lat})}))}}))}disconnectedCallback(){this.map&&this.map.destroy()}addMarkers(e){const t=[];e.forEach((e=>{var i,s,r,n,o,a,l,c,d,h,u,p,f,g;if(t.includes(e.id))console.error("\u8bf7\u8f93\u5165\u4e0d\u540c\u7684marker\u7684id");else if(t.push(e.id),e.latitude&&e.longitude&&e.iconPath&&e.id){if(e.latitude<-90||e.latitude>90||e.longitude<-180||e.longitude>180)return void console.error("\u8bf7\u6b63\u786e\u8bbe\u7f6emarker\u7684\u7ecf\u7eac\u5ea6");const t=new BMapGL.Point(e.longitude,e.latitude),m=new BMapGL.Marker(t,{enableClicking:!0});if(m.id=e.id,m.alpha=e.alpha,e.zIndex&&m.setZIndex(e.zIndex),e.width&&e.height){const t=document.createElement("canvas");t.width=2*e.width,t.height=2*e.height;const i=t.getContext("2d"),s=new Image;s.crossOrigin="Anonymous",s.src=e.iconPath,s.onload=function(){i.drawImage(s,0,0,2*e.width,2*e.height);const r=new BMapGL.Icon(t.toDataURL(),new BMapGL.Size(e.width,e.height),{anchor:new BMapGL.Size(0,0)});m.setIcon(r)}}else{const t=new Image;t.src=e.iconPath,t.style.opacity=String(e.alpha),t.onload=()=>{const i=new BMapGL.Size(t.width,t.height),s=new BMapGL.Icon(t.src,i);s.imageOffset=new BMapGL.Size(0,0,e.alpha||1),m.setIcon(s)}}const v=e.rotate?e.rotate:0;v>=0&&v<=360&&m.setRotation(v);const y=null!==(s=null===(i=e.anchor)||void 0===i?void 0:i.x)&&void 0!==s?s:.5,b=null!==(n=null===(r=e.anchor)||void 0===r?void 0:r.y)&&void 0!==n?n:1;if(y>=0&&y<=1&&b>=0&&b<=1){const t=-y*(e.width||0),i=-b*(e.height||0);m.setOffset(new BMapGL.Size(t,i))}else{const t=-.5*(e.width||0),i=-1*(e.height||0);m.setOffset(new BMapGL.Size(t,i))}if(!e.callout&&e.title){const e=new Iv(this.mapRef);e.on("tap",(e=>{const i=e.center,s=i.x,r=i.y,n=15;this.markers.forEach((e=>{const i=document.getElementsByClassName("bmap-container")[0],o=i.getBoundingClientRect(),a=o.left,l=o.top,c=new BMapGL.Point(e.longitude,e.latitude),d=this.map.pointToPixel(c),h=d.x+a,u=d.y+l,p=Math.sqrt(Math.pow(s-h,2)+Math.pow(r-u,2));if(p<n&&e.id===m.id){const i=`<div style="text-align:center">${e.title}</div>`,s=new BMapGL.InfoWindow(i);this.map.openInfoWindow(s,t)}}))}))}if(e.callout){const i=(null===(o=e.callout)||void 0===o?void 0:o.anchorX)?null===(a=e.callout)||void 0===a?void 0:a.anchorX:0,s=(null===(l=e.callout)||void 0===l?void 0:l.anchorY)?null===(c=e.callout)||void 0===c?void 0:c.anchorY:0,r=new BMapGL.InfoWindow(`<div style="\n              padding: ${null===(d=e.callout)||void 0===d?void 0:d.padding}px;\n              color:${null===(h=e.callout)||void 0===h?void 0:h.color};\n              text-align:${null===(u=e.callout)||void 0===u?void 0:u.textAlign};"\n              >\n             <p style="font-size:${null===(p=e.callout)||void 0===p?void 0:p.fontSize}px">${(null===(f=e.callout)||void 0===f?void 0:f.content)||""}</p>\n             </div>`,{width:200,height:100,offset:new BMapGL.Size(i-24,s-20)});if(m.callout=r,this.map.addOverlay(m),"ALWAYS"===(null===(g=e.callout)||void 0===g?void 0:g.display)){m.callout.disableCloseOnClick();const i=m.getPosition();m.callout.addEventListener("open",(function(){var t,s,r,n;const o=document.querySelector(".BMap_bubble_pop");if(o){let a=o.querySelector(".triangle");a||(a=document.createElement("div"),a.className="triangle",o.appendChild(a));const l=document.querySelector(".BMap_bubble_pop>img");l&&l.setAttribute("style",`position: absolute;transform: translate(-50%, 0); top: ${i.lat-100}px; left: ${i.lng-20}px;display:none`);const c=null===(t=e.callout)||void 0===t?void 0:t.bgColor;let d=(null===(s=e.callout)||void 0===s?void 0:s.borderWidth)||5;const h=null===(r=e.callout)||void 0===r?void 0:r.borderColor,u=null===(n=e.callout)||void 0===n?void 0:n.borderRadius;d=Math.min(d,15),a.setAttribute("style",`width:0;height:0;borderLeft:${d}px solid transparent;borderRight:${d}px solid transparent;borderTop:${d}px solid ${h};position:absolute;left:83px;bottom:-${2*d}px`),o.setAttribute("style",`background-color:${c};top:${i.lat-120}px; left:${i.lng-100}px;position: absolute;border: ${d}px solid ${h};border-radius:${u}px; `)}})),this.map.openInfoWindow(m.callout,t)}else{const e=new Iv(this.mapRef);e.on("tap",(e=>{const i=e.center,s=i.x,r=i.y,n=15;this.markers.forEach((e=>{const i=document.getElementsByClassName("bmap-container")[0],o=i.getBoundingClientRect(),a=o.left,l=o.top,c=new BMapGL.Point(e.longitude,e.latitude),d=this.map.pointToPixel(c),h=d.x+a,u=d.y+l,p=Math.sqrt(Math.pow(s-h,2)+Math.pow(r-u,2));if(p<n&&e.id===m.id){const i=m.getPosition();m.callout.addEventListener("open",(function(){var t,s,r,n;const o=document.querySelector(".BMap_bubble_pop");if(o){let a=o.querySelector(".triangle");a||(a=document.createElement("div"),a.className="triangle",o.appendChild(a));const l=document.querySelector(".BMap_bubble_pop>img");l&&l.setAttribute("style",`position: absolute;transform: translate(-50%, 0); top: ${i.lat-100}px; left: ${i.lng-20}px;display:none`);const c=null===(t=e.callout)||void 0===t?void 0:t.bgColor;let d=(null===(s=e.callout)||void 0===s?void 0:s.borderWidth)||5;const h=null===(r=e.callout)||void 0===r?void 0:r.borderColor,u=null===(n=e.callout)||void 0===n?void 0:n.borderRadius;d=Math.min(d,15),a.setAttribute("style",`width:0;height:0;border-left:${d}px solid transparent;border-right:${d}px solid transparent;border-top:${d}px solid ${h};position:absolute;left:83px;bottom:-${2*d}px`),o.setAttribute("style",`background-color:${c};top:${i.lat-120}px; left:${i.lng-100}px;position: absolute;border: ${d}px solid ${h};border-radius:${u}px; `)}})),this.map.openInfoWindow(m.callout,t)}else m.callout.enableCloseOnClick()}))}))}}if(e.label){const i=e.label.content||"",s={position:t,offset:new BMapGL.Size(e.label.anchorX||0,e.label.anchorY||0)},r=new BMapGL.Label(i,s),n=e.label.borderColor?e.label.borderColor:"white";r.setStyle({color:e.label.color,fontSize:e.label.fontSize+"px",borderWidth:e.label.borderWidth+"px",borderColor:n,borderRadius:e.label.borderRadius+"px",background:e.label.bgColor,padding:e.label.padding+"px"}),m.setLabel(r)}this.map.addOverlay(m)}else console.error("\u8bf7\u68c0\u67e5marker\u7ecf\u7eac\u5ea6\u548cmarker\u81ea\u5b9a\u4e49\u56fe\u6807\u8def\u5f84\u548cid\u503c")}))}loadMapScript(){return new Promise(((e,t)=>{const i=document.createElement("script");i.src="https://api.map.baidu.com/getscript?v=3.0&type=webgl&ak=Mb1FLBD3gfnY6bup4v6zEWh6MXwsZ9eo",i.defer=!0,i.onload=()=>e(),i.onerror=t,i.type="text/javascript",document.head.appendChild(i)}))}LoadBmapLibScript(){return d(this,null,(function*(){return new Promise(((e,t)=>{const i=document.createElement("script");i.src="//mapopen.bj.bcebos.com/github/BMapGLLib/AreaRestriction/src/AreaRestriction.min.js",i.defer=!0,i.type="text/javascript",i.onload=()=>{e()},i.onerror=t,document.head.appendChild(i)}))}))}render(){return wp(Tp,null,wp("div",{id:"mapContainer",ref:e=>{e&&(this.mapRef=e)},style:{width:this.width,height:this.height}}))}get el(){return this}static get style(){return Dv}},[0,"taro-map-core",{latitude:[2],longitude:[2],scale:[2],minScale:[2,"min-scale"],maxScale:[2,"max-scale"],markers:[16],polyline:[16],circles:[16],polygons:[16],subkey:[1],layerStyle:[2,"layer-style"],rotate:[2],skew:[2],showCompass:[4,"show-compass"],showScale:[4,"show-scale"],enableOverlooking:[4,"enable-overlooking"],enableZoom:[4,"enable-zoom"],enableScroll:[4,"enable-scroll"],enableRotate:[4,"enable-rotate"],enableSatellite:[4,"enable-satellite"],enableTraffic:[4,"enable-traffic"],enableBuilding:[4,"enable-building"],enableAutoMaxOverlooking:[4,"enable-auto-max-overlooking"],enable3D:[4,"enable-3-d"],width:[1],height:[1]}]);function Mv(){if("undefined"===typeof customElements)return;const e=["taro-map-core"];e.forEach((e=>{switch(e){case"taro-map-core":customElements.get(e)||customElements.define(e,Pv);break}}))}const Ov=Mv,Nv=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("MatchMedia",this)}render(){return wp(Tp,null)}},[0,"taro-match-media-core"]);function Fv(){if("undefined"===typeof customElements)return;const e=["taro-match-media-core"];e.forEach((e=>{switch(e){case"taro-match-media-core":customElements.get(e)||customElements.define(e,Nv);break}}))}const Bv=Fv;function $v(e,t=250,i){let s,r=0;return function(...n){const o=i||this,a=Date.now();a-r>t?(e.apply(this,n),r=a):(clearTimeout(s),s=setTimeout((()=>{r=a,e.apply(o,n)}),t))}}function Uv(e,t=250,i){let s;return function(...r){const n=i||this;clearTimeout(s),s=setTimeout((function(){e.apply(n,r)}),t)}}function Gv(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function Hv(e){return"object"===typeof HTMLElement?e instanceof HTMLElement:e&&"object"===typeof e&&null!==e&&1===e.nodeType&&"string"===typeof e.nodeName}const jv="taro-movable-area-core{width:10px;height:10px;display:block;position:relative}",zv=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.views=[],this.scaleLength=0,this.viewsChanged=()=>{this.views=[];const e=this.element.querySelectorAll("taro-movable-view-core");Array.from(e).forEach((e=>{this.views.push(e)})),this.updateArea()},this.handleTouchStart=e=>{const t=e.touches;if(!t||t.length<=1)return;const i={width:t[1].pageX-t[0].pageX,height:t[1].pageY-t[0].pageY};if(this.scaleLength=Math.sqrt(i.width*i.width+i.height*i.height),this.scaleArea)return;const s=(e,t)=>{const i=(e,t)=>!!(e=e.parentNode)&&((!Hv(e)||e!==document.body)&&(e===t||e===t.element||e.element===t||i(e,t)));for(let s=0;s<t.length;s++){const r=t[s];if(e===r["element"]||i(e,r))return r}},r=s(t[0].target,this.views),n=s(t[1].target,this.views);this.scaleTarget=r&&r===n?r:void 0},this.handleTouchMove=e=>{const t=e.touches;if(!t||t.length<=1)return;e.preventDefault();const i={width:t[1].pageX-t[0].pageX,height:t[1].pageY-t[0].pageY};this.scaleLength>0&&this.updateScale(Math.sqrt(i.width*i.width+i.height*i.height)/this.scaleLength)},this.handleTouchEnd=e=>{var t,i;e.touches&&e.touches.length||!e.changedTouches||(this.scaleLength=0,this.scaleArea?this.views.forEach((e=>{var t;null===(t=e["endScale"])||void 0===t||t.call(e)})):null===(i=null===(t=this.scaleTarget)||void 0===t?void 0:t["endScale"])||void 0===i||i.call(t),this.scaleTarget=void 0)},this.updateScale=e=>{var t,i;e&&1!==e&&(this.scaleArea?this.views.forEach((t=>{var i;null===(i=t["setScale"])||void 0===i||i.call(t,e)})):null===(i=null===(t=this.scaleTarget)||void 0===t?void 0:t["setScale"])||void 0===i||i.call(t,e))},this.updateArea=()=>{const e=window.getComputedStyle(this.element),t=this.element.getBoundingClientRect(),i=["Left","Right"].map((t=>parseFloat(e["border"+t+"Width"])+parseFloat(e["padding"+t]))),s=["Top","Bottom"].map((t=>parseFloat(e["border"+t+"Width"])+parseFloat(e["padding"+t])));this.views.forEach((e=>{var r;null===(r=e["setParent"])||void 0===r||r.call(e,{element:this.element,area:{height:t.height-s[0]-s[1],width:t.width-i[0]-i[1]}})}))},this.scaleArea=void 0}connectedCallback(){this.observer=new MutationObserver((e=>{e.forEach((e=>{var t,i;if("class"===e.attributeName||"style"===e.attributeName){const e=this.element.offsetWidth,s=this.element.offsetHeight;e===(null===(t=this.offset)||void 0===t?void 0:t.width)&&s===(null===(i=this.offset)||void 0===i?void 0:i.height)||this.updateArea(),this.offset={width:e,height:s}}}))})),this.observer.observe(this.element,{attributes:!0})}disconnectedCallback(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}componentDidLoad(){this.viewsChanged()}render(){return wp(Tp,{onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd})}get element(){return this}static get style(){return jv}},[0,"taro-movable-area-core",{scaleArea:[4,"scale-area"]}]);function Vv(){if("undefined"===typeof customElements)return;const e=["taro-movable-area-core"];e.forEach((e=>{switch(e){case"taro-movable-area-core":customElements.get(e)||customElements.define(e,zv);break}}))}const Yv=Vv,Wv="taro-movable-view-core{width:10px;height:10px;display:inline-block;position:absolute;top:0;left:0}",Kv=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onChange=Rp(this,"change",7),this.onScale=Rp(this,"scale",7),this.onHTouchMove=Rp(this,"htouchmove",7),this.onVTouchMove=Rp(this,"vtouchmove",7),this.translateX=0,this.translateY=0,this.origin={x:0,y:0},this.area={width:0,height:0},this.originScale=1,this.currentScale=1,this.width=0,this.height=0,this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.baseX=0,this.baseY=0,this.offset={x:0,y:0},this.scaleOffset={x:0,y:0},this.getLimitXY=(e,t)=>{let i=!1;return e>this.maxX?(e=this.maxX,i=!0):e<this.minX&&(e=this.minX,i=!0),t>this.maxY?(t=this.maxY,i=!0):t<this.minY&&(t=this.minY,i=!0),{x:e,y:t,outOfBounds:i}},this.animationTo=(e,t,i,s,r,n,o)=>{this.animation?(this.setTransform(e,t,i,s,r,n),null===o||void 0===o||o()):this.setTransform(e,t,i,s,r,n)},this.setTransform=(e,t,i,s,r,n)=>{if(e=Number(e.toFixed(1)),t=Number(t.toFixed(1)),i=Number((null!==i&&void 0!==i?i:this.currentScale).toFixed(3)),!this.outOfBounds){const i=this.getLimitXY(e,t);e=i.x,t=i.y}const o=(e,t)=>+((1e3*e-1e3*t)/1e3).toFixed(1),a=o(e,this.scaleOffset.x),l=o(t,this.scaleOffset.y);this.translateX===e&&this.translateY===t||!r&&this.onChange.emit({x:a,y:l,source:s}),i!==this.currentScale&&n&&this.onScale.emit({scale:i,x:a,y:l});const c=`translateX(${e}px) translateY(${t}px) translateZ(0px) scale(${i})`;this.element.style.transform=c,this.element.style.webkitTransform=c,this.translateX=e,this.translateY=t,this.currentScale=i},this.updateOffset=()=>{const e=(t,i)=>{if(t===i||!t.offsetParent)return{left:0,top:0};const s=e(t.offsetParent,i);return{left:t.offsetLeft+s.left,top:t.offsetTop+s.top}};if(!this.parent)return;const t=e(this.element,this.parent);this.offset.x=t.left,this.offset.y=t.top},this.updateScaleOffset=(e=this.currentScale)=>{const t=this.element.getBoundingClientRect();this.height=t.height/this.currentScale,this.width=t.width/this.currentScale,this.scaleOffset.x=(this.width*e-this.width)/2,this.scaleOffset.y=(this.height*e-this.height)/2},this.updateBoundary=()=>{const e=0-this.offset.x+this.scaleOffset.x,t=this.area.width-this.width-this.offset.x-this.scaleOffset.x;this.minX=Math.min(e,t),this.maxX=Math.max(e,t);const i=0-this.offset.y+this.scaleOffset.y,s=this.area.height-this.height-this.offset.y-this.scaleOffset.y;this.minY=Math.min(i,s),this.maxY=Math.max(i,s)},this.updateScale=(e,t,i)=>{if(!this.scale)return;const s=this.adjustScale(e);this.updateScaleOffset(s),this.updateBoundary();const{x:r,y:n}=this.getLimitXY(this.translateX,this.translateY);t?this.animationTo(r,n,s,"",!0,!0,i):this.updating||(this.updating=!0,requestAnimationFrame((()=>{this.setTransform(r,n,s,"",!0,!0),this.updating=!1})))},this.setOriginScale=e=>{this.originScale=e},this.adjustScale=e=>Math.min(10,this.scaleMax,Math.max(.5,this.scaleMin,e)),this.handleTouchStart=e=>{const t=e.touches;if(this.disabled||t.length>1||!this.element)return;const i=t[0];this.touching=!0,this.firstMoveFireEvent=!1,this.origin.x=i.screenX,this.origin.y=i.screenY,this.baseX=this.translateX,this.baseY=this.translateY,this.element.style.willChange="transform"},this.handleTouchMove=e=>{const t=e.touches;if(this.disabled||!this.element||this.scaling||!this.touching||t.length>1)return;"horizontal"!==this.direction&&e.preventDefault();const i=t[0],s=i.screenX-this.origin.x,r=i.screenY-this.origin.y;if(this.setTransform(this.xMove?s+this.baseX:0,this.yMove?r+this.baseY:0),!this.firstMoveFireEvent){this.firstMoveFireEvent=!0;const t=Math.abs(s)>Math.abs(r)?this.onHTouchMove:this.onVTouchMove;t.emit({originalEvent:e,bubbles:!1,capturePhase:!1,composed:!0,extraFields:{touches:e.touches||{},changedTouches:e.changedTouches||{}}})}},this.handleTouchEnd=e=>{const t=e.changedTouches[0];if(this.disabled||!this.touching||!t)return;this.touching=!1;const i=t.screenX-this.origin.x,s=t.screenY-this.origin.y;this.setTransform(this.xMove?i+this.baseX:0,this.yMove?s+this.baseY:0)},this.x=0,this.y=0,this.direction="none",this.outOfBounds=!1,this.inertia=!1,this.friction=2,this.damping=20,this.disabled=!1,this.scale=!1,this.scaleMin=.5,this.scaleMax=10,this.scaleValue=1,this.animation=!0}watchX(e){this.setTransform(parseFloat(`${e||0}`),this.translateY)}watchY(e){this.setTransform(this.translateX,parseFloat(`${e||0}`))}watchScaleMinOrMax(){if(!this.scale)return!1;this.updateScale(this.currentScale,!0),this.setOriginScale(this.currentScale)}watchScaleValue(e){return!!this.scale&&(this.updateScale(e,!0),this.setOriginScale(e),e)}setParent(e){return d(this,arguments,(function*({element:e,area:t}){const i=this.scale?this.scaleValue:1;this.area=t,this.parent=e,this.updateOffset(),this.updateScaleOffset(i),this.updateBoundary(),this.setTransform(Number(this.x)+this.scaleOffset.x,Number(this.y)+this.scaleOffset.y,i,"",!0),this.setOriginScale(i)}))}endScale(){return d(this,null,(function*(){this.scaling=!1,this.setOriginScale(this.currentScale)}))}setScale(e){return d(this,null,(function*(){this.scale&&(this.scaling=!0,this.updateScale(e*this.originScale))}))}connectedCallback(){this.observer=new MutationObserver((e=>{e.forEach((e=>{const t=e.attributeName;if(t&&["class","style"].includes(t)){const i=e.oldValue,s=e.target.getAttribute(t);if(i===s)return;const r=e=>null===e||void 0===e?void 0:e.split(";").filter((e=>!["transform","will-change"].find((t=>e.trim().startsWith(t))))).join(";");if("style"===t&&r(s)===r(i))return;this.updateOffset(),this.updateScaleOffset(),this.updateBoundary(),this.setTransform(this.translateX,this.translateY)}}))})),this.observer.observe(this.element,{attributes:!0,attributeOldValue:!0})}disconnectedCallback(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}componentDidLoad(){if(this.element.style.transformOrigin="center",this.xMove=["horizontal","all"].includes(this.direction),this.yMove=["vertical","all"].includes(this.direction),this.friction<=0&&(this.friction=2),this.x||this.y){const e=parseFloat(`${this.x||0}`),t=parseFloat(`${this.y||0}`);this.setTransform(e,t)}}render(){return wp(Tp,{onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd})}get element(){return this}static get watchers(){return{x:["watchX"],y:["watchY"],scaleMin:["watchScaleMinOrMax"],scaleMax:["watchScaleMinOrMax"],scaleValue:["watchScaleValue"]}}static get style(){return Wv}},[0,"taro-movable-view-core",{x:[8],y:[8],direction:[1],outOfBounds:[4,"out-of-bounds"],inertia:[4],friction:[2],damping:[2],disabled:[4],scale:[4],scaleMin:[2,"scale-min"],scaleMax:[2,"scale-max"],scaleValue:[2,"scale-value"],animation:[4],setParent:[64],endScale:[64],setScale:[64]}]);function qv(){if("undefined"===typeof customElements)return;const e=["taro-movable-view-core"];e.forEach((e=>{switch(e){case"taro-movable-view-core":customElements.get(e)||customElements.define(e,Kv);break}}))}const Xv=qv,Zv=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("NativeSlot",this)}render(){return wp(Tp,null)}},[0,"taro-native-slot-core"]);function Qv(){if("undefined"===typeof customElements)return;const e=["taro-native-slot-core"];e.forEach((e=>{switch(e){case"taro-native-slot-core":customElements.get(e)||customElements.define(e,Zv);break}}))}const Jv=Qv,ey=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("NavigationBar",this)}render(){return wp(Tp,null)}},[0,"taro-navigation-bar-core"]);function ty(){if("undefined"===typeof customElements)return;const e=["taro-navigation-bar-core"];e.forEach((e=>{switch(e){case"taro-navigation-bar-core":customElements.get(e)||customElements.define(e,ey);break}}))}const iy=ty,sy=".navigator-hover{background:#efefef}",ry=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onSuccess=Rp(this,"cuccess",7),this.onFail=Rp(this,"fail",7),this.onComplete=Rp(this,"complete",7),this.hoverClass=void 0,this.url=void 0,this.openType="navigate",this.isHover=!1,this.delta=0}onClick(){const{openType:e,onSuccess:t,onFail:i,onComplete:s}=this;let r=Promise.resolve();switch(e){case"navigate":r=PL.navigateTo({url:this.url});break;case"redirect":r=PL.redirectTo({url:this.url});break;case"switchTab":r=PL.switchTab({url:this.url});break;case"reLaunch":r=PL.reLaunch({url:this.url});break;case"navigateBack":r=PL.navigateBack({delta:this.delta});break;case"exit":r=Promise.reject(new Error('navigator:fail \u6682\u4e0d\u652f\u6301"openType: exit"'));break}r&&r.then((e=>{t.emit(e)})).catch((e=>{i.emit(e)})).finally((()=>{s.emit()}))}render(){const{isHover:e,hoverClass:t}=this;return wp(Tp,{class:vg({[t]:e})})}static get style(){return sy}},[0,"taro-navigator-core",{hoverClass:[1,"hover-class"],url:[1],openType:[1,"open-type"],isHover:[4,"is-hover"],delta:[2]},[[0,"click","onClick"]]]);function ny(){if("undefined"===typeof customElements)return;const e=["taro-navigator-core"];e.forEach((e=>{switch(e){case"taro-navigator-core":customElements.get(e)||customElements.define(e,ry);break}}))}const oy=ny,ay=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("NestedScrollBody",this)}render(){return wp(Tp,null)}},[0,"taro-nested-scroll-body-core"]);function ly(){if("undefined"===typeof customElements)return;const e=["taro-nested-scroll-body-core"];e.forEach((e=>{switch(e){case"taro-nested-scroll-body-core":customElements.get(e)||customElements.define(e,ay);break}}))}const cy=ly,dy=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("NestedScrollHeader",this)}render(){return wp(Tp,null)}},[0,"taro-nested-scroll-header-core"]);function hy(){if("undefined"===typeof customElements)return;const e=["taro-nested-scroll-header-core"];e.forEach((e=>{switch(e){case"taro-nested-scroll-header-core":customElements.get(e)||customElements.define(e,dy);break}}))}const uy=hy,py=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("OfficialAccount",this)}render(){return wp(Tp,null)}},[0,"taro-official-account-core"]);function fy(){if("undefined"===typeof customElements)return;const e=["taro-official-account-core"];e.forEach((e=>{switch(e){case"taro-official-account-core":customElements.get(e)||customElements.define(e,py);break}}))}const gy=fy,my=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("OpenContainer",this)}render(){return wp(Tp,null)}},[0,"taro-open-container-core"]);function vy(){if("undefined"===typeof customElements)return;const e=["taro-open-container-core"];e.forEach((e=>{switch(e){case"taro-open-container-core":customElements.get(e)||customElements.define(e,my);break}}))}const yy=vy,by=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("OpenData",this)}render(){return wp(Tp,null)}},[0,"taro-open-data-core"]);function wy(){if("undefined"===typeof customElements)return;const e=["taro-open-data-core"];e.forEach((e=>{switch(e){case"taro-open-data-core":customElements.get(e)||customElements.define(e,by);break}}))}const Ey=wy,Ty=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("PageContainer",this)}render(){return wp(Tp,null)}},[0,"taro-page-container-core"]);function Sy(){if("undefined"===typeof customElements)return;const e=["taro-page-container-core"];e.forEach((e=>{switch(e){case"taro-page-container-core":customElements.get(e)||customElements.define(e,Ty);break}}))}const Ay=Sy,xy=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("PageMeta",this)}render(){return wp(Tp,null)}},[0,"taro-page-meta-core"]);function ky(){if("undefined"===typeof customElements)return;const e=["taro-page-meta-core"];e.forEach((e=>{switch(e){case"taro-page-meta-core":customElements.get(e)||customElements.define(e,xy);break}}))}const Ly=ky,Cy=102,_y=34,Ry=7*_y,Iy=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onColumnChange=Rp(this,"columnChange",7),this.mode=void 0,this.range=[],this.rangeKey=void 0,this.height=void 0,this.columnId=void 0,this.updateHeight=void 0,this.updateDay=void 0,this.startY=void 0,this.preY=void 0,this.hadMove=void 0,this.touchEnd=void 0,this.isMove=void 0}getPosition(){const e=this.touchEnd?.3:0,t=`translate3d(0, ${this.height}px, 0)`,i=`transform ${e}s`;return{transform:t,"-webkit-transform":t,transition:i,"-webkit-transition":i}}formulaUnlimitedScroll(e,t,i){const{height:s,updateHeight:r,columnId:n}=this,o="up"===i?1:-1;this.touchEnd=!1,r(-e*o*_y+s,n),requestAnimationFrame((()=>{this.touchEnd=!0;const i=Math.round(t/-_y)+e*o,s=Cy-_y*i;r(s,n,!0)}))}handleMoveStart(e){return d(this,null,(function*(){this.startY=e,this.preY=e,this.hadMove=!1}))}handleMoving(e){return d(this,null,(function*(){const t=e,i=t-this.preY;this.preY=t,this.touchEnd=!1,Math.abs(t-this.startY)>10&&(this.hadMove=!0);let s=this.height+i;"time"===this.mode&&("0"===this.columnId?(s>Cy-3*_y&&(s=Cy-27*_y+i),s<Cy-28*_y&&(s=Cy-4*_y+i)):"1"===this.columnId&&(s>Cy-3*_y&&(s=Cy-63*_y+i),s<Cy-64*_y&&(s=Cy-4*_y+i))),this.updateHeight(s,this.columnId)}))}handleMoveEnd(e){return d(this,null,(function*(){const{mode:t,range:i,height:s,updateHeight:r,columnId:n}=this,o=0,a=-_y*(i.length-1),l=e;let c;if(this.touchEnd=!0,this.hadMove)c=s-Cy;else{const e=window.innerHeight,i=e-Ry/2;if(c=s-Cy-(l-i),"time"===t)if("0"===n){if(c>2.5*-_y)return this.formulaUnlimitedScroll(24,c,"up");if(c<28.5*-_y)return this.formulaUnlimitedScroll(24,c,"down")}else if("1"===n){if(c>2.5*-_y)return this.formulaUnlimitedScroll(60,c,"up");if(c<64.5*-_y)return this.formulaUnlimitedScroll(60,c,"down")}}c>o&&(c=0),c<a&&(c=a);const d=Math.round(c/-_y),h=Cy-_y*d;"date"===this.mode&&"function"===typeof this.updateDay&&("0"===this.columnId&&this.updateDay(+this.range[d].replace(/[^0-9]/gi,""),0),"1"===this.columnId&&this.updateDay(+this.range[d].replace(/[^0-9]/gi,""),1),"2"===this.columnId&&this.updateDay(+this.range[d].replace(/[^0-9]/gi,""),2)),r(h,n,"time"===t),this.onColumnChange.emit({columnId:n,height:h})}))}onMouseDown(e){this.isMove=!0,this.handleMoveStart(e.clientY)}onMouseMove(e){this.isMove&&this.handleMoving(e.clientY)}onMouseMoveEnd(e){this.isMove&&(this.isMove=!1,this.handleMoveEnd(e.clientY))}onTouchStart(e){this.handleMoveStart(e.changedTouches[0].clientY)}onTouchMove(e){this.handleMoving(e.changedTouches[0].clientY)}onTouchEnd(e){this.handleMoveEnd(e.changedTouches[0].clientY)}render(){const{range:e,rangeKey:t}=this,i=e.map((e=>{const i=t?e[t]:e;return wp("div",{class:"weui-picker__item"},i)}));return wp(Tp,{class:"weui-picker__group"},wp("div",{class:"weui-picker__mask"}),wp("div",{class:"weui-picker__indicator"}),wp("div",{class:"weui-picker__content",style:this.getPosition()},i))}},[0,"taro-picker-group",{mode:[1],range:[16],rangeKey:[1,"range-key"],height:[2],columnId:[1,"column-id"],updateHeight:[16],updateDay:[16],startY:[32],preY:[32],hadMove:[32],touchEnd:[32],isMove:[32],handleMoveStart:[64],handleMoving:[64],handleMoveEnd:[64]},[[1,"mousedown","onMouseDown"],[3,"mousemove","onMouseMove"],[1,"mouseup","onMouseMoveEnd"],[1,"mouseleave","onMouseMoveEnd"],[1,"touchstart","onTouchStart"],[3,"touchmove","onTouchMove"],[1,"touchend","onTouchEnd"]]]);function Dy(){if("undefined"===typeof customElements)return;const e=["taro-picker-group"];e.forEach((e=>{switch(e){case"taro-picker-group":customElements.get(e)||customElements.define(e,Iy);break}}))}function Py(e,t){const i=[];for(let s=e;s<=t;s++)i.push(`${s<10?"0":""}${s}`);return i}const My=["20","21","22","23",...Py(0,23),"00","01","02","03"],Oy=["56","57","58","59",...Py(0,59),"00","01","02","03"];function Ny(e,t){return!isNaN(+e)&&e>=0&&e<t.length}function Fy(e){if(!/^\d{1,2}:\d{1,2}$/.test(e))return!1;const t=e.split(":").map((e=>+e));return!(t[0]<0||t[0]>23)&&!(t[1]<0||t[1]>59)}function By(e,t){const i=e.split(":").map((e=>+e)),s=t.split(":").map((e=>+e));return i[0]<s[0]||i[0]===s[0]&&i[1]<=s[1]}function $y(e){if(!e)return!1;const t=new Date(e.replace(/-/g,"/"));return!isNaN(t.getMonth())&&t}function Uy(e,t){return 4===t||6===t||9===t||11===t?30:2===t?e%4===0&&e%100!==0||e%400===0?29:28:31}function Gy(e){let t;return t=Array.isArray(e)?e.map((e=>String(e))):e,t}function Hy(e,t){const i=[];for(let s=e;s<=t;s++)i.push(s);return i}function jy(e,t){return Hy(e,t)}function zy(e,t,i){let s=1,r=12;return e.getFullYear()===i&&(s=e.getMonth()+1),t.getFullYear()===i&&(r=t.getMonth()+1),Hy(s,r)}function Vy(e,t,i,s){let r=1,n=Uy(i,s);return e.getFullYear()===i&&e.getMonth()+1===s&&(r=e.getDate()),t.getFullYear()===i&&t.getMonth()+1===s&&(n=t.getDate()),Hy(r,n)}const Yy='.weui-mask{z-index:1000;background:rgba(0,0,0,.6);position:fixed;inset:0}.weui-mask_transparent{z-index:1000;position:fixed;inset:0}@-webkit-keyframes weuiSlideUp{0%{-webkit-transform:translateY(100%);transform:translateY(100%)}to{-webkit-transform:translate(0,0);transform:translate(0,0)}}@keyframes weuiSlideUp{0%{-webkit-transform:translateY(100%);transform:translateY(100%)}to{-webkit-transform:translate(0,0);transform:translate(0,0)}}.weui-animate-slide-up{-webkit-animation:.3s forwards weuiSlideUp;animation:.3s forwards weuiSlideUp}@-webkit-keyframes weuiSlideDown{0%{-webkit-transform:translate(0,0);transform:translate(0,0)}to{-webkit-transform:translateY(100%);transform:translateY(100%)}}@keyframes weuiSlideDown{0%{-webkit-transform:translate(0,0);transform:translate(0,0)}to{-webkit-transform:translateY(100%);transform:translateY(100%)}}.weui-animate-slide-down{-webkit-animation:.3s forwards weuiSlideDown;animation:.3s forwards weuiSlideDown}@-webkit-keyframes weuiFadeIn{0%{opacity:0}to{opacity:1}}@keyframes weuiFadeIn{0%{opacity:0}to{opacity:1}}.weui-animate-fade-in{-webkit-animation:.3s forwards weuiFadeIn;animation:.3s forwards weuiFadeIn}@-webkit-keyframes weuiFadeOut{0%{opacity:1}to{opacity:0}}@keyframes weuiFadeOut{0%{opacity:1}to{opacity:0}}.weui-animate-fade-out{-webkit-animation:.3s forwards weuiFadeOut;animation:.3s forwards weuiFadeOut}.weui-picker{-webkit-box-sizing:border-box;box-sizing:border-box;z-index:5000;background-color:var(--weui-BG-2);padding-left:0;padding-left:constant(safe-area-inset-left);padding-left:env(safe-area-inset-left);padding-right:0;padding-right:constant(safe-area-inset-right);padding-right:env(safe-area-inset-right);-webkit-backface-visibility:hidden;backface-visibility:hidden;width:100%;-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s, -webkit-transform .3s;position:fixed;bottom:0;left:0;-webkit-transform:translateY(100%);transform:translateY(100%)}.weui-picker__hd{text-align:center;background-color:#fff;padding:9px 15px;font-size:17px;display:-ms-flexbox;display:flex;position:relative}.weui-picker__hd:after{content:" ";color:#e5e5e5;-webkit-transform-origin:0 100%;transform-origin:0 100%;border-bottom:1px solid #e5e5e5;height:1px;position:absolute;bottom:0;left:0;right:0;-webkit-transform:scaleY(.5);transform:scaleY(.5)}.weui-picker__action{color:#1aad19;-ms-flex:1;flex:1;display:block}.weui-picker__action:first-child{text-align:left;color:#888}.weui-picker__action:last-child{text-align:right}.weui-picker__bd{background-color:#fff;height:238px;display:-ms-flexbox;display:flex;position:relative;overflow:hidden}.weui-picker__group{-ms-flex:1;flex:1;height:100%;position:relative}.weui-picker__mask{z-index:3;background-color:transparent;background-image:-webkit-gradient(linear,left top, left bottom,from(rgba(255,255,255,.95)),to(rgba(255,255,255,.6))),-webkit-gradient(linear,left top, left bottom,from(rgba(255,255,255,.6)),to(rgba(255,255,255,.95)));background-image:linear-gradient(rgba(255,255,255,.95),rgba(255,255,255,.6)),linear-gradient(rgba(255,255,255,.6),rgba(255,255,255,.95));background-position:top,bottom;background-repeat:no-repeat;background-size:100% 102px;background-attachment:scroll,scroll;background-origin:padding-box,padding-box;background-clip:border-box,border-box;width:100%;height:100%;margin:0 auto;position:absolute;top:0;left:0;-webkit-transform:translateZ(0);transform:translateZ(0)}.weui-picker__indicator{z-index:3;width:100%;height:34px;position:absolute;top:102px;left:0}.weui-picker__indicator:before{content:" ";color:#e5e5e5;-webkit-transform-origin:0 0;transform-origin:0 0;border-top:1px solid #e5e5e5;height:1px;position:absolute;top:0;left:0;right:0;-webkit-transform:scaleY(.5);transform:scaleY(.5)}.weui-picker__indicator:after{content:" ";color:#e5e5e5;-webkit-transform-origin:0 100%;transform-origin:0 100%;border-bottom:1px solid #e5e5e5;height:1px;position:absolute;bottom:0;left:0;right:0;-webkit-transform:scaleY(.5);transform:scaleY(.5)}.weui-picker__content{width:100%;position:absolute;top:0;left:0}.weui-picker__item{text-align:center;color:#000;text-overflow:ellipsis;white-space:nowrap;height:34px;padding:0;line-height:34px;overflow:hidden}.weui-picker__item_disabled{color:#999}.weui-picker,.weui-picker__hd{font-size:12px}',Wy=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onChange=Rp(this,"change",7),this.onColumnChange=Rp(this,"columnchange",7),this.onCancel=Rp(this,"cancel",7),this.index=[],this.showPicker=()=>{this.disabled||(this.height=this.getHeightByIndex(),this.hidden=!1)},this.getHeightByIndex=()=>{const e=this.index.map((e=>{let t=0;return"time"===this.mode&&(t=4*_y),Cy-_y*e-t}));return e},this.hidePicker=()=>{this.fadeOut=!0,setTimeout((()=>{this.hidden=!0,this.fadeOut=!1}),350)},this.handleChange=()=>{this.hidePicker(),this.index=this.height.map((e=>(Cy-e)/_y));let e=this.index.length&&"selector"!==this.mode?this.index:this.index[0];if("time"===this.mode){const t=[My.slice(),Oy.slice()],i=this.index.map(((e,i)=>t[i][e]));this.index=i.map((e=>parseInt(e))),e=i.join(":")}if("date"===this.mode){const{_start:t,_end:i,_updateValue:s}=this.pickerDate,r=s[0],n=s[1],o=jy(t.getFullYear(),i.getFullYear()),a=zy(t,i,r),l=Vy(t,i,r,n),c=o[this.index[0]],d=a[this.index[1]],h=l[this.index[2]];e="year"===this.fields?[c]:"month"===this.fields?[c,d]:[c,d,h],e=e.map((e=>e<10?`0${e}`:e)).join("-")}this.value=e,this.pickerValue=this.value,this.onChange.emit({value:e})},this.handleColumnChange=e=>{const{columnId:t,height:i}=e.detail;this.onColumnChange.emit({column:Number(t),value:(Cy-i)/_y})},this.handleCancel=()=>{this.hidePicker(),this.onCancel.emit()},this.updateHeight=(e,t,i=!1)=>{const s=[...this.height];if(s[t]=e,this.height=s,i){let{start:e,end:t}=this;if(Fy(e)||(e="00:00"),Fy(t)||(t="23:59"),!By(e,t))return;const i=[My.slice(),Oy.slice()],s=this.height.map((e=>(Cy-e)/_y)),r=s.map(((e,t)=>i[t][e])).join(":");if(By(e,r)){if(!By(r,t)){const e=t.split(":").map((e=>Cy-_y*(+e+4)));requestAnimationFrame((()=>this.height=e))}}else{const t=e.split(":").map((e=>Cy-_y*(+e+4)));requestAnimationFrame((()=>this.height=t))}}},this.updateDay=(e,t)=>{const{_start:i,_end:s,_updateValue:r}=this.pickerDate;r[t]=e;const n=r[0],o=r[1],a=r[2];if(0===t){const e=zy(i,s,n),t=e[e.length-1],a=e[0];o>t&&(r[1]=t),o<a&&(r[1]=a);const l=e.indexOf(r[1]),c=Cy-_y*l;this.updateDay(r[1],1),this.updateHeight(c,"1")}else if(1===t){const e=Vy(i,s,n,o),t=e[e.length-1],l=e[0];a>t&&(r[2]=t),a<l&&(r[2]=l);const c=e.indexOf(r[2]),d=Cy-_y*c;this.updateDay(r[2],2),this.updateHeight(d,"2")}},this.getSelector=()=>wp("taro-picker-group",{range:this.range,rangeKey:this.rangeKey,height:this.height[0],updateHeight:this.updateHeight,columnId:"0"}),this.getMultiSelector=()=>this.range.map(((e,t)=>wp("taro-picker-group",{range:e,rangeKey:this.rangeKey,height:this.height[t],updateHeight:this.updateHeight,onColumnChange:this.handleColumnChange,columnId:String(t)}))),this.getTimeSelector=()=>{const e=My.slice(),t=Oy.slice();return[wp("taro-picker-group",{mode:"time",range:e,height:this.height[0],updateHeight:this.updateHeight,columnId:"0"}),wp("taro-picker-group",{mode:"time",range:t,height:this.height[1],updateHeight:this.updateHeight,columnId:"1"})]},this.getDateSelector=()=>{const{fields:e,height:t}=this,{_start:i,_end:s,_updateValue:r}=this.pickerDate,n=r[0],o=r[1],a=jy(i.getFullYear(),s.getFullYear()).map((e=>`${e}\u5e74`)),l=zy(i,s,n).map((e=>`${e<10?`0${e}`:e}\u6708`)),c=Vy(i,s,n,o).map((e=>`${e<10?`0${e}`:e}\u65e5`)),d=[wp("taro-picker-group",{mode:"date",range:a,height:t[0],updateDay:this.updateDay,updateHeight:this.updateHeight,columnId:"0"})];return"month"!==e&&"day"!==e||d.push(wp("taro-picker-group",{mode:"date",range:l,height:t[1],updateDay:this.updateDay,updateHeight:this.updateHeight,columnId:"1"})),"day"===e&&d.push(wp("taro-picker-group",{mode:"date",range:c,height:t[2],updateDay:this.updateDay,updateHeight:this.updateHeight,columnId:"2"})),d},this.mode="selector",this.disabled=!1,this.range=[],this.rangeKey=void 0,this.value=void 0,this.start="",this.end="",this.fields="day",this.name="",this.textProps={},this.pickerValue=[],this.height=[],this.hidden=!0,this.fadeOut=!1,this.isWillLoadCalled=!1}componentWillLoad(){this.isWillLoadCalled=!0,this.handleProps()}componentDidLoad(){this.overlay&&document.body.appendChild(this.overlay)}disconnectedCallback(){var e;this.overlay&&(null===(e=this.overlay.parentNode)||void 0===e||e.removeChild(this.overlay))}onPropsChange(){this.isWillLoadCalled&&this.handleProps()}handleProps(){const{mode:e,start:t,end:i}=this;if("selector"===e){const e=this.value;this.index=[Ny(e,this.range)?Math.floor(e):0]}else if("multiSelector"===e){const e=this.value;this.index=[],this.range.forEach(((t,i)=>{const s=null===e||void 0===e?void 0:e[i],r=Ny(s,t)?Math.floor(s):0;this.index.push(r)}))}else if("time"===e){let e=this.value;Fy(e)||(console.warn("time picker value illegal"),e="0:0");const t=e.split(":").map((e=>+e));this.index=t}else{if("date"!==e)throw new Error(`Picker not support "${e}" mode.`);{const e=this.value;let s=$y(e)||new Date((new Date).setHours(0,0,0,0));const r=$y(t)||new Date("1970/01/01"),n=$y(i)||new Date("2999/01/01");if(!(r<=n))throw new Error("Picker start time must be less than end time.");s>=r&&s<=n||(s=r);const o=s.getFullYear(),a=s.getMonth()+1,l=s.getDate(),c=jy(r.getFullYear(),n.getFullYear()),d=zy(r,n,o),h=Vy(r,n,o,a);this.index=[c.indexOf(o),d.indexOf(a),h.indexOf(l)],this.pickerDate&&this.pickerDate._value.getTime()===s.getTime()&&this.pickerDate._start.getTime()===r.getTime()&&this.pickerDate._end.getTime()===n.getTime()||(this.pickerDate={_value:s,_start:r,_end:n,_updateValue:[o,a,l]})}}if(this.height=this.getHeightByIndex(),this.pickerValue=this.value,"date"===e){const e=this.pickerValue;"month"===this.fields?this.pickerValue=e.split("-").slice(0,2).join("-"):"year"===this.fields&&(this.pickerValue=e.split("-")[0])}}render(){var e,t;const{name:i,mode:s,fadeOut:r,hidden:n}=this;let o;switch(s){case"multiSelector":o=this.getMultiSelector();break;case"time":o=this.getTimeSelector();break;case"date":o=this.getDateSelector();break;default:o=this.getSelector()}const a=vg("weui-mask","weui-animate-fade-in",{"weui-animate-fade-out":r}),l=vg("weui-picker","weui-animate-slide-up",{"weui-animate-slide-down":r}),c=n?{display:"none"}:{};return wp(Tp,null,wp("div",{onClick:this.showPicker},wp("slot",null),wp("input",{type:"hidden",name:i,value:Gy(this.pickerValue)})),wp("div",{class:"weui-picker__overlay",style:c,ref:e=>{this.overlay=e}},wp("div",{class:a,onClick:this.handleCancel}),wp("div",{class:l},wp("div",{class:"weui-picker__hd"},wp("div",{class:"weui-picker__action",onClick:this.handleCancel},null!==(e=this.textProps.cancelText)&&void 0!==e?e:"\u53d6\u6d88"),wp("div",{class:"weui-picker__action",onClick:this.handleChange},null!==(t=this.textProps.okText)&&void 0!==t?t:"\u786e\u5b9a")),wp("div",{class:"weui-picker__bd"},o),wp("input",{type:"hidden",name:i,value:Gy(this.pickerValue)}))))}get el(){return this}static get watchers(){return{mode:["onPropsChange"],value:["onPropsChange"],range:["onPropsChange"],start:["onPropsChange"],end:["onPropsChange"]}}static get style(){return Yy}},[4,"taro-picker-core",{mode:[1],disabled:[4],range:[16],rangeKey:[1,"range-key"],value:[1032],start:[1],end:[1],fields:[1],name:[1],textProps:[16],pickerValue:[32],height:[32],hidden:[32],fadeOut:[32],isWillLoadCalled:[32]}]);function Ky(){if("undefined"===typeof customElements)return;const e=["taro-picker-core","taro-picker-group"];e.forEach((e=>{switch(e){case"taro-picker-core":customElements.get(e)||customElements.define(e,Wy);break;case"taro-picker-group":customElements.get(e)||Dy();break}}))}const qy=Ky,Xy=Dy,Zy=".taro-picker-view-column-container{text-align:center;-ms-flex-direction:column;flex-direction:column;-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;position:relative;overflow:hidden scroll}.taro-picker-view-column-container::-webkit-scrollbar{display:none}",Qy=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onChange=Rp(this,"onselect",7),this.onSelectStart=Rp(this,"onselectstart",7),this.onSelectEnd=Rp(this,"onselectend",7),this.handleSelected=Uv((()=>{const e=this.el.childNodes;let t=0,i="0";for(const s in e){const r=e[s],n=r.offsetHeight;if(t+n/2>this.el.scrollTop){i=s;break}t+=n}this.el.scrollTo({top:t,behavior:"smooth"}),this.onChange.emit({curIndex:this.col,selectedIndex:i}),this.onSelectEnd.emit()}),500),this.col=void 0,this.initialPosition="0",this.paddingVertical=0,this.isInit=!1}onTouchStart(){this.onSelectStart.emit()}onTouchEnd(){this.handleSelected()}componentDidLoad(){this.handleChange()}componentDidUpdate(){this.handleChange()}handleChange(){const e=this.el.childNodes;let t=0,i=0;for(const s in e){const r=e[s];if(this.initialPosition===s||!r||"number"!==typeof r.offsetHeight)break;i+=r.offsetHeight,t++}this.el.scrollTo({top:i}),t>=e.length&&this.onChange.emit({curIndex:this.col,selectedIndex:t-1})}render(){const{paddingVertical:e=0}=this;return wp(Tp,{class:"taro-picker-view-column-container",style:{"padding-top":`${e}px`,"padding-bottom":`${e}px`}})}get el(){return this}static get style(){return Zy}},[0,"taro-picker-view-column-core",{col:[1],initialPosition:[1,"initial-position"],paddingVertical:[2,"padding-vertical"],isInit:[32]},[[1,"touchstart","onTouchStart"],[1,"touchend","onTouchEnd"]]]);function Jy(){if("undefined"===typeof customElements)return;const e=["taro-picker-view-column-core"];e.forEach((e=>{switch(e){case"taro-picker-view-column-core":customElements.get(e)||customElements.define(e,Qy);break}}))}const eb=Jy;function tb(e){if(e){const t=/([\w-]*)\s*:\s*([^;]*)/g,i={};let s;while(s=t.exec(e))i[`${s[1]}`]=s[2].trim();return i}}const ib=".taro-picker-view-container{display:-ms-flexbox;display:flex;position:relative}.taro-picker-view-mask-container{pointer-events:none;-ms-flex-direction:column;flex-direction:column;display:-ms-flexbox;display:flex;position:absolute;inset:0}.taro-picker-view-mask-indicator{border-top:1px solid #ddd;border-bottom:1px solid #ddd;height:50px;display:-ms-flexbox;display:flex}.taro-picker-view-mask-top{background-image:-webkit-gradient(linear,left top, left bottom,from(rgba(255,255,255,.95)),to(rgba(255,255,255,.6)));background-image:linear-gradient(rgba(255,255,255,.95),rgba(255,255,255,.6));-ms-flex:1;flex:1}.taro-picker-view-mask-bottom{background:-webkit-gradient(linear,left top, left bottom,from(rgba(255,255,255,.6)),to(rgba(255,255,255,.95)));background:linear-gradient(rgba(255,255,255,.6),rgba(255,255,255,.95));-ms-flex:1;flex:1}",sb=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onChange=Rp(this,"change",7),this.onPickStart=Rp(this,"pickstart",7),this.onPickEnd=Rp(this,"pickend",7),this.indicatorStyle=void 0,this.indicatorClass=void 0,this.value=void 0,this.maskStyle=void 0,this.maskClass=void 0}onPropsChange(){this.handleValueChange()}onSelect(e){if(e.stopPropagation(),"TARO-PICKER-VIEW-COLUMN-CORE"!==e.target.tagName)return;let t=+e.detail.curIndex,i=+e.detail.selectedIndex;this.value[t]=i,this.onChange.emit({value:this.value})}onSelectStart(e){e.stopPropagation(),"TARO-PICKER-VIEW-COLUMN-CORE"===e.target.tagName&&this.onPickStart.emit()}onPickerColEnd(e){e.stopPropagation(),"TARO-PICKER-VIEW-COLUMN-CORE"===e.target.tagName&&this.onPickEnd.emit()}componentDidLoad(){this.handleValueChange()}handleValueChange(){const e=this.el.querySelectorAll("taro-picker-view-column-core");e.forEach(((e,t)=>{var i;e.setAttribute("col",`${t}`);let s=0;this.value&&this.value.length>t&&(s=this.value[t]);const r=this.el.getBoundingClientRect().height,n=(null===(i=this.indicator)||void 0===i?void 0:i.offsetHeight)||0,o=(r-n)/2;e.setAttribute("initial-position",`${s}`),e.setAttribute("padding-vertical",`${o}`)}))}componentDidRender(){this.el.childNodes.forEach((e=>{const t=e;"TARO-PICKER-VIEW-COLUMN-CORE"!==t.tagName&&"taro-picker-view-mask-container"!==t.className&&this.el.removeChild(e)}))}render(){const e=vg("taro-picker-view-mask-indicator",this.indicatorClass),t=vg("taro-picker-view-mask-top",this.maskClass),i=vg("taro-picker-view-mask-bottom",this.maskClass),s=tb(this.indicatorStyle),r=tb(this.maskStyle),n=tb(this.maskStyle);return wp(Tp,{class:"taro-picker-view-container"},wp("slot",null),wp("div",{class:"taro-picker-view-mask-container"},wp("div",{class:t,style:r}),wp("div",{class:e,style:s,ref:e=>this.indicator=e}),wp("div",{class:i,style:n})))}get el(){return this}static get watchers(){return{value:["onPropsChange"]}}static get style(){return ib}},[4,"taro-picker-view-core",{indicatorStyle:[1,"indicator-style"],indicatorClass:[1,"indicator-class"],value:[16],maskStyle:[1,"mask-style"],maskClass:[1,"mask-class"]},[[0,"onselect","onSelect"],[0,"onselectstart","onSelectStart"],[0,"onselectend","onPickerColEnd"]]]);function rb(){if("undefined"===typeof customElements)return;const e=["taro-picker-view-core"];e.forEach((e=>{switch(e){case"taro-picker-view-core":customElements.get(e)||customElements.define(e,sb);break}}))}const nb=rb,ob=".weui-progress{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex}.weui-progress__bar{background-color:#ebebeb;-ms-flex:1;flex:1;height:3px}.weui-progress__inner-bar{background-color:#09bb07;width:0;height:100%}.weui-progress__opr{margin-left:15px;font-size:0;display:block}",ab=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.percent=0,this.showInfo=!1,this.borderRadius=0,this.fontSize=16,this.strokeWidth=6,this.activeColor="#09BB07",this.backgroundColor="#EBEBEB",this.active=!1}render(){const{percent:e,showInfo:t,borderRadius:i,fontSize:s,strokeWidth:r,activeColor:n,backgroundColor:o,active:a}=this,l=e>100?100:e<0?0:e,c={height:r+"px",backgroundColor:o},d=a?"width 1s ease-in-out":"none",h={width:`${l}%`,transition:d,WebkitTransition:d,backgroundColor:n,borderRadius:i?`${i}px`:"0px"};return wp(Tp,{class:"weui-progress"},wp("div",{class:"weui-progress__bar",style:c},wp("div",{class:"weui-progress__inner-bar",style:h})),t&&wp("div",{class:"weui-progress__opr",style:{"font-size":`${s}px`}},wp("span",null,l,"%")))}static get style(){return ob}},[0,"taro-progress-core",{percent:[2],showInfo:[4,"show-info"],borderRadius:[8,"border-radius"],fontSize:[8,"font-size"],strokeWidth:[8,"stroke-width"],activeColor:[1,"active-color"],backgroundColor:[1,"background-color"],active:[4]}]);function lb(){if("undefined"===typeof customElements)return;const e=["taro-progress-core"];e.forEach((e=>{switch(e){case"taro-progress-core":customElements.get(e)||customElements.define(e,ab);break}}))}const cb=lb,db=".rmc-pull-to-refresh-content{-webkit-transform-origin:0 0;transform-origin:0 0}.rmc-pull-to-refresh-content-wrapper{min-height:100%}.rmc-pull-to-refresh-transition{-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s, -webkit-transform .3s}@-webkit-keyframes rmc-pull-to-refresh-indicator{50%{opacity:.2}to{opacity:1}}@keyframes rmc-pull-to-refresh-indicator{50%{opacity:.2}to{opacity:1}}.rmc-pull-to-refresh-indicator{text-align:center;height:30px;line-height:10px}.rmc-pull-to-refresh-indicator>div{background-color:gray;border-radius:100%;width:6px;height:6px;margin:3px;-webkit-animation:.5s linear infinite both rmc-pull-to-refresh-indicator;animation:.5s linear infinite both rmc-pull-to-refresh-indicator;display:inline-block}.rmc-pull-to-refresh-indicator>div:nth-child(0){-webkit-animation-delay:-.1s!important;animation-delay:-.1s!important}.rmc-pull-to-refresh-indicator>div:first-child{-webkit-animation-delay:-.2s!important;animation-delay:-.2s!important}.rmc-pull-to-refresh-indicator>div:nth-child(2){-webkit-animation-delay:-.3s!important;animation-delay:-.3s!important}.rmc-pull-to-refresh-down .rmc-pull-to-refresh-indicator{margin-top:-25px}";function hb(e,t){e.transform=t,e.webkitTransform=t,e.MozTransform=t}const ub="undefined"!==typeof navigator&&/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),pb={activate:"release",deactivate:"pull",release:"loading",finish:"finish"};let fb=!1;try{const e=Object.defineProperty({},"passive",{get(){fb=!0}});window.addEventListener("cancel",(()=>({})),e)}catch(N$){}const gb=!!fb&&{passive:!1},mb=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onRefresh=Rp(this,"refresh",7),this._ScreenY=0,this._startScreenY=0,this._lastScreenY=0,this._isMounted=!1,this.triggerPullDownRefresh=e=>{!this.dragOnEdge&&this._isMounted&&(e?(this._lastScreenY=this.distanceToRefresh+1,this.currSt="release",this.setContentStyle(this._lastScreenY)):(this.currSt="finish",this.reset()))},this.init=()=>{const e=this.scrollContainer,t=this.el.querySelector(".rmc-pull-to-refresh-content");this.el.appendChild=null===t||void 0===t?void 0:t.appendChild.bind(t),this.el.insertBefore=null===t||void 0===t?void 0:t.insertBefore.bind(t),this.el.replaceChild=null===t||void 0===t?void 0:t.replaceChild.bind(t),this.el.removeChild=null===t||void 0===t?void 0:t.removeChild.bind(t),this._to={touchstart:this.onTouchStart.bind(this,e),touchmove:this.onTouchMove.bind(this,e),touchend:this.onTouchEnd.bind(this,e),touchcancel:this.onTouchEnd.bind(this,e)},Object.keys(this._to).forEach((t=>{e.addEventListener(t,this._to[t],gb)}))},this.destroy=()=>{if(!this._to)return;const e=this.scrollContainer;Object.keys(this._to).forEach((t=>{e.removeEventListener(t,this._to[t])}))},this.onTouchStart=(e,t)=>{this._ScreenY=this._startScreenY=t.touches[0].screenY,this._lastScreenY=this._lastScreenY||0},this.isEdge=e=>{const t=this.scrollContainer;if(t&&t===document.body){const e=document.scrollingElement?document.scrollingElement:document.body;return e.scrollTop<=0}return e.scrollTop<=0},this.damp=e=>{if(Math.abs(this._lastScreenY)>this.damping)return 0;const t=Math.abs(this._ScreenY-this._startScreenY)/window.screen.height;return e*=.6*(1-t),e},this.onTouchMove=(e,t)=>{const i=t.touches[0].screenY;if(!(this._startScreenY>i)&&this.isEdge(e)){this.dragOnEdge||(this._ScreenY=this._startScreenY=t.touches[0].screenY,this.dragOnEdge=!0),t.cancelable&&t.preventDefault();const e=Math.round(i-this._ScreenY);this._ScreenY=i,this._lastScreenY+=this.damp(e),this.setContentStyle(this._lastScreenY),Math.abs(this._lastScreenY)<this.distanceToRefresh?"deactivate"!==this.currSt&&(this.currSt="deactivate"):"deactivate"===this.currSt&&(this.currSt="activate"),ub&&t.changedTouches[0].clientY<0&&this.onTouchEnd()}},this.onTouchEnd=()=>{this.dragOnEdge&&(this.dragOnEdge=!1),"activate"===this.currSt?(this.currSt="release",this.onRefresh.emit(this),this._lastScreenY=this.distanceToRefresh+1,this.setContentStyle(this._lastScreenY)):"release"===this.currSt?(this._lastScreenY=this.distanceToRefresh+1,this.setContentStyle(this._lastScreenY)):this.reset()},this.reset=()=>{this._lastScreenY=0,this.setContentStyle(0)},this.setContentStyle=e=>{this.contentRef&&hb(this.contentRef.style,e?`translate3d(0px,${e}px,0)`:"")},this.prefixCls="rmc-pull-to-refresh",this.distanceToRefresh=50,this.damping=100,this.indicator=pb,this.currSt="deactivate",this.dragOnEdge=!1}get scrollContainer(){return this.el.parentElement||this.el.closest(".taro_page_stationed")||document.querySelector(".taro_page_stationed")||document.querySelector(".taro_page")||document.querySelector(".taro_router")||document.querySelector(".taro-tabbar__panel")||document.body}statusChange(){var e,t,i,s;const r=this.scrollContainer;switch(this.currSt){case"release":null===(t=null===(e=null===r||void 0===r?void 0:r.__page)||void 0===e?void 0:e.onPullDownRefresh)||void 0===t||t.call(e);break;case"deactivate":null===(s=null===(i=null===r||void 0===r?void 0:r.__page)||void 0===i?void 0:i.onPullIntercept)||void 0===s||s.call(i)}}disconnectedCallback(){this.destroy()}componentDidLoad(){this.init(),this._isMounted=!0,PL.eventCenter.on("__taroStartPullDownRefresh",(({successHandler:e,errorHandler:t})=>{try{this.triggerPullDownRefresh(!0),e({errMsg:"startPullDownRefresh: ok"})}catch(N$){t({errMsg:"startPullDownRefresh: fail"})}})),PL.eventCenter.on("__taroStopPullDownRefresh",(({successHandler:e,errorHandler:t})=>{setTimeout((()=>{try{this.triggerPullDownRefresh(!1),e({errMsg:"stopPullDownRefresh: ok"})}catch(N$){t({errMsg:"stopPullDownRefresh: fail"})}}),0)}))}render(){const e=e=>{const{currSt:t,dragOnEdge:i,prefixCls:s}=this,r=vg(e,!i&&`${s}-transition`),n="activate"===t||"release"===t;return wp("div",{class:`${s}-content-wrapper`},wp("div",{class:r,ref:e=>{this.contentRef=e}},n&&wp("div",{class:`${s}-indicator`},wp("div",null),wp("div",null),wp("div",null)),wp("slot",null)))};return this.scrollContainer?e(`${this.prefixCls}-content ${this.prefixCls}-down`):wp(Tp,{class:vg(this.prefixCls,`${this.prefixCls}-down`)},e(`${this.prefixCls}-content`))}get el(){return this}static get watchers(){return{currSt:["statusChange"]}}static get style(){return db}},[4,"taro-pull-to-refresh-core",{prefixCls:[1,"prefix-cls"],distanceToRefresh:[2,"distance-to-refresh"],damping:[2],indicator:[16],currSt:[32],dragOnEdge:[32]}]);function vb(){if("undefined"===typeof customElements)return;const e=["taro-pull-to-refresh-core"];e.forEach((e=>{switch(e){case"taro-pull-to-refresh-core":customElements.get(e)||customElements.define(e,mb);break}}))}const yb=vb,bb=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onChange=Rp(this,"radiochange",7),this.handleClick=e=>{e.stopPropagation(),this.disabled||this.checked||(this.checked=!0)},this.name=void 0,this.value="",this.id=void 0,this.checked=!1,this.disabled=!1,this.nativeProps={},this.isWillLoadCalled=!1}watchChecked(e){this.isWillLoadCalled&&e&&this.onChange.emit({value:this.value})}watchId(e){this.isWillLoadCalled&&e&&this.inputEl.setAttribute("id",e)}componentDidRender(){this.id&&this.el.removeAttribute("id")}componentWillLoad(){this.isWillLoadCalled=!0}render(){const{checked:e,name:t,value:i,disabled:s,nativeProps:r}=this;return wp(Tp,{className:"weui-cells_checkbox",onClick:this.handleClick},wp("input",Object.assign({ref:e=>{e&&(this.inputEl=e,this.id&&e.setAttribute("id",this.id))},type:"radio",name:t,value:i,class:"weui-check",checked:e,disabled:s,onChange:e=>e.stopPropagation()},r)),wp("i",{class:"weui-icon-checked"}),wp("slot",null))}get el(){return this}static get watchers(){return{checked:["watchChecked"],id:["watchId"]}}},[4,"taro-radio-core",{name:[1],value:[1],id:[1025],checked:[1540],disabled:[4],nativeProps:[16],isWillLoadCalled:[32]}]);function wb(){if("undefined"===typeof customElements)return;const e=["taro-radio-core"];e.forEach((e=>{switch(e){case"taro-radio-core":customElements.get(e)||customElements.define(e,bb);break}}))}const Eb=wb;var Tb,Sb=function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},Ab=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};const xb=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onChange=Rp(this,"change",7),this.uniqueName=Date.now().toString(36),Tb.set(this,void 0),this.name=void 0}function(e){if(e.stopPropagation(),"TARO-RADIO-CORE"!==e.target.tagName)return;const t=e.target;if(t.checked){const i=this.el.querySelectorAll("taro-radio-core");i.forEach((e=>{e!==t&&(e.checked=!1)})),Sb(this,Tb,e.detail.value,"f"),this.onChange.emit({value:Ab(this,Tb,"f")})}}componentDidLoad(){const e=this.el.querySelectorAll("taro-radio-core");e.forEach((e=>{e.setAttribute("name",this.name||this.uniqueName)})),Object.defineProperty(this.el,"value",{get:()=>{if(!Ab(this,Tb,"f")){const e=this.el.querySelectorAll("taro-radio-core");Sb(this,Tb,this.getValues(e),"f")}return Ab(this,Tb,"f")},configurable:!0})}getValues(e){let t="";return Array.from(e).forEach((e=>{const i=e.querySelector("input");(null===i||void 0===i?void 0:i.checked)&&(t=i.value||"")})),t}render(){return wp(Tp,{class:"weui-cells_radiogroup"})}get el(){return this}},[0,"taro-radio-group-core",{name:[8]},[[0,"radiochange","function"]]]);function kb(){if("undefined"===typeof customElements)return;const e=["taro-radio-group-core"];e.forEach((e=>{switch(e){case"taro-radio-group-core":customElements.get(e)||customElements.define(e,xb);break}}))}Tb=new WeakMap;const Lb=kb,Cb="taro-rich-text-core{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}taro-rich-text-core[selectable=true],taro-rich-text-core[user-select=true]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;display:block}taro-rich-text-core[space]{white-space:pre-wrap}taro-rich-text-core[space=ensp]{word-spacing:.5em}taro-rich-text-core[space=nbsp]{word-spacing:1em}",_b=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.renderNode=e=>{if("type"in e&&"text"===e.type){const t=(e.text||"").replace(/&nbsp;/g,"\xa0");return t}if("name"in e&&e.name){const{name:t,attrs:i,children:s}=e,r={};let n=[];if(i&&"object"===typeof i)for(const e in i){const t=i[e];if("style"!==e||"string"!==typeof t)r[e]=t;else{const e=t.split(";").map((e=>e.trim())).filter((e=>e)),i={};e.forEach((e=>{if(!e)return;const t=/(.+): *(.+)/g.exec(e);if(!t)return;const[,s,r]=t,n=s.replace(/-([a-z])/g,((...e)=>e[1].toUpperCase()));i[n]=r})),Object.keys(i).length&&(r.style=i)}}return s&&s.length&&(n=s.map((e=>this.renderNode(e)))),wp(t,r,n)}return null},this.nodes=void 0,this.selectable=!1,this.userSelect=!1,this.space=void 0}render(){const{nodes:e,renderNode:t}=this;return Array.isArray(e)?wp(Tp,null,e.map((e=>t(e)))):wp(Tp,{innerHTML:e})}static get style(){return Cb}},[0,"taro-rich-text-core",{nodes:[1],selectable:[1028],userSelect:[1028,"user-select"],space:[1]}]);function Rb(){if("undefined"===typeof customElements)return;const e=["taro-rich-text-core"];e.forEach((e=>{switch(e){case"taro-rich-text-core":customElements.get(e)||customElements.define(e,_b);break}}))}const Ib=Rb,Db=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("RootPortal",this)}render(){return wp(Tp,null)}},[0,"taro-root-portal-core"]);function Pb(){if("undefined"===typeof customElements)return;const e=["taro-root-portal-core"];e.forEach((e=>{switch(e){case"taro-root-portal-core":customElements.get(e)||customElements.define(e,Db);break}}))}const Mb=Pb,Ob=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("RtcRoom",this)}render(){return wp(Tp,null)}},[0,"taro-rtc-room-core"]);function Nb(){if("undefined"===typeof customElements)return;const e=["taro-rtc-room-core"];e.forEach((e=>{switch(e){case"taro-rtc-room-core":customElements.get(e)||customElements.define(e,Ob);break}}))}const Fb=Nb,Bb=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("RtcRoomItem",this)}render(){return wp(Tp,null)}},[0,"taro-rtc-room-item-core"]);function $b(){if("undefined"===typeof customElements)return;const e=["taro-rtc-room-item-core"];e.forEach((e=>{switch(e){case"taro-rtc-room-item-core":customElements.get(e)||customElements.define(e,Bb);break}}))}const Ub=$b,Gb="taro-scroll-view-core{-webkit-overflow-scrolling:auto;width:100%;display:block}taro-scroll-view-core::-webkit-scrollbar{display:none}.taro-scroll-view__scroll-x{overflow:scroll hidden}.taro-scroll-view__scroll-y{overflow:hidden scroll}";function Hb(e,t,i=500,s){if(e===t||"number"!==typeof e)return;const r=t-e,n=Date.now(),o=t>=e;function a(e,t,i,s){return i*e/s+t}function l(){e=a(Date.now()-n,e,r,i),o&&e>=t||!o&&t>=e?s(t):(s(e),requestAnimationFrame(l))}l()}const jb=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onScroll=Rp(this,"scroll",3),this.onScrollToUpper=Rp(this,"scrolltoupper",3),this.onScrollToLower=Rp(this,"scrolltolower",3),this._scrollLeft=0,this._scrollTop=0,this.upperAndLower=Uv((()=>{const{offsetWidth:e,offsetHeight:t,scrollLeft:i,scrollTop:s,scrollHeight:r,scrollWidth:n}=this.el,o=Number(this.lowerThreshold),a=Number(this.upperThreshold);!isNaN(o)&&(this.scrollY&&t+s+o>=r||this.scrollX&&e+i+o>=n)&&this.onScrollToLower.emit({direction:this.scrollX?"right":this.scrollY?"bottom":""}),!isNaN(a)&&(this.scrollY&&s<=a||this.scrollX&&i<=a)&&this.onScrollToUpper.emit({direction:this.scrollX?"left":this.scrollY?"top":""})}),200),this.scrollX=!1,this.scrollY=!1,this.upperThreshold=50,this.lowerThreshold=50,this.mpScrollTop=void 0,this.mpScrollLeft=void 0,this.mpScrollIntoView=void 0,this.mpScrollIntoViewAlignment=void 0,this.animated=!1}watchScrollLeft(e){const t=Number(e),{animated:i}=this;this.mpScrollToMethod({left:t,animated:i})}watchScrollTop(e){const t=Number(e),{animated:i}=this;this.mpScrollToMethod({top:t,animated:i})}watchScrollIntoView(e){this.mpScrollIntoViewMethod(e)}handleScroll(e){var t;if(e instanceof CustomEvent)return;e.stopPropagation(),null===(t=e.stopImmediatePropagation)||void 0===t||t.call(e);const{scrollLeft:i,scrollTop:s,scrollHeight:r,scrollWidth:n}=this.el;this._scrollLeft=i,this._scrollTop=s,this.upperAndLower(),this.onScroll.emit({scrollLeft:i,scrollTop:s,scrollHeight:r,scrollWidth:n})}handleTouchMove(e){e instanceof CustomEvent||e.stopPropagation()}mpScrollToMethod(e){return d(this,null,(function*(){let{top:t,left:i,duration:s,animated:r=!1}=e;this.scrollY&&"number"===typeof t&&!isNaN(t)&&t!==this._scrollTop&&(r?Hb(this._scrollTop,t,s,(e=>this.el.scrollTop=e)):this.el.scrollTop=t,this._scrollTop=t),this.scrollX&&"number"===typeof i&&!isNaN(i)&&i!==this._scrollLeft&&(r?Hb(this._scrollLeft,i,s,(e=>this.el.scrollLeft=e)):this.el.scrollLeft=i,this._scrollLeft=i)}))}mpScrollIntoViewMethod(e){return d(this,null,(function*(){var t;"string"===typeof e&&e&&(null===(t=document.querySelector(`#${e}`))||void 0===t||t.scrollIntoView({behavior:this.animated?"smooth":"auto",block:this.scrollY&&this.mpScrollIntoViewAlignment||"center",inline:this.scrollX&&this.mpScrollIntoViewAlignment||"start"}))}))}componentDidLoad(){const e=Number(this.mpScrollTop),t=Number(this.mpScrollLeft),{animated:i}=this;this.mpScrollToMethod({top:e,left:t,animated:i})}componentDidRender(){Yf(this.el)}render(){const{scrollX:e,scrollY:t}=this,i=vg({"taro-scroll-view__scroll-x":e,"taro-scroll-view__scroll-y":t});return wp(Tp,{class:i},wp("slot",null))}get el(){return this}static get watchers(){return{mpScrollLeft:["watchScrollLeft"],mpScrollTop:["watchScrollTop"],mpScrollIntoView:["watchScrollIntoView"]}}static get style(){return Gb}},[4,"taro-scroll-view-core",{scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],upperThreshold:[8,"upper-threshold"],lowerThreshold:[8,"lower-threshold"],mpScrollTop:[520,"scroll-top"],mpScrollLeft:[520,"scroll-left"],mpScrollIntoView:[513,"scroll-into-view"],mpScrollIntoViewAlignment:[1,"scroll-into-view-alignment"],animated:[4,"scroll-with-animation"],mpScrollToMethod:[64],mpScrollIntoViewMethod:[64]},[[1,"scroll","handleScroll"],[1,"touchmove","handleTouchMove"]]]);function zb(){if("undefined"===typeof customElements)return;const e=["taro-scroll-view-core"];e.forEach((e=>{switch(e){case"taro-scroll-view-core":customElements.get(e)||customElements.define(e,jb);break}}))}const Vb=zb,Yb=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("ShareElement",this)}render(){return wp(Tp,null)}},[0,"taro-share-element-core"]);function Wb(){if("undefined"===typeof customElements)return;const e=["taro-share-element-core"];e.forEach((e=>{switch(e){case"taro-share-element-core":customElements.get(e)||customElements.define(e,Yb);break}}))}const Kb=Wb,qb=".weui-slider{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:15px 18px}.weui-slider__inner{background-color:#e9e9e9;height:2px;position:relative}.weui-slider__track{background-color:#1aad19;width:0;height:2px}.weui-slider__handler{background-color:#fff;border-radius:50%;width:28px;height:28px;margin-top:-14px;margin-left:-14px;position:absolute;top:50%;left:0;-webkit-box-shadow:0 0 4px rgba(0,0,0,.2);box-shadow:0 0 4px rgba(0,0,0,.2)}.weui-slider-box{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex}.weui-slider-box .weui-slider{-ms-flex:1;flex:1}.weui-slider-box__value{color:#888;text-align:center;min-width:24px;margin-left:.5em;font-size:14px}",Xb=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onChange=Rp(this,"change",7),this.onChanging=Rp(this,"changing",7),this.handleTouchStart=e=>{this.touching||this.disabled||(this.touching=!0,this.touchId=e.targetTouches[0].identifier,this.totalWidth=this.sliderInsRef.clientWidth||1,this.ogX=e.targetTouches[0].pageX,this.ogPercent=this.percent)},this.handleTouchMove=e=>{const{disabled:t,touching:i,touchId:s,totalWidth:r,max:n,min:o,ogX:a,ogPercent:l}=this;if(!i||t)return;if(e.targetTouches[0].identifier!==s)return;e.preventDefault();const c=e.targetTouches[0].pageX,d=c-a;let h=d/r*100+l;h=this.handleValueUpdate(h,0,100);const u=o+.01*h*(n-o);this.updateByStep(u),this.onChanging.emit({detail:e.detail,value:this.value})},this.handleTouchEnd=e=>{const{disabled:t,touching:i}=this;i&&!t&&(this.percent!==this.ogPercent&&this.onChange.emit({detail:e.detail,value:this.value}),this.touching=!1,this.touchId=null,this.ogX=0,this.ogPercent=0)},this.handleValueUpdate=(e,t=this.min,i=this.max)=>(e=isNaN(e)?0:e,Math.max(t,Math.min(e,i))),this.min=0,this.max=100,this.step=1,this.disabled=!1,this.value=0,this.activeColor="#1aad19",this.backgroundColor="#e9e9e9",this.blockSize=28,this.blockColor="#ffffff",this.showValue=!1,this.name="",this.totalWidth=1,this.touching=!1,this.ogX=0,this.touchId=null,this.percent=0,this.ogPercent=void 0,this.isWillLoadCalled=!1}function(e){if(!this.isWillLoadCalled)return;const{max:t,min:i}=this;if(null!==e){const s=this.handleValueUpdate(e,i,t);this.updateByStep(s)}}componentDidLoad(){this.handler.addEventListener("touchstart",this.handleTouchStart),this.handler.addEventListener("touchmove",this.handleTouchMove),this.handler.addEventListener("touchend",this.handleTouchEnd)}componentWillLoad(){this.isWillLoadCalled=!0;const{value:e,max:t,min:i}=this,s=this.handleValueUpdate(e,i,t);this.updateByStep(s)}updateByStep(e){const{max:t,min:i,step:s}=this,r=Math.floor((t-i)/s);for(let o=0;o<=r;o++){const t=i+s*o,n=o===r?null:i+s*(o+1);if(e===t)break;if(!n&&e>t&&(e=t),n&&e>t&&e<n){e=e-t<s/2?t:n;break}}const n=(e-i)/(t-i)*100;this.value=e,this.percent=n}render(){const{showValue:e,backgroundColor:t,activeColor:i,blockColor:s,name:r,percent:n,value:o}=this;let a=this.blockSize;const l={backgroundColor:t},c=n>100?100:n,d={width:`${c}%`,backgroundColor:i};a<12&&(a=12),a>28&&(a=28);const h={left:`${c}%`,width:`${a}px`,height:`${a}px`,backgroundColor:s,marginTop:`-${Math.floor(a/2)}px`,marginLeft:`-${Math.floor(a/2)}px`};return wp(Tp,{class:"weui-slider-box"},wp("div",{class:"weui-slider"},wp("div",{class:"weui-slider__inner",style:l,ref:e=>this.sliderInsRef=e},wp("div",{style:d,class:"weui-slider__track"}),wp("div",{class:"weui-slider__handler",ref:e=>{e&&(this.handler=e)},style:h}),wp("input",{type:"hidden",name:r,value:o}))),e&&wp("div",{class:"weui-slider-box__value"},o))}get el(){return this}static get watchers(){return{value:["function"]}}static get style(){return qb}},[0,"taro-slider-core",{min:[2],max:[2],step:[2],disabled:[4],value:[1538],activeColor:[1,"active-color"],backgroundColor:[1,"background-color"],blockSize:[2,"block-size"],blockColor:[1,"block-color"],showValue:[4,"show-value"],name:[1],totalWidth:[32],touching:[32],ogX:[32],touchId:[32],percent:[32],ogPercent:[32],isWillLoadCalled:[32]}]);function Zb(){if("undefined"===typeof customElements)return;const e=["taro-slider-core"];e.forEach((e=>{switch(e){case"taro-slider-core":customElements.get(e)||customElements.define(e,Xb);break}}))}const Qb=Zb,Jb=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("Slot",this)}render(){return wp(Tp,null)}},[0,"taro-slot-core"]);function ew(){if("undefined"===typeof customElements)return;const e=["taro-slot-core"];e.forEach((e=>{switch(e){case"taro-slot-core":customElements.get(e)||customElements.define(e,Jb);break}}))}const tw=ew,iw=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("Snapshot",this)}render(){return wp(Tp,null)}},[0,"taro-snapshot-core"]);function sw(){if("undefined"===typeof customElements)return;const e=["taro-snapshot-core"];e.forEach((e=>{switch(e){case"taro-snapshot-core":customElements.get(e)||customElements.define(e,iw);break}}))}const rw=sw,nw=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("Span",this)}render(){return wp(Tp,null)}},[0,"taro-span-core"]);function ow(){if("undefined"===typeof customElements)return;const e=["taro-span-core"];e.forEach((e=>{switch(e){case"taro-span-core":customElements.get(e)||customElements.define(e,nw);break}}))}const aw=ow,lw=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("StickyHeader",this)}render(){return wp(Tp,null)}},[0,"taro-sticky-header-core"]);function cw(){if("undefined"===typeof customElements)return;const e=["taro-sticky-header-core"];e.forEach((e=>{switch(e){case"taro-sticky-header-core":customElements.get(e)||customElements.define(e,lw);break}}))}const dw=cw,hw=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("StickySection",this)}render(){return wp(Tp,null)}},[0,"taro-sticky-section-core"]);function uw(){if("undefined"===typeof customElements)return;const e=["taro-sticky-section-core"];e.forEach((e=>{switch(e){case"taro-sticky-section-core":customElements.get(e)||customElements.define(e,hw);break}}))}const pw=uw;function fw(e){return null!==e&&"object"===typeof e&&"constructor"in e&&e.constructor===Object}function gw(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach((i=>{"undefined"===typeof e[i]?e[i]=t[i]:fw(t[i])&&fw(e[i])&&Object.keys(t[i]).length>0&&gw(e[i],t[i])}))}const mw={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function vw(){const e="undefined"!==typeof document?document:{};return gw(e,mw),e}const yw={document:mw,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return"undefined"===typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){"undefined"!==typeof setTimeout&&clearTimeout(e)}};function bw(){const e="undefined"!==typeof window?window:{};return gw(e,yw),e}function ww(e){return void 0===e&&(e=""),e.trim().split(" ").filter((e=>!!e.trim()))}function Ew(e){const t=e;Object.keys(t).forEach((e=>{try{t[e]=null}catch(N$){}try{delete t[e]}catch(N$){}}))}function Tw(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function Sw(){return Date.now()}function Aw(e){const t=bw();let i;return t.getComputedStyle&&(i=t.getComputedStyle(e,null)),!i&&e.currentStyle&&(i=e.currentStyle),i||(i=e.style),i}function xw(e,t){void 0===t&&(t="x");const i=bw();let s,r,n;const o=Aw(e);return i.WebKitCSSMatrix?(r=o.transform||o.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map((e=>e.replace(",","."))).join(", ")),n=new i.WebKitCSSMatrix("none"===r?"":r)):(n=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),s=n.toString().split(",")),"x"===t&&(r=i.WebKitCSSMatrix?n.m41:16===s.length?parseFloat(s[12]):parseFloat(s[4])),"y"===t&&(r=i.WebKitCSSMatrix?n.m42:16===s.length?parseFloat(s[13]):parseFloat(s[5])),r||0}function kw(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function Lw(e){return"undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType)}function Cw(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let i=1;i<arguments.length;i+=1){const s=i<0||arguments.length<=i?void 0:arguments[i];if(void 0!==s&&null!==s&&!Lw(s)){const i=Object.keys(Object(s)).filter((e=>t.indexOf(e)<0));for(let t=0,r=i.length;t<r;t+=1){const r=i[t],n=Object.getOwnPropertyDescriptor(s,r);void 0!==n&&n.enumerable&&(kw(e[r])&&kw(s[r])?s[r].__swiper__?e[r]=s[r]:Cw(e[r],s[r]):!kw(e[r])&&kw(s[r])?(e[r]={},s[r].__swiper__?e[r]=s[r]:Cw(e[r],s[r])):e[r]=s[r])}}}return e}function _w(e,t,i){e.style.setProperty(t,i)}function Rw(e){let{swiper:t,targetPosition:i,side:s}=e;const r=bw(),n=-t.translate;let o,a=null;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(t.cssModeFrameID);const c=i>n?"next":"prev",d=(e,t)=>"next"===c&&e>=t||"prev"===c&&e<=t,h=()=>{o=(new Date).getTime(),null===a&&(a=o);const e=Math.max(Math.min((o-a)/l,1),0),c=.5-Math.cos(e*Math.PI)/2;let u=n+c*(i-n);if(d(u,i)&&(u=i),t.wrapperEl.scrollTo({[s]:u}),d(u,i))return t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout((()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[s]:u})})),void r.cancelAnimationFrame(t.cssModeFrameID);t.cssModeFrameID=r.requestAnimationFrame(h)};h()}function Iw(e){return e.querySelector(".swiper-slide-transform")||e.shadowRoot&&e.shadowRoot.querySelector(".swiper-slide-transform")||e}function Dw(e,t){return void 0===t&&(t=""),[...e.children].filter((e=>e.matches(t)))}function Pw(e){try{return void console.warn(e)}catch(t){}}function Mw(e,t){void 0===t&&(t=[]);const i=document.createElement(e);return i.classList.add(...Array.isArray(t)?t:ww(t)),i}function Ow(e){const t=bw(),i=vw(),s=e.getBoundingClientRect(),r=i.body,n=e.clientTop||r.clientTop||0,o=e.clientLeft||r.clientLeft||0,a=e===t?t.scrollY:e.scrollTop,l=e===t?t.scrollX:e.scrollLeft;return{top:s.top+a-n,left:s.left+l-o}}function Nw(e,t){const i=[];while(e.previousElementSibling){const s=e.previousElementSibling;t?s.matches(t)&&i.push(s):i.push(s),e=s}return i}function Fw(e,t){const i=[];while(e.nextElementSibling){const s=e.nextElementSibling;t?s.matches(t)&&i.push(s):i.push(s),e=s}return i}function Bw(e,t){const i=bw();return i.getComputedStyle(e,null).getPropertyValue(t)}function $w(e){let t,i=e;if(i){t=0;while(null!==(i=i.previousSibling))1===i.nodeType&&(t+=1);return t}}function Uw(e,t){const i=[];let s=e.parentElement;while(s)t?s.matches(t)&&i.push(s):i.push(s),s=s.parentElement;return i}function Gw(e,t){function i(s){s.target===e&&(t.call(e,s),e.removeEventListener("transitionend",i))}t&&e.addEventListener("transitionend",i)}function Hw(e,t,i){const s=bw();return i?e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(s.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(s.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom")):e.offsetWidth}function jw(e){return(Array.isArray(e)?e:[e]).filter((e=>!!e))}let zw,Vw,Yw;function Ww(){const e=bw(),t=vw();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}function Kw(){return zw||(zw=Ww()),zw}function qw(e){let{userAgent:t}=void 0===e?{}:e;const i=Kw(),s=bw(),r=s.navigator.platform,n=t||s.navigator.userAgent,o={ios:!1,android:!1},a=s.screen.width,l=s.screen.height,c=n.match(/(Android);?[\s\/]+([\d.]+)?/);let d=n.match(/(iPad).*OS\s([\d_]+)/);const h=n.match(/(iPod)(.*OS\s([\d_]+))?/),u=!d&&n.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p="Win32"===r;let f="MacIntel"===r;const g=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!d&&f&&i.touch&&g.indexOf(`${a}x${l}`)>=0&&(d=n.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),f=!1),c&&!p&&(o.os="android",o.android=!0),(d||u||h)&&(o.os="ios",o.ios=!0),o}function Xw(e){return void 0===e&&(e={}),Vw||(Vw=qw(e)),Vw}function Zw(){const e=bw(),t=Xw();let i=!1;function s(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}if(s()){const t=String(e.navigator.userAgent);if(t.includes("Version/")){const[e,s]=t.split("Version/")[1].split(" ")[0].split(".").map((e=>Number(e)));i=e<16||16===e&&s<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),n=s(),o=n||r&&t.ios;return{isSafari:i||n,needPerspectiveFix:i,need3dFix:o,isWebView:r}}function Qw(){return Yw||(Yw=Zw()),Yw}function Jw(e){let{swiper:t,on:i,emit:s}=e;const r=bw();let n=null,o=null;const a=()=>{t&&!t.destroyed&&t.initialized&&(s("beforeResize"),s("resize"))},l=()=>{t&&!t.destroyed&&t.initialized&&(n=new ResizeObserver((e=>{o=r.requestAnimationFrame((()=>{const{width:i,height:s}=t;let r=i,n=s;e.forEach((e=>{let{contentBoxSize:i,contentRect:s,target:o}=e;o&&o!==t.el||(r=s?s.width:(i[0]||i).inlineSize,n=s?s.height:(i[0]||i).blockSize)})),r===i&&n===s||a()}))})),n.observe(t.el))},c=()=>{o&&r.cancelAnimationFrame(o),n&&n.unobserve&&t.el&&(n.unobserve(t.el),n=null)},d=()=>{t&&!t.destroyed&&t.initialized&&s("orientationchange")};i("init",(()=>{t.params.resizeObserver&&"undefined"!==typeof r.ResizeObserver?l():(r.addEventListener("resize",a),r.addEventListener("orientationchange",d))})),i("destroy",(()=>{c(),r.removeEventListener("resize",a),r.removeEventListener("orientationchange",d)}))}function eE(e){let{swiper:t,extendParams:i,on:s,emit:r}=e;const n=[],o=bw(),a=function(e,i){void 0===i&&(i={});const s=o.MutationObserver||o.WebkitMutationObserver,a=new s((e=>{if(t.__preventObserver__)return;if(1===e.length)return void r("observerUpdate",e[0]);const i=function(){r("observerUpdate",e[0])};o.requestAnimationFrame?o.requestAnimationFrame(i):o.setTimeout(i,0)}));a.observe(e,{attributes:"undefined"===typeof i.attributes||i.attributes,childList:"undefined"===typeof i.childList||i.childList,characterData:"undefined"===typeof i.characterData||i.characterData}),n.push(a)},l=()=>{if(t.params.observer){if(t.params.observeParents){const e=Uw(t.hostEl);for(let t=0;t<e.length;t+=1)a(e[t])}a(t.hostEl,{childList:t.params.observeSlideChildren}),a(t.wrapperEl,{attributes:!1})}},c=()=>{n.forEach((e=>{e.disconnect()})),n.splice(0,n.length)};i({observer:!1,observeParents:!1,observeSlideChildren:!1}),s("init",l),s("destroy",c)}var tE={on(e,t,i){const s=this;if(!s.eventsListeners||s.destroyed)return s;if("function"!==typeof t)return s;const r=i?"unshift":"push";return e.split(" ").forEach((e=>{s.eventsListeners[e]||(s.eventsListeners[e]=[]),s.eventsListeners[e][r](t)})),s},once(e,t,i){const s=this;if(!s.eventsListeners||s.destroyed)return s;if("function"!==typeof t)return s;function r(){s.off(e,r),r.__emitterProxy&&delete r.__emitterProxy;for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];t.apply(s,n)}return r.__emitterProxy=t,s.on(e,r,i)},onAny(e,t){const i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!==typeof e)return i;const s=t?"unshift":"push";return i.eventsAnyListeners.indexOf(e)<0&&i.eventsAnyListeners[s](e),i},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const i=t.eventsAnyListeners.indexOf(e);return i>=0&&t.eventsAnyListeners.splice(i,1),t},off(e,t){const i=this;return!i.eventsListeners||i.destroyed?i:i.eventsListeners?(e.split(" ").forEach((e=>{"undefined"===typeof t?i.eventsListeners[e]=[]:i.eventsListeners[e]&&i.eventsListeners[e].forEach(((s,r)=>{(s===t||s.__emitterProxy&&s.__emitterProxy===t)&&i.eventsListeners[e].splice(r,1)}))})),i):i},emit(){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsListeners)return e;let t,i,s;for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];"string"===typeof n[0]||Array.isArray(n[0])?(t=n[0],i=n.slice(1,n.length),s=e):(t=n[0].events,i=n[0].data,s=n[0].context||e),i.unshift(s);const a=Array.isArray(t)?t:t.split(" ");return a.forEach((t=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach((e=>{e.apply(s,[t,...i])})),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach((e=>{e.apply(s,i)}))})),e}};function iE(){const e=this;let t,i;const s=e.el;t="undefined"!==typeof e.params.width&&null!==e.params.width?e.params.width:s.clientWidth,i="undefined"!==typeof e.params.height&&null!==e.params.height?e.params.height:s.clientHeight,0===t&&e.isHorizontal()||0===i&&e.isVertical()||(t=t-parseInt(Bw(s,"padding-left")||0,10)-parseInt(Bw(s,"padding-right")||0,10),i=i-parseInt(Bw(s,"padding-top")||0,10)-parseInt(Bw(s,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(i)&&(i=0),Object.assign(e,{width:t,height:i,size:e.isHorizontal()?t:i}))}function sE(){const e=this;function t(t,i){return parseFloat(t.getPropertyValue(e.getDirectionLabel(i))||0)}const i=e.params,{wrapperEl:s,slidesEl:r,size:n,rtlTranslate:o,wrongRTL:a}=e,l=e.virtual&&i.virtual.enabled,c=l?e.virtual.slides.length:e.slides.length,d=Dw(r,`.${e.params.slideClass}, swiper-slide`),h=l?e.virtual.slides.length:d.length;let u=[];const p=[],f=[];let g=i.slidesOffsetBefore;"function"===typeof g&&(g=i.slidesOffsetBefore.call(e));let m=i.slidesOffsetAfter;"function"===typeof m&&(m=i.slidesOffsetAfter.call(e));const v=e.snapGrid.length,y=e.slidesGrid.length;let b=i.spaceBetween,w=-g,E=0,T=0;if("undefined"===typeof n)return;"string"===typeof b&&b.indexOf("%")>=0?b=parseFloat(b.replace("%",""))/100*n:"string"===typeof b&&(b=parseFloat(b)),e.virtualSize=-b,d.forEach((e=>{o?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""})),i.centeredSlides&&i.cssMode&&(_w(s,"--swiper-centered-offset-before",""),_w(s,"--swiper-centered-offset-after",""));const S=i.grid&&i.grid.rows>1&&e.grid;let A;S?e.grid.initSlides(d):e.grid&&e.grid.unsetSlides();const x="auto"===i.slidesPerView&&i.breakpoints&&Object.keys(i.breakpoints).filter((e=>"undefined"!==typeof i.breakpoints[e].slidesPerView)).length>0;for(let k=0;k<h;k+=1){let s;if(A=0,d[k]&&(s=d[k]),S&&e.grid.updateSlide(k,s,d),!d[k]||"none"!==Bw(s,"display")){if("auto"===i.slidesPerView){x&&(d[k].style[e.getDirectionLabel("width")]="");const r=getComputedStyle(s),n=s.style.transform,o=s.style.webkitTransform;if(n&&(s.style.transform="none"),o&&(s.style.webkitTransform="none"),i.roundLengths)A=e.isHorizontal()?Hw(s,"width",!0):Hw(s,"height",!0);else{const e=t(r,"width"),i=t(r,"padding-left"),n=t(r,"padding-right"),o=t(r,"margin-left"),a=t(r,"margin-right"),l=r.getPropertyValue("box-sizing");if(l&&"border-box"===l)A=e+o+a;else{const{clientWidth:t,offsetWidth:r}=s;A=e+i+n+o+a+(r-t)}}n&&(s.style.transform=n),o&&(s.style.webkitTransform=o),i.roundLengths&&(A=Math.floor(A))}else A=(n-(i.slidesPerView-1)*b)/i.slidesPerView,i.roundLengths&&(A=Math.floor(A)),d[k]&&(d[k].style[e.getDirectionLabel("width")]=`${A}px`);d[k]&&(d[k].swiperSlideSize=A),f.push(A),i.centeredSlides?(w=w+A/2+E/2+b,0===E&&0!==k&&(w=w-n/2-b),0===k&&(w=w-n/2-b),Math.abs(w)<.001&&(w=0),i.roundLengths&&(w=Math.floor(w)),T%i.slidesPerGroup===0&&u.push(w),p.push(w)):(i.roundLengths&&(w=Math.floor(w)),(T-Math.min(e.params.slidesPerGroupSkip,T))%e.params.slidesPerGroup===0&&u.push(w),p.push(w),w=w+A+b),e.virtualSize+=A+b,E=A,T+=1}}if(e.virtualSize=Math.max(e.virtualSize,n)+m,o&&a&&("slide"===i.effect||"coverflow"===i.effect)&&(s.style.width=`${e.virtualSize+b}px`),i.setWrapperSize&&(s.style[e.getDirectionLabel("width")]=`${e.virtualSize+b}px`),S&&e.grid.updateWrapperSize(A,u),!i.centeredSlides){const t=[];for(let s=0;s<u.length;s+=1){let r=u[s];i.roundLengths&&(r=Math.floor(r)),u[s]<=e.virtualSize-n&&t.push(r)}u=t,Math.floor(e.virtualSize-n)-Math.floor(u[u.length-1])>1&&u.push(e.virtualSize-n)}if(l&&i.loop){const t=f[0]+b;if(i.slidesPerGroup>1){const s=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/i.slidesPerGroup),r=t*i.slidesPerGroup;for(let e=0;e<s;e+=1)u.push(u[u.length-1]+r)}for(let s=0;s<e.virtual.slidesBefore+e.virtual.slidesAfter;s+=1)1===i.slidesPerGroup&&u.push(u[u.length-1]+t),p.push(p[p.length-1]+t),e.virtualSize+=t}if(0===u.length&&(u=[0]),0!==b){const t=e.isHorizontal()&&o?"marginLeft":e.getDirectionLabel("marginRight");d.filter(((e,t)=>!(i.cssMode&&!i.loop)||t!==d.length-1)).forEach((e=>{e.style[t]=`${b}px`}))}if(i.centeredSlides&&i.centeredSlidesBounds){let e=0;f.forEach((t=>{e+=t+(b||0)})),e-=b;const t=e-n;u=u.map((e=>e<=0?-g:e>t?t+m:e))}if(i.centerInsufficientSlides){let e=0;if(f.forEach((t=>{e+=t+(b||0)})),e-=b,e<n){const t=(n-e)/2;u.forEach(((e,i)=>{u[i]=e-t})),p.forEach(((e,i)=>{p[i]=e+t}))}}if(Object.assign(e,{slides:d,snapGrid:u,slidesGrid:p,slidesSizesGrid:f}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){_w(s,"--swiper-centered-offset-before",-u[0]+"px"),_w(s,"--swiper-centered-offset-after",e.size/2-f[f.length-1]/2+"px");const t=-e.snapGrid[0],i=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((e=>e+t)),e.slidesGrid=e.slidesGrid.map((e=>e+i))}if(h!==c&&e.emit("slidesLengthChange"),u.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),p.length!==y&&e.emit("slidesGridLengthChange"),i.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!l&&!i.cssMode&&("slide"===i.effect||"fade"===i.effect)){const t=`${i.containerModifierClass}backface-hidden`,s=e.el.classList.contains(t);h<=i.maxBackfaceHiddenSlides?s||e.el.classList.add(t):s&&e.el.classList.remove(t)}}function rE(e){const t=this,i=[],s=t.virtual&&t.params.virtual.enabled;let r,n=0;"number"===typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const o=e=>s?t.slides[t.getSlideIndexByData(e)]:t.slides[e];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach((e=>{i.push(e)}));else for(r=0;r<Math.ceil(t.params.slidesPerView);r+=1){const e=t.activeIndex+r;if(e>t.slides.length&&!s)break;i.push(o(e))}else i.push(o(t.activeIndex));for(r=0;r<i.length;r+=1)if("undefined"!==typeof i[r]){const e=i[r].offsetHeight;n=e>n?e:n}(n||0===n)&&(t.wrapperEl.style.height=`${n}px`)}function nE(){const e=this,t=e.slides,i=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let s=0;s<t.length;s+=1)t[s].swiperSlideOffset=(e.isHorizontal()?t[s].offsetLeft:t[s].offsetTop)-i-e.cssOverflowAdjustment()}function oE(e){void 0===e&&(e=this&&this.translate||0);const t=this,i=t.params,{slides:s,rtlTranslate:r,snapGrid:n}=t;if(0===s.length)return;"undefined"===typeof s[0].swiperSlideOffset&&t.updateSlidesOffset();let o=-e;r&&(o=e),s.forEach((e=>{e.classList.remove(i.slideVisibleClass,i.slideFullyVisibleClass)})),t.visibleSlidesIndexes=[],t.visibleSlides=[];let a=i.spaceBetween;"string"===typeof a&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*t.size:"string"===typeof a&&(a=parseFloat(a));for(let l=0;l<s.length;l+=1){const e=s[l];let c=e.swiperSlideOffset;i.cssMode&&i.centeredSlides&&(c-=s[0].swiperSlideOffset);const d=(o+(i.centeredSlides?t.minTranslate():0)-c)/(e.swiperSlideSize+a),h=(o-n[0]+(i.centeredSlides?t.minTranslate():0)-c)/(e.swiperSlideSize+a),u=-(o-c),p=u+t.slidesSizesGrid[l],f=u>=0&&u<=t.size-t.slidesSizesGrid[l],g=u>=0&&u<t.size-1||p>1&&p<=t.size||u<=0&&p>=t.size;g&&(t.visibleSlides.push(e),t.visibleSlidesIndexes.push(l),s[l].classList.add(i.slideVisibleClass)),f&&s[l].classList.add(i.slideFullyVisibleClass),e.progress=r?-d:d,e.originalProgress=r?-h:h}}function aE(e){const t=this;if("undefined"===typeof e){const i=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*i||0}const i=t.params,s=t.maxTranslate()-t.minTranslate();let{progress:r,isBeginning:n,isEnd:o,progressLoop:a}=t;const l=n,c=o;if(0===s)r=0,n=!0,o=!0;else{r=(e-t.minTranslate())/s;const i=Math.abs(e-t.minTranslate())<1,a=Math.abs(e-t.maxTranslate())<1;n=i||r<=0,o=a||r>=1,i&&(r=0),a&&(r=1)}if(i.loop){const i=t.getSlideIndexByData(0),s=t.getSlideIndexByData(t.slides.length-1),r=t.slidesGrid[i],n=t.slidesGrid[s],o=t.slidesGrid[t.slidesGrid.length-1],l=Math.abs(e);a=l>=r?(l-r)/o:(l+o-n)/o,a>1&&(a-=1)}Object.assign(t,{progress:r,progressLoop:a,isBeginning:n,isEnd:o}),(i.watchSlidesProgress||i.centeredSlides&&i.autoHeight)&&t.updateSlidesProgress(e),n&&!l&&t.emit("reachBeginning toEdge"),o&&!c&&t.emit("reachEnd toEdge"),(l&&!n||c&&!o)&&t.emit("fromEdge"),t.emit("progress",r)}const lE=(e,t,i)=>{t&&!e.classList.contains(i)?e.classList.add(i):!t&&e.classList.contains(i)&&e.classList.remove(i)};function cE(){const e=this,{slides:t,params:i,slidesEl:s,activeIndex:r}=e,n=e.virtual&&i.virtual.enabled,o=e.grid&&i.grid&&i.grid.rows>1,a=e=>Dw(s,`.${i.slideClass}${e}, swiper-slide${e}`)[0];let l,c,d;if(n)if(i.loop){let t=r-e.virtual.slidesBefore;t<0&&(t=e.virtual.slides.length+t),t>=e.virtual.slides.length&&(t-=e.virtual.slides.length),l=a(`[data-swiper-slide-index="${t}"]`)}else l=a(`[data-swiper-slide-index="${r}"]`);else o?(l=t.filter((e=>e.column===r))[0],d=t.filter((e=>e.column===r+1))[0],c=t.filter((e=>e.column===r-1))[0]):l=t[r];l&&(o||(d=Fw(l,`.${i.slideClass}, swiper-slide`)[0],i.loop&&!d&&(d=t[0]),c=Nw(l,`.${i.slideClass}, swiper-slide`)[0],i.loop&&0===!c&&(c=t[t.length-1]))),t.forEach((e=>{lE(e,e===l,i.slideActiveClass),lE(e,e===d,i.slideNextClass),lE(e,e===c,i.slidePrevClass)})),e.emitSlidesClasses()}const dE=(e,t)=>{if(!e||e.destroyed||!e.params)return;const i=()=>e.isElement?"swiper-slide":`.${e.params.slideClass}`,s=t.closest(i());if(s){let t=s.querySelector(`.${e.params.lazyPreloaderClass}`);!t&&e.isElement&&(s.shadowRoot?t=s.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`):requestAnimationFrame((()=>{s.shadowRoot&&(t=s.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`),t&&t.remove())}))),t&&t.remove()}},hE=(e,t)=>{if(!e.slides[t])return;const i=e.slides[t].querySelector('[loading="lazy"]');i&&i.removeAttribute("loading")},uE=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const i=e.slides.length;if(!i||!t||t<0)return;t=Math.min(t,i);const s="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),r=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const i=r,n=[i-t];return n.push(...Array.from({length:t}).map(((e,t)=>i+s+t))),void e.slides.forEach(((t,i)=>{n.includes(t.column)&&hE(e,i)}))}const n=r+s-1;if(e.params.rewind||e.params.loop)for(let o=r-t;o<=n+t;o+=1){const t=(o%i+i)%i;(t<r||t>n)&&hE(e,t)}else for(let o=Math.max(r-t,0);o<=Math.min(n+t,i-1);o+=1)o!==r&&(o>n||o<r)&&hE(e,o)};function pE(e){const{slidesGrid:t,params:i}=e,s=e.rtlTranslate?e.translate:-e.translate;let r;for(let n=0;n<t.length;n+=1)"undefined"!==typeof t[n+1]?s>=t[n]&&s<t[n+1]-(t[n+1]-t[n])/2?r=n:s>=t[n]&&s<t[n+1]&&(r=n+1):s>=t[n]&&(r=n);return i.normalizeSlideIndex&&(r<0||"undefined"===typeof r)&&(r=0),r}function fE(e){const t=this,i=t.rtlTranslate?t.translate:-t.translate,{snapGrid:s,params:r,activeIndex:n,realIndex:o,snapIndex:a}=t;let l,c=e;const d=e=>{let i=e-t.virtual.slidesBefore;return i<0&&(i=t.virtual.slides.length+i),i>=t.virtual.slides.length&&(i-=t.virtual.slides.length),i};if("undefined"===typeof c&&(c=pE(t)),s.indexOf(i)>=0)l=s.indexOf(i);else{const e=Math.min(r.slidesPerGroupSkip,c);l=e+Math.floor((c-e)/r.slidesPerGroup)}if(l>=s.length&&(l=s.length-1),c===n&&!t.params.loop)return void(l!==a&&(t.snapIndex=l,t.emit("snapIndexChange")));if(c===n&&t.params.loop&&t.virtual&&t.params.virtual.enabled)return void(t.realIndex=d(c));const h=t.grid&&r.grid&&r.grid.rows>1;let u;if(t.virtual&&r.virtual.enabled&&r.loop)u=d(c);else if(h){const e=t.slides.filter((e=>e.column===c))[0];let i=parseInt(e.getAttribute("data-swiper-slide-index"),10);Number.isNaN(i)&&(i=Math.max(t.slides.indexOf(e),0)),u=Math.floor(i/r.grid.rows)}else if(t.slides[c]){const e=t.slides[c].getAttribute("data-swiper-slide-index");u=e?parseInt(e,10):c}else u=c;Object.assign(t,{previousSnapIndex:a,snapIndex:l,previousRealIndex:o,realIndex:u,previousIndex:n,activeIndex:c}),t.initialized&&uE(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(o!==u&&t.emit("realIndexChange"),t.emit("slideChange"))}function gE(e,t){const i=this,s=i.params;let r=e.closest(`.${s.slideClass}, swiper-slide`);!r&&i.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach((e=>{!r&&e.matches&&e.matches(`.${s.slideClass}, swiper-slide`)&&(r=e)}));let n,o=!1;if(r)for(let a=0;a<i.slides.length;a+=1)if(i.slides[a]===r){o=!0,n=a;break}if(!r||!o)return i.clickedSlide=void 0,void(i.clickedIndex=void 0);i.clickedSlide=r,i.virtual&&i.params.virtual.enabled?i.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):i.clickedIndex=n,s.slideToClickedSlide&&void 0!==i.clickedIndex&&i.clickedIndex!==i.activeIndex&&i.slideToClickedSlide()}var mE={updateSize:iE,updateSlides:sE,updateAutoHeight:rE,updateSlidesOffset:nE,updateSlidesProgress:oE,updateProgress:aE,updateSlidesClasses:cE,updateActiveIndex:fE,updateClickedSlide:gE};function vE(e){void 0===e&&(e=this.isHorizontal()?"x":"y");const t=this,{params:i,rtlTranslate:s,translate:r,wrapperEl:n}=t;if(i.virtualTranslate)return s?-r:r;if(i.cssMode)return r;let o=xw(n,e);return o+=t.cssOverflowAdjustment(),s&&(o=-o),o||0}function yE(e,t){const i=this,{rtlTranslate:s,params:r,wrapperEl:n,progress:o}=i;let a=0,l=0;const c=0;let d;i.isHorizontal()?a=s?-e:e:l=e,r.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),i.previousTranslate=i.translate,i.translate=i.isHorizontal()?a:l,r.cssMode?n[i.isHorizontal()?"scrollLeft":"scrollTop"]=i.isHorizontal()?-a:-l:r.virtualTranslate||(i.isHorizontal()?a-=i.cssOverflowAdjustment():l-=i.cssOverflowAdjustment(),n.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`);const h=i.maxTranslate()-i.minTranslate();d=0===h?0:(e-i.minTranslate())/h,d!==o&&i.updateProgress(e),i.emit("setTranslate",i.translate,t)}function bE(){return-this.snapGrid[0]}function wE(){return-this.snapGrid[this.snapGrid.length-1]}function EE(e,t,i,s,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0),void 0===s&&(s=!0);const n=this,{params:o,wrapperEl:a}=n;if(n.animating&&o.preventInteractionOnTransition)return!1;const l=n.minTranslate(),c=n.maxTranslate();let d;if(d=s&&e>l?l:s&&e<c?c:e,n.updateProgress(d),o.cssMode){const e=n.isHorizontal();if(0===t)a[e?"scrollLeft":"scrollTop"]=-d;else{if(!n.support.smoothScroll)return Rw({swiper:n,targetPosition:-d,side:e?"left":"top"}),!0;a.scrollTo({[e?"left":"top"]:-d,behavior:"smooth"})}return!0}return 0===t?(n.setTransition(0),n.setTranslate(d),i&&(n.emit("beforeTransitionStart",t,r),n.emit("transitionEnd"))):(n.setTransition(t),n.setTranslate(d),i&&(n.emit("beforeTransitionStart",t,r),n.emit("transitionStart")),n.animating||(n.animating=!0,n.onTranslateToWrapperTransitionEnd||(n.onTranslateToWrapperTransitionEnd=function(e){n&&!n.destroyed&&e.target===this&&(n.wrapperEl.removeEventListener("transitionend",n.onTranslateToWrapperTransitionEnd),n.onTranslateToWrapperTransitionEnd=null,delete n.onTranslateToWrapperTransitionEnd,n.animating=!1,i&&n.emit("transitionEnd"))}),n.wrapperEl.addEventListener("transitionend",n.onTranslateToWrapperTransitionEnd))),!0}var TE={getTranslate:vE,setTranslate:yE,minTranslate:bE,maxTranslate:wE,translateTo:EE};function SE(e,t){const i=this;i.params.cssMode||(i.wrapperEl.style.transitionDuration=`${e}ms`,i.wrapperEl.style.transitionDelay=0===e?"0ms":""),i.emit("setTransition",e,t)}function AE(e){let{swiper:t,runCallbacks:i,direction:s,step:r}=e;const{activeIndex:n,previousIndex:o}=t;let a=s;if(a||(a=n>o?"next":n<o?"prev":"reset"),t.emit(`transition${r}`),i&&n!==o){if("reset"===a)return void t.emit(`slideResetTransition${r}`);t.emit(`slideChangeTransition${r}`),"next"===a?t.emit(`slideNextTransition${r}`):t.emit(`slidePrevTransition${r}`)}}function xE(e,t){void 0===e&&(e=!0);const i=this,{params:s}=i;s.cssMode||(s.autoHeight&&i.updateAutoHeight(),AE({swiper:i,runCallbacks:e,direction:t,step:"Start"}))}function kE(e,t){void 0===e&&(e=!0);const i=this,{params:s}=i;i.animating=!1,s.cssMode||(i.setTransition(0),AE({swiper:i,runCallbacks:e,direction:t,step:"End"}))}var LE={setTransition:SE,transitionStart:xE,transitionEnd:kE};function CE(e,t,i,s,r){void 0===e&&(e=0),void 0===i&&(i=!0),"string"===typeof e&&(e=parseInt(e,10));const n=this;let o=e;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:d,activeIndex:h,rtlTranslate:u,wrapperEl:p,enabled:f}=n;if(!f&&!s&&!r||n.destroyed||n.animating&&a.preventInteractionOnTransition)return!1;"undefined"===typeof t&&(t=n.params.speed);const g=Math.min(n.params.slidesPerGroupSkip,o);let m=g+Math.floor((o-g)/n.params.slidesPerGroup);m>=l.length&&(m=l.length-1);const v=-l[m];if(a.normalizeSlideIndex)for(let b=0;b<c.length;b+=1){const e=-Math.floor(100*v),t=Math.floor(100*c[b]),i=Math.floor(100*c[b+1]);"undefined"!==typeof c[b+1]?e>=t&&e<i-(i-t)/2?o=b:e>=t&&e<i&&(o=b+1):e>=t&&(o=b)}if(n.initialized&&o!==h){if(!n.allowSlideNext&&(u?v>n.translate&&v>n.minTranslate():v<n.translate&&v<n.minTranslate()))return!1;if(!n.allowSlidePrev&&v>n.translate&&v>n.maxTranslate()&&(h||0)!==o)return!1}let y;if(o!==(d||0)&&i&&n.emit("beforeSlideChangeStart"),n.updateProgress(v),y=o>h?"next":o<h?"prev":"reset",u&&-v===n.translate||!u&&v===n.translate)return n.updateActiveIndex(o),a.autoHeight&&n.updateAutoHeight(),n.updateSlidesClasses(),"slide"!==a.effect&&n.setTranslate(v),"reset"!==y&&(n.transitionStart(i,y),n.transitionEnd(i,y)),!1;if(a.cssMode){const e=n.isHorizontal(),i=u?v:-v;if(0===t){const t=n.virtual&&n.params.virtual.enabled;t&&(n.wrapperEl.style.scrollSnapType="none",n._immediateVirtual=!0),t&&!n._cssModeVirtualInitialSet&&n.params.initialSlide>0?(n._cssModeVirtualInitialSet=!0,requestAnimationFrame((()=>{p[e?"scrollLeft":"scrollTop"]=i}))):p[e?"scrollLeft":"scrollTop"]=i,t&&requestAnimationFrame((()=>{n.wrapperEl.style.scrollSnapType="",n._immediateVirtual=!1}))}else{if(!n.support.smoothScroll)return Rw({swiper:n,targetPosition:i,side:e?"left":"top"}),!0;p.scrollTo({[e?"left":"top"]:i,behavior:"smooth"})}return!0}return n.setTransition(t),n.setTranslate(v),n.updateActiveIndex(o),n.updateSlidesClasses(),n.emit("beforeTransitionStart",t,s),n.transitionStart(i,y),0===t?n.transitionEnd(i,y):n.animating||(n.animating=!0,n.onSlideToWrapperTransitionEnd||(n.onSlideToWrapperTransitionEnd=function(e){n&&!n.destroyed&&e.target===this&&(n.wrapperEl.removeEventListener("transitionend",n.onSlideToWrapperTransitionEnd),n.onSlideToWrapperTransitionEnd=null,delete n.onSlideToWrapperTransitionEnd,n.transitionEnd(i,y))}),n.wrapperEl.addEventListener("transitionend",n.onSlideToWrapperTransitionEnd)),!0}function _E(e,t,i,s){if(void 0===e&&(e=0),void 0===i&&(i=!0),"string"===typeof e){const t=parseInt(e,10);e=t}const r=this;if(r.destroyed)return;"undefined"===typeof t&&(t=r.params.speed);const n=r.grid&&r.params.grid&&r.params.grid.rows>1;let o=e;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)o+=r.virtual.slidesBefore;else{let e;if(n){const t=o*r.params.grid.rows;e=r.slides.filter((e=>1*e.getAttribute("data-swiper-slide-index")===t))[0].column}else e=r.getSlideIndexByData(o);const t=n?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:i}=r.params;let a=r.params.slidesPerView;"auto"===a?a=r.slidesPerViewDynamic():(a=Math.ceil(parseFloat(r.params.slidesPerView,10)),i&&a%2===0&&(a+=1));let l=t-e<a;if(i&&(l=l||e<Math.ceil(a/2)),s&&i&&"auto"!==r.params.slidesPerView&&!n&&(l=!1),l){const s=i?e<r.activeIndex?"prev":"next":e-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:s,slideTo:!0,activeSlideIndex:"next"===s?e+1:e-t+1,slideRealIndex:"next"===s?r.realIndex:void 0})}if(n){const e=o*r.params.grid.rows;o=r.slides.filter((t=>1*t.getAttribute("data-swiper-slide-index")===e))[0].column}else o=r.getSlideIndexByData(o)}return requestAnimationFrame((()=>{r.slideTo(o,t,i,s)})),r}function RE(e,t,i){void 0===t&&(t=!0);const s=this,{enabled:r,params:n,animating:o}=s;if(!r||s.destroyed)return s;"undefined"===typeof e&&(e=s.params.speed);let a=n.slidesPerGroup;"auto"===n.slidesPerView&&1===n.slidesPerGroup&&n.slidesPerGroupAuto&&(a=Math.max(s.slidesPerViewDynamic("current",!0),1));const l=s.activeIndex<n.slidesPerGroupSkip?1:a,c=s.virtual&&n.virtual.enabled;if(n.loop){if(o&&!c&&n.loopPreventsSliding)return!1;if(s.loopFix({direction:"next"}),s._clientLeft=s.wrapperEl.clientLeft,s.activeIndex===s.slides.length-1&&n.cssMode)return requestAnimationFrame((()=>{s.slideTo(s.activeIndex+l,e,t,i)})),!0}return n.rewind&&s.isEnd?s.slideTo(0,e,t,i):s.slideTo(s.activeIndex+l,e,t,i)}function IE(e,t,i){void 0===t&&(t=!0);const s=this,{params:r,snapGrid:n,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=s;if(!l||s.destroyed)return s;"undefined"===typeof e&&(e=s.params.speed);const d=s.virtual&&r.virtual.enabled;if(r.loop){if(c&&!d&&r.loopPreventsSliding)return!1;s.loopFix({direction:"prev"}),s._clientLeft=s.wrapperEl.clientLeft}const h=a?s.translate:-s.translate;function u(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const p=u(h),f=n.map((e=>u(e)));let g=n[f.indexOf(p)-1];if("undefined"===typeof g&&r.cssMode){let e;n.forEach(((t,i)=>{p>=t&&(e=i)})),"undefined"!==typeof e&&(g=n[e>0?e-1:e])}let m=0;if("undefined"!==typeof g&&(m=o.indexOf(g),m<0&&(m=s.activeIndex-1),"auto"===r.slidesPerView&&1===r.slidesPerGroup&&r.slidesPerGroupAuto&&(m=m-s.slidesPerViewDynamic("previous",!0)+1,m=Math.max(m,0))),r.rewind&&s.isBeginning){const r=s.params.virtual&&s.params.virtual.enabled&&s.virtual?s.virtual.slides.length-1:s.slides.length-1;return s.slideTo(r,e,t,i)}return r.loop&&0===s.activeIndex&&r.cssMode?(requestAnimationFrame((()=>{s.slideTo(m,e,t,i)})),!0):s.slideTo(m,e,t,i)}function DE(e,t,i){void 0===t&&(t=!0);const s=this;if(!s.destroyed)return"undefined"===typeof e&&(e=s.params.speed),s.slideTo(s.activeIndex,e,t,i)}function PE(e,t,i,s){void 0===t&&(t=!0),void 0===s&&(s=.5);const r=this;if(r.destroyed)return;"undefined"===typeof e&&(e=r.params.speed);let n=r.activeIndex;const o=Math.min(r.params.slidesPerGroupSkip,n),a=o+Math.floor((n-o)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[a]){const e=r.snapGrid[a],t=r.snapGrid[a+1];l-e>(t-e)*s&&(n+=r.params.slidesPerGroup)}else{const e=r.snapGrid[a-1],t=r.snapGrid[a];l-e<=(t-e)*s&&(n-=r.params.slidesPerGroup)}return n=Math.max(n,0),n=Math.min(n,r.slidesGrid.length-1),r.slideTo(n,e,t,i)}function ME(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:i}=e,s="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let r,n=e.clickedIndex;const o=e.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(e.animating)return;r=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?n<e.loopedSlides-s/2||n>e.slides.length-e.loopedSlides+s/2?(e.loopFix(),n=e.getSlideIndex(Dw(i,`${o}[data-swiper-slide-index="${r}"]`)[0]),Tw((()=>{e.slideTo(n)}))):e.slideTo(n):n>e.slides.length-s?(e.loopFix(),n=e.getSlideIndex(Dw(i,`${o}[data-swiper-slide-index="${r}"]`)[0]),Tw((()=>{e.slideTo(n)}))):e.slideTo(n)}else e.slideTo(n)}var OE={slideTo:CE,slideToLoop:_E,slideNext:RE,slidePrev:IE,slideReset:DE,slideToClosest:PE,slideToClickedSlide:ME};function NE(e){const t=this,{params:i,slidesEl:s}=t;if(!i.loop||t.virtual&&t.params.virtual.enabled)return;const r=()=>{const e=Dw(s,`.${i.slideClass}, swiper-slide`);e.forEach(((e,t)=>{e.setAttribute("data-swiper-slide-index",t)}))},n=t.grid&&i.grid&&i.grid.rows>1,o=i.slidesPerGroup*(n?i.grid.rows:1),a=t.slides.length%o!==0,l=n&&t.slides.length%i.grid.rows!==0,c=e=>{for(let s=0;s<e;s+=1){const e=t.isElement?Mw("swiper-slide",[i.slideBlankClass]):Mw("div",[i.slideClass,i.slideBlankClass]);t.slidesEl.append(e)}};if(a){if(i.loopAddBlankSlides){const e=o-t.slides.length%o;c(e),t.recalcSlides(),t.updateSlides()}else Pw("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else if(l){if(i.loopAddBlankSlides){const e=i.grid.rows-t.slides.length%i.grid.rows;c(e),t.recalcSlides(),t.updateSlides()}else Pw("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else r();t.loopFix({slideRealIndex:e,direction:i.centeredSlides?void 0:"next"})}function FE(e){let{slideRealIndex:t,slideTo:i=!0,direction:s,setTranslate:r,activeSlideIndex:n,byController:o,byMousewheel:a}=void 0===e?{}:e;const d=this;if(!d.params.loop)return;d.emit("beforeLoopFix");const{slides:h,allowSlidePrev:u,allowSlideNext:p,slidesEl:f,params:g}=d,{centeredSlides:m}=g;if(d.allowSlidePrev=!0,d.allowSlideNext=!0,d.virtual&&g.virtual.enabled)return i&&(g.centeredSlides||0!==d.snapIndex?g.centeredSlides&&d.snapIndex<g.slidesPerView?d.slideTo(d.virtual.slides.length+d.snapIndex,0,!1,!0):d.snapIndex===d.snapGrid.length-1&&d.slideTo(d.virtual.slidesBefore,0,!1,!0):d.slideTo(d.virtual.slides.length,0,!1,!0)),d.allowSlidePrev=u,d.allowSlideNext=p,void d.emit("loopFix");let v=g.slidesPerView;"auto"===v?v=d.slidesPerViewDynamic():(v=Math.ceil(parseFloat(g.slidesPerView,10)),m&&v%2===0&&(v+=1));const y=g.slidesPerGroupAuto?v:g.slidesPerGroup;let b=y;b%y!==0&&(b+=y-b%y),b+=g.loopAdditionalSlides,d.loopedSlides=b;const w=d.grid&&g.grid&&g.grid.rows>1;h.length<v+b?Pw("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):w&&"row"===g.grid.fill&&Pw("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const E=[],T=[];let S=d.activeIndex;"undefined"===typeof n?n=d.getSlideIndex(h.filter((e=>e.classList.contains(g.slideActiveClass)))[0]):S=n;const A="next"===s||!s,x="prev"===s||!s;let k=0,L=0;const C=w?Math.ceil(h.length/g.grid.rows):h.length,_=w?h[n].column:n,R=_+(m&&"undefined"===typeof r?-v/2+.5:0);if(R<b){k=Math.max(b-R,y);for(let e=0;e<b-R;e+=1){const t=e-Math.floor(e/C)*C;if(w){const e=C-t-1;for(let t=h.length-1;t>=0;t-=1)h[t].column===e&&E.push(t)}else E.push(C-t-1)}}else if(R+v>C-b){L=Math.max(R-(C-2*b),y);for(let e=0;e<L;e+=1){const t=e-Math.floor(e/C)*C;w?h.forEach(((e,i)=>{e.column===t&&T.push(i)})):T.push(t)}}if(d.__preventObserver__=!0,requestAnimationFrame((()=>{d.__preventObserver__=!1})),x&&E.forEach((e=>{h[e].swiperLoopMoveDOM=!0,f.prepend(h[e]),h[e].swiperLoopMoveDOM=!1})),A&&T.forEach((e=>{h[e].swiperLoopMoveDOM=!0,f.append(h[e]),h[e].swiperLoopMoveDOM=!1})),d.recalcSlides(),"auto"===g.slidesPerView?d.updateSlides():w&&(E.length>0&&x||T.length>0&&A)&&d.slides.forEach(((e,t)=>{d.grid.updateSlide(t,e,d.slides)})),g.watchSlidesProgress&&d.updateSlidesOffset(),i)if(E.length>0&&x){if("undefined"===typeof t){const e=d.slidesGrid[S],t=d.slidesGrid[S+k],i=t-e;a?d.setTranslate(d.translate-i):(d.slideTo(S+Math.ceil(k),0,!1,!0),r&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-i,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-i))}else if(r){const e=w?E.length/g.grid.rows:E.length;d.slideTo(d.activeIndex+e,0,!1,!0),d.touchEventsData.currentTranslate=d.translate}}else if(T.length>0&&A)if("undefined"===typeof t){const e=d.slidesGrid[S],t=d.slidesGrid[S-L],i=t-e;a?d.setTranslate(d.translate-i):(d.slideTo(S-L,0,!1,!0),r&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-i,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-i))}else{const e=w?T.length/g.grid.rows:T.length;d.slideTo(d.activeIndex-e,0,!1,!0)}if(d.allowSlidePrev=u,d.allowSlideNext=p,d.controller&&d.controller.control&&!o){const e={slideRealIndex:t,direction:s,setTranslate:r,activeSlideIndex:n,byController:!0};Array.isArray(d.controller.control)?d.controller.control.forEach((t=>{!t.destroyed&&t.params.loop&&t.loopFix(c(l({},e),{slideTo:t.params.slidesPerView===g.slidesPerView&&i}))})):d.controller.control instanceof d.constructor&&d.controller.control.params.loop&&d.controller.control.loopFix(c(l({},e),{slideTo:d.controller.control.params.slidesPerView===g.slidesPerView&&i}))}d.emit("loopFix")}function BE(){const e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const s=[];e.slides.forEach((e=>{const t="undefined"===typeof e.swiperSlideIndex?1*e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex;s[t]=e})),e.slides.forEach((e=>{e.removeAttribute("data-swiper-slide-index")})),s.forEach((e=>{i.append(e)})),e.recalcSlides(),e.slideTo(e.realIndex,0)}var $E={loopCreate:NE,loopFix:FE,loopDestroy:BE};function UE(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const i="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),i.style.cursor="move",i.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame((()=>{t.__preventObserver__=!1}))}function GE(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame((()=>{e.__preventObserver__=!1})))}var HE={setGrabCursor:UE,unsetGrabCursor:GE};function jE(e,t){function i(t){if(!t||t===vw()||t===bw())return null;t.assignedSlot&&(t=t.assignedSlot);const s=t.closest(e);return s||t.getRootNode?s||i(t.getRootNode().host):null}return void 0===t&&(t=this),i(t)}function zE(e,t,i){const s=bw(),{params:r}=e,n=r.edgeSwipeDetection,o=r.edgeSwipeThreshold;return!n||!(i<=o||i>=s.innerWidth-o)||"prevent"===n&&(t.preventDefault(),!0)}function VE(e){const t=this,i=vw();let s=e;s.originalEvent&&(s=s.originalEvent);const r=t.touchEventsData;if("pointerdown"===s.type){if(null!==r.pointerId&&r.pointerId!==s.pointerId)return;r.pointerId=s.pointerId}else"touchstart"===s.type&&1===s.targetTouches.length&&(r.touchId=s.targetTouches[0].identifier);if("touchstart"===s.type)return void zE(t,s,s.targetTouches[0].pageX);const{params:n,touches:o,enabled:a}=t;if(!a)return;if(!n.simulateTouch&&"mouse"===s.pointerType)return;if(t.animating&&n.preventInteractionOnTransition)return;!t.animating&&n.cssMode&&n.loop&&t.loopFix();let l=s.target;if("wrapper"===n.touchEventsTarget&&!t.wrapperEl.contains(l))return;if("which"in s&&3===s.which)return;if("button"in s&&s.button>0)return;if(r.isTouched&&r.isMoved)return;const c=!!n.noSwipingClass&&""!==n.noSwipingClass,d=s.composedPath?s.composedPath():s.path;c&&s.target&&s.target.shadowRoot&&d&&(l=d[0]);const h=n.noSwipingSelector?n.noSwipingSelector:`.${n.noSwipingClass}`,u=!(!s.target||!s.target.shadowRoot);if(n.noSwiping&&(u?jE(h,l):l.closest(h)))return void(t.allowClick=!0);if(n.swipeHandler&&!l.closest(n.swipeHandler))return;o.currentX=s.pageX,o.currentY=s.pageY;const p=o.currentX,f=o.currentY;if(!zE(t,s,p))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=f,r.touchStartTime=Sw(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,n.threshold>0&&(r.allowThresholdMove=!1);let g=!0;l.matches(r.focusableElements)&&(g=!1,"SELECT"===l.nodeName&&(r.isTouched=!1)),i.activeElement&&i.activeElement.matches(r.focusableElements)&&i.activeElement!==l&&i.activeElement.blur();const m=g&&t.allowTouchMove&&n.touchStartPreventDefault;!n.touchStartForcePreventDefault&&!m||l.isContentEditable||s.preventDefault(),n.freeMode&&n.freeMode.enabled&&t.freeMode&&t.animating&&!n.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",s)}function YE(e){const t=vw(),i=this,s=i.touchEventsData,{params:r,touches:n,rtlTranslate:a,enabled:l}=i;if(!l)return;if(!r.simulateTouch&&"mouse"===e.pointerType)return;let c,d=e;if(d.originalEvent&&(d=d.originalEvent),"pointermove"===d.type){if(null!==s.touchId)return;const e=d.pointerId;if(e!==s.pointerId)return}if("touchmove"===d.type){if(c=[...d.changedTouches].filter((e=>e.identifier===s.touchId))[0],!c||c.identifier!==s.touchId)return}else c=d;if(!s.isTouched)return void(s.startMoving&&s.isScrolling&&i.emit("touchMoveOpposite",d));const h=c.pageX,u=c.pageY;if(d.preventedByNestedSwiper)return n.startX=h,void(n.startY=u);if(!i.allowTouchMove)return d.target.matches(s.focusableElements)||(i.allowClick=!1),void(s.isTouched&&(Object.assign(n,{startX:h,startY:u,currentX:h,currentY:u}),s.touchStartTime=Sw()));if(r.touchReleaseOnEdges&&!r.loop)if(i.isVertical()){if(u<n.startY&&i.translate<=i.maxTranslate()||u>n.startY&&i.translate>=i.minTranslate())return s.isTouched=!1,void(s.isMoved=!1)}else if(h<n.startX&&i.translate<=i.maxTranslate()||h>n.startX&&i.translate>=i.minTranslate())return;if(t.activeElement&&d.target===t.activeElement&&d.target.matches(s.focusableElements))return s.isMoved=!0,void(i.allowClick=!1);s.allowTouchCallbacks&&i.emit("touchMove",d),n.previousX=n.currentX,n.previousY=n.currentY,n.currentX=h,n.currentY=u;const p=n.currentX-n.startX,f=n.currentY-n.startY;if(i.params.threshold&&Math.sqrt(o(p,2)+o(f,2))<i.params.threshold)return;if("undefined"===typeof s.isScrolling){let e;i.isHorizontal()&&n.currentY===n.startY||i.isVertical()&&n.currentX===n.startX?s.isScrolling=!1:p*p+f*f>=25&&(e=180*Math.atan2(Math.abs(f),Math.abs(p))/Math.PI,s.isScrolling=i.isHorizontal()?e>r.touchAngle:90-e>r.touchAngle)}if(s.isScrolling&&i.emit("touchMoveOpposite",d),"undefined"===typeof s.startMoving&&(n.currentX===n.startX&&n.currentY===n.startY||(s.startMoving=!0)),s.isScrolling)return void(s.isTouched=!1);if(!s.startMoving)return;i.allowClick=!1,!r.cssMode&&d.cancelable&&d.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&d.stopPropagation();let g=i.isHorizontal()?p:f,m=i.isHorizontal()?n.currentX-n.previousX:n.currentY-n.previousY;r.oneWayMovement&&(g=Math.abs(g)*(a?1:-1),m=Math.abs(m)*(a?1:-1)),n.diff=g,g*=r.touchRatio,a&&(g=-g,m=-m);const v=i.touchesDirection;i.swipeDirection=g>0?"prev":"next",i.touchesDirection=m>0?"prev":"next";const y=i.params.loop&&!r.cssMode,b="next"===i.touchesDirection&&i.allowSlideNext||"prev"===i.touchesDirection&&i.allowSlidePrev;if(!s.isMoved){if(y&&b&&i.loopFix({direction:i.swipeDirection}),s.startTranslate=i.getTranslate(),i.setTransition(0),i.animating){const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});i.wrapperEl.dispatchEvent(e)}s.allowMomentumBounce=!1,!r.grabCursor||!0!==i.allowSlideNext&&!0!==i.allowSlidePrev||i.setGrabCursor(!0),i.emit("sliderFirstMove",d)}let w;if((new Date).getTime(),s.isMoved&&s.allowThresholdMove&&v!==i.touchesDirection&&y&&b&&Math.abs(g)>=1)return Object.assign(n,{startX:h,startY:u,currentX:h,currentY:u,startTranslate:s.currentTranslate}),s.loopSwapReset=!0,void(s.startTranslate=s.currentTranslate);i.emit("sliderMove",d),s.isMoved=!0,s.currentTranslate=g+s.startTranslate;let E=!0,T=r.resistanceRatio;if(r.touchReleaseOnEdges&&(T=0),g>0?(y&&b&&!w&&s.allowThresholdMove&&s.currentTranslate>(r.centeredSlides?i.minTranslate()-i.slidesSizesGrid[i.activeIndex+1]:i.minTranslate())&&i.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),s.currentTranslate>i.minTranslate()&&(E=!1,r.resistance&&(s.currentTranslate=i.minTranslate()-1+o(-i.minTranslate()+s.startTranslate+g,T)))):g<0&&(y&&b&&!w&&s.allowThresholdMove&&s.currentTranslate<(r.centeredSlides?i.maxTranslate()+i.slidesSizesGrid[i.slidesSizesGrid.length-1]:i.maxTranslate())&&i.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:i.slides.length-("auto"===r.slidesPerView?i.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),s.currentTranslate<i.maxTranslate()&&(E=!1,r.resistance&&(s.currentTranslate=i.maxTranslate()+1-o(i.maxTranslate()-s.startTranslate-g,T)))),E&&(d.preventedByNestedSwiper=!0),!i.allowSlideNext&&"next"===i.swipeDirection&&s.currentTranslate<s.startTranslate&&(s.currentTranslate=s.startTranslate),!i.allowSlidePrev&&"prev"===i.swipeDirection&&s.currentTranslate>s.startTranslate&&(s.currentTranslate=s.startTranslate),i.allowSlidePrev||i.allowSlideNext||(s.currentTranslate=s.startTranslate),r.threshold>0){if(!(Math.abs(g)>r.threshold||s.allowThresholdMove))return void(s.currentTranslate=s.startTranslate);if(!s.allowThresholdMove)return s.allowThresholdMove=!0,n.startX=n.currentX,n.startY=n.currentY,s.currentTranslate=s.startTranslate,void(n.diff=i.isHorizontal()?n.currentX-n.startX:n.currentY-n.startY)}r.followFinger&&!r.cssMode&&((r.freeMode&&r.freeMode.enabled&&i.freeMode||r.watchSlidesProgress)&&(i.updateActiveIndex(),i.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&i.freeMode&&i.freeMode.onTouchMove(),i.updateProgress(s.currentTranslate),i.setTranslate(s.currentTranslate))}function WE(e){const t=this,i=t.touchEventsData;let s,r=e;r.originalEvent&&(r=r.originalEvent);const n="touchend"===r.type||"touchcancel"===r.type;if(n){if(s=[...r.changedTouches].filter((e=>e.identifier===i.touchId))[0],!s||s.identifier!==i.touchId)return}else{if(null!==i.touchId)return;if(r.pointerId!==i.pointerId)return;s=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)){const e=["pointercancel","contextmenu"].includes(r.type)&&(t.browser.isSafari||t.browser.isWebView);if(!e)return}i.pointerId=null,i.touchId=null;const{params:o,touches:a,rtlTranslate:l,slidesGrid:c,enabled:d}=t;if(!d)return;if(!o.simulateTouch&&"mouse"===r.pointerType)return;if(i.allowTouchCallbacks&&t.emit("touchEnd",r),i.allowTouchCallbacks=!1,!i.isTouched)return i.isMoved&&o.grabCursor&&t.setGrabCursor(!1),i.isMoved=!1,void(i.startMoving=!1);o.grabCursor&&i.isMoved&&i.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const h=Sw(),u=h-i.touchStartTime;if(t.allowClick){const e=r.path||r.composedPath&&r.composedPath();t.updateClickedSlide(e&&e[0]||r.target,e),t.emit("tap click",r),u<300&&h-i.lastClickTime<300&&t.emit("doubleTap doubleClick",r)}if(i.lastClickTime=Sw(),Tw((()=>{t.destroyed||(t.allowClick=!0)})),!i.isTouched||!i.isMoved||!t.swipeDirection||0===a.diff&&!i.loopSwapReset||i.currentTranslate===i.startTranslate&&!i.loopSwapReset)return i.isTouched=!1,i.isMoved=!1,void(i.startMoving=!1);let p;if(i.isTouched=!1,i.isMoved=!1,i.startMoving=!1,p=o.followFinger?l?t.translate:-t.translate:-i.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:p});const f=p>=-t.maxTranslate()&&!t.params.loop;let g=0,m=t.slidesSizesGrid[0];for(let E=0;E<c.length;E+=E<o.slidesPerGroupSkip?1:o.slidesPerGroup){const e=E<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;"undefined"!==typeof c[E+e]?(f||p>=c[E]&&p<c[E+e])&&(g=E,m=c[E+e]-c[E]):(f||p>=c[E])&&(g=E,m=c[c.length-1]-c[c.length-2])}let v=null,y=null;o.rewind&&(t.isBeginning?y=o.virtual&&o.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(v=0));const b=(p-c[g])/m,w=g<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(u>o.longSwipesMs){if(!o.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(b>=o.longSwipesRatio?t.slideTo(o.rewind&&t.isEnd?v:g+w):t.slideTo(g)),"prev"===t.swipeDirection&&(b>1-o.longSwipesRatio?t.slideTo(g+w):null!==y&&b<0&&Math.abs(b)>o.longSwipesRatio?t.slideTo(y):t.slideTo(g))}else{if(!o.shortSwipes)return void t.slideTo(t.activeIndex);const e=t.navigation&&(r.target===t.navigation.nextEl||r.target===t.navigation.prevEl);e?r.target===t.navigation.nextEl?t.slideTo(g+w):t.slideTo(g):("next"===t.swipeDirection&&t.slideTo(null!==v?v:g+w),"prev"===t.swipeDirection&&t.slideTo(null!==y?y:g))}}function KE(){const e=this,{params:t,el:i}=e;if(i&&0===i.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:s,allowSlidePrev:r,snapGrid:n}=e,o=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const a=o&&t.loop;!("auto"===t.slidesPerView||t.slidesPerView>1)||!e.isEnd||e.isBeginning||e.params.centeredSlides||a?e.params.loop&&!o?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0):e.slideTo(e.slides.length-1,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout((()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()}),500)),e.allowSlidePrev=r,e.allowSlideNext=s,e.params.watchOverflow&&n!==e.snapGrid&&e.checkOverflow()}function qE(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function XE(){const e=this,{wrapperEl:t,rtlTranslate:i,enabled:s}=e;if(!s)return;let r;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const n=e.maxTranslate()-e.minTranslate();r=0===n?0:(e.translate-e.minTranslate())/n,r!==e.progress&&e.updateProgress(i?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function ZE(e){const t=this;dE(t,e.target),t.params.cssMode||"auto"!==t.params.slidesPerView&&!t.params.autoHeight||t.update()}function QE(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const JE=(e,t)=>{const i=vw(),{params:s,el:r,wrapperEl:n,device:o}=e,a=!!s.nested,l="on"===t?"addEventListener":"removeEventListener",c=t;i[l]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:a}),r[l]("touchstart",e.onTouchStart,{passive:!1}),r[l]("pointerdown",e.onTouchStart,{passive:!1}),i[l]("touchmove",e.onTouchMove,{passive:!1,capture:a}),i[l]("pointermove",e.onTouchMove,{passive:!1,capture:a}),i[l]("touchend",e.onTouchEnd,{passive:!0}),i[l]("pointerup",e.onTouchEnd,{passive:!0}),i[l]("pointercancel",e.onTouchEnd,{passive:!0}),i[l]("touchcancel",e.onTouchEnd,{passive:!0}),i[l]("pointerout",e.onTouchEnd,{passive:!0}),i[l]("pointerleave",e.onTouchEnd,{passive:!0}),i[l]("contextmenu",e.onTouchEnd,{passive:!0}),(s.preventClicks||s.preventClicksPropagation)&&r[l]("click",e.onClick,!0),s.cssMode&&n[l]("scroll",e.onScroll),s.updateOnWindowResize?e[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",KE,!0):e[c]("observerUpdate",KE,!0),r[l]("load",e.onLoad,{capture:!0})};function eT(){const e=this,{params:t}=e;e.onTouchStart=VE.bind(e),e.onTouchMove=YE.bind(e),e.onTouchEnd=WE.bind(e),e.onDocumentTouchStart=QE.bind(e),t.cssMode&&(e.onScroll=XE.bind(e)),e.onClick=qE.bind(e),e.onLoad=ZE.bind(e),JE(e,"on")}function tT(){const e=this;JE(e,"off")}var iT={attachEvents:eT,detachEvents:tT};const sT=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function rT(){const e=this,{realIndex:t,initialized:i,params:s,el:r}=e,n=s.breakpoints;if(!n||n&&0===Object.keys(n).length)return;const o=e.getBreakpoint(n,e.params.breakpointsBase,e.el);if(!o||e.currentBreakpoint===o)return;const a=o in n?n[o]:void 0,l=a||e.originalParams,c=sT(e,s),d=sT(e,l),h=e.params.grabCursor,u=l.grabCursor,p=s.enabled;c&&!d?(r.classList.remove(`${s.containerModifierClass}grid`,`${s.containerModifierClass}grid-column`),e.emitContainerClasses()):!c&&d&&(r.classList.add(`${s.containerModifierClass}grid`),(l.grid.fill&&"column"===l.grid.fill||!l.grid.fill&&"column"===s.grid.fill)&&r.classList.add(`${s.containerModifierClass}grid-column`),e.emitContainerClasses()),h&&!u?e.unsetGrabCursor():!h&&u&&e.setGrabCursor(),["navigation","pagination","scrollbar"].forEach((t=>{if("undefined"===typeof l[t])return;const i=s[t]&&s[t].enabled,r=l[t]&&l[t].enabled;i&&!r&&e[t].disable(),!i&&r&&e[t].enable()}));const f=l.direction&&l.direction!==s.direction,g=s.loop&&(l.slidesPerView!==s.slidesPerView||f),m=s.loop;f&&i&&e.changeDirection(),Cw(e.params,l);const v=e.params.enabled,y=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),p&&!v?e.disable():!p&&v&&e.enable(),e.currentBreakpoint=o,e.emit("_beforeBreakpoint",l),i&&(g?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!m&&y?(e.loopCreate(t),e.updateSlides()):m&&!y&&e.loopDestroy()),e.emit("breakpoint",l)}function nT(e,t,i){if(void 0===t&&(t="window"),!e||"container"===t&&!i)return;let s=!1;const r=bw(),n="window"===t?r.innerHeight:i.clientHeight,o=Object.keys(e).map((e=>{if("string"===typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1)),i=n*t;return{value:i,point:e}}return{value:e,point:e}}));o.sort(((e,t)=>parseInt(e.value,10)-parseInt(t.value,10)));for(let a=0;a<o.length;a+=1){const{point:e,value:n}=o[a];"window"===t?r.matchMedia(`(min-width: ${n}px)`).matches&&(s=e):n<=i.clientWidth&&(s=e)}return s||"max"}var oT={setBreakpoint:rT,getBreakpoint:nT};function aT(e,t){const i=[];return e.forEach((e=>{"object"===typeof e?Object.keys(e).forEach((s=>{e[s]&&i.push(t+s)})):"string"===typeof e&&i.push(t+e)})),i}function lT(){const e=this,{classNames:t,params:i,rtl:s,el:r,device:n}=e,o=aT(["initialized",i.direction,{"free-mode":e.params.freeMode&&i.freeMode.enabled},{autoheight:i.autoHeight},{rtl:s},{grid:i.grid&&i.grid.rows>1},{"grid-column":i.grid&&i.grid.rows>1&&"column"===i.grid.fill},{android:n.android},{ios:n.ios},{"css-mode":i.cssMode},{centered:i.cssMode&&i.centeredSlides},{"watch-progress":i.watchSlidesProgress}],i.containerModifierClass);t.push(...o),r.classList.add(...t),e.emitContainerClasses()}function cT(){const e=this,{el:t,classNames:i}=e;t.classList.remove(...i),e.emitContainerClasses()}var dT={addClasses:lT,removeClasses:cT};function hT(){const e=this,{isLocked:t,params:i}=e,{slidesOffsetBefore:s}=i;if(s){const t=e.slides.length-1,i=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*s;e.isLocked=e.size>i}else e.isLocked=1===e.snapGrid.length;!0===i.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===i.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}var uT={checkOverflow:hT},pT={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function fT(e,t){return function(i){void 0===i&&(i={});const s=Object.keys(i)[0],r=i[s];"object"===typeof r&&null!==r?(!0===e[s]&&(e[s]={enabled:!0}),"navigation"===s&&e[s]&&e[s].enabled&&!e[s].prevEl&&!e[s].nextEl&&(e[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&e[s]&&e[s].enabled&&!e[s].el&&(e[s].auto=!0),s in e&&"enabled"in r?("object"!==typeof e[s]||"enabled"in e[s]||(e[s].enabled=!0),e[s]||(e[s]={enabled:!1}),Cw(t,i)):Cw(t,i)):Cw(t,i)}}const gT={eventsEmitter:tE,update:mE,translate:TE,transition:LE,slide:OE,loop:$E,grabCursor:HE,events:iT,breakpoints:oT,checkOverflow:uT,classes:dT},mT={};let vT=class e{constructor(){let t,i;for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?i=r[0]:[t,i]=r,i||(i={}),i=Cw({},i),t&&!i.el&&(i.el=t);const a=vw();if(i.el&&"string"===typeof i.el&&a.querySelectorAll(i.el).length>1){const t=[];return a.querySelectorAll(i.el).forEach((s=>{const r=Cw({},i,{el:s});t.push(new e(r))})),t}const l=this;l.__swiper__=!0,l.support=Kw(),l.device=Xw({userAgent:i.userAgent}),l.browser=Qw(),l.eventsListeners={},l.eventsAnyListeners=[],l.modules=[...l.__modules__],i.modules&&Array.isArray(i.modules)&&l.modules.push(...i.modules);const c={};l.modules.forEach((e=>{e({params:i,swiper:l,extendParams:fT(i,c),on:l.on.bind(l),once:l.once.bind(l),off:l.off.bind(l),emit:l.emit.bind(l)})}));const d=Cw({},pT,c);return l.params=Cw({},d,mT,i),l.originalParams=Cw({},l.params),l.passedParams=Cw({},i),l.params&&l.params.on&&Object.keys(l.params.on).forEach((e=>{l.on(e,l.params.on[e])})),l.params&&l.params.onAny&&l.onAny(l.params.onAny),Object.assign(l,{enabled:l.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return"horizontal"===l.params.direction},isVertical(){return"vertical"===l.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/o(2,23))*o(2,23)},allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:l.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:l.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),l.emit("_swiper"),l.params.init&&l.init(),l}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:i}=this,s=Dw(t,`.${i.slideClass}, swiper-slide`),r=$w(s[0]);return $w(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter((t=>1*t.getAttribute("data-swiper-slide-index")===e))[0])}recalcSlides(){const e=this,{slidesEl:t,params:i}=e;e.slides=Dw(t,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const i=this;e=Math.min(Math.max(e,0),1);const s=i.minTranslate(),r=i.maxTranslate(),n=(r-s)*e+s;i.translateTo(n,"undefined"===typeof t?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter((t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter((e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass))).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach((i=>{const s=e.getSlideClasses(i);t.push({slideEl:i,classNames:s}),e.emit("_slideClass",i,s)})),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);const i=this,{params:s,slides:r,slidesGrid:n,slidesSizesGrid:o,size:a,activeIndex:l}=i;let c=1;if("number"===typeof s.slidesPerView)return s.slidesPerView;if(s.centeredSlides){let e,t=r[l]?Math.ceil(r[l].swiperSlideSize):0;for(let i=l+1;i<r.length;i+=1)r[i]&&!e&&(t+=Math.ceil(r[i].swiperSlideSize),c+=1,t>a&&(e=!0));for(let i=l-1;i>=0;i-=1)r[i]&&!e&&(t+=r[i].swiperSlideSize,c+=1,t>a&&(e=!0))}else if("current"===e)for(let d=l+1;d<r.length;d+=1){const e=t?n[d]+o[d]-n[l]<a:n[d]-n[l]<a;e&&(c+=1)}else for(let d=l-1;d>=0;d-=1){const e=n[l]-n[d]<a;e&&(c+=1)}return c}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;function s(){const t=e.rtlTranslate?-1*e.translate:e.translate,i=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(i),e.updateActiveIndex(),e.updateSlidesClasses()}let r;if(i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach((t=>{t.complete&&dE(e,t)})),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),i.freeMode&&i.freeMode.enabled&&!i.cssMode)s(),i.autoHeight&&e.updateAutoHeight();else{if(("auto"===i.slidesPerView||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const t=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;r=e.slideTo(t.length-1,0,!1,!0)}else r=e.slideTo(e.activeIndex,0,!1,!0);r||s()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){void 0===t&&(t=!0);const i=this,s=i.params.direction;return e||(e="horizontal"===s?"vertical":"horizontal"),e===s||"horizontal"!==e&&"vertical"!==e||(i.el.classList.remove(`${i.params.containerModifierClass}${s}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach((t=>{"vertical"===e?t.style.width="":t.style.height=""})),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let i=e||t.params.el;if("string"===typeof i&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const s=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`,r=()=>{if(i&&i.shadowRoot&&i.shadowRoot.querySelector){const e=i.shadowRoot.querySelector(s());return e}return Dw(i,s())[0]};let n=r();return!n&&t.params.createElements&&(n=Mw("div",t.params.wrapperClass),i.append(n),Dw(i,`.${t.params.slideClass}`).forEach((e=>{n.append(e)}))),Object.assign(t,{el:i,wrapperEl:n,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:n,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:"rtl"===i.dir.toLowerCase()||"rtl"===Bw(i,"direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===i.dir.toLowerCase()||"rtl"===Bw(i,"direction")),wrongRTL:"-webkit-box"===Bw(n,"display")}),!0}init(e){const t=this;if(t.initialized)return t;const i=t.mount(e);if(!1===i)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const s=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&s.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach((e=>{e.complete?dE(t,e):e.addEventListener("load",(e=>{dE(t,e.target)}))})),uE(t),t.initialized=!0,uE(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);const i=this,{params:s,el:r,wrapperEl:n,slides:o}=i;return"undefined"===typeof i.params||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),s.loop&&i.loopDestroy(),t&&(i.removeClasses(),r.removeAttribute("style"),n.removeAttribute("style"),o&&o.length&&o.forEach((e=>{e.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")}))),i.emit("destroy"),Object.keys(i.eventsListeners).forEach((e=>{i.off(e)})),!1!==e&&(i.el.swiper=null,Ew(i)),i.destroyed=!0),null}static extendDefaults(e){Cw(mT,e)}static get extendedDefaults(){return mT}static get defaults(){return pT}static installModule(t){e.prototype.__modules__||(e.prototype.__modules__=[]);const i=e.prototype.__modules__;"function"===typeof t&&i.indexOf(t)<0&&i.push(t)}static use(t){return Array.isArray(t)?(t.forEach((t=>e.installModule(t))),e):(e.installModule(t),e)}};function yT(e){let t,{swiper:i,extendParams:s,on:r,emit:n}=e;s({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});const o=vw();i.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};const a=o.createElement("div");function l(e,t){const s=i.params.virtual;if(s.cache&&i.virtual.cache[t])return i.virtual.cache[t];let r;return s.renderSlide?(r=s.renderSlide.call(i,e,t),"string"===typeof r&&(a.innerHTML=r,r=a.children[0])):r=i.isElement?Mw("swiper-slide"):Mw("div",i.params.slideClass),r.setAttribute("data-swiper-slide-index",t),s.renderSlide||(r.innerHTML=e),s.cache&&(i.virtual.cache[t]=r),r}function c(e,t){const{slidesPerView:s,slidesPerGroup:r,centeredSlides:o,loop:a,initialSlide:c}=i.params;if(t&&!a&&c>0)return;const{addSlidesBefore:d,addSlidesAfter:h}=i.params.virtual,{from:u,to:p,slides:f,slidesGrid:g,offset:m}=i.virtual;i.params.cssMode||i.updateActiveIndex();const v=i.activeIndex||0;let y,b,w;y=i.rtlTranslate?"right":i.isHorizontal()?"left":"top",o?(b=Math.floor(s/2)+r+h,w=Math.floor(s/2)+r+d):(b=s+(r-1)+h,w=(a?s:r)+d);let E=v-w,T=v+b;a||(E=Math.max(E,0),T=Math.min(T,f.length-1));let S=(i.slidesGrid[E]||0)-(i.slidesGrid[0]||0);function A(){i.updateSlides(),i.updateProgress(),i.updateSlidesClasses(),n("virtualUpdate")}if(a&&v>=w?(E-=w,o||(S+=i.slidesGrid[0])):a&&v<w&&(E=-w,o&&(S+=i.slidesGrid[0])),Object.assign(i.virtual,{from:E,to:T,offset:S,slidesGrid:i.slidesGrid,slidesBefore:w,slidesAfter:b}),u===E&&p===T&&!e)return i.slidesGrid!==g&&S!==m&&i.slides.forEach((e=>{e.style[y]=S-Math.abs(i.cssOverflowAdjustment())+"px"})),i.updateProgress(),void n("virtualUpdate");if(i.params.virtual.renderExternal)return i.params.virtual.renderExternal.call(i,{offset:S,from:E,to:T,slides:function(){const e=[];for(let t=E;t<=T;t+=1)e.push(f[t]);return e}()}),void(i.params.virtual.renderExternalUpdate?A():n("virtualUpdate"));const x=[],k=[],L=e=>{let t=e;return e<0?t=f.length+e:t>=f.length&&(t-=f.length),t};if(e)i.slides.filter((e=>e.matches(`.${i.params.slideClass}, swiper-slide`))).forEach((e=>{e.remove()}));else for(let n=u;n<=p;n+=1)if(n<E||n>T){const e=L(n);i.slides.filter((t=>t.matches(`.${i.params.slideClass}[data-swiper-slide-index="${e}"], swiper-slide[data-swiper-slide-index="${e}"]`))).forEach((e=>{e.remove()}))}const C=a?-f.length:0,_=a?2*f.length:f.length;for(let i=C;i<_;i+=1)if(i>=E&&i<=T){const t=L(i);"undefined"===typeof p||e?k.push(t):(i>p&&k.push(t),i<u&&x.push(t))}if(k.forEach((e=>{i.slidesEl.append(l(f[e],e))})),a)for(let n=x.length-1;n>=0;n-=1){const e=x[n];i.slidesEl.prepend(l(f[e],e))}else x.sort(((e,t)=>t-e)),x.forEach((e=>{i.slidesEl.prepend(l(f[e],e))}));Dw(i.slidesEl,".swiper-slide, swiper-slide").forEach((e=>{e.style[y]=S-Math.abs(i.cssOverflowAdjustment())+"px"})),A()}function d(e){if("object"===typeof e&&"length"in e)for(let t=0;t<e.length;t+=1)e[t]&&i.virtual.slides.push(e[t]);else i.virtual.slides.push(e);c(!0)}function h(e){const t=i.activeIndex;let s=t+1,r=1;if(Array.isArray(e)){for(let t=0;t<e.length;t+=1)e[t]&&i.virtual.slides.unshift(e[t]);s=t+e.length,r=e.length}else i.virtual.slides.unshift(e);if(i.params.virtual.cache){const e=i.virtual.cache,t={};Object.keys(e).forEach((i=>{const s=e[i],n=s.getAttribute("data-swiper-slide-index");n&&s.setAttribute("data-swiper-slide-index",parseInt(n,10)+r),t[parseInt(i,10)+r]=s})),i.virtual.cache=t}c(!0),i.slideTo(s,0)}function u(e){if("undefined"===typeof e||null===e)return;let t=i.activeIndex;if(Array.isArray(e))for(let s=e.length-1;s>=0;s-=1)i.params.virtual.cache&&(delete i.virtual.cache[e[s]],Object.keys(i.virtual.cache).forEach((t=>{t>e&&(i.virtual.cache[t-1]=i.virtual.cache[t],i.virtual.cache[t-1].setAttribute("data-swiper-slide-index",t-1),delete i.virtual.cache[t])}))),i.virtual.slides.splice(e[s],1),e[s]<t&&(t-=1),t=Math.max(t,0);else i.params.virtual.cache&&(delete i.virtual.cache[e],Object.keys(i.virtual.cache).forEach((t=>{t>e&&(i.virtual.cache[t-1]=i.virtual.cache[t],i.virtual.cache[t-1].setAttribute("data-swiper-slide-index",t-1),delete i.virtual.cache[t])}))),i.virtual.slides.splice(e,1),e<t&&(t-=1),t=Math.max(t,0);c(!0),i.slideTo(t,0)}function p(){i.virtual.slides=[],i.params.virtual.cache&&(i.virtual.cache={}),c(!0),i.slideTo(0,0)}r("beforeInit",(()=>{if(!i.params.virtual.enabled)return;let e;if("undefined"===typeof i.passedParams.virtual.slides){const t=[...i.slidesEl.children].filter((e=>e.matches(`.${i.params.slideClass}, swiper-slide`)));t&&t.length&&(i.virtual.slides=[...t],e=!0,t.forEach(((e,t)=>{e.setAttribute("data-swiper-slide-index",t),i.virtual.cache[t]=e,e.remove()})))}e||(i.virtual.slides=i.params.virtual.slides),i.classNames.push(`${i.params.containerModifierClass}virtual`),i.params.watchSlidesProgress=!0,i.originalParams.watchSlidesProgress=!0,c(!1,!0)})),r("setTranslate",(()=>{i.params.virtual.enabled&&(i.params.cssMode&&!i._immediateVirtual?(clearTimeout(t),t=setTimeout((()=>{c()}),100)):c())})),r("init update resize",(()=>{i.params.virtual.enabled&&i.params.cssMode&&_w(i.wrapperEl,"--swiper-virtual-size",`${i.virtualSize}px`)})),Object.assign(i.virtual,{appendSlide:d,prependSlide:h,removeSlide:u,removeAllSlides:p,update:c})}function bT(e){let{swiper:t,extendParams:i,on:s,emit:r}=e;const n=vw(),o=bw();function a(e){if(!t.enabled)return;const{rtlTranslate:i}=t;let s=e;s.originalEvent&&(s=s.originalEvent);const a=s.keyCode||s.charCode,l=t.params.keyboard.pageUpDown,c=l&&33===a,d=l&&34===a,h=37===a,u=39===a,p=38===a,f=40===a;if(!t.allowSlideNext&&(t.isHorizontal()&&u||t.isVertical()&&f||d))return!1;if(!t.allowSlidePrev&&(t.isHorizontal()&&h||t.isVertical()&&p||c))return!1;if(!(s.shiftKey||s.altKey||s.ctrlKey||s.metaKey)&&(!n.activeElement||!n.activeElement.nodeName||"input"!==n.activeElement.nodeName.toLowerCase()&&"textarea"!==n.activeElement.nodeName.toLowerCase())){if(t.params.keyboard.onlyInViewport&&(c||d||h||u||p||f)){let e=!1;if(Uw(t.el,`.${t.params.slideClass}, swiper-slide`).length>0&&0===Uw(t.el,`.${t.params.slideActiveClass}`).length)return;const s=t.el,r=s.clientWidth,n=s.clientHeight,a=o.innerWidth,l=o.innerHeight,c=Ow(s);i&&(c.left-=s.scrollLeft);const d=[[c.left,c.top],[c.left+r,c.top],[c.left,c.top+n],[c.left+r,c.top+n]];for(let t=0;t<d.length;t+=1){const i=d[t];if(i[0]>=0&&i[0]<=a&&i[1]>=0&&i[1]<=l){if(0===i[0]&&0===i[1])continue;e=!0}}if(!e)return}t.isHorizontal()?((c||d||h||u)&&(s.preventDefault?s.preventDefault():s.returnValue=!1),((d||u)&&!i||(c||h)&&i)&&t.slideNext(),((c||h)&&!i||(d||u)&&i)&&t.slidePrev()):((c||d||p||f)&&(s.preventDefault?s.preventDefault():s.returnValue=!1),(d||f)&&t.slideNext(),(c||p)&&t.slidePrev()),r("keyPress",a)}}function l(){t.keyboard.enabled||(n.addEventListener("keydown",a),t.keyboard.enabled=!0)}function c(){t.keyboard.enabled&&(n.removeEventListener("keydown",a),t.keyboard.enabled=!1)}t.keyboard={enabled:!1},i({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}}),s("init",(()=>{t.params.keyboard.enabled&&l()})),s("destroy",(()=>{t.keyboard.enabled&&c()})),Object.assign(t.keyboard,{enable:l,disable:c})}function wT(e){let{swiper:t,extendParams:i,on:s,emit:r}=e;const n=bw();let o;i({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),t.mousewheel={enabled:!1};let a,l=Sw();const c=[];function d(e){const t=10,i=40,s=800;let r=0,n=0,o=0,a=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(r=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(r=n,n=0),o=r*t,a=n*t,"deltaY"in e&&(a=e.deltaY),"deltaX"in e&&(o=e.deltaX),e.shiftKey&&!o&&(o=a,a=0),(o||a)&&e.deltaMode&&(1===e.deltaMode?(o*=i,a*=i):(o*=s,a*=s)),o&&!r&&(r=o<1?-1:1),a&&!n&&(n=a<1?-1:1),{spinX:r,spinY:n,pixelX:o,pixelY:a}}function h(){t.enabled&&(t.mouseEntered=!0)}function u(){t.enabled&&(t.mouseEntered=!1)}function p(e){return!(t.params.mousewheel.thresholdDelta&&e.delta<t.params.mousewheel.thresholdDelta)&&(!(t.params.mousewheel.thresholdTime&&Sw()-l<t.params.mousewheel.thresholdTime)&&(e.delta>=6&&Sw()-l<60||(e.direction<0?t.isEnd&&!t.params.loop||t.animating||(t.slideNext(),r("scroll",e.raw)):t.isBeginning&&!t.params.loop||t.animating||(t.slidePrev(),r("scroll",e.raw)),l=(new n.Date).getTime(),!1)))}function f(e){const i=t.params.mousewheel;if(e.direction<0){if(t.isEnd&&!t.params.loop&&i.releaseOnEdges)return!0}else if(t.isBeginning&&!t.params.loop&&i.releaseOnEdges)return!0;return!1}function g(e){let i=e,s=!0;if(!t.enabled)return;if(e.target.closest(`.${t.params.mousewheel.noMousewheelClass}`))return;const n=t.params.mousewheel;t.params.cssMode&&i.preventDefault();let l=t.el;"container"!==t.params.mousewheel.eventsTarget&&(l=document.querySelector(t.params.mousewheel.eventsTarget));const h=l&&l.contains(i.target);if(!t.mouseEntered&&!h&&!n.releaseOnEdges)return!0;i.originalEvent&&(i=i.originalEvent);let u=0;const g=t.rtlTranslate?-1:1,m=d(i);if(n.forceToAxis)if(t.isHorizontal()){if(!(Math.abs(m.pixelX)>Math.abs(m.pixelY)))return!0;u=-m.pixelX*g}else{if(!(Math.abs(m.pixelY)>Math.abs(m.pixelX)))return!0;u=-m.pixelY}else u=Math.abs(m.pixelX)>Math.abs(m.pixelY)?-m.pixelX*g:-m.pixelY;if(0===u)return!0;n.invert&&(u=-u);let v=t.getTranslate()+u*n.sensitivity;if(v>=t.minTranslate()&&(v=t.minTranslate()),v<=t.maxTranslate()&&(v=t.maxTranslate()),s=!!t.params.loop||!(v===t.minTranslate()||v===t.maxTranslate()),s&&t.params.nested&&i.stopPropagation(),t.params.freeMode&&t.params.freeMode.enabled){const e={time:Sw(),delta:Math.abs(u),direction:Math.sign(u)},s=a&&e.time<a.time+500&&e.delta<=a.delta&&e.direction===a.direction;if(!s){a=void 0;let l=t.getTranslate()+u*n.sensitivity;const d=t.isBeginning,h=t.isEnd;if(l>=t.minTranslate()&&(l=t.minTranslate()),l<=t.maxTranslate()&&(l=t.maxTranslate()),t.setTransition(0),t.setTranslate(l),t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses(),(!d&&t.isBeginning||!h&&t.isEnd)&&t.updateSlidesClasses(),t.params.loop&&t.loopFix({direction:e.direction<0?"next":"prev",byMousewheel:!0}),t.params.freeMode.sticky){clearTimeout(o),o=void 0,c.length>=15&&c.shift();const i=c.length?c[c.length-1]:void 0,s=c[0];if(c.push(e),i&&(e.delta>i.delta||e.direction!==i.direction))c.splice(0);else if(c.length>=15&&e.time-s.time<500&&s.delta-e.delta>=1&&e.delta<=6){const i=u>0?.8:.2;a=e,c.splice(0),o=Tw((()=>{t.slideToClosest(t.params.speed,!0,void 0,i)}),0)}o||(o=Tw((()=>{const i=.5;a=e,c.splice(0),t.slideToClosest(t.params.speed,!0,void 0,i)}),500))}if(s||r("scroll",i),t.params.autoplay&&t.params.autoplayDisableOnInteraction&&t.autoplay.stop(),n.releaseOnEdges&&(l===t.minTranslate()||l===t.maxTranslate()))return!0}}else{const t={time:Sw(),delta:Math.abs(u),direction:Math.sign(u),raw:e};c.length>=2&&c.shift();const i=c.length?c[c.length-1]:void 0;if(c.push(t),i?(t.direction!==i.direction||t.delta>i.delta||t.time>i.time+150)&&p(t):p(t),f(t))return!0}return i.preventDefault?i.preventDefault():i.returnValue=!1,!1}function m(e){let i=t.el;"container"!==t.params.mousewheel.eventsTarget&&(i=document.querySelector(t.params.mousewheel.eventsTarget)),i[e]("mouseenter",h),i[e]("mouseleave",u),i[e]("wheel",g)}function v(){return t.params.cssMode?(t.wrapperEl.removeEventListener("wheel",g),!0):!t.mousewheel.enabled&&(m("addEventListener"),t.mousewheel.enabled=!0,!0)}function y(){return t.params.cssMode?(t.wrapperEl.addEventListener(event,g),!0):!!t.mousewheel.enabled&&(m("removeEventListener"),t.mousewheel.enabled=!1,!0)}s("init",(()=>{!t.params.mousewheel.enabled&&t.params.cssMode&&y(),t.params.mousewheel.enabled&&v()})),s("destroy",(()=>{t.params.cssMode&&v(),t.mousewheel.enabled&&y()})),Object.assign(t.mousewheel,{enable:v,disable:y})}function ET(e,t,i,s){return e.params.createElements&&Object.keys(s).forEach((r=>{if(!i[r]&&!0===i.auto){let n=Dw(e.el,`.${s[r]}`)[0];n||(n=Mw("div",s[r]),n.className=s[r],e.el.append(n)),i[r]=n,t[r]=n}})),i}function TT(e){let{swiper:t,extendParams:i,on:s,emit:r}=e;function n(e){let i;return e&&"string"===typeof e&&t.isElement&&(i=t.el.querySelector(e),i)?i:(e&&("string"===typeof e&&(i=[...document.querySelectorAll(e)]),t.params.uniqueNavElements&&"string"===typeof e&&i&&i.length>1&&1===t.el.querySelectorAll(e).length?i=t.el.querySelector(e):i&&1===i.length&&(i=i[0])),e&&!i?e:i)}function o(e,i){const s=t.params.navigation;e=jw(e),e.forEach((e=>{e&&(e.classList[i?"add":"remove"](...s.disabledClass.split(" ")),"BUTTON"===e.tagName&&(e.disabled=i),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](s.lockClass))}))}function a(){const{nextEl:e,prevEl:i}=t.navigation;if(t.params.loop)return o(i,!1),void o(e,!1);o(i,t.isBeginning&&!t.params.rewind),o(e,t.isEnd&&!t.params.rewind)}function l(e){e.preventDefault(),(!t.isBeginning||t.params.loop||t.params.rewind)&&(t.slidePrev(),r("navigationPrev"))}function c(e){e.preventDefault(),(!t.isEnd||t.params.loop||t.params.rewind)&&(t.slideNext(),r("navigationNext"))}function d(){const e=t.params.navigation;if(t.params.navigation=ET(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!e.nextEl&&!e.prevEl)return;let i=n(e.nextEl),s=n(e.prevEl);Object.assign(t.navigation,{nextEl:i,prevEl:s}),i=jw(i),s=jw(s);const r=(i,s)=>{i&&i.addEventListener("click","next"===s?c:l),!t.enabled&&i&&i.classList.add(...e.lockClass.split(" "))};i.forEach((e=>r(e,"next"))),s.forEach((e=>r(e,"prev")))}function h(){let{nextEl:e,prevEl:i}=t.navigation;e=jw(e),i=jw(i);const s=(e,i)=>{e.removeEventListener("click","next"===i?c:l),e.classList.remove(...t.params.navigation.disabledClass.split(" "))};e.forEach((e=>s(e,"next"))),i.forEach((e=>s(e,"prev")))}i({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null},s("init",(()=>{!1===t.params.navigation.enabled?p():(d(),a())})),s("toEdge fromEdge lock unlock",(()=>{a()})),s("destroy",(()=>{h()})),s("enable disable",(()=>{let{nextEl:e,prevEl:i}=t.navigation;e=jw(e),i=jw(i),t.enabled?a():[...e,...i].filter((e=>!!e)).forEach((e=>e.classList.add(t.params.navigation.lockClass)))})),s("click",((e,i)=>{let{nextEl:s,prevEl:n}=t.navigation;s=jw(s),n=jw(n);const o=i.target;if(t.params.navigation.hideOnClick&&!n.includes(o)&&!s.includes(o)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===o||t.pagination.el.contains(o)))return;let e;s.length?e=s[0].classList.contains(t.params.navigation.hiddenClass):n.length&&(e=n[0].classList.contains(t.params.navigation.hiddenClass)),r(!0===e?"navigationShow":"navigationHide"),[...s,...n].filter((e=>!!e)).forEach((e=>e.classList.toggle(t.params.navigation.hiddenClass)))}}));const u=()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),d(),a()},p=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(t.navigation,{enable:u,disable:p,update:a,init:d,destroy:h})}function ST(e){return void 0===e&&(e=""),`.${e.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function AT(e){let{swiper:t,extendParams:i,on:s,emit:r}=e;const n="swiper-pagination";let o;i({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:e=>e,formatFractionTotal:e=>e,bulletClass:`${n}-bullet`,bulletActiveClass:`${n}-bullet-active`,modifierClass:`${n}-`,currentClass:`${n}-current`,totalClass:`${n}-total`,hiddenClass:`${n}-hidden`,progressbarFillClass:`${n}-progressbar-fill`,progressbarOppositeClass:`${n}-progressbar-opposite`,clickableClass:`${n}-clickable`,lockClass:`${n}-lock`,horizontalClass:`${n}-horizontal`,verticalClass:`${n}-vertical`,paginationDisabledClass:`${n}-disabled`}}),t.pagination={el:null,bullets:[]};let a=0;function l(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&0===t.pagination.el.length}function c(e,i){const{bulletActiveClass:s}=t.params.pagination;e&&(e=e[("prev"===i?"previous":"next")+"ElementSibling"],e&&(e.classList.add(`${s}-${i}`),e=e[("prev"===i?"previous":"next")+"ElementSibling"],e&&e.classList.add(`${s}-${i}-${i}`)))}function d(e){const i=e.target.closest(ST(t.params.pagination.bulletClass));if(!i)return;e.preventDefault();const s=$w(i)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===s)return;t.slideToLoop(s)}else t.slideTo(s)}function h(){const e=t.rtl,i=t.params.pagination;if(l())return;let s,n,d=t.pagination.el;d=jw(d);const h=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,u=t.params.loop?Math.ceil(h/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(n=t.previousRealIndex||0,s=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):"undefined"!==typeof t.snapIndex?(s=t.snapIndex,n=t.previousSnapIndex):(n=t.previousIndex||0,s=t.activeIndex||0),"bullets"===i.type&&t.pagination.bullets&&t.pagination.bullets.length>0){const r=t.pagination.bullets;let l,h,u;if(i.dynamicBullets&&(o=Hw(r[0],t.isHorizontal()?"width":"height",!0),d.forEach((e=>{e.style[t.isHorizontal()?"width":"height"]=o*(i.dynamicMainBullets+4)+"px"})),i.dynamicMainBullets>1&&void 0!==n&&(a+=s-(n||0),a>i.dynamicMainBullets-1?a=i.dynamicMainBullets-1:a<0&&(a=0)),l=Math.max(s-a,0),h=l+(Math.min(r.length,i.dynamicMainBullets)-1),u=(h+l)/2),r.forEach((e=>{const t=[...["","-next","-next-next","-prev","-prev-prev","-main"].map((e=>`${i.bulletActiveClass}${e}`))].map((e=>"string"===typeof e&&e.includes(" ")?e.split(" "):e)).flat();e.classList.remove(...t)})),d.length>1)r.forEach((e=>{const r=$w(e);r===s?e.classList.add(...i.bulletActiveClass.split(" ")):t.isElement&&e.setAttribute("part","bullet"),i.dynamicBullets&&(r>=l&&r<=h&&e.classList.add(...`${i.bulletActiveClass}-main`.split(" ")),r===l&&c(e,"prev"),r===h&&c(e,"next"))}));else{const e=r[s];if(e&&e.classList.add(...i.bulletActiveClass.split(" ")),t.isElement&&r.forEach(((e,t)=>{e.setAttribute("part",t===s?"bullet-active":"bullet")})),i.dynamicBullets){const e=r[l],t=r[h];for(let s=l;s<=h;s+=1)r[s]&&r[s].classList.add(...`${i.bulletActiveClass}-main`.split(" "));c(e,"prev"),c(t,"next")}}if(i.dynamicBullets){const s=Math.min(r.length,i.dynamicMainBullets+4),n=(o*s-o)/2-u*o,a=e?"right":"left";r.forEach((e=>{e.style[t.isHorizontal()?a:"top"]=`${n}px`}))}}d.forEach(((e,n)=>{if("fraction"===i.type&&(e.querySelectorAll(ST(i.currentClass)).forEach((e=>{e.textContent=i.formatFractionCurrent(s+1)})),e.querySelectorAll(ST(i.totalClass)).forEach((e=>{e.textContent=i.formatFractionTotal(u)}))),"progressbar"===i.type){let r;r=i.progressbarOpposite?t.isHorizontal()?"vertical":"horizontal":t.isHorizontal()?"horizontal":"vertical";const n=(s+1)/u;let o=1,a=1;"horizontal"===r?o=n:a=n,e.querySelectorAll(ST(i.progressbarFillClass)).forEach((e=>{e.style.transform=`translate3d(0,0,0) scaleX(${o}) scaleY(${a})`,e.style.transitionDuration=`${t.params.speed}ms`}))}"custom"===i.type&&i.renderCustom?(e.innerHTML=i.renderCustom(t,s+1,u),0===n&&r("paginationRender",e)):(0===n&&r("paginationRender",e),r("paginationUpdate",e)),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](i.lockClass)}))}function u(){const e=t.params.pagination;if(l())return;const i=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.grid&&t.params.grid.rows>1?t.slides.length/Math.ceil(t.params.grid.rows):t.slides.length;let s=t.pagination.el;s=jw(s);let n="";if("bullets"===e.type){let s=t.params.loop?Math.ceil(i/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&s>i&&(s=i);for(let i=0;i<s;i+=1)e.renderBullet?n+=e.renderBullet.call(t,i,e.bulletClass):n+=`<${e.bulletElement} ${t.isElement?'part="bullet"':""} class="${e.bulletClass}"></${e.bulletElement}>`}"fraction"===e.type&&(n=e.renderFraction?e.renderFraction.call(t,e.currentClass,e.totalClass):`<span class="${e.currentClass}"></span> / <span class="${e.totalClass}"></span>`),"progressbar"===e.type&&(n=e.renderProgressbar?e.renderProgressbar.call(t,e.progressbarFillClass):`<span class="${e.progressbarFillClass}"></span>`),t.pagination.bullets=[],s.forEach((i=>{"custom"!==e.type&&(i.innerHTML=n||""),"bullets"===e.type&&t.pagination.bullets.push(...i.querySelectorAll(ST(e.bulletClass)))})),"custom"!==e.type&&r("paginationRender",s[0])}function p(){t.params.pagination=ET(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const e=t.params.pagination;if(!e.el)return;let i;"string"===typeof e.el&&t.isElement&&(i=t.el.querySelector(e.el)),i||"string"!==typeof e.el||(i=[...document.querySelectorAll(e.el)]),i||(i=e.el),i&&0!==i.length&&(t.params.uniqueNavElements&&"string"===typeof e.el&&Array.isArray(i)&&i.length>1&&(i=[...t.el.querySelectorAll(e.el)],i.length>1&&(i=i.filter((e=>Uw(e,".swiper")[0]===t.el))[0])),Array.isArray(i)&&1===i.length&&(i=i[0]),Object.assign(t.pagination,{el:i}),i=jw(i),i.forEach((i=>{"bullets"===e.type&&e.clickable&&i.classList.add(...(e.clickableClass||"").split(" ")),i.classList.add(e.modifierClass+e.type),i.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass),"bullets"===e.type&&e.dynamicBullets&&(i.classList.add(`${e.modifierClass}${e.type}-dynamic`),a=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&i.classList.add(e.progressbarOppositeClass),e.clickable&&i.addEventListener("click",d),t.enabled||i.classList.add(e.lockClass)})))}function f(){const e=t.params.pagination;if(l())return;let i=t.pagination.el;i&&(i=jw(i),i.forEach((i=>{i.classList.remove(e.hiddenClass),i.classList.remove(e.modifierClass+e.type),i.classList.remove(t.isHorizontal()?e.horizontalClass:e.verticalClass),e.clickable&&(i.classList.remove(...(e.clickableClass||"").split(" ")),i.removeEventListener("click",d))}))),t.pagination.bullets&&t.pagination.bullets.forEach((t=>t.classList.remove(...e.bulletActiveClass.split(" "))))}s("changeDirection",(()=>{if(!t.pagination||!t.pagination.el)return;const e=t.params.pagination;let{el:i}=t.pagination;i=jw(i),i.forEach((i=>{i.classList.remove(e.horizontalClass,e.verticalClass),i.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass)}))})),s("init",(()=>{!1===t.params.pagination.enabled?m():(p(),u(),h())})),s("activeIndexChange",(()=>{"undefined"===typeof t.snapIndex&&h()})),s("snapIndexChange",(()=>{h()})),s("snapGridLengthChange",(()=>{u(),h()})),s("destroy",(()=>{f()})),s("enable disable",(()=>{let{el:e}=t.pagination;e&&(e=jw(e),e.forEach((e=>e.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass))))})),s("lock unlock",(()=>{h()})),s("click",((e,i)=>{const s=i.target,n=jw(t.pagination.el);if(t.params.pagination.el&&t.params.pagination.hideOnClick&&n&&n.length>0&&!s.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&s===t.navigation.nextEl||t.navigation.prevEl&&s===t.navigation.prevEl))return;const e=n[0].classList.contains(t.params.pagination.hiddenClass);r(!0===e?"paginationShow":"paginationHide"),n.forEach((e=>e.classList.toggle(t.params.pagination.hiddenClass)))}}));const g=()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=jw(e),e.forEach((e=>e.classList.remove(t.params.pagination.paginationDisabledClass)))),p(),u(),h()},m=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=jw(e),e.forEach((e=>e.classList.add(t.params.pagination.paginationDisabledClass)))),f()};Object.assign(t.pagination,{enable:g,disable:m,render:u,update:h,init:p,destroy:f})}function xT(e){let{swiper:t,extendParams:i,on:s,emit:r}=e;const n=vw();let o,a,l,c,d=!1,h=null,u=null;function p(){if(!t.params.scrollbar.el||!t.scrollbar.el)return;const{scrollbar:e,rtlTranslate:i}=t,{dragEl:s,el:r}=e,n=t.params.scrollbar,o=t.params.loop?t.progressLoop:t.progress;let c=a,d=(l-a)*o;i?(d=-d,d>0?(c=a-d,d=0):-d+a>l&&(c=l+d)):d<0?(c=a+d,d=0):d+a>l&&(c=l-d),t.isHorizontal()?(s.style.transform=`translate3d(${d}px, 0, 0)`,s.style.width=`${c}px`):(s.style.transform=`translate3d(0px, ${d}px, 0)`,s.style.height=`${c}px`),n.hide&&(clearTimeout(h),r.style.opacity=1,h=setTimeout((()=>{r.style.opacity=0,r.style.transitionDuration="400ms"}),1e3))}function f(e){t.params.scrollbar.el&&t.scrollbar.el&&(t.scrollbar.dragEl.style.transitionDuration=`${e}ms`)}function g(){if(!t.params.scrollbar.el||!t.scrollbar.el)return;const{scrollbar:e}=t,{dragEl:i,el:s}=e;i.style.width="",i.style.height="",l=t.isHorizontal()?s.offsetWidth:s.offsetHeight,c=t.size/(t.virtualSize+t.params.slidesOffsetBefore-(t.params.centeredSlides?t.snapGrid[0]:0)),a="auto"===t.params.scrollbar.dragSize?l*c:parseInt(t.params.scrollbar.dragSize,10),t.isHorizontal()?i.style.width=`${a}px`:i.style.height=`${a}px`,s.style.display=c>=1?"none":"",t.params.scrollbar.hide&&(s.style.opacity=0),t.params.watchOverflow&&t.enabled&&e.el.classList[t.isLocked?"add":"remove"](t.params.scrollbar.lockClass)}function m(e){return t.isHorizontal()?e.clientX:e.clientY}function v(e){const{scrollbar:i,rtlTranslate:s}=t,{el:r}=i;let n;n=(m(e)-Ow(r)[t.isHorizontal()?"left":"top"]-(null!==o?o:a/2))/(l-a),n=Math.max(Math.min(n,1),0),s&&(n=1-n);const c=t.minTranslate()+(t.maxTranslate()-t.minTranslate())*n;t.updateProgress(c),t.setTranslate(c),t.updateActiveIndex(),t.updateSlidesClasses()}function y(e){const i=t.params.scrollbar,{scrollbar:s,wrapperEl:n}=t,{el:a,dragEl:l}=s;d=!0,o=e.target===l?m(e)-e.target.getBoundingClientRect()[t.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),n.style.transitionDuration="100ms",l.style.transitionDuration="100ms",v(e),clearTimeout(u),a.style.transitionDuration="0ms",i.hide&&(a.style.opacity=1),t.params.cssMode&&(t.wrapperEl.style["scroll-snap-type"]="none"),r("scrollbarDragStart",e)}function b(e){const{scrollbar:i,wrapperEl:s}=t,{el:n,dragEl:o}=i;d&&(e.preventDefault&&e.cancelable?e.preventDefault():e.returnValue=!1,v(e),s.style.transitionDuration="0ms",n.style.transitionDuration="0ms",o.style.transitionDuration="0ms",r("scrollbarDragMove",e))}function w(e){const i=t.params.scrollbar,{scrollbar:s,wrapperEl:n}=t,{el:o}=s;d&&(d=!1,t.params.cssMode&&(t.wrapperEl.style["scroll-snap-type"]="",n.style.transitionDuration=""),i.hide&&(clearTimeout(u),u=Tw((()=>{o.style.opacity=0,o.style.transitionDuration="400ms"}),1e3)),r("scrollbarDragEnd",e),i.snapOnRelease&&t.slideToClosest())}function E(e){const{scrollbar:i,params:s}=t,r=i.el;if(!r)return;const o=r,a=!!s.passiveListeners&&{passive:!1,capture:!1},l=!!s.passiveListeners&&{passive:!0,capture:!1};if(!o)return;const c="on"===e?"addEventListener":"removeEventListener";o[c]("pointerdown",y,a),n[c]("pointermove",b,a),n[c]("pointerup",w,l)}function T(){t.params.scrollbar.el&&t.scrollbar.el&&E("on")}function S(){t.params.scrollbar.el&&t.scrollbar.el&&E("off")}function A(){const{scrollbar:e,el:i}=t;t.params.scrollbar=ET(t,t.originalParams.scrollbar,t.params.scrollbar,{el:"swiper-scrollbar"});const s=t.params.scrollbar;if(!s.el)return;let r,o;if("string"===typeof s.el&&t.isElement&&(r=t.el.querySelector(s.el)),r||"string"!==typeof s.el)r||(r=s.el);else if(r=n.querySelectorAll(s.el),!r.length)return;t.params.uniqueNavElements&&"string"===typeof s.el&&r.length>1&&1===i.querySelectorAll(s.el).length&&(r=i.querySelector(s.el)),r.length>0&&(r=r[0]),r.classList.add(t.isHorizontal()?s.horizontalClass:s.verticalClass),r&&(o=r.querySelector(ST(t.params.scrollbar.dragClass)),o||(o=Mw("div",t.params.scrollbar.dragClass),r.append(o))),Object.assign(e,{el:r,dragEl:o}),s.draggable&&T(),r&&r.classList[t.enabled?"remove":"add"](...ww(t.params.scrollbar.lockClass))}function x(){const e=t.params.scrollbar,i=t.scrollbar.el;i&&i.classList.remove(...ww(t.isHorizontal()?e.horizontalClass:e.verticalClass)),S()}i({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),t.scrollbar={el:null,dragEl:null},s("changeDirection",(()=>{if(!t.scrollbar||!t.scrollbar.el)return;const e=t.params.scrollbar;let{el:i}=t.scrollbar;i=jw(i),i.forEach((i=>{i.classList.remove(e.horizontalClass,e.verticalClass),i.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass)}))})),s("init",(()=>{!1===t.params.scrollbar.enabled?L():(A(),g(),p())})),s("update resize observerUpdate lock unlock changeDirection",(()=>{g()})),s("setTranslate",(()=>{p()})),s("setTransition",((e,t)=>{f(t)})),s("enable disable",(()=>{const{el:e}=t.scrollbar;e&&e.classList[t.enabled?"remove":"add"](...ww(t.params.scrollbar.lockClass))})),s("destroy",(()=>{x()}));const k=()=>{t.el.classList.remove(...ww(t.params.scrollbar.scrollbarDisabledClass)),t.scrollbar.el&&t.scrollbar.el.classList.remove(...ww(t.params.scrollbar.scrollbarDisabledClass)),A(),g(),p()},L=()=>{t.el.classList.add(...ww(t.params.scrollbar.scrollbarDisabledClass)),t.scrollbar.el&&t.scrollbar.el.classList.add(...ww(t.params.scrollbar.scrollbarDisabledClass)),x()};Object.assign(t.scrollbar,{enable:k,disable:L,updateSize:g,setTranslate:p,init:A,destroy:x})}function kT(e){let{swiper:t,extendParams:i,on:s}=e;i({parallax:{enabled:!1}});const r="[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]",n=(e,i)=>{const{rtl:s}=t,r=s?-1:1,n=e.getAttribute("data-swiper-parallax")||"0";let o=e.getAttribute("data-swiper-parallax-x"),a=e.getAttribute("data-swiper-parallax-y");const l=e.getAttribute("data-swiper-parallax-scale"),c=e.getAttribute("data-swiper-parallax-opacity"),d=e.getAttribute("data-swiper-parallax-rotate");if(o||a?(o=o||"0",a=a||"0"):t.isHorizontal()?(o=n,a="0"):(a=n,o="0"),o=o.indexOf("%")>=0?parseInt(o,10)*i*r+"%":o*i*r+"px",a=a.indexOf("%")>=0?parseInt(a,10)*i+"%":a*i+"px","undefined"!==typeof c&&null!==c){const t=c-(c-1)*(1-Math.abs(i));e.style.opacity=t}let h=`translate3d(${o}, ${a}, 0px)`;if("undefined"!==typeof l&&null!==l){const e=l-(l-1)*(1-Math.abs(i));h+=` scale(${e})`}if(d&&"undefined"!==typeof d&&null!==d){const e=d*i*-1;h+=` rotate(${e}deg)`}e.style.transform=h},o=()=>{const{el:e,slides:i,progress:s,snapGrid:o,isElement:a}=t,l=Dw(e,r);t.isElement&&l.push(...Dw(t.hostEl,r)),l.forEach((e=>{n(e,s)})),i.forEach(((e,i)=>{let a=e.progress;t.params.slidesPerGroup>1&&"auto"!==t.params.slidesPerView&&(a+=Math.ceil(i/2)-s*(o.length-1)),a=Math.min(Math.max(a,-1),1),e.querySelectorAll(`${r}, [data-swiper-parallax-rotate]`).forEach((e=>{n(e,a)}))}))},a=function(e){void 0===e&&(e=t.params.speed);const{el:i,hostEl:s}=t,n=[...i.querySelectorAll(r)];t.isElement&&n.push(...s.querySelectorAll(r)),n.forEach((t=>{let i=parseInt(t.getAttribute("data-swiper-parallax-duration"),10)||e;0===e&&(i=0),t.style.transitionDuration=`${i}ms`}))};s("beforeInit",(()=>{t.params.parallax.enabled&&(t.params.watchSlidesProgress=!0,t.originalParams.watchSlidesProgress=!0)})),s("init",(()=>{t.params.parallax.enabled&&o()})),s("setTranslate",(()=>{t.params.parallax.enabled&&o()})),s("setTransition",((e,i)=>{t.params.parallax.enabled&&a(i)}))}function LT(e){let{swiper:t,extendParams:i,on:s,emit:r}=e;const n=bw();i({zoom:{enabled:!1,limitToOriginalSize:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),t.zoom={enabled:!1};let a,l,c=1,d=!1;const h=[],u={originX:0,originY:0,slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},p={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},f={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0};let g=1;function m(){if(h.length<2)return 1;const e=h[0].pageX,t=h[0].pageY,i=h[1].pageX,s=h[1].pageY,r=Math.sqrt(o(i-e,2)+o(s-t,2));return r}function v(){const e=t.params.zoom,i=u.imageWrapEl.getAttribute("data-swiper-zoom")||e.maxRatio;if(e.limitToOriginalSize&&u.imageEl&&u.imageEl.naturalWidth){const e=u.imageEl.naturalWidth/u.imageEl.offsetWidth;return Math.min(e,i)}return i}function y(){if(h.length<2)return{x:null,y:null};const e=u.imageEl.getBoundingClientRect();return[(h[0].pageX+(h[1].pageX-h[0].pageX)/2-e.x-n.scrollX)/c,(h[0].pageY+(h[1].pageY-h[0].pageY)/2-e.y-n.scrollY)/c]}function b(){return t.isElement?"swiper-slide":`.${t.params.slideClass}`}function w(e){const i=b();return!!e.target.matches(i)||t.slides.filter((t=>t.contains(e.target))).length>0}function E(e){const i=`.${t.params.zoom.containerClass}`;return!!e.target.matches(i)||[...t.hostEl.querySelectorAll(i)].filter((t=>t.contains(e.target))).length>0}function T(e){if("mouse"===e.pointerType&&h.splice(0,h.length),!w(e))return;const i=t.params.zoom;if(a=!1,l=!1,h.push(e),!(h.length<2)){if(a=!0,u.scaleStart=m(),!u.slideEl){u.slideEl=e.target.closest(`.${t.params.slideClass}, swiper-slide`),u.slideEl||(u.slideEl=t.slides[t.activeIndex]);let s=u.slideEl.querySelector(`.${i.containerClass}`);if(s&&(s=s.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),u.imageEl=s,u.imageWrapEl=s?Uw(u.imageEl,`.${i.containerClass}`)[0]:void 0,!u.imageWrapEl)return void(u.imageEl=void 0);u.maxRatio=v()}if(u.imageEl){const[e,t]=y();u.originX=e,u.originY=t,u.imageEl.style.transitionDuration="0ms"}d=!0}}function S(e){if(!w(e))return;const i=t.params.zoom,s=t.zoom,r=h.findIndex((t=>t.pointerId===e.pointerId));r>=0&&(h[r]=e),h.length<2||(l=!0,u.scaleMove=m(),u.imageEl&&(s.scale=u.scaleMove/u.scaleStart*c,s.scale>u.maxRatio&&(s.scale=u.maxRatio-1+o(s.scale-u.maxRatio+1,.5)),s.scale<i.minRatio&&(s.scale=i.minRatio+1-o(i.minRatio-s.scale+1,.5)),u.imageEl.style.transform=`translate3d(0,0,0) scale(${s.scale})`))}function A(e){if(!w(e))return;if("mouse"===e.pointerType&&"pointerout"===e.type)return;const i=t.params.zoom,s=t.zoom,r=h.findIndex((t=>t.pointerId===e.pointerId));r>=0&&h.splice(r,1),a&&l&&(a=!1,l=!1,u.imageEl&&(s.scale=Math.max(Math.min(s.scale,u.maxRatio),i.minRatio),u.imageEl.style.transitionDuration=`${t.params.speed}ms`,u.imageEl.style.transform=`translate3d(0,0,0) scale(${s.scale})`,c=s.scale,d=!1,s.scale>1&&u.slideEl?u.slideEl.classList.add(`${i.zoomedSlideClass}`):s.scale<=1&&u.slideEl&&u.slideEl.classList.remove(`${i.zoomedSlideClass}`),1===s.scale&&(u.originX=0,u.originY=0,u.slideEl=void 0)))}function x(e){const i=t.device;if(!u.imageEl)return;if(p.isTouched)return;i.android&&e.cancelable&&e.preventDefault(),p.isTouched=!0;const s=h.length>0?h[0]:e;p.touchesStart.x=s.pageX,p.touchesStart.y=s.pageY}function k(e){if(!w(e)||!E(e))return;const i=t.zoom;if(!u.imageEl)return;if(!p.isTouched||!u.slideEl)return;p.isMoved||(p.width=u.imageEl.offsetWidth||u.imageEl.clientWidth,p.height=u.imageEl.offsetHeight||u.imageEl.clientHeight,p.startX=xw(u.imageWrapEl,"x")||0,p.startY=xw(u.imageWrapEl,"y")||0,u.slideWidth=u.slideEl.offsetWidth,u.slideHeight=u.slideEl.offsetHeight,u.imageWrapEl.style.transitionDuration="0ms");const s=p.width*i.scale,r=p.height*i.scale;if(s<u.slideWidth&&r<u.slideHeight)return;p.minX=Math.min(u.slideWidth/2-s/2,0),p.maxX=-p.minX,p.minY=Math.min(u.slideHeight/2-r/2,0),p.maxY=-p.minY,p.touchesCurrent.x=h.length>0?h[0].pageX:e.pageX,p.touchesCurrent.y=h.length>0?h[0].pageY:e.pageY;const n=Math.max(Math.abs(p.touchesCurrent.x-p.touchesStart.x),Math.abs(p.touchesCurrent.y-p.touchesStart.y));if(n>5&&(t.allowClick=!1),!p.isMoved&&!d){if(t.isHorizontal()&&(Math.floor(p.minX)===Math.floor(p.startX)&&p.touchesCurrent.x<p.touchesStart.x||Math.floor(p.maxX)===Math.floor(p.startX)&&p.touchesCurrent.x>p.touchesStart.x))return void(p.isTouched=!1);if(!t.isHorizontal()&&(Math.floor(p.minY)===Math.floor(p.startY)&&p.touchesCurrent.y<p.touchesStart.y||Math.floor(p.maxY)===Math.floor(p.startY)&&p.touchesCurrent.y>p.touchesStart.y))return void(p.isTouched=!1)}e.cancelable&&e.preventDefault(),e.stopPropagation(),p.isMoved=!0;const a=(i.scale-c)/(u.maxRatio-t.params.zoom.minRatio),{originX:l,originY:g}=u;p.currentX=p.touchesCurrent.x-p.touchesStart.x+p.startX+a*(p.width-2*l),p.currentY=p.touchesCurrent.y-p.touchesStart.y+p.startY+a*(p.height-2*g),p.currentX<p.minX&&(p.currentX=p.minX+1-o(p.minX-p.currentX+1,.8)),p.currentX>p.maxX&&(p.currentX=p.maxX-1+o(p.currentX-p.maxX+1,.8)),p.currentY<p.minY&&(p.currentY=p.minY+1-o(p.minY-p.currentY+1,.8)),p.currentY>p.maxY&&(p.currentY=p.maxY-1+o(p.currentY-p.maxY+1,.8)),f.prevPositionX||(f.prevPositionX=p.touchesCurrent.x),f.prevPositionY||(f.prevPositionY=p.touchesCurrent.y),f.prevTime||(f.prevTime=Date.now()),f.x=(p.touchesCurrent.x-f.prevPositionX)/(Date.now()-f.prevTime)/2,f.y=(p.touchesCurrent.y-f.prevPositionY)/(Date.now()-f.prevTime)/2,Math.abs(p.touchesCurrent.x-f.prevPositionX)<2&&(f.x=0),Math.abs(p.touchesCurrent.y-f.prevPositionY)<2&&(f.y=0),f.prevPositionX=p.touchesCurrent.x,f.prevPositionY=p.touchesCurrent.y,f.prevTime=Date.now(),u.imageWrapEl.style.transform=`translate3d(${p.currentX}px, ${p.currentY}px,0)`}function L(){const e=t.zoom;if(!u.imageEl)return;if(!p.isTouched||!p.isMoved)return p.isTouched=!1,void(p.isMoved=!1);p.isTouched=!1,p.isMoved=!1;let i=300,s=300;const r=f.x*i,n=p.currentX+r,o=f.y*s,a=p.currentY+o;0!==f.x&&(i=Math.abs((n-p.currentX)/f.x)),0!==f.y&&(s=Math.abs((a-p.currentY)/f.y));const l=Math.max(i,s);p.currentX=n,p.currentY=a;const c=p.width*e.scale,d=p.height*e.scale;p.minX=Math.min(u.slideWidth/2-c/2,0),p.maxX=-p.minX,p.minY=Math.min(u.slideHeight/2-d/2,0),p.maxY=-p.minY,p.currentX=Math.max(Math.min(p.currentX,p.maxX),p.minX),p.currentY=Math.max(Math.min(p.currentY,p.maxY),p.minY),u.imageWrapEl.style.transitionDuration=`${l}ms`,u.imageWrapEl.style.transform=`translate3d(${p.currentX}px, ${p.currentY}px,0)`}function C(){const e=t.zoom;u.slideEl&&t.activeIndex!==t.slides.indexOf(u.slideEl)&&(u.imageEl&&(u.imageEl.style.transform="translate3d(0,0,0) scale(1)"),u.imageWrapEl&&(u.imageWrapEl.style.transform="translate3d(0,0,0)"),u.slideEl.classList.remove(`${t.params.zoom.zoomedSlideClass}`),e.scale=1,c=1,u.slideEl=void 0,u.imageEl=void 0,u.imageWrapEl=void 0,u.originX=0,u.originY=0)}function _(e){const i=t.zoom,s=t.params.zoom;if(!u.slideEl){e&&e.target&&(u.slideEl=e.target.closest(`.${t.params.slideClass}, swiper-slide`)),u.slideEl||(t.params.virtual&&t.params.virtual.enabled&&t.virtual?u.slideEl=Dw(t.slidesEl,`.${t.params.slideActiveClass}`)[0]:u.slideEl=t.slides[t.activeIndex]);let i=u.slideEl.querySelector(`.${s.containerClass}`);i&&(i=i.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),u.imageEl=i,u.imageWrapEl=i?Uw(u.imageEl,`.${s.containerClass}`)[0]:void 0}if(!u.imageEl||!u.imageWrapEl)return;let r,o,a,l,d,h,f,g,m,y,b,w,E,T,S,A,x,k;t.params.cssMode&&(t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.touchAction="none"),u.slideEl.classList.add(`${s.zoomedSlideClass}`),"undefined"===typeof p.touchesStart.x&&e?(r=e.pageX,o=e.pageY):(r=p.touchesStart.x,o=p.touchesStart.y);const L="number"===typeof e?e:null;1===c&&L&&(r=void 0,o=void 0);const C=v();i.scale=L||C,c=L||C,!e||1===c&&L?(f=0,g=0):(x=u.slideEl.offsetWidth,k=u.slideEl.offsetHeight,a=Ow(u.slideEl).left+n.scrollX,l=Ow(u.slideEl).top+n.scrollY,d=a+x/2-r,h=l+k/2-o,m=u.imageEl.offsetWidth||u.imageEl.clientWidth,y=u.imageEl.offsetHeight||u.imageEl.clientHeight,b=m*i.scale,w=y*i.scale,E=Math.min(x/2-b/2,0),T=Math.min(k/2-w/2,0),S=-E,A=-T,f=d*i.scale,g=h*i.scale,f<E&&(f=E),f>S&&(f=S),g<T&&(g=T),g>A&&(g=A)),L&&1===i.scale&&(u.originX=0,u.originY=0),u.imageWrapEl.style.transitionDuration="300ms",u.imageWrapEl.style.transform=`translate3d(${f}px, ${g}px,0)`,u.imageEl.style.transitionDuration="300ms",u.imageEl.style.transform=`translate3d(0,0,0) scale(${i.scale})`}function R(){const e=t.zoom,i=t.params.zoom;if(!u.slideEl){t.params.virtual&&t.params.virtual.enabled&&t.virtual?u.slideEl=Dw(t.slidesEl,`.${t.params.slideActiveClass}`)[0]:u.slideEl=t.slides[t.activeIndex];let e=u.slideEl.querySelector(`.${i.containerClass}`);e&&(e=e.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),u.imageEl=e,u.imageWrapEl=e?Uw(u.imageEl,`.${i.containerClass}`)[0]:void 0}u.imageEl&&u.imageWrapEl&&(t.params.cssMode&&(t.wrapperEl.style.overflow="",t.wrapperEl.style.touchAction=""),e.scale=1,c=1,u.imageWrapEl.style.transitionDuration="300ms",u.imageWrapEl.style.transform="translate3d(0,0,0)",u.imageEl.style.transitionDuration="300ms",u.imageEl.style.transform="translate3d(0,0,0) scale(1)",u.slideEl.classList.remove(`${i.zoomedSlideClass}`),u.slideEl=void 0,u.originX=0,u.originY=0)}function I(e){const i=t.zoom;i.scale&&1!==i.scale?R():_(e)}function D(){const e=!!t.params.passiveListeners&&{passive:!0,capture:!1},i=!t.params.passiveListeners||{passive:!1,capture:!0};return{passiveListener:e,activeListenerWithCapture:i}}function P(){const e=t.zoom;if(e.enabled)return;e.enabled=!0;const{passiveListener:i,activeListenerWithCapture:s}=D();t.wrapperEl.addEventListener("pointerdown",T,i),t.wrapperEl.addEventListener("pointermove",S,s),["pointerup","pointercancel","pointerout"].forEach((e=>{t.wrapperEl.addEventListener(e,A,i)})),t.wrapperEl.addEventListener("pointermove",k,s)}function M(){const e=t.zoom;if(!e.enabled)return;e.enabled=!1;const{passiveListener:i,activeListenerWithCapture:s}=D();t.wrapperEl.removeEventListener("pointerdown",T,i),t.wrapperEl.removeEventListener("pointermove",S,s),["pointerup","pointercancel","pointerout"].forEach((e=>{t.wrapperEl.removeEventListener(e,A,i)})),t.wrapperEl.removeEventListener("pointermove",k,s)}Object.defineProperty(t.zoom,"scale",{get(){return g},set(e){if(g!==e){const t=u.imageEl,i=u.slideEl;r("zoomChange",e,t,i)}g=e}}),s("init",(()=>{t.params.zoom.enabled&&P()})),s("destroy",(()=>{M()})),s("touchStart",((e,i)=>{t.zoom.enabled&&x(i)})),s("touchEnd",((e,i)=>{t.zoom.enabled&&L()})),s("doubleTap",((e,i)=>{!t.animating&&t.params.zoom.enabled&&t.zoom.enabled&&t.params.zoom.toggle&&I(i)})),s("transitionEnd",(()=>{t.zoom.enabled&&t.params.zoom.enabled&&C()})),s("slideChange",(()=>{t.zoom.enabled&&t.params.zoom.enabled&&t.params.cssMode&&C()})),Object.assign(t.zoom,{enable:P,disable:M,in:_,out:R,toggle:I})}function CT(e){let{swiper:t,extendParams:i,on:s}=e;function r(e,t){const i=function(){let e,t,i;return(s,r)=>{t=-1,e=s.length;while(e-t>1)i=e+t>>1,s[i]<=r?t=i:e=i;return e}}();let s,r;return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(r=i(this.x,e),s=r-1,(e-this.x[s])*(this.y[r]-this.y[s])/(this.x[r]-this.x[s])+this.y[s]):0},this}function n(e){t.controller.spline=t.params.loop?new r(t.slidesGrid,e.slidesGrid):new r(t.snapGrid,e.snapGrid)}function o(e,i){const s=t.controller.control;let r,o;const a=t.constructor;function l(e){if(e.destroyed)return;const i=t.rtlTranslate?-t.translate:t.translate;"slide"===t.params.controller.by&&(n(e),o=-t.controller.spline.interpolate(-i)),o&&"container"!==t.params.controller.by||(r=(e.maxTranslate()-e.minTranslate())/(t.maxTranslate()-t.minTranslate()),!Number.isNaN(r)&&Number.isFinite(r)||(r=1),o=(i-t.minTranslate())*r+e.minTranslate()),t.params.controller.inverse&&(o=e.maxTranslate()-o),e.updateProgress(o),e.setTranslate(o,t),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(s))for(let t=0;t<s.length;t+=1)s[t]!==i&&s[t]instanceof a&&l(s[t]);else s instanceof a&&i!==s&&l(s)}function a(e,i){const s=t.constructor,r=t.controller.control;let n;function o(i){i.destroyed||(i.setTransition(e,t),0!==e&&(i.transitionStart(),i.params.autoHeight&&Tw((()=>{i.updateAutoHeight()})),Gw(i.wrapperEl,(()=>{r&&i.transitionEnd()}))))}if(Array.isArray(r))for(n=0;n<r.length;n+=1)r[n]!==i&&r[n]instanceof s&&o(r[n]);else r instanceof s&&i!==r&&o(r)}function l(){t.controller.control&&t.controller.spline&&(t.controller.spline=void 0,delete t.controller.spline)}i({controller:{control:void 0,inverse:!1,by:"slide"}}),t.controller={control:void 0},s("beforeInit",(()=>{if("undefined"!==typeof window&&("string"===typeof t.params.controller.control||t.params.controller.control instanceof HTMLElement)){const e=document.querySelector(t.params.controller.control);if(e&&e.swiper)t.controller.control=e.swiper;else if(e){const i=s=>{t.controller.control=s.detail[0],t.update(),e.removeEventListener("init",i)};e.addEventListener("init",i)}}else t.controller.control=t.params.controller.control})),s("update",(()=>{l()})),s("resize",(()=>{l()})),s("observerUpdate",(()=>{l()})),s("setTranslate",((e,i,s)=>{t.controller.control&&!t.controller.control.destroyed&&t.controller.setTranslate(i,s)})),s("setTransition",((e,i,s)=>{t.controller.control&&!t.controller.control.destroyed&&t.controller.setTransition(i,s)})),Object.assign(t.controller,{setTranslate:o,setTransition:a})}function _T(e){let{swiper:t,extendParams:i,on:s}=e;i({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),t.a11y={clicked:!1};let r,n,o=null,a=(new Date).getTime();function l(e){const t=o;0!==t.length&&(t.innerHTML="",t.innerHTML=e)}function c(e){void 0===e&&(e=16);const t=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(e).replace(/x/g,t)}function d(e){e=jw(e),e.forEach((e=>{e.setAttribute("tabIndex","0")}))}function h(e){e=jw(e),e.forEach((e=>{e.setAttribute("tabIndex","-1")}))}function u(e,t){e=jw(e),e.forEach((e=>{e.setAttribute("role",t)}))}function p(e,t){e=jw(e),e.forEach((e=>{e.setAttribute("aria-roledescription",t)}))}function f(e,t){e=jw(e),e.forEach((e=>{e.setAttribute("aria-controls",t)}))}function g(e,t){e=jw(e),e.forEach((e=>{e.setAttribute("aria-label",t)}))}function m(e,t){e=jw(e),e.forEach((e=>{e.setAttribute("id",t)}))}function v(e,t){e=jw(e),e.forEach((e=>{e.setAttribute("aria-live",t)}))}function y(e){e=jw(e),e.forEach((e=>{e.setAttribute("aria-disabled",!0)}))}function b(e){e=jw(e),e.forEach((e=>{e.setAttribute("aria-disabled",!1)}))}function w(e){if(13!==e.keyCode&&32!==e.keyCode)return;const i=t.params.a11y,s=e.target;if(!t.pagination||!t.pagination.el||s!==t.pagination.el&&!t.pagination.el.contains(e.target)||e.target.matches(ST(t.params.pagination.bulletClass))){if(t.navigation&&t.navigation.prevEl&&t.navigation.nextEl){const e=jw(t.navigation.prevEl),r=jw(t.navigation.nextEl);r.includes(s)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?l(i.lastSlideMessage):l(i.nextSlideMessage)),e.includes(s)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?l(i.firstSlideMessage):l(i.prevSlideMessage))}t.pagination&&s.matches(ST(t.params.pagination.bulletClass))&&s.click()}}function E(){if(t.params.loop||t.params.rewind||!t.navigation)return;const{nextEl:e,prevEl:i}=t.navigation;i&&(t.isBeginning?(y(i),h(i)):(b(i),d(i))),e&&(t.isEnd?(y(e),h(e)):(b(e),d(e)))}function T(){return t.pagination&&t.pagination.bullets&&t.pagination.bullets.length}function S(){return T()&&t.params.pagination.clickable}function A(){const e=t.params.a11y;T()&&t.pagination.bullets.forEach((i=>{t.params.pagination.clickable&&(d(i),t.params.pagination.renderBullet||(u(i,"button"),g(i,e.paginationBulletMessage.replace(/\{\{index\}\}/,$w(i)+1)))),i.matches(ST(t.params.pagination.bulletActiveClass))?i.setAttribute("aria-current","true"):i.removeAttribute("aria-current")}))}const x=(e,t,i)=>{d(e),"BUTTON"!==e.tagName&&(u(e,"button"),e.addEventListener("keydown",w)),g(e,i),f(e,t)},k=e=>{n&&n!==e.target&&!n.contains(e.target)&&(r=!0),t.a11y.clicked=!0},L=()=>{r=!1,requestAnimationFrame((()=>{requestAnimationFrame((()=>{t.destroyed||(t.a11y.clicked=!1)}))}))},C=e=>{a=(new Date).getTime()},_=e=>{if(t.a11y.clicked)return;if((new Date).getTime()-a<100)return;const i=e.target.closest(`.${t.params.slideClass}, swiper-slide`);if(!i||!t.slides.includes(i))return;n=i;const s=t.slides.indexOf(i)===t.activeIndex,o=t.params.watchSlidesProgress&&t.visibleSlides&&t.visibleSlides.includes(i);s||o||e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents||(t.isHorizontal()?t.el.scrollLeft=0:t.el.scrollTop=0,requestAnimationFrame((()=>{r||(t.slideTo(t.slides.indexOf(i),0),r=!1)})))},R=()=>{const e=t.params.a11y;e.itemRoleDescriptionMessage&&p(t.slides,e.itemRoleDescriptionMessage),e.slideRole&&u(t.slides,e.slideRole);const i=t.slides.length;e.slideLabelMessage&&t.slides.forEach(((s,r)=>{const n=t.params.loop?parseInt(s.getAttribute("data-swiper-slide-index"),10):r,o=e.slideLabelMessage.replace(/\{\{index\}\}/,n+1).replace(/\{\{slidesLength\}\}/,i);g(s,o)}))},I=()=>{const e=t.params.a11y;t.el.append(o);const i=t.el;e.containerRoleDescriptionMessage&&p(i,e.containerRoleDescriptionMessage),e.containerMessage&&g(i,e.containerMessage);const s=t.wrapperEl,r=e.id||s.getAttribute("id")||`swiper-wrapper-${c(16)}`,n=t.params.autoplay&&t.params.autoplay.enabled?"off":"polite";m(s,r),v(s,n),R();let{nextEl:a,prevEl:l}=t.navigation?t.navigation:{};if(a=jw(a),l=jw(l),a&&a.forEach((t=>x(t,r,e.nextSlideMessage))),l&&l.forEach((t=>x(t,r,e.prevSlideMessage))),S()){const e=jw(t.pagination.el);e.forEach((e=>{e.addEventListener("keydown",w)}))}const d=vw();d.addEventListener("visibilitychange",C),t.el.addEventListener("focus",_,!0),t.el.addEventListener("focus",_,!0),t.el.addEventListener("pointerdown",k,!0),t.el.addEventListener("pointerup",L,!0)};function D(){o&&o.remove();let{nextEl:e,prevEl:i}=t.navigation?t.navigation:{};if(e=jw(e),i=jw(i),e&&e.forEach((e=>e.removeEventListener("keydown",w))),i&&i.forEach((e=>e.removeEventListener("keydown",w))),S()){const e=jw(t.pagination.el);e.forEach((e=>{e.removeEventListener("keydown",w)}))}const s=vw();s.removeEventListener("visibilitychange",C),t.el.removeEventListener("focus",_,!0),t.el.removeEventListener("pointerdown",k,!0),t.el.removeEventListener("pointerup",L,!0)}s("beforeInit",(()=>{o=Mw("span",t.params.a11y.notificationClass),o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true")})),s("afterInit",(()=>{t.params.a11y.enabled&&I()})),s("slidesLengthChange snapGridLengthChange slidesGridLengthChange",(()=>{t.params.a11y.enabled&&R()})),s("fromEdge toEdge afterInit lock unlock",(()=>{t.params.a11y.enabled&&E()})),s("paginationUpdate",(()=>{t.params.a11y.enabled&&A()})),s("destroy",(()=>{t.params.a11y.enabled&&D()}))}function RT(e){let{swiper:t,extendParams:i,on:s}=e;i({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let r=!1,n={};const o=e=>e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),a=e=>{const t=bw();let i;i=e?new URL(e):t.location;const s=i.pathname.slice(1).split("/").filter((e=>""!==e)),r=s.length,n=s[r-2],o=s[r-1];return{key:n,value:o}},l=(e,i)=>{const s=bw();if(!r||!t.params.history.enabled)return;let n;n=t.params.url?new URL(t.params.url):s.location;const a=t.virtual&&t.params.virtual.enabled?t.slidesEl.querySelector(`[data-swiper-slide-index="${i}"]`):t.slides[i];let l=o(a.getAttribute("data-history"));if(t.params.history.root.length>0){let i=t.params.history.root;"/"===i[i.length-1]&&(i=i.slice(0,i.length-1)),l=`${i}/${e?`${e}/`:""}${l}`}else n.pathname.includes(e)||(l=`${e?`${e}/`:""}${l}`);t.params.history.keepQuery&&(l+=n.search);const c=s.history.state;c&&c.value===l||(t.params.history.replaceState?s.history.replaceState({value:l},null,l):s.history.pushState({value:l},null,l))},c=(e,i,s)=>{if(i)for(let r=0,n=t.slides.length;r<n;r+=1){const n=t.slides[r],a=o(n.getAttribute("data-history"));if(a===i){const i=t.getSlideIndex(n);t.slideTo(i,e,s)}}else t.slideTo(0,e,s)},d=()=>{n=a(t.params.url),c(t.params.speed,n.value,!1)},h=()=>{const e=bw();if(t.params.history){if(!e.history||!e.history.pushState)return t.params.history.enabled=!1,void(t.params.hashNavigation.enabled=!0);r=!0,n=a(t.params.url),n.key||n.value?(c(0,n.value,t.params.runCallbacksOnInit),t.params.history.replaceState||e.addEventListener("popstate",d)):t.params.history.replaceState||e.addEventListener("popstate",d)}},u=()=>{const e=bw();t.params.history.replaceState||e.removeEventListener("popstate",d)};s("init",(()=>{t.params.history.enabled&&h()})),s("destroy",(()=>{t.params.history.enabled&&u()})),s("transitionEnd _freeModeNoMomentumRelease",(()=>{r&&l(t.params.history.key,t.activeIndex)})),s("slideChange",(()=>{r&&t.params.cssMode&&l(t.params.history.key,t.activeIndex)}))}function IT(e){let{swiper:t,extendParams:i,emit:s,on:r}=e,n=!1;const o=vw(),a=bw();i({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(e,i){if(t.virtual&&t.params.virtual.enabled){const e=t.slides.filter((e=>e.getAttribute("data-hash")===i))[0];if(!e)return 0;const s=parseInt(e.getAttribute("data-swiper-slide-index"),10);return s}return t.getSlideIndex(Dw(t.slidesEl,`.${t.params.slideClass}[data-hash="${i}"], swiper-slide[data-hash="${i}"]`)[0])}}});const l=()=>{s("hashChange");const e=o.location.hash.replace("#",""),i=t.virtual&&t.params.virtual.enabled?t.slidesEl.querySelector(`[data-swiper-slide-index="${t.activeIndex}"]`):t.slides[t.activeIndex],r=i?i.getAttribute("data-hash"):"";if(e!==r){const i=t.params.hashNavigation.getSlideIndex(t,e);if("undefined"===typeof i||Number.isNaN(i))return;t.slideTo(i)}},c=()=>{if(!n||!t.params.hashNavigation.enabled)return;const e=t.virtual&&t.params.virtual.enabled?t.slidesEl.querySelector(`[data-swiper-slide-index="${t.activeIndex}"]`):t.slides[t.activeIndex],i=e?e.getAttribute("data-hash")||e.getAttribute("data-history"):"";t.params.hashNavigation.replaceState&&a.history&&a.history.replaceState?(a.history.replaceState(null,null,`#${i}`||""),s("hashSet")):(o.location.hash=i||"",s("hashSet"))},d=()=>{if(!t.params.hashNavigation.enabled||t.params.history&&t.params.history.enabled)return;n=!0;const e=o.location.hash.replace("#","");if(e){const i=0,s=t.params.hashNavigation.getSlideIndex(t,e);t.slideTo(s||0,i,t.params.runCallbacksOnInit,!0)}t.params.hashNavigation.watchState&&a.addEventListener("hashchange",l)},h=()=>{t.params.hashNavigation.watchState&&a.removeEventListener("hashchange",l)};r("init",(()=>{t.params.hashNavigation.enabled&&d()})),r("destroy",(()=>{t.params.hashNavigation.enabled&&h()})),r("transitionEnd _freeModeNoMomentumRelease",(()=>{n&&c()})),r("slideChange",(()=>{n&&t.params.cssMode&&c()}))}function DT(e){let t,i,{swiper:s,extendParams:r,on:n,emit:o,params:a}=e;s.autoplay={running:!1,paused:!1,timeLeft:0},r({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let l,c,d,h,u,p,f,g,m=a&&a.autoplay?a.autoplay.delay:3e3,v=a&&a.autoplay?a.autoplay.delay:3e3,y=(new Date).getTime();function b(e){s&&!s.destroyed&&s.wrapperEl&&e.target===s.wrapperEl&&(s.wrapperEl.removeEventListener("transitionend",b),g||k())}const w=()=>{if(s.destroyed||!s.autoplay.running)return;s.autoplay.paused?c=!0:c&&(v=l,c=!1);const e=s.autoplay.paused?l:y+v-(new Date).getTime();s.autoplay.timeLeft=e,o("autoplayTimeLeft",e,e/m),i=requestAnimationFrame((()=>{w()}))},E=()=>{let e;if(e=s.virtual&&s.params.virtual.enabled?s.slides.filter((e=>e.classList.contains("swiper-slide-active")))[0]:s.slides[s.activeIndex],!e)return;const t=parseInt(e.getAttribute("data-swiper-autoplay"),10);return t},T=e=>{if(s.destroyed||!s.autoplay.running)return;cancelAnimationFrame(i),w();let r="undefined"===typeof e?s.params.autoplay.delay:e;m=s.params.autoplay.delay,v=s.params.autoplay.delay;const n=E();!Number.isNaN(n)&&n>0&&"undefined"===typeof e&&(r=n,m=n,v=n),l=r;const a=s.params.speed,c=()=>{s&&!s.destroyed&&(s.params.autoplay.reverseDirection?!s.isBeginning||s.params.loop||s.params.rewind?(s.slidePrev(a,!0,!0),o("autoplay")):s.params.autoplay.stopOnLastSlide||(s.slideTo(s.slides.length-1,a,!0,!0),o("autoplay")):!s.isEnd||s.params.loop||s.params.rewind?(s.slideNext(a,!0,!0),o("autoplay")):s.params.autoplay.stopOnLastSlide||(s.slideTo(0,a,!0,!0),o("autoplay")),s.params.cssMode&&(y=(new Date).getTime(),requestAnimationFrame((()=>{T()}))))};return r>0?(clearTimeout(t),t=setTimeout((()=>{c()}),r)):requestAnimationFrame((()=>{c()})),r},S=()=>{y=(new Date).getTime(),s.autoplay.running=!0,T(),o("autoplayStart")},A=()=>{s.autoplay.running=!1,clearTimeout(t),cancelAnimationFrame(i),o("autoplayStop")},x=(e,i)=>{if(s.destroyed||!s.autoplay.running)return;clearTimeout(t),e||(f=!0);const r=()=>{o("autoplayPause"),s.params.autoplay.waitForTransition?s.wrapperEl.addEventListener("transitionend",b):k()};if(s.autoplay.paused=!0,i)return p&&(l=s.params.autoplay.delay),p=!1,void r();const n=l||s.params.autoplay.delay;l=n-((new Date).getTime()-y),s.isEnd&&l<0&&!s.params.loop||(l<0&&(l=0),r())},k=()=>{s.isEnd&&l<0&&!s.params.loop||s.destroyed||!s.autoplay.running||(y=(new Date).getTime(),f?(f=!1,T(l)):T(),s.autoplay.paused=!1,o("autoplayResume"))},L=()=>{if(s.destroyed||!s.autoplay.running)return;const e=vw();"hidden"===e.visibilityState&&(f=!0,x(!0)),"visible"===e.visibilityState&&k()},C=e=>{"mouse"===e.pointerType&&(f=!0,g=!0,s.animating||s.autoplay.paused||x(!0))},_=e=>{"mouse"===e.pointerType&&(g=!1,s.autoplay.paused&&k())},R=()=>{s.params.autoplay.pauseOnMouseEnter&&(s.el.addEventListener("pointerenter",C),s.el.addEventListener("pointerleave",_))},I=()=>{s.el.removeEventListener("pointerenter",C),s.el.removeEventListener("pointerleave",_)},D=()=>{const e=vw();e.addEventListener("visibilitychange",L)},P=()=>{const e=vw();e.removeEventListener("visibilitychange",L)};n("init",(()=>{s.params.autoplay.enabled&&(R(),D(),S())})),n("destroy",(()=>{I(),P(),s.autoplay.running&&A()})),n("_freeModeStaticRelease",(()=>{(h||f)&&k()})),n("_freeModeNoMomentumRelease",(()=>{s.params.autoplay.disableOnInteraction?A():x(!0,!0)})),n("beforeTransitionStart",((e,t,i)=>{!s.destroyed&&s.autoplay.running&&(i||!s.params.autoplay.disableOnInteraction?x(!0,!0):A())})),n("sliderFirstMove",(()=>{!s.destroyed&&s.autoplay.running&&(s.params.autoplay.disableOnInteraction?A():(d=!0,h=!1,f=!1,u=setTimeout((()=>{f=!0,h=!0,x(!0)}),200)))})),n("touchEnd",(()=>{if(!s.destroyed&&s.autoplay.running&&d){if(clearTimeout(u),clearTimeout(t),s.params.autoplay.disableOnInteraction)return h=!1,void(d=!1);h&&s.params.cssMode&&k(),h=!1,d=!1}})),n("slideChange",(()=>{!s.destroyed&&s.autoplay.running&&(p=!0)})),Object.assign(s.autoplay,{start:S,stop:A,pause:x,resume:k})}function PT(e){let{swiper:t,extendParams:i,on:s}=e;i({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let r=!1,n=!1;function o(){const e=t.thumbs.swiper;if(!e||e.destroyed)return;const i=e.clickedIndex,s=e.clickedSlide;if(s&&s.classList.contains(t.params.thumbs.slideThumbActiveClass))return;if("undefined"===typeof i||null===i)return;let r;r=e.params.loop?parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10):i,t.params.loop?t.slideToLoop(r):t.slideTo(r)}function a(){const{thumbs:e}=t.params;if(r)return!1;r=!0;const i=t.constructor;if(e.swiper instanceof i)t.thumbs.swiper=e.swiper,Object.assign(t.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(t.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),t.thumbs.swiper.update();else if(kw(e.swiper)){const s=Object.assign({},e.swiper);Object.assign(s,{watchSlidesProgress:!0,slideToClickedSlide:!1}),t.thumbs.swiper=new i(s),n=!0}return t.thumbs.swiper.el.classList.add(t.params.thumbs.thumbsContainerClass),t.thumbs.swiper.on("tap",o),!0}function l(e){const i=t.thumbs.swiper;if(!i||i.destroyed)return;const s="auto"===i.params.slidesPerView?i.slidesPerViewDynamic():i.params.slidesPerView;let r=1;const n=t.params.thumbs.slideThumbActiveClass;if(t.params.slidesPerView>1&&!t.params.centeredSlides&&(r=t.params.slidesPerView),t.params.thumbs.multipleActiveThumbs||(r=1),r=Math.floor(r),i.slides.forEach((e=>e.classList.remove(n))),i.params.loop||i.params.virtual&&i.params.virtual.enabled)for(let l=0;l<r;l+=1)Dw(i.slidesEl,`[data-swiper-slide-index="${t.realIndex+l}"]`).forEach((e=>{e.classList.add(n)}));else for(let l=0;l<r;l+=1)i.slides[t.realIndex+l]&&i.slides[t.realIndex+l].classList.add(n);const o=t.params.thumbs.autoScrollOffset,a=o&&!i.params.loop;if(t.realIndex!==i.realIndex||a){const r=i.activeIndex;let n,l;if(i.params.loop){const e=i.slides.filter((e=>e.getAttribute("data-swiper-slide-index")===`${t.realIndex}`))[0];n=i.slides.indexOf(e),l=t.activeIndex>t.previousIndex?"next":"prev"}else n=t.realIndex,l=n>t.previousIndex?"next":"prev";a&&(n+="next"===l?o:-1*o),i.visibleSlidesIndexes&&i.visibleSlidesIndexes.indexOf(n)<0&&(i.params.centeredSlides?n=n>r?n-Math.floor(s/2)+1:n+Math.floor(s/2)-1:n>r&&i.params.slidesPerGroup,i.slideTo(n,e?0:void 0))}}t.thumbs={swiper:null},s("beforeInit",(()=>{const{thumbs:e}=t.params;if(e&&e.swiper)if("string"===typeof e.swiper||e.swiper instanceof HTMLElement){const i=vw(),s=()=>{const s="string"===typeof e.swiper?i.querySelector(e.swiper):e.swiper;if(s&&s.swiper)e.swiper=s.swiper,a(),l(!0);else if(s){const i=r=>{e.swiper=r.detail[0],s.removeEventListener("init",i),a(),l(!0),e.swiper.update(),t.update()};s.addEventListener("init",i)}return s},r=()=>{if(t.destroyed)return;const e=s();e||requestAnimationFrame(r)};requestAnimationFrame(r)}else a(),l(!0)})),s("slideChange update resize observerUpdate",(()=>{l()})),s("setTransition",((e,i)=>{const s=t.thumbs.swiper;s&&!s.destroyed&&s.setTransition(i)})),s("beforeDestroy",(()=>{const e=t.thumbs.swiper;e&&!e.destroyed&&n&&e.destroy()})),Object.assign(t.thumbs,{init:a,update:l})}function MT(e){let{swiper:t,extendParams:i,emit:s,once:r}=e;function n(){if(t.params.cssMode)return;const e=t.getTranslate();t.setTranslate(e),t.setTransition(0),t.touchEventsData.velocities.length=0,t.freeMode.onTouchEnd({currentPos:t.rtl?t.translate:-t.translate})}function o(){if(t.params.cssMode)return;const{touchEventsData:e,touches:i}=t;0===e.velocities.length&&e.velocities.push({position:i[t.isHorizontal()?"startX":"startY"],time:e.touchStartTime}),e.velocities.push({position:i[t.isHorizontal()?"currentX":"currentY"],time:Sw()})}function a(e){let{currentPos:i}=e;if(t.params.cssMode)return;const{params:n,wrapperEl:o,rtlTranslate:a,snapGrid:l,touchEventsData:c}=t,d=Sw(),h=d-c.touchStartTime;if(i<-t.minTranslate())t.slideTo(t.activeIndex);else if(i>-t.maxTranslate())t.slides.length<l.length?t.slideTo(l.length-1):t.slideTo(t.slides.length-1);else{if(n.freeMode.momentum){if(c.velocities.length>1){const e=c.velocities.pop(),i=c.velocities.pop(),s=e.position-i.position,r=e.time-i.time;t.velocity=s/r,t.velocity/=2,Math.abs(t.velocity)<n.freeMode.minimumVelocity&&(t.velocity=0),(r>150||Sw()-e.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=n.freeMode.momentumVelocityRatio,c.velocities.length=0;let e=1e3*n.freeMode.momentumRatio;const i=t.velocity*e;let d=t.translate+i;a&&(d=-d);let h,u=!1;const p=20*Math.abs(t.velocity)*n.freeMode.momentumBounceRatio;let f;if(d<t.maxTranslate())n.freeMode.momentumBounce?(d+t.maxTranslate()<-p&&(d=t.maxTranslate()-p),h=t.maxTranslate(),u=!0,c.allowMomentumBounce=!0):d=t.maxTranslate(),n.loop&&n.centeredSlides&&(f=!0);else if(d>t.minTranslate())n.freeMode.momentumBounce?(d-t.minTranslate()>p&&(d=t.minTranslate()+p),h=t.minTranslate(),u=!0,c.allowMomentumBounce=!0):d=t.minTranslate(),n.loop&&n.centeredSlides&&(f=!0);else if(n.freeMode.sticky){let e;for(let t=0;t<l.length;t+=1)if(l[t]>-d){e=t;break}d=Math.abs(l[e]-d)<Math.abs(l[e-1]-d)||"next"===t.swipeDirection?l[e]:l[e-1],d=-d}if(f&&r("transitionEnd",(()=>{t.loopFix()})),0!==t.velocity){if(e=a?Math.abs((-d-t.translate)/t.velocity):Math.abs((d-t.translate)/t.velocity),n.freeMode.sticky){const i=Math.abs((a?-d:d)-t.translate),s=t.slidesSizesGrid[t.activeIndex];e=i<s?n.speed:i<2*s?1.5*n.speed:2.5*n.speed}}else if(n.freeMode.sticky)return void t.slideToClosest();n.freeMode.momentumBounce&&u?(t.updateProgress(h),t.setTransition(e),t.setTranslate(d),t.transitionStart(!0,t.swipeDirection),t.animating=!0,Gw(o,(()=>{t&&!t.destroyed&&c.allowMomentumBounce&&(s("momentumBounce"),t.setTransition(n.speed),setTimeout((()=>{t.setTranslate(h),Gw(o,(()=>{t&&!t.destroyed&&t.transitionEnd()}))}),0))}))):t.velocity?(s("_freeModeNoMomentumRelease"),t.updateProgress(d),t.setTransition(e),t.setTranslate(d),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,Gw(o,(()=>{t&&!t.destroyed&&t.transitionEnd()})))):t.updateProgress(d),t.updateActiveIndex(),t.updateSlidesClasses()}else{if(n.freeMode.sticky)return void t.slideToClosest();n.freeMode&&s("_freeModeNoMomentumRelease")}(!n.freeMode.momentum||h>=n.longSwipesMs)&&(s("_freeModeStaticRelease"),t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}}i({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}}),Object.assign(t,{freeMode:{onTouchStart:n,onTouchMove:o,onTouchEnd:a}})}function OT(e){let t,i,s,r,{swiper:n,extendParams:o,on:a}=e;o({grid:{rows:1,fill:"column"}});const l=()=>{let e=n.params.spaceBetween;return"string"===typeof e&&e.indexOf("%")>=0?e=parseFloat(e.replace("%",""))/100*n.size:"string"===typeof e&&(e=parseFloat(e)),e},c=e=>{const{slidesPerView:r}=n.params,{rows:o,fill:a}=n.params.grid,l=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:e.length;s=Math.floor(l/o),t=Math.floor(l/o)===l/o?l:Math.ceil(l/o)*o,"auto"!==r&&"row"===a&&(t=Math.max(t,r*o)),i=t/o},d=()=>{n.slides&&n.slides.forEach((e=>{e.swiperSlideGridSet&&(e.style.height="",e.style[n.getDirectionLabel("margin-top")]="")}))},h=(e,r,o)=>{const{slidesPerGroup:a}=n.params,c=l(),{rows:d,fill:h}=n.params.grid,u=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:o.length;let p,f,g;if("row"===h&&a>1){const i=Math.floor(e/(a*d)),s=e-d*a*i,n=0===i?a:Math.min(Math.ceil((u-i*d*a)/d),a);g=Math.floor(s/n),f=s-g*n+i*a,p=f+g*t/d,r.style.order=p}else"column"===h?(f=Math.floor(e/d),g=e-f*d,(f>s||f===s&&g===d-1)&&(g+=1,g>=d&&(g=0,f+=1))):(g=Math.floor(e/i),f=e-g*i);r.row=g,r.column=f,r.style.height=`calc((100% - ${(d-1)*c}px) / ${d})`,r.style[n.getDirectionLabel("margin-top")]=0!==g?c&&`${c}px`:"",r.swiperSlideGridSet=!0},u=(e,i)=>{const{centeredSlides:s,roundLengths:r}=n.params,o=l(),{rows:a}=n.params.grid;if(n.virtualSize=(e+o)*t,n.virtualSize=Math.ceil(n.virtualSize/a)-o,n.params.cssMode||(n.wrapperEl.style[n.getDirectionLabel("width")]=`${n.virtualSize+o}px`),s){const e=[];for(let t=0;t<i.length;t+=1){let s=i[t];r&&(s=Math.floor(s)),i[t]<n.virtualSize+i[0]&&e.push(s)}i.splice(0,i.length),i.push(...e)}},p=()=>{r=n.params.grid&&n.params.grid.rows>1},f=()=>{const{params:e,el:t}=n,i=e.grid&&e.grid.rows>1;r&&!i?(t.classList.remove(`${e.containerModifierClass}grid`,`${e.containerModifierClass}grid-column`),s=1,n.emitContainerClasses()):!r&&i&&(t.classList.add(`${e.containerModifierClass}grid`),"column"===e.grid.fill&&t.classList.add(`${e.containerModifierClass}grid-column`),n.emitContainerClasses()),r=i};a("init",p),a("update",f),n.grid={initSlides:c,unsetSlides:d,updateSlide:h,updateWrapperSize:u}}function NT(e){const t=this,{params:i,slidesEl:s}=t;i.loop&&t.loopDestroy();const r=e=>{if("string"===typeof e){const t=document.createElement("div");t.innerHTML=e,s.append(t.children[0]),t.innerHTML=""}else s.append(e)};if("object"===typeof e&&"length"in e)for(let n=0;n<e.length;n+=1)e[n]&&r(e[n]);else r(e);t.recalcSlides(),i.loop&&t.loopCreate(),i.observer&&!t.isElement||t.update()}function FT(e){const t=this,{params:i,activeIndex:s,slidesEl:r}=t;i.loop&&t.loopDestroy();let n=s+1;const o=e=>{if("string"===typeof e){const t=document.createElement("div");t.innerHTML=e,r.prepend(t.children[0]),t.innerHTML=""}else r.prepend(e)};if("object"===typeof e&&"length"in e){for(let t=0;t<e.length;t+=1)e[t]&&o(e[t]);n=s+e.length}else o(e);t.recalcSlides(),i.loop&&t.loopCreate(),i.observer&&!t.isElement||t.update(),t.slideTo(n,0,!1)}function BT(e,t){const i=this,{params:s,activeIndex:r,slidesEl:n}=i;let o=r;s.loop&&(o-=i.loopedSlides,i.loopDestroy(),i.recalcSlides());const a=i.slides.length;if(e<=0)return void i.prependSlide(t);if(e>=a)return void i.appendSlide(t);let l=o>e?o+1:o;const c=[];for(let d=a-1;d>=e;d-=1){const e=i.slides[d];e.remove(),c.unshift(e)}if("object"===typeof t&&"length"in t){for(let e=0;e<t.length;e+=1)t[e]&&n.append(t[e]);l=o>e?o+t.length:o}else n.append(t);for(let d=0;d<c.length;d+=1)n.append(c[d]);i.recalcSlides(),s.loop&&i.loopCreate(),s.observer&&!i.isElement||i.update(),s.loop?i.slideTo(l+i.loopedSlides,0,!1):i.slideTo(l,0,!1)}function $T(e){const t=this,{params:i,activeIndex:s}=t;let r=s;i.loop&&(r-=t.loopedSlides,t.loopDestroy());let n,o=r;if("object"===typeof e&&"length"in e){for(let i=0;i<e.length;i+=1)n=e[i],t.slides[n]&&t.slides[n].remove(),n<o&&(o-=1);o=Math.max(o,0)}else n=e,t.slides[n]&&t.slides[n].remove(),n<o&&(o-=1),o=Math.max(o,0);t.recalcSlides(),i.loop&&t.loopCreate(),i.observer&&!t.isElement||t.update(),i.loop?t.slideTo(o+t.loopedSlides,0,!1):t.slideTo(o,0,!1)}function UT(){const e=this,t=[];for(let i=0;i<e.slides.length;i+=1)t.push(i);e.removeSlide(t)}function GT(e){let{swiper:t}=e;Object.assign(t,{appendSlide:NT.bind(t),prependSlide:FT.bind(t),addSlide:BT.bind(t),removeSlide:$T.bind(t),removeAllSlides:UT.bind(t)})}function HT(e){const{effect:t,swiper:i,on:s,setTranslate:r,setTransition:n,overwriteParams:o,perspective:a,recreateShadows:l,getEffectParams:c}=e;let d;s("beforeInit",(()=>{if(i.params.effect!==t)return;i.classNames.push(`${i.params.containerModifierClass}${t}`),a&&a()&&i.classNames.push(`${i.params.containerModifierClass}3d`);const e=o?o():{};Object.assign(i.params,e),Object.assign(i.originalParams,e)})),s("setTranslate",(()=>{i.params.effect===t&&r()})),s("setTransition",((e,s)=>{i.params.effect===t&&n(s)})),s("transitionEnd",(()=>{if(i.params.effect===t&&l){if(!c||!c().slideShadows)return;i.slides.forEach((e=>{e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((e=>e.remove()))})),l()}})),s("virtualUpdate",(()=>{i.params.effect===t&&(i.slides.length||(d=!0),requestAnimationFrame((()=>{d&&i.slides&&i.slides.length&&(r(),d=!1)})))}))}function jT(e,t){const i=Iw(t);return i!==t&&(i.style.backfaceVisibility="hidden",i.style["-webkit-backface-visibility"]="hidden"),i}function zT(e){let{swiper:t,duration:i,transformElements:s,allSlides:r}=e;const{activeIndex:n}=t,o=e=>{if(!e.parentElement){const i=t.slides.filter((t=>t.shadowRoot&&t.shadowRoot===e.parentNode))[0];return i}return e.parentElement};if(t.params.virtualTranslate&&0!==i){let e,i=!1;e=r?s:s.filter((e=>{const i=e.classList.contains("swiper-slide-transform")?o(e):e;return t.getSlideIndex(i)===n})),e.forEach((e=>{Gw(e,(()=>{if(i)return;if(!t||t.destroyed)return;i=!0,t.animating=!1;const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(e)}))}))}}function VT(e){let{swiper:t,extendParams:i,on:s}=e;i({fadeEffect:{crossFade:!1}});const r=()=>{const{slides:e}=t,i=t.params.fadeEffect;for(let s=0;s<e.length;s+=1){const e=t.slides[s],r=e.swiperSlideOffset;let n=-r;t.params.virtualTranslate||(n-=t.translate);let o=0;t.isHorizontal()||(o=n,n=0);const a=t.params.fadeEffect.crossFade?Math.max(1-Math.abs(e.progress),0):1+Math.min(Math.max(e.progress,-1),0),l=jT(i,e);l.style.opacity=a,l.style.transform=`translate3d(${n}px, ${o}px, 0px)`}},n=e=>{const i=t.slides.map((e=>Iw(e)));i.forEach((t=>{t.style.transitionDuration=`${e}ms`})),zT({swiper:t,duration:e,transformElements:i,allSlides:!0})};HT({effect:"fade",swiper:t,on:s,setTranslate:r,setTransition:n,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!t.params.cssMode})})}function YT(e){let{swiper:t,extendParams:i,on:s}=e;i({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const r=(e,t,i)=>{let s=i?e.querySelector(".swiper-slide-shadow-left"):e.querySelector(".swiper-slide-shadow-top"),r=i?e.querySelector(".swiper-slide-shadow-right"):e.querySelector(".swiper-slide-shadow-bottom");s||(s=Mw("div",("swiper-slide-shadow-cube swiper-slide-shadow-"+(i?"left":"top")).split(" ")),e.append(s)),r||(r=Mw("div",("swiper-slide-shadow-cube swiper-slide-shadow-"+(i?"right":"bottom")).split(" ")),e.append(r)),s&&(s.style.opacity=Math.max(-t,0)),r&&(r.style.opacity=Math.max(t,0))},n=()=>{const e=t.isHorizontal();t.slides.forEach((t=>{const i=Math.max(Math.min(t.progress,1),-1);r(t,i,e)}))},o=()=>{const{el:e,wrapperEl:i,slides:s,width:n,height:o,rtlTranslate:a,size:l,browser:c}=t,d=t.params.cubeEffect,h=t.isHorizontal(),u=t.virtual&&t.params.virtual.enabled;let p,f=0;d.shadow&&(h?(p=t.wrapperEl.querySelector(".swiper-cube-shadow"),p||(p=Mw("div","swiper-cube-shadow"),t.wrapperEl.append(p)),p.style.height=`${n}px`):(p=e.querySelector(".swiper-cube-shadow"),p||(p=Mw("div","swiper-cube-shadow"),e.append(p))));for(let m=0;m<s.length;m+=1){const e=s[m];let i=m;u&&(i=parseInt(e.getAttribute("data-swiper-slide-index"),10));let n=90*i,o=Math.floor(n/360);a&&(n=-n,o=Math.floor(-n/360));const c=Math.max(Math.min(e.progress,1),-1);let p=0,g=0,v=0;i%4===0?(p=4*-o*l,v=0):(i-1)%4===0?(p=0,v=4*-o*l):(i-2)%4===0?(p=l+4*o*l,v=l):(i-3)%4===0&&(p=-l,v=3*l+4*l*o),a&&(p=-p),h||(g=p,p=0);const y=`rotateX(${h?0:-n}deg) rotateY(${h?n:0}deg) translate3d(${p}px, ${g}px, ${v}px)`;c<=1&&c>-1&&(f=90*i+90*c,a&&(f=90*-i-90*c),t.browser&&t.browser.need3dFix&&Math.abs(f)/90%2===1&&(f+=.001)),e.style.transform=y,d.slideShadows&&r(e,c,h)}if(i.style.transformOrigin=`50% 50% -${l/2}px`,i.style["-webkit-transform-origin"]=`50% 50% -${l/2}px`,d.shadow)if(h)p.style.transform=`translate3d(0px, ${n/2+d.shadowOffset}px, ${-n/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${d.shadowScale})`;else{const e=Math.abs(f)-90*Math.floor(Math.abs(f)/90),t=1.5-(Math.sin(2*e*Math.PI/360)/2+Math.cos(2*e*Math.PI/360)/2),i=d.shadowScale,s=d.shadowScale/t,r=d.shadowOffset;p.style.transform=`scale3d(${i}, 1, ${s}) translate3d(0px, ${o/2+r}px, ${-o/2/s}px) rotateX(-89.99deg)`}const g=(c.isSafari||c.isWebView)&&c.needPerspectiveFix?-l/2:0;i.style.transform=`translate3d(0px,0,${g}px) rotateX(${t.isHorizontal()?0:f}deg) rotateY(${t.isHorizontal()?-f:0}deg)`,i.style.setProperty("--swiper-cube-translate-z",`${g}px`)},a=e=>{const{el:i,slides:s}=t;if(s.forEach((t=>{t.style.transitionDuration=`${e}ms`,t.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((t=>{t.style.transitionDuration=`${e}ms`}))})),t.params.cubeEffect.shadow&&!t.isHorizontal()){const t=i.querySelector(".swiper-cube-shadow");t&&(t.style.transitionDuration=`${e}ms`)}};HT({effect:"cube",swiper:t,on:s,setTranslate:o,setTransition:a,recreateShadows:n,getEffectParams:()=>t.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}function WT(e,t,i){const s=`swiper-slide-shadow${i?`-${i}`:""}${e?` swiper-slide-shadow-${e}`:""}`,r=Iw(t);let n=r.querySelector(`.${s.split(" ").join(".")}`);return n||(n=Mw("div",s.split(" ")),r.append(n)),n}function KT(e){let{swiper:t,extendParams:i,on:s}=e;i({flipEffect:{slideShadows:!0,limitRotation:!0}});const r=(e,i)=>{let s=t.isHorizontal()?e.querySelector(".swiper-slide-shadow-left"):e.querySelector(".swiper-slide-shadow-top"),r=t.isHorizontal()?e.querySelector(".swiper-slide-shadow-right"):e.querySelector(".swiper-slide-shadow-bottom");s||(s=WT("flip",e,t.isHorizontal()?"left":"top")),r||(r=WT("flip",e,t.isHorizontal()?"right":"bottom")),s&&(s.style.opacity=Math.max(-i,0)),r&&(r.style.opacity=Math.max(i,0))},n=()=>{t.params.flipEffect,t.slides.forEach((e=>{let i=e.progress;t.params.flipEffect.limitRotation&&(i=Math.max(Math.min(e.progress,1),-1)),r(e,i)}))},o=()=>{const{slides:e,rtlTranslate:i}=t,s=t.params.flipEffect;for(let n=0;n<e.length;n+=1){const o=e[n];let a=o.progress;t.params.flipEffect.limitRotation&&(a=Math.max(Math.min(o.progress,1),-1));const l=o.swiperSlideOffset,c=-180*a;let d=c,h=0,u=t.params.cssMode?-l-t.translate:-l,p=0;t.isHorizontal()?i&&(d=-d):(p=u,u=0,h=-d,d=0),t.browser&&t.browser.need3dFix&&(Math.abs(d)/90%2===1&&(d+=.001),Math.abs(h)/90%2===1&&(h+=.001)),o.style.zIndex=-Math.abs(Math.round(a))+e.length,s.slideShadows&&r(o,a);const f=`translate3d(${u}px, ${p}px, 0px) rotateX(${h}deg) rotateY(${d}deg)`,g=jT(s,o);g.style.transform=f}},a=e=>{const i=t.slides.map((e=>Iw(e)));i.forEach((t=>{t.style.transitionDuration=`${e}ms`,t.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((t=>{t.style.transitionDuration=`${e}ms`}))})),zT({swiper:t,duration:e,transformElements:i})};HT({effect:"flip",swiper:t,on:s,setTranslate:o,setTransition:a,recreateShadows:n,getEffectParams:()=>t.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!t.params.cssMode})})}function qT(e){let{swiper:t,extendParams:i,on:s}=e;i({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}});const r=()=>{const{width:e,height:i,slides:s,slidesSizesGrid:r}=t,n=t.params.coverflowEffect,o=t.isHorizontal(),a=t.translate,l=o?e/2-a:i/2-a,c=o?n.rotate:-n.rotate,d=n.depth;for(let h=0,u=s.length;h<u;h+=1){const e=s[h],i=r[h],a=e.swiperSlideOffset,u=(l-a-i/2)/i,p="function"===typeof n.modifier?n.modifier(u):u*n.modifier;let f=o?c*p:0,g=o?0:c*p,m=-d*Math.abs(p),v=n.stretch;"string"===typeof v&&-1!==v.indexOf("%")&&(v=parseFloat(n.stretch)/100*i);let y=o?0:v*p,b=o?v*p:0,w=1-(1-n.scale)*Math.abs(p);Math.abs(b)<.001&&(b=0),Math.abs(y)<.001&&(y=0),Math.abs(m)<.001&&(m=0),Math.abs(f)<.001&&(f=0),Math.abs(g)<.001&&(g=0),Math.abs(w)<.001&&(w=0),t.browser&&t.browser.need3dFix&&(Math.abs(f)/90%2===1&&(f+=.001),Math.abs(g)/90%2===1&&(g+=.001));const E=`translate3d(${b}px,${y}px,${m}px)  rotateX(${g}deg) rotateY(${f}deg) scale(${w})`,T=jT(n,e);if(T.style.transform=E,e.style.zIndex=1-Math.abs(Math.round(p)),n.slideShadows){let t=o?e.querySelector(".swiper-slide-shadow-left"):e.querySelector(".swiper-slide-shadow-top"),i=o?e.querySelector(".swiper-slide-shadow-right"):e.querySelector(".swiper-slide-shadow-bottom");t||(t=WT("coverflow",e,o?"left":"top")),i||(i=WT("coverflow",e,o?"right":"bottom")),t&&(t.style.opacity=p>0?p:0),i&&(i.style.opacity=-p>0?-p:0)}}},n=e=>{const i=t.slides.map((e=>Iw(e)));i.forEach((t=>{t.style.transitionDuration=`${e}ms`,t.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((t=>{t.style.transitionDuration=`${e}ms`}))}))};HT({effect:"coverflow",swiper:t,on:s,setTranslate:r,setTransition:n,perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function XT(e){let{swiper:t,extendParams:i,on:s}=e;i({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const r=e=>"string"===typeof e?e:`${e}px`,n=()=>{const{slides:e,wrapperEl:i,slidesSizesGrid:s}=t,n=t.params.creativeEffect,{progressMultiplier:o}=n,a=t.params.centeredSlides;if(a){const e=s[0]/2-t.params.slidesOffsetBefore||0;i.style.transform=`translateX(calc(50% - ${e}px))`}for(let l=0;l<e.length;l+=1){const i=e[l],s=i.progress,c=Math.min(Math.max(i.progress,-n.limitProgress),n.limitProgress);let d=c;a||(d=Math.min(Math.max(i.originalProgress,-n.limitProgress),n.limitProgress));const h=i.swiperSlideOffset,u=[t.params.cssMode?-h-t.translate:-h,0,0],p=[0,0,0];let f=!1;t.isHorizontal()||(u[1]=u[0],u[0]=0);let g={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};c<0?(g=n.next,f=!0):c>0&&(g=n.prev,f=!0),u.forEach(((e,t)=>{u[t]=`calc(${e}px + (${r(g.translate[t])} * ${Math.abs(c*o)}))`})),p.forEach(((e,i)=>{let s=g.rotate[i]*Math.abs(c*o);t.browser&&t.browser.need3dFix&&Math.abs(s)/90%2===1&&(s+=.001),p[i]=s})),i.style.zIndex=-Math.abs(Math.round(s))+e.length;const m=u.join(", "),v=`rotateX(${p[0]}deg) rotateY(${p[1]}deg) rotateZ(${p[2]}deg)`,y=d<0?`scale(${1+(1-g.scale)*d*o})`:`scale(${1-(1-g.scale)*d*o})`,b=d<0?1+(1-g.opacity)*d*o:1-(1-g.opacity)*d*o,w=`translate3d(${m}) ${v} ${y}`;if(f&&g.shadow||!f){let e=i.querySelector(".swiper-slide-shadow");if(!e&&g.shadow&&(e=WT("creative",i)),e){const t=n.shadowPerProgress?c*(1/n.limitProgress):c;e.style.opacity=Math.min(Math.max(Math.abs(t),0),1)}}const E=jT(n,i);E.style.transform=w,E.style.opacity=b,g.origin&&(E.style.transformOrigin=g.origin)}},o=e=>{const i=t.slides.map((e=>Iw(e)));i.forEach((t=>{t.style.transitionDuration=`${e}ms`,t.querySelectorAll(".swiper-slide-shadow").forEach((t=>{t.style.transitionDuration=`${e}ms`}))})),zT({swiper:t,duration:e,transformElements:i,allSlides:!0})};HT({effect:"creative",swiper:t,on:s,setTranslate:n,setTransition:o,perspective:()=>t.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!t.params.cssMode})})}function ZT(e){let{swiper:t,extendParams:i,on:s}=e;i({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}});const r=()=>{const{slides:e,activeIndex:i,rtlTranslate:s}=t,r=t.params.cardsEffect,{startTranslate:n,isTouched:a}=t.touchEventsData,l=s?-t.translate:t.translate;for(let c=0;c<e.length;c+=1){const d=e[c],h=d.progress,u=Math.min(Math.max(h,-4),4);let p=d.swiperSlideOffset;t.params.centeredSlides&&!t.params.cssMode&&(t.wrapperEl.style.transform=`translateX(${t.minTranslate()}px)`),t.params.centeredSlides&&t.params.cssMode&&(p-=e[0].swiperSlideOffset);let f=t.params.cssMode?-p-t.translate:-p,g=0;const m=-100*Math.abs(u);let v=1,y=-r.perSlideRotate*u,b=r.perSlideOffset-.75*Math.abs(u);const w=t.virtual&&t.params.virtual.enabled?t.virtual.from+c:c,E=(w===i||w===i-1)&&u>0&&u<1&&(a||t.params.cssMode)&&l<n,T=(w===i||w===i+1)&&u<0&&u>-1&&(a||t.params.cssMode)&&l>n;if(E||T){const e=o(1-Math.abs((Math.abs(u)-.5)/.5),.5);y+=-28*u*e,v+=-.5*e,b+=96*e,g=-25*e*Math.abs(u)+"%"}if(f=u<0?`calc(${f}px ${s?"-":"+"} (${b*Math.abs(u)}%))`:u>0?`calc(${f}px ${s?"-":"+"} (-${b*Math.abs(u)}%))`:`${f}px`,!t.isHorizontal()){const e=g;g=f,f=e}const S=u<0?""+(1+(1-v)*u):""+(1-(1-v)*u),A=`\n        translate3d(${f}, ${g}, ${m}px)\n        rotateZ(${r.rotate?s?-y:y:0}deg)\n        scale(${S})\n      `;if(r.slideShadows){let e=d.querySelector(".swiper-slide-shadow");e||(e=WT("cards",d)),e&&(e.style.opacity=Math.min(Math.max((Math.abs(u)-.5)/.5,0),1))}d.style.zIndex=-Math.abs(Math.round(h))+e.length;const x=jT(r,d);x.style.transform=A}},n=e=>{const i=t.slides.map((e=>Iw(e)));i.forEach((t=>{t.style.transitionDuration=`${e}ms`,t.querySelectorAll(".swiper-slide-shadow").forEach((t=>{t.style.transitionDuration=`${e}ms`}))})),zT({swiper:t,duration:e,transformElements:i})};HT({effect:"cards",swiper:t,on:s,setTranslate:r,setTransition:n,perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!t.params.cssMode})})}Object.keys(gT).forEach((e=>{Object.keys(gT[e]).forEach((t=>{vT.prototype[t]=gT[e][t]}))})),vT.use([Jw,eE]);const QT=[yT,bT,wT,TT,AT,xT,kT,LT,CT,_T,RT,IT,DT,PT,MT,OT,GT,VT,YT,KT,qT,XT,ZT];vT.use(QT);const JT="@font-face{font-family:swiper-icons;src:url('data:application/font-woff;charset=utf-8;base64, d09GRgABAAAAAAZgABAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAGRAAAABoAAAAci6qHkUdERUYAAAWgAAAAIwAAACQAYABXR1BPUwAABhQAAAAuAAAANuAY7+xHU1VCAAAFxAAAAFAAAABm2fPczU9TLzIAAAHcAAAASgAAAGBP9V5RY21hcAAAAkQAAACIAAABYt6F0cBjdnQgAAACzAAAAAQAAAAEABEBRGdhc3AAAAWYAAAACAAAAAj//wADZ2x5ZgAAAywAAADMAAAD2MHtryVoZWFkAAABbAAAADAAAAA2E2+eoWhoZWEAAAGcAAAAHwAAACQC9gDzaG10eAAAAigAAAAZAAAArgJkABFsb2NhAAAC0AAAAFoAAABaFQAUGG1heHAAAAG8AAAAHwAAACAAcABAbmFtZQAAA/gAAAE5AAACXvFdBwlwb3N0AAAFNAAAAGIAAACE5s74hXjaY2BkYGAAYpf5Hu/j+W2+MnAzMYDAzaX6QjD6/4//Bxj5GA8AuRwMYGkAPywL13jaY2BkYGA88P8Agx4j+/8fQDYfA1AEBWgDAIB2BOoAeNpjYGRgYNBh4GdgYgABEMnIABJzYNADCQAACWgAsQB42mNgYfzCOIGBlYGB0YcxjYGBwR1Kf2WQZGhhYGBiYGVmgAFGBiQQkOaawtDAoMBQxXjg/wEGPcYDDA4wNUA2CCgwsAAAO4EL6gAAeNpj2M0gyAACqxgGNWBkZ2D4/wMA+xkDdgAAAHjaY2BgYGaAYBkGRgYQiAHyGMF8FgYHIM3DwMHABGQrMOgyWDLEM1T9/w8UBfEMgLzE////P/5//f/V/xv+r4eaAAeMbAxwIUYmIMHEgKYAYjUcsDAwsLKxc3BycfPw8jEQA/gZBASFhEVExcQlJKWkZWTl5BUUlZRVVNXUNTQZBgMAAMR+E+gAEQFEAAAAKgAqACoANAA+AEgAUgBcAGYAcAB6AIQAjgCYAKIArAC2AMAAygDUAN4A6ADyAPwBBgEQARoBJAEuATgBQgFMAVYBYAFqAXQBfgGIAZIBnAGmAbIBzgHsAAB42u2NMQ6CUAyGW568x9AneYYgm4MJbhKFaExIOAVX8ApewSt4Bic4AfeAid3VOBixDxfPYEza5O+Xfi04YADggiUIULCuEJK8VhO4bSvpdnktHI5QCYtdi2sl8ZnXaHlqUrNKzdKcT8cjlq+rwZSvIVczNiezsfnP/uznmfPFBNODM2K7MTQ45YEAZqGP81AmGGcF3iPqOop0r1SPTaTbVkfUe4HXj97wYE+yNwWYxwWu4v1ugWHgo3S1XdZEVqWM7ET0cfnLGxWfkgR42o2PvWrDMBSFj/IHLaF0zKjRgdiVMwScNRAoWUoH78Y2icB/yIY09An6AH2Bdu/UB+yxopYshQiEvnvu0dURgDt8QeC8PDw7Fpji3fEA4z/PEJ6YOB5hKh4dj3EvXhxPqH/SKUY3rJ7srZ4FZnh1PMAtPhwP6fl2PMJMPDgeQ4rY8YT6Gzao0eAEA409DuggmTnFnOcSCiEiLMgxCiTI6Cq5DZUd3Qmp10vO0LaLTd2cjN4fOumlc7lUYbSQcZFkutRG7g6JKZKy0RmdLY680CDnEJ+UMkpFFe1RN7nxdVpXrC4aTtnaurOnYercZg2YVmLN/d/gczfEimrE/fs/bOuq29Zmn8tloORaXgZgGa78yO9/cnXm2BpaGvq25Dv9S4E9+5SIc9PqupJKhYFSSl47+Qcr1mYNAAAAeNptw0cKwkAAAMDZJA8Q7OUJvkLsPfZ6zFVERPy8qHh2YER+3i/BP83vIBLLySsoKimrqKqpa2hp6+jq6RsYGhmbmJqZSy0sraxtbO3sHRydnEMU4uR6yx7JJXveP7WrDycAAAAAAAH//wACeNpjYGRgYOABYhkgZgJCZgZNBkYGLQZtIJsFLMYAAAw3ALgAeNolizEKgDAQBCchRbC2sFER0YD6qVQiBCv/H9ezGI6Z5XBAw8CBK/m5iQQVauVbXLnOrMZv2oLdKFa8Pjuru2hJzGabmOSLzNMzvutpB3N42mNgZGBg4GKQYzBhYMxJLMlj4GBgAYow/P/PAJJhLM6sSoWKfWCAAwDAjgbRAAB42mNgYGBkAIIbCZo5IPrmUn0hGA0AO8EFTQAA');font-weight:400;font-style:normal}:root{--swiper-theme-color:#007aff}:host{position:relative;display:block;margin-left:auto;margin-right:auto;z-index:1}.swiper{margin-left:auto;margin-right:auto;position:relative;overflow:hidden;list-style:none;padding:0;z-index:1;display:block}.swiper-vertical>.swiper-wrapper{-ms-flex-direction:column;flex-direction:column}.swiper-wrapper{position:relative;width:100%;height:100%;z-index:1;display:-ms-flexbox;display:flex;-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform, -webkit-transform;-webkit-transition-timing-function:var(--swiper-wrapper-transition-timing-function,initial);transition-timing-function:var(--swiper-wrapper-transition-timing-function,initial);-webkit-box-sizing:content-box;box-sizing:content-box}.swiper-android .swiper-slide,.swiper-ios .swiper-slide,.swiper-wrapper{-webkit-transform:translate3d(0px,0,0);transform:translate3d(0px,0,0)}.swiper-horizontal{-ms-touch-action:pan-y;touch-action:pan-y}.swiper-vertical{-ms-touch-action:pan-x;touch-action:pan-x}.swiper-slide{-ms-flex-negative:0;flex-shrink:0;width:100%;height:100%;position:relative;-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform, -webkit-transform;display:block}.swiper-slide-invisible-blank{visibility:hidden}.swiper-autoheight,.swiper-autoheight .swiper-slide{height:auto}.swiper-autoheight .swiper-wrapper{-ms-flex-align:start;align-items:flex-start;-webkit-transition-property:height,-webkit-transform;transition-property:height,-webkit-transform;transition-property:transform,height;transition-property:transform,height,-webkit-transform}.swiper-backface-hidden .swiper-slide{-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-3d.swiper-css-mode .swiper-wrapper{-webkit-perspective:1200px;perspective:1200px}.swiper-3d .swiper-wrapper{-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.swiper-3d{-webkit-perspective:1200px;perspective:1200px}.swiper-3d .swiper-cube-shadow,.swiper-3d .swiper-slide{-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.swiper-css-mode>.swiper-wrapper{overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.swiper-css-mode>.swiper-wrapper::-webkit-scrollbar{display:none}.swiper-css-mode>.swiper-wrapper>.swiper-slide{scroll-snap-align:start start}.swiper-css-mode.swiper-horizontal>.swiper-wrapper{-webkit-scroll-snap-type:x mandatory;-ms-scroll-snap-type:x mandatory;scroll-snap-type:x mandatory}.swiper-css-mode.swiper-vertical>.swiper-wrapper{-webkit-scroll-snap-type:y mandatory;-ms-scroll-snap-type:y mandatory;scroll-snap-type:y mandatory}.swiper-css-mode.swiper-free-mode>.swiper-wrapper{-webkit-scroll-snap-type:none;-ms-scroll-snap-type:none;scroll-snap-type:none}.swiper-css-mode.swiper-free-mode>.swiper-wrapper>.swiper-slide{scroll-snap-align:none}.swiper-css-mode.swiper-centered>.swiper-wrapper::before{content:'';-ms-flex-negative:0;flex-shrink:0;-ms-flex-order:9999;order:9999}.swiper-css-mode.swiper-centered>.swiper-wrapper>.swiper-slide{scroll-snap-align:center center;scroll-snap-stop:always}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper>.swiper-slide:first-child{-webkit-margin-start:var(--swiper-centered-offset-before);margin-inline-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper::before{height:100%;min-height:1px;width:var(--swiper-centered-offset-after)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper>.swiper-slide:first-child{-webkit-margin-before:var(--swiper-centered-offset-before);margin-block-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper::before{width:100%;min-width:1px;height:var(--swiper-centered-offset-after)}.swiper-3d .swiper-slide-shadow,.swiper-3d .swiper-slide-shadow-bottom,.swiper-3d .swiper-slide-shadow-left,.swiper-3d .swiper-slide-shadow-right,.swiper-3d .swiper-slide-shadow-top{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:10}.swiper-3d .swiper-slide-shadow{background:rgba(0,0,0,.15)}.swiper-3d .swiper-slide-shadow-left{background-image:-webkit-gradient(linear,right top, left top,from(rgba(0,0,0,.5)),to(rgba(0,0,0,0)));background-image:linear-gradient(to left,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-3d .swiper-slide-shadow-right{background-image:-webkit-gradient(linear,left top, right top,from(rgba(0,0,0,.5)),to(rgba(0,0,0,0)));background-image:linear-gradient(to right,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-3d .swiper-slide-shadow-top{background-image:-webkit-gradient(linear,left bottom, left top,from(rgba(0,0,0,.5)),to(rgba(0,0,0,0)));background-image:linear-gradient(to top,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-3d .swiper-slide-shadow-bottom{background-image:-webkit-gradient(linear,left top, left bottom,from(rgba(0,0,0,.5)),to(rgba(0,0,0,0)));background-image:linear-gradient(to bottom,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-lazy-preloader{width:42px;height:42px;position:absolute;left:50%;top:50%;margin-left:-21px;margin-top:-21px;z-index:10;-webkit-transform-origin:50%;transform-origin:50%;-webkit-box-sizing:border-box;box-sizing:border-box;border:4px solid var(--swiper-preloader-color,var(--swiper-theme-color));border-radius:50%;border-top-color:transparent}.swiper-watch-progress .swiper-slide-visible .swiper-lazy-preloader,.swiper:not(.swiper-watch-progress) .swiper-lazy-preloader{-webkit-animation:swiper-preloader-spin 1s infinite linear;animation:swiper-preloader-spin 1s infinite linear}.swiper-lazy-preloader-white{--swiper-preloader-color:#fff}.swiper-lazy-preloader-black{--swiper-preloader-color:#000}@-webkit-keyframes swiper-preloader-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes swiper-preloader-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.swiper-virtual .swiper-slide{-webkit-backface-visibility:hidden;-webkit-transform:translateZ(0);transform:translateZ(0)}.swiper-virtual.swiper-css-mode .swiper-wrapper::after{content:'';position:absolute;left:0;top:0;pointer-events:none}.swiper-virtual.swiper-css-mode.swiper-horizontal .swiper-wrapper::after{height:1px;width:var(--swiper-virtual-size)}.swiper-virtual.swiper-css-mode.swiper-vertical .swiper-wrapper::after{width:1px;height:var(--swiper-virtual-size)}:root{--swiper-navigation-size:44px}.swiper-button-next,.swiper-button-prev{position:absolute;top:var(--swiper-navigation-top-offset,50%);width:calc(var(--swiper-navigation-size)/ 44 * 27);height:var(--swiper-navigation-size);margin-top:calc(0px - (var(--swiper-navigation-size)/ 2));z-index:10;cursor:pointer;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;color:var(--swiper-navigation-color,var(--swiper-theme-color))}.swiper-button-next.swiper-button-disabled,.swiper-button-prev.swiper-button-disabled{opacity:.35;cursor:auto;pointer-events:none}.swiper-button-next.swiper-button-hidden,.swiper-button-prev.swiper-button-hidden{opacity:0;cursor:auto;pointer-events:none}.swiper-navigation-disabled .swiper-button-next,.swiper-navigation-disabled .swiper-button-prev{display:none!important}.swiper-button-next svg,.swiper-button-prev svg{width:100%;height:100%;-o-object-fit:contain;object-fit:contain;-webkit-transform-origin:center;transform-origin:center}.swiper-rtl .swiper-button-next svg,.swiper-rtl .swiper-button-prev svg{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.swiper-button-prev,.swiper-rtl .swiper-button-next{left:var(--swiper-navigation-sides-offset,10px);right:auto}.swiper-button-next,.swiper-rtl .swiper-button-prev{right:var(--swiper-navigation-sides-offset,10px);left:auto}.swiper-button-lock{display:none}.swiper-button-next:after,.swiper-button-prev:after{font-family:swiper-icons;font-size:var(--swiper-navigation-size);text-transform:none!important;letter-spacing:0;font-variant:initial;line-height:1}.swiper-button-prev:after,.swiper-rtl .swiper-button-next:after{content:'prev'}.swiper-button-next,.swiper-rtl .swiper-button-prev{right:var(--swiper-navigation-sides-offset,10px);left:auto}.swiper-button-next:after,.swiper-rtl .swiper-button-prev:after{content:'next'}.swiper-pagination{position:absolute;text-align:center;-webkit-transition:.3s opacity;transition:.3s opacity;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);z-index:10}.swiper-pagination.swiper-pagination-hidden{opacity:0}.swiper-pagination-disabled>.swiper-pagination,.swiper-pagination.swiper-pagination-disabled{display:none!important}.swiper-horizontal>.swiper-pagination-bullets,.swiper-pagination-bullets.swiper-pagination-horizontal,.swiper-pagination-custom,.swiper-pagination-fraction{bottom:var(--swiper-pagination-bottom,8px);top:var(--swiper-pagination-top,auto);left:0;width:100%}.swiper-pagination-bullets-dynamic{overflow:hidden;font-size:0}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{-webkit-transform:scale(.33);transform:scale(.33);position:relative}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active{-webkit-transform:scale(1);transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-main{-webkit-transform:scale(1);transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev{-webkit-transform:scale(.66);transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev-prev{-webkit-transform:scale(.33);transform:scale(.33)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next{-webkit-transform:scale(.66);transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next-next{-webkit-transform:scale(.33);transform:scale(.33)}.swiper-pagination-bullet{width:var(--swiper-pagination-bullet-width,var(--swiper-pagination-bullet-size,8px));height:var(--swiper-pagination-bullet-height,var(--swiper-pagination-bullet-size,8px));display:inline-block;border-radius:var(--swiper-pagination-bullet-border-radius,50%);background:var(--swiper-pagination-bullet-inactive-color,#000);opacity:var(--swiper-pagination-bullet-inactive-opacity, .2)}button.swiper-pagination-bullet{border:none;margin:0;padding:0;-webkit-box-shadow:none;box-shadow:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.swiper-pagination-clickable .swiper-pagination-bullet{cursor:pointer}.swiper-pagination-bullet:only-child{display:none!important}.swiper-pagination-bullet-active{opacity:var(--swiper-pagination-bullet-opacity, 1);background:var(--swiper-pagination-color,var(--swiper-theme-color))}.swiper-pagination-vertical.swiper-pagination-bullets,.swiper-vertical>.swiper-pagination-bullets{right:var(--swiper-pagination-right,8px);left:var(--swiper-pagination-left,auto);top:50%;-webkit-transform:translate3d(0px,-50%,0);transform:translate3d(0px,-50%,0)}.swiper-pagination-vertical.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets .swiper-pagination-bullet{margin:var(--swiper-pagination-bullet-vertical-gap,6px) 0;display:block}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:8px}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{display:inline-block;-webkit-transition:.2s transform,.2s top;transition:.2s transform,.2s top}.swiper-horizontal>.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets .swiper-pagination-bullet{margin:0 var(--swiper-pagination-bullet-horizontal-gap,4px)}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);white-space:nowrap}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{-webkit-transition:.2s transform,.2s left;transition:.2s transform,.2s left}.swiper-horizontal.swiper-rtl>.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{-webkit-transition:.2s transform,.2s right;transition:.2s transform,.2s right}.swiper-pagination-fraction{color:var(--swiper-pagination-fraction-color,inherit)}.swiper-pagination-progressbar{background:var(--swiper-pagination-progressbar-bg-color,rgba(0,0,0,.25));position:absolute}.swiper-pagination-progressbar .swiper-pagination-progressbar-fill{background:var(--swiper-pagination-color,var(--swiper-theme-color));position:absolute;left:0;top:0;width:100%;height:100%;-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:left top;transform-origin:left top}.swiper-rtl .swiper-pagination-progressbar .swiper-pagination-progressbar-fill{-webkit-transform-origin:right top;transform-origin:right top}.swiper-horizontal>.swiper-pagination-progressbar,.swiper-pagination-progressbar.swiper-pagination-horizontal,.swiper-pagination-progressbar.swiper-pagination-vertical.swiper-pagination-progressbar-opposite,.swiper-vertical>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite{width:100%;height:var(--swiper-pagination-progressbar-size,4px);left:0;top:0}.swiper-horizontal>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-horizontal.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-vertical,.swiper-vertical>.swiper-pagination-progressbar{width:var(--swiper-pagination-progressbar-size,4px);height:100%;left:0;top:0}.swiper-pagination-lock{display:none}.swiper-scrollbar{border-radius:var(--swiper-scrollbar-border-radius,10px);position:relative;-ms-touch-action:none;touch-action:none;background:var(--swiper-scrollbar-bg-color,rgba(0,0,0,.1))}.swiper-scrollbar-disabled>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-disabled{display:none!important}.swiper-horizontal>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-horizontal{position:absolute;left:var(--swiper-scrollbar-sides-offset,1%);bottom:var(--swiper-scrollbar-bottom,4px);top:var(--swiper-scrollbar-top,auto);z-index:50;height:var(--swiper-scrollbar-size,4px);width:calc(100% - 2 * var(--swiper-scrollbar-sides-offset,1%))}.swiper-scrollbar.swiper-scrollbar-vertical,.swiper-vertical>.swiper-scrollbar{position:absolute;left:var(--swiper-scrollbar-left,auto);right:var(--swiper-scrollbar-right,4px);top:var(--swiper-scrollbar-sides-offset,1%);z-index:50;width:var(--swiper-scrollbar-size,4px);height:calc(100% - 2 * var(--swiper-scrollbar-sides-offset,1%))}.swiper-scrollbar-drag{height:100%;width:100%;position:relative;background:var(--swiper-scrollbar-drag-bg-color,rgba(0,0,0,.5));border-radius:var(--swiper-scrollbar-border-radius,10px);left:0;top:0}.swiper-scrollbar-cursor-drag{cursor:move}.swiper-scrollbar-lock{display:none}.swiper-zoom-container{width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;text-align:center}.swiper-zoom-container>canvas,.swiper-zoom-container>img,.swiper-zoom-container>svg{max-width:100%;max-height:100%;-o-object-fit:contain;object-fit:contain}.swiper-slide-zoomed{cursor:move;-ms-touch-action:none;touch-action:none}.swiper .swiper-notification{position:absolute;left:0;top:0;pointer-events:none;opacity:0;z-index:-1000}.swiper-free-mode>.swiper-wrapper{-webkit-transition-timing-function:ease-out;transition-timing-function:ease-out;margin:0 auto}.swiper-grid>.swiper-wrapper{-ms-flex-wrap:wrap;flex-wrap:wrap}.swiper-grid-column>.swiper-wrapper{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-direction:column;flex-direction:column}.swiper-fade.swiper-free-mode .swiper-slide{-webkit-transition-timing-function:ease-out;transition-timing-function:ease-out}.swiper-fade .swiper-slide{pointer-events:none;-webkit-transition-property:opacity;transition-property:opacity}.swiper-fade .swiper-slide .swiper-slide{pointer-events:none}.swiper-fade .swiper-slide-active{pointer-events:auto}.swiper-fade .swiper-slide-active .swiper-slide-active{pointer-events:auto}.swiper-cube{overflow:visible}.swiper-cube .swiper-slide{pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1;visibility:hidden;-webkit-transform-origin:0 0;transform-origin:0 0;width:100%;height:100%}.swiper-cube .swiper-slide .swiper-slide{pointer-events:none}.swiper-cube.swiper-rtl .swiper-slide{-webkit-transform-origin:100% 0;transform-origin:100% 0}.swiper-cube .swiper-slide-active,.swiper-cube .swiper-slide-active .swiper-slide-active{pointer-events:auto}.swiper-cube .swiper-slide-active,.swiper-cube .swiper-slide-next,.swiper-cube .swiper-slide-prev{pointer-events:auto;visibility:visible}.swiper-cube .swiper-cube-shadow{position:absolute;left:0;bottom:0px;width:100%;height:100%;opacity:.6;z-index:0}.swiper-cube .swiper-cube-shadow:before{content:'';background:#000;position:absolute;left:0;top:0;bottom:0;right:0;-webkit-filter:blur(50px);filter:blur(50px)}.swiper-cube .swiper-slide-next+.swiper-slide{pointer-events:auto;visibility:visible}.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-bottom,.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-left,.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-right,.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-top{z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-flip{overflow:visible}.swiper-flip .swiper-slide{pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1}.swiper-flip .swiper-slide .swiper-slide{pointer-events:none}.swiper-flip .swiper-slide-active,.swiper-flip .swiper-slide-active .swiper-slide-active{pointer-events:auto}.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-bottom,.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-left,.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-right,.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-top{z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-creative .swiper-slide{-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden;-webkit-transition-property:opacity,height,-webkit-transform;transition-property:opacity,height,-webkit-transform;transition-property:transform,opacity,height;transition-property:transform,opacity,height,-webkit-transform}.swiper-cards{overflow:visible}.swiper-cards .swiper-slide{-webkit-transform-origin:center bottom;transform-origin:center bottom;-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden}taro-swiper-core{height:150px;display:block}taro-swiper-core .swiper-container{height:100%;position:relative;overflow:visible}";var eS,tS,iS,sS,rS,nS=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)},oS=function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i};let aS=0;const lS=5,cS=7,dS=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onChange=Rp(this,"change",7),this.onAnimationFinish=Rp(this,"animationfinish",7),eS.set(this,aS++),tS.set(this,""),iS.set(this,!1),sS.set(this,!1),rS.set(this,0),this.handleSwiperSizeDebounce=Uv((()=>{this.swiper&&this.isWillLoadCalled&&(this.circular?nS(this,sS,"f")&&(this.reset(),oS(this,sS,!1,"f"),oS(this,iS,!1,"f")):(this.swiper.update(),oS(this,iS,!1,"f")))}),50),this.reset=()=>{oS(this,iS,!0,"f"),oS(this,rS,this.swiper.realIndex,"f"),this.swiper.destroy(),this.handleInit(!0),oS(this,iS,!1,"f")},this.getSlidersList=()=>this.el.querySelectorAll("taro-swiper-item-core:not(.swiper-slide-duplicate)")||[],this.getNeedFixLoop=()=>{const e=this.parseMargin(),t=e.filter(Boolean).length>0;return this.circular&&t},this.parseMargin=()=>{const[,e]=/^(\d+)px/.exec(this.previousMargin)||[],[,t]=/^(\d+)px/.exec(this.nextMargin)||[];return[parseInt(e)||0,parseInt(t)||0]},this.swiperWrapper=void 0,this.swiper=void 0,this.isWillLoadCalled=!1,this.indicatorDots=!1,this.indicatorColor="rgba(0, 0, 0, .3)",this.indicatorActiveColor="#000000",this.autoplay=!1,this.current=0,this.currentItemId="",this.interval=5e3,this.duration=500,this.circular=!1,this.vertical=!1,this.previousMargin="0px",this.nextMargin="0px",this.displayMultipleItems=1,this.full=!1,this.zoom=!1,this.effectsProps={},this.observer=void 0}watchCurrent(e){if(this.currentItemId||!this.isWillLoadCalled||!this.swiper)return;const t=parseInt(e,10);isNaN(t)||t===this.swiper.realIndex||(oS(this,tS,"","f"),this.circular?(this.swiper.slideToLoop(t),this.autoplay&&this.swiper.autoplay.pause(),this.swiper.loopFix(),this.autoplay&&this.swiper.autoplay.start()):this.swiper.slideTo(t))}watchCurrentItemId(e){if(!this.swiperWrapper||!this.isWillLoadCalled)return;let t=0;this.getSlidersList().forEach(((i,s)=>{const r=i.getAttribute("item-id");r===e&&(t=this.circular?Number(i.getAttribute("data-swiper-slide-index")):s)})),t!==this.swiper.realIndex&&(oS(this,tS,"","f"),this.circular?(this.swiper.slideToLoop(t),this.swiper.loopFix(),this.autoplay&&this.swiper.autoplay.start()):this.swiper.slideTo(t))}watchAutoplay(e){if(!this.isWillLoadCalled||!this.swiper)return;const t=this.swiper.autoplay;if(t){if(t.running===e)return;e?(this.swiper.params&&"object"===typeof this.swiper.params.autoplay&&(!0===this.swiper.params.autoplay.disableOnInteraction&&(this.swiper.params.autoplay.disableOnInteraction=!1),this.swiper.params.autoplay.delay=this.interval),t.start()):t.stop()}}watchDuration(e){this.swiper&&this.isWillLoadCalled&&(this.swiper.params.speed=e)}watchInterval(e){this.swiper&&this.isWillLoadCalled&&"object"===typeof this.swiper.params.autoplay&&(this.swiper.params.autoplay.delay=e)}watchSwiperWrapper(e){if(!this.isWillLoadCalled||!this.swiper)return;if(!e)return;const t=()=>{oS(this,sS,!0,"f"),this.swiper.loopDestroy(),this.swiper.params.loop=!1};this.el.appendChild=i=>(oS(this,iS,!0,"f"),!nS(this,sS,"f")&&this.circular&&t(),e.appendChild(i)),this.el.insertBefore=(i,s)=>(oS(this,iS,!0,"f"),!nS(this,sS,"f")&&this.circular&&t(),e.insertBefore(i,s)),this.el.replaceChild=(i,s)=>(oS(this,iS,!0,"f"),!nS(this,sS,"f")&&this.circular&&t(),e.replaceChild(i,s)),this.el.removeChild=i=>(oS(this,iS,!0,"f"),!nS(this,sS,"f")&&this.circular&&t(),e.removeChild(i))}watchCircular(){this.swiper&&this.isWillLoadCalled&&this.reset()}watchDisplayMultipleItems(){this.swiper&&this.isWillLoadCalled&&this.reset()}componentWillLoad(){this.isWillLoadCalled=!0}componentDidLoad(){this.handleInit(),this.swiper&&this.swiperWrapper&&(this.observer=new MutationObserver(this.handleSwiperSizeDebounce),this.observer.observe(this.swiperWrapper,{childList:!0}))}disconnectedCallback(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}handleInit(e=!1){const{autoplay:t,circular:i,current:s,currentItemId:r,displayMultipleItems:n,duration:o,interval:a,effectsProps:l,vertical:c}=this;let d=s;if(e)d=nS(this,rS,"f");else if(r){let e=0;this.getSlidersList().forEach(((t,i)=>{t.itemId&&t.itemId===r&&(e=i)})),d=e}const h=this.getLoopAdditionalSlides(),u=1===n,p=1===n?"auto":n,f=this,g=Object.assign(Object.assign({pagination:{el:`.taro-swiper-${nS(this,eS,"f")} > .swiper-container > .swiper-pagination`},direction:c?"vertical":"horizontal",loop:i,slidesPerView:p,initialSlide:d,loopAdditionalSlides:h,speed:o,observeParents:!0,observer:!0,centeredSlides:u,zoom:this.zoom},l),{on:{changeTransitionEnd(e){if(nS(f,iS,"f")||nS(f,rS,"f")===this.realIndex)return;oS(f,rS,this.realIndex,"f"),f.getNeedFixLoop()&&e.loopFix(),f.autoplay&&e.autoplay.start();const t=f.getCurrentItemId(e);f.onAnimationFinish.emit({current:this.realIndex,source:nS(f,tS,"f"),currentItemId:t}),oS(f,tS,"autoplay","f")},touchMove(){oS(f,tS,"touch","f")},slideChange(e){if(nS(f,iS,"f")||nS(f,rS,"f")===this.realIndex)return;const t=f.getCurrentItemId(e);f.onChange.emit({current:this.realIndex,source:nS(f,tS,"f"),currentItemId:t})},init:e=>{f.getNeedFixLoop()&&e.loopFix(),f.autoplay&&e.autoplay.start()},touchEnd:e=>{oS(f,tS,"touch","f"),f.autoplay&&e.autoplay.start()},touchStart:e=>{oS(f,tS,"touch","f"),f.autoplay&&e.autoplay.pause()},autoplay(e){e.animating=!1,oS(f,tS,"autoplay","f")}}});if(t&&(g.autoplay={delay:a,disableOnInteraction:!1}),this.swiper=new vT(`.taro-swiper-${nS(this,eS,"f")} > .swiper-container`,g),this.getNeedFixLoop()){const e=this.swiper.minTranslate.bind(this.swiper),t=this.swiper.maxTranslate.bind(this.swiper);u&&this.getSlidersList().length<4?(this.swiper.minTranslate=()=>e()+this.parseMargin()[1],this.swiper.maxTranslate=()=>t()-this.parseMargin()[0]):(this.swiper.minTranslate=()=>e()-this.parseMargin()[0],this.swiper.maxTranslate=()=>t()+this.parseMargin()[1])}this.swiperWrapper=this.swiper.wrapperEl}getLoopAdditionalSlides(){const e=this.getSlidersList().length;return!this.el||!this.getNeedFixLoop()||e<lS?0:e<=cS?1:2}getCurrentItemId(e){const t=e.slides,i=e.activeIndex,s=t[i];return s.getAttribute("item-id")}render(){const{vertical:e,indicatorDots:t,indicatorColor:i,indicatorActiveColor:s}=this,[r,n]=this.parseMargin(),o=r||n,a={};o&&(a.overflow="hidden"),this.full&&(a.height="100%");const l=["overflow: visible;",e?`margin-top: ${r}px; margin-bottom: ${n}px;`:`margin-right: ${n}px; margin-left: ${r}px;`,this.full?"height: 100%;":""],c=[t?"opacity: 1;":"display: none;","font-size: 0;"];return wp(Tp,{class:`taro-swiper-${nS(this,eS,"f")}`,style:a},wp("div",{class:"swiper-container"},wp("style",{type:"text/css"},`\n              .taro-swiper-${nS(this,eS,"f")} > .swiper-container > .swiper-pagination > .swiper-pagination-bullet { background: ${i} }\n              .taro-swiper-${nS(this,eS,"f")} > .swiper-container > .swiper-pagination > .swiper-pagination-bullet-active { background: ${s} }\n              .taro-swiper-${nS(this,eS,"f")} > .swiper-container { ${l.join("")} }\n              .taro-swiper-${nS(this,eS,"f")} > .swiper-container > .swiper-pagination { ${c.join("")} }\n            `),wp("div",{class:"swiper-wrapper"},wp("slot",null)),wp("div",{class:"swiper-pagination"})))}get el(){return this}static get watchers(){return{current:["watchCurrent"],currentItemId:["watchCurrentItemId"],autoplay:["watchAutoplay"],duration:["watchDuration"],interval:["watchInterval"],swiperWrapper:["watchSwiperWrapper"],circular:["watchCircular"],displayMultipleItems:["watchDisplayMultipleItems"]}}static get style(){return JT}},[4,"taro-swiper-core",{indicatorDots:[4,"indicator-dots"],indicatorColor:[1,"indicator-color"],indicatorActiveColor:[1,"indicator-active-color"],autoplay:[4],current:[2],currentItemId:[1,"current-item-id"],interval:[2],duration:[2],circular:[4],vertical:[4],previousMargin:[1,"previous-margin"],nextMargin:[1,"next-margin"],displayMultipleItems:[2,"display-multiple-items"],full:[4],zoom:[4],effectsProps:[16],swiperWrapper:[32],swiper:[32],isWillLoadCalled:[32],observer:[32]}]);function hS(){if("undefined"===typeof customElements)return;const e=["taro-swiper-core"];e.forEach((e=>{switch(e){case"taro-swiper-core":customElements.get(e)||customElements.define(e,dS);break}}))}eS=new WeakMap,tS=new WeakMap,iS=new WeakMap,sS=new WeakMap,rS=new WeakMap;const uS=hS,pS=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.itemId=void 0}connectedCallback(){this.el.className=vg(this.el.className,"swiper-slide")}componentDidRender(){Yf(this.el)}render(){return wp(Tp,{"item-id":this.itemId},wp("slot",null))}get el(){return this}},[4,"taro-swiper-item-core",{itemId:[1,"item-id"]}]);function fS(){if("undefined"===typeof customElements)return;const e=["taro-swiper-item-core"];e.forEach((e=>{switch(e){case"taro-swiper-item-core":customElements.get(e)||customElements.define(e,pS);break}}))}const gS=fS,mS='.weui-cell_switch{padding-top:6.5px;padding-bottom:6.5px}.weui-switch{-webkit-appearance:none;-moz-appearance:none;appearance:none}.weui-switch,.weui-switch-cp__box{-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#dfdfdf;border:1px solid #dfdfdf;border-radius:16px;outline:0;width:52px;height:32px;-webkit-transition:background-color .1s,border .1s;transition:background-color .1s,border .1s;position:relative}.weui-switch:before,.weui-switch-cp__box:before{content:" ";background-color:#fdfdfd;border-radius:15px;width:50px;height:30px;-webkit-transition:-webkit-transform .35s cubic-bezier(.45,1,.4,1);transition:-webkit-transform .35s cubic-bezier(.45,1,.4,1);transition:transform .35s cubic-bezier(.45,1,.4,1);transition:transform .35s cubic-bezier(.45,1,.4,1), -webkit-transform .35s cubic-bezier(.45,1,.4,1);position:absolute;top:0;left:0}.weui-switch:after,.weui-switch-cp__box:after{content:" ";background-color:#fff;border-radius:15px;width:30px;height:30px;-webkit-transition:-webkit-transform .35s cubic-bezier(.4,.4,.25,1.35);transition:-webkit-transform .35s cubic-bezier(.4,.4,.25,1.35);transition:transform .35s cubic-bezier(.4,.4,.25,1.35);transition:transform .35s cubic-bezier(.4,.4,.25,1.35), -webkit-transform .35s cubic-bezier(.4,.4,.25,1.35);position:absolute;top:0;left:0;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.4);box-shadow:0 1px 3px rgba(0,0,0,.4)}.weui-switch:checked,.weui-switch-cp__input:checked~.weui-switch-cp__box{background-color:#04be02;border-color:#04be02}.weui-switch:checked:before,.weui-switch-cp__input:checked~.weui-switch-cp__box:before{-webkit-transform:scale(0);transform:scale(0)}.weui-switch:checked:after,.weui-switch-cp__input:checked~.weui-switch-cp__box:after{-webkit-transform:translate(20px);transform:translate(20px)}.weui-switch-cp__input{position:absolute;left:-9999px}.weui-switch-cp__box{display:block}taro-switch-core{width:52px;height:32px;display:inline-block}taro-switch-core .weui-switch{width:100%;height:100%;display:block}',vS=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onChange=Rp(this,"change",7),this.switchChange=e=>{e.stopPropagation();const t=e.target.checked;this.checked=t,this.onChange.emit({value:t})},this.type="switch",this.checked=!1,this.color="#04BE02",this.name=void 0,this.disabled=!1,this.nativeProps={},this.isWillLoadCalled=!1}function(e){this.isWillLoadCalled&&this.inputRef.checked!==e&&(this.inputRef.checked=e)}componentWillLoad(){this.isWillLoadCalled=!0}componentDidLoad(){Object.defineProperty(this.el,"value",{get:()=>this.checked,configurable:!0})}render(){const{type:e,color:t,checked:i,name:s,disabled:r,nativeProps:n}=this,o=i?{borderColor:t||"04BE02",backgroundColor:t||"04BE02"}:{};return wp("input",Object.assign({ref:e=>{this.inputRef=e},type:"checkbox",class:`weui-${e}`,style:o,checked:i,name:s,disabled:r,onChange:this.switchChange},n))}get el(){return this}static get watchers(){return{checked:["function"]}}static get style(){return mS}},[0,"taro-switch-core",{type:[1],checked:[1028],color:[1],name:[1],disabled:[4],nativeProps:[16],isWillLoadCalled:[32]}]);function yS(){if("undefined"===typeof customElements)return;const e=["taro-switch-core"];e.forEach((e=>{switch(e){case"taro-switch-core":customElements.get(e)||customElements.define(e,vS);break}}))}const bS=yS,wS=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("TabItem",this)}render(){return wp(Tp,null)}},[0,"taro-tab-item-core"]);function ES(){if("undefined"===typeof customElements)return;const e=["taro-tab-item-core"];e.forEach((e=>{switch(e){case"taro-tab-item-core":customElements.get(e)||customElements.define(e,wS);break}}))}const TS=ES;function SS(e){return"/"===e.charAt(0)}function AS(e,t){for(var i=t,s=i+1,r=e.length;s<r;i+=1,s+=1)e[i]=e[s];e.pop()}function xS(e,t){void 0===t&&(t="");var i,s=e&&e.split("/")||[],r=t&&t.split("/")||[],n=e&&SS(e),o=t&&SS(t),a=n||o;if(e&&SS(e)?r=s:s.length&&(r.pop(),r=r.concat(s)),!r.length)return"/";if(r.length){var l=r[r.length-1];i="."===l||".."===l||""===l}else i=!1;for(var c=0,d=r.length;d>=0;d--){var h=r[d];"."===h?AS(r,d):".."===h?(AS(r,d),c++):c&&(AS(r,d),c--)}if(!a)for(;c--;c)r.unshift("..");!a||""===r[0]||r[0]&&SS(r[0])||r.unshift("");var u=r.join("/");return i&&"/"!==u.substr(-1)&&(u+="/"),u}const kS=e=>{let t,i=e||"";const s={path:null,query:null,fragment:null};return t=i.indexOf("#"),t>-1&&(s.fragment=i.substring(t+1),i=i.substring(0,t)),t=i.indexOf("?"),t>-1&&(s.query=i.substring(t+1),i=i.substring(0,t)),s.path=i,s},LS=({index:e,isSelected:t=!1,textColor:i,iconPath:s,badgeText:r,showRedDot:n=!1,pagePath:o,text:a,onSelect:l})=>{const c=vg("weui-tabbar__item",{"weui-bar__item_on":t}),d={position:"absolute",top:"-2px",right:"-13px"},h={position:"absolute",top:"0",right:"-6px"};function u(){const t=PL.getCurrentPages().shift();"function"===typeof(null===t||void 0===t?void 0:t.onTabItemTap)&&Gv(this)&&t.onTabItemTap({index:e,pagePath:o,text:a}),l(e)}return wp("a",{key:e,href:"javascript:;",class:c,onClick:u},wp("span",{style:{display:"inline-block",position:"relative"}},wp("img",{src:s,alt:"",class:"weui-tabbar__icon"}),!!r&&wp("span",{class:"weui-badge taro-tabbar-badge",style:d},r),n&&wp("span",{class:"weui-badge weui-badge_dot",style:h})),wp("p",{class:"weui-tabbar__label",style:{color:i}},a))},CS='.weui-tabbar{z-index:500;background-color:#f7f7fa;-ms-flex-align:center;align-items:center;width:100%;display:-ms-flexbox;display:flex;position:absolute;bottom:0}.weui-tabbar:before{content:" ";color:#c0bfc4;-webkit-transform-origin:0 0;transform-origin:0 0;border-top:1px solid #c0bfc4;height:1px;position:absolute;top:0;left:0;right:0;-webkit-transform:scaleY(.5);transform:scaleY(.5)}.weui-tabbar__item{padding:5px 0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom);color:#999;text-align:center;-webkit-tap-highlight-color:transparent;-ms-flex:1;flex:1;font-size:0;display:block}.weui-tabbar__item.weui-bar__item_on .weui-tabbar__icon,.weui-tabbar__item.weui-bar__item_on .weui-tabbar__icon>i,.weui-tabbar__item.weui-bar__item_on .weui-tabbar__label{color:#09bb07}.weui-tabbar__icon{width:27px;height:27px;display:inline-block}.weui-tabbar__icon img{width:100%;height:100%}i.weui-tabbar__icon,.weui-tabbar__icon>i{color:#999;font-size:24px}.weui-tabbar__label{text-align:center;color:#999;font-size:10px;line-height:1.8}.weui-badge{color:#fff;text-align:center;vertical-align:middle;background-color:#f43530;border-radius:18px;min-width:8px;padding:.15em .4em;font-size:12px;line-height:1.2;display:inline-block}.weui-badge_dot{min-width:0;padding:.4em}:root{--taro-tabbar-height:50px}#app{height:100%}.taro-tabbar__border-white:before{border-top-color:#fff!important}.taro-tabbar__container{-ms-flex-direction:column;flex-direction:column;height:100%;display:-ms-flexbox;display:flex;overflow:hidden}.taro-tabbar__panel{-webkit-overflow-scrolling:auto;-ms-flex:1;flex:1;position:relative;overflow:auto}.taro-tabbar__tabbar{height:var(--taro-tabbar-height);width:100%;-webkit-transition:bottom .2s,top .2s;transition:bottom .2s,top .2s;position:relative}.taro-tabbar__tabbar-top{top:0}.taro-tabbar__tabbar-bottom{margin-bottom:constant(safe-area-inset-bottom);margin-bottom:env(safe-area-inset-bottom);bottom:0}.taro-tabbar__tabbar-hide{display:none}.taro-tabbar__tabbar-slideout{-ms-flex:0 0;flex:0 0;top:-52px}.taro-tabbar__panel+.taro-tabbar__tabbar-slideout{top:auto;bottom:-52px}',_S=0,RS=1,IS=2,DS="taro-tabbar__tabbar",PS="taro-tabbar__tabbar-hide",MS="taro-tabbar__tabbar-slideout",OS=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onLongPress=Rp(this,"longpress",7),this.homePage="",this.customRoutes=[],this.tabbarPos="bottom",this.getOriginUrl=e=>{const t=this.customRoutes.filter((([,t])=>{const i=kS(t).path,s=kS(e).path;return i===s}));return Is(t.length?t[0][0]:e,".html")},this.getSelectedIndex=e=>{let t=-1;return this.list.forEach((({pagePath:i},s)=>{const r=kS(e).path,n=kS(i).path;r===n&&(t=s)})),t},this.switchTab=e=>{this.selectedIndex=e,PL.switchTab({url:this.list[e].pagePath})},this.switchTabHandler=({url:e,successHandler:t,errorHandler:i})=>{const s=this.getOriginUrl(this.getCurrentUrl()||this.homePage),r=xS(e,s),n=this.getSelectedIndex(r);n>-1?(this.switchTab(n),t({errMsg:"switchTab:ok"})):i({errMsg:`switchTab:fail page "${r}" is not found`})},this.routerChangeHandler=e=>{var t;const i=null===(t=null===e||void 0===e?void 0:e.toLocation)||void 0===t?void 0:t.path;let s;if("string"===typeof i){const e=this.conf.basename||"/";s=_s(Ls(i||this.homePage),e)||"/"}else s=this.getCurrentUrl();this.selectedIndex=this.getSelectedIndex(this.getOriginUrl(s))},this.setTabBarBadgeHandler=({index:e,text:t,successHandler:i,errorHandler:s})=>{const r=[...this.list];e in r?(r[e].showRedDot=!1,r[e].badgeText=t,i({errMsg:"setTabBarBadge:ok"})):s({errMsg:"setTabBarBadge:fail tabbar item not found"}),this.list=r},this.removeTabBarBadgeHandler=({index:e,successHandler:t,errorHandler:i})=>{const s=[...this.list];e in s?(s[e].badgeText=null,s[e].badgeText=null,t({errMsg:"removeTabBarBadge:ok"})):i({errMsg:"removeTabBarBadge:fail tabbar item not found"}),this.list=s},this.showTabBarRedDotHandler=({index:e,successHandler:t,errorHandler:i})=>{const s=[...this.list];e in s?(s[e].badgeText=null,s[e].showRedDot=!0,t({errMsg:"showTabBarRedDot:ok"})):i({errMsg:"showTabBarRedDot:fail tabbar item not found"}),this.list=s},this.hideTabBarRedDotHandler=({index:e,successHandler:t,errorHandler:i})=>{const s=[...this.list];e in s?(s[e].showRedDot=!1,t({errMsg:"hideTabBarRedDot:ok"})):i({errMsg:"hideTabBarRedDot:fail tabbar item not found"}),this.list=s},this.showTabBarHandler=({successHandler:e})=>{this.status=_S,e({errMsg:"showTabBar:ok"})},this.hideTabBarHandler=({animation:e,successHandler:t})=>{this.status=e?IS:RS,t({errMsg:"hideTabBar:ok"})},this.setTabBarStyleHandler=({color:e,selectedColor:t,backgroundColor:i,borderStyle:s,successHandler:r})=>{i&&(this.backgroundColor=i),s&&(this.borderStyle=s),e&&(this.color=e),t&&(this.selectedColor=t),r({errMsg:"setTabBarStyle:ok"})},this.setTabBarItemHandler=({index:e,iconPath:t,selectedIconPath:i,text:s,successHandler:r,errorHandler:n})=>{const o=[...this.list];e in o?(t&&(o[e].iconPath=t),i&&(o[e].selectedIconPath=i),s&&(o[e].text=s),r({errMsg:"setTabBarItem:ok"})):n({errMsg:"setTabBarItem:fail tabbar item not found"}),this.list=o},this.conf=void 0,this.list=void 0,this.borderStyle=void 0,this.backgroundColor=void 0,this.color=void 0,this.selectedColor=void 0,this.selectedIndex=-1,this.status=_S}componentWillLoad(){var e,t;const i=(null===(e=this.conf)||void 0===e?void 0:e.list)||[],s=(null===(t=this.conf)||void 0===t?void 0:t.customRoutes)||{};if("[object Array]"!==Object.prototype.toString.call(i)||i.length<2||i.length>5)throw new Error("tabBar \u914d\u7f6e\u9519\u8bef");this.homePage=Ls(this.conf.homePage);for(let r in s){const e=s[r];r=Ls(r),"string"===typeof e?this.customRoutes.push([r,Ls(e)]):(null===e||void 0===e?void 0:e.length)>0&&this.customRoutes.push(...e.map((e=>[r,Ls(e)])))}i.forEach((e=>{0!==e.pagePath.indexOf("/")&&(e.pagePath="/"+e.pagePath)})),this.list=i,this.borderStyle=this.conf.borderStyle,this.backgroundColor=this.conf.backgroundColor,this.color=this.conf.color,this.selectedColor=this.conf.selectedColor}getCurrentUrl(){const e=Ps(this.conf.mode,this.conf.basename);return decodeURI("/"===e?this.homePage:e)}bindEvent(){PL.eventCenter.on("__taroRouterChange",this.routerChangeHandler),PL.eventCenter.on("__taroSwitchTab",this.switchTabHandler),PL.eventCenter.on("__taroSetTabBarBadge",this.setTabBarBadgeHandler),PL.eventCenter.on("__taroRemoveTabBarBadge",this.removeTabBarBadgeHandler),PL.eventCenter.on("__taroShowTabBarRedDotHandler",this.showTabBarRedDotHandler),PL.eventCenter.on("__taroHideTabBarRedDotHandler",this.hideTabBarRedDotHandler),PL.eventCenter.on("__taroShowTabBar",this.showTabBarHandler),PL.eventCenter.on("__taroHideTabBar",this.hideTabBarHandler),PL.eventCenter.on("__taroSetTabBarStyle",this.setTabBarStyleHandler),PL.eventCenter.on("__taroSetTabBarItem",this.setTabBarItemHandler)}removeEvent(){PL.eventCenter.off("__taroRouterChange",this.routerChangeHandler),PL.eventCenter.off("__taroSwitchTab",this.switchTabHandler),PL.eventCenter.off("__taroSetTabBarBadge",this.setTabBarBadgeHandler),PL.eventCenter.off("__taroRemoveTabBarBadge",this.removeTabBarBadgeHandler),PL.eventCenter.off("__taroShowTabBarRedDotHandler",this.showTabBarRedDotHandler),PL.eventCenter.off("__taroHideTabBarRedDotHandler",this.hideTabBarRedDotHandler),PL.eventCenter.off("__taroShowTabBar",this.showTabBarHandler),PL.eventCenter.off("__taroHideTabBar",this.hideTabBarHandler),PL.eventCenter.off("__taroSetTabBarStyle",this.setTabBarStyleHandler),PL.eventCenter.off("__taroSetTabBarItem",this.setTabBarItemHandler)}componentDidLoad(){this.tabbarPos=this.tabbar.nextElementSibling?"top":"bottom",this.bindEvent(),this.routerChangeHandler()}disconnectedCallback(){this.removeEvent()}render(){const{tabbarPos:e="bottom"}=this,t=this.status,i=vg("weui-tabbar",{[`taro-tabbar__border-${this.borderStyle||"black"}`]:!0}),s=-1===this.selectedIndex||t===RS,r=t===IS;return wp(Tp,{class:vg(DS,`${DS}-${e}`,{[PS]:s,[MS]:r})},wp("div",{class:i,style:{backgroundColor:this.backgroundColor||"",height:"inherit"}},this.list.map(((e,t)=>{const i=this.selectedIndex===t;let s,r;return i?(s=this.selectedColor||"",r=e.selectedIconPath):(s=this.color||"",r=e.iconPath),wp(LS,{index:t,onSelect:this.switchTab.bind(this),isSelected:i,textColor:s,iconPath:r,pagePath:e.pagePath,text:e.text,badgeText:e.badgeText,showRedDot:e.showRedDot})}))))}get tabbar(){return this}static get style(){return CS}},[0,"taro-tabbar",{conf:[16],list:[32],borderStyle:[32],backgroundColor:[32],color:[32],selectedColor:[32],selectedIndex:[32],status:[32]}]);function NS(){if("undefined"===typeof customElements)return;const e=["taro-tabbar"];e.forEach((e=>{switch(e){case"taro-tabbar":customElements.get(e)||customElements.define(e,OS);break}}))}const FS=NS,BS=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("Tabs",this)}render(){return wp(Tp,null)}},[0,"taro-tabs-core"]);function $S(){if("undefined"===typeof customElements)return;const e=["taro-tabs-core"];e.forEach((e=>{switch(e){case"taro-tabs-core":customElements.get(e)||customElements.define(e,BS);break}}))}const US=$S,GS="taro-text-core{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline}taro-text-core[selectable=true],taro-text-core[user-select=true]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;display:inline-block}taro-text-core[space]{white-space:pre-wrap}taro-text-core[space=ensp]{word-spacing:.5em}taro-text-core[space=nbsp]{word-spacing:1em}taro-text-core[number-of-lines]{--line-clamp:2;word-wrap:break-word;text-overflow:ellipsis;-webkit-line-clamp:var(--line-clamp);-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}",HS=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.selectable=!1,this.userSelect=!1,this.space=void 0,this.numberOfLines=void 0}render(){const e={};return"number"===typeof this.numberOfLines&&(e["--line-clamp"]=this.numberOfLines),wp(Tp,{style:e},wp("slot",null))}static get style(){return GS}},[4,"taro-text-core",{selectable:[1028],userSelect:[1028,"user-select"],space:[1025],numberOfLines:[2,"number-of-lines"]}]);function jS(){if("undefined"===typeof customElements)return;const e=["taro-text-core"];e.forEach((e=>{switch(e){case"taro-text-core":customElements.get(e)||customElements.define(e,HS);break}}))}const zS=jS,VS="taro-textarea-core{width:300px;display:block}taro-textarea-core .auto-height{height:auto}.taro-textarea{height:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:auto;border:0;width:100%;line-height:1.5;display:block;position:relative}.taro-textarea:focus{outline:none}";function YS(e){return null!==e&&void 0!==e?e:""}const WS=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onInput=Rp(this,"input",7),this.onFocus=Rp(this,"focus",7),this.onBlur=Rp(this,"blur",7),this.onConfirm=Rp(this,"confirm",7),this.onChange=Rp(this,"change",7),this.onLineChange=Rp(this,"linechange",7),this.onKeyDown=Rp(this,"keydown",7),this.handleInput=e=>{e.stopPropagation(),this.handleLineChange();const t=e.target.value||"";this.value=t,this.onInput.emit({value:t,cursor:t.length})},this.handleFocus=e=>{e.stopPropagation(),this.onFocus.emit({value:e.target.value})},this.handleBlur=e=>{e.stopPropagation(),this.onBlur.emit({value:e.target.value})},this.handleChange=e=>{e.stopPropagation(),this.onChange.emit({value:e.target.value})},this.handleLineChange=()=>{const e=this.getNumberOfLines();e!==this.line&&(this.line=e,this.onLineChange.emit({height:this.textareaRef.clientHeight,lineCount:this.line}))},this.handleKeyDown=e=>{e.stopPropagation();const{value:t}=e.target,i=e.keyCode||e.code;this.onKeyDown.emit({value:t,cursor:t.length,keyCode:i}),13===i&&this.onConfirm.emit({value:t})},this.calculateContentHeight=(e,t)=>{let i=e.style.height,s=e.offsetHeight,r=e.scrollHeight,n=e.style.overflow,o=e.style.minHeight||null;if(!(s>=r))return r;if(e.style.minHeight=0,e.style.height=s+t+"px",e.style.overflow="hidden",r<e.scrollHeight){while(e.offsetHeight>=e.scrollHeight)e.style.height=(s-=t)+"px";while(e.offsetHeight<e.scrollHeight)e.style.height=s+++"px";return e.style.height=i,e.style.overflow=n,e.style.minHeight=o,s}},this.getNumberOfLines=()=>{const e=this.textareaRef,t=window.getComputedStyle?window.getComputedStyle(e):e.style,i=parseInt(t.lineHeight,10),s=this.calculateContentHeight(e,i),r=Math.floor(s/i);return r},this.value="",this.placeholder=void 0,this.disabled=!1,this.maxlength=140,this.autoFocus=!1,this.autoHeight=!1,this.name=void 0,this.nativeProps={},this.line=1}watchAutoFocus(e,t){var i;!t&&e&&(null===(i=this.textareaRef)||void 0===i||i.focus())}watchValue(e){const t=YS(e);this.textareaRef.value!==t&&(this.textareaRef.value=t)}focus(){return d(this,null,(function*(){this.textareaRef.focus()}))}render(){const{value:e,placeholder:t,disabled:i,maxlength:s,autoFocus:r,autoHeight:n,name:o,nativeProps:a,handleInput:l,handleFocus:c,handleBlur:d,handleChange:h}=this,u={};return n&&(u.rows=this.line),wp("textarea",Object.assign({ref:e=>{e&&(this.textareaRef=e,r&&e&&e.focus())},class:"taro-textarea "+(n?"auto-height":""),value:YS(e),placeholder:t,name:o,disabled:i,maxlength:s,autofocus:r,onInput:l,onFocus:c,onBlur:d,onChange:h,onKeyDown:this.handleKeyDown},a,u))}get el(){return this}static get watchers(){return{autoFocus:["watchAutoFocus"],value:["watchValue"]}}static get style(){return VS}},[0,"taro-textarea-core",{value:[1025],placeholder:[1],disabled:[4],maxlength:[2],autoFocus:[4,"focus"],autoHeight:[4,"auto-height"],name:[1],nativeProps:[16],line:[32],focus:[64]}]);function KS(){if("undefined"===typeof customElements)return;const e=["taro-textarea-core"];e.forEach((e=>{switch(e){case"taro-textarea-core":customElements.get(e)||customElements.define(e,WS);break}}))}const qS=KS,XS=e=>{if(!e)return"";const t=Math.round(e%60),i=Math.round((e-t)/60);return`${i<10?`0${i}`:i}:${t<10?`0${t}`:t}`},ZS=(e,t)=>Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),QS=e=>Math.max(-1,Math.min(e,1));let JS="default";const eA=function(){let e;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];var i=["webkitEnterFullscreen","webkitExitFullscreen","webkitCurrentFullScreenElement","webkitSupportsFullscreen","fullscreenchange","fullscreenerror"];let s=0;const r=t.length,n={};for(;s<r;s++)if(e=t[s],e&&e[1]in document){for(s=0;s<e.length;s++)n[t[0][s]]=e[s];return n}if(!n[t[0][0]])for(JS="iOS",s=0;s<i.length;s++)n[t[0][s]]=i[s];return n}(),tA=e=>/\.(m3u8)($|\?)/i.test(e),iA=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.visible=!1,this.isDraggingProgressBall=!1,this.percentage=0,this.progressDimensions={left:0,width:0},this.calcPercentage=e=>{let t=e-this.progressDimensions.left;return t=Math.max(t,0),t=Math.min(t,this.progressDimensions.width),t/this.progressDimensions.width},this.onDragProgressBallStart=()=>{this.isDraggingProgressBall=!0,this.hideControlsTimer&&clearTimeout(this.hideControlsTimer)},this.onClickProgress=e=>{e.stopPropagation();const t=this.calcPercentage(e.pageX);this.seekFunc(t*this.duration),this.toggleVisibility(!0)},this.controls=void 0,this.currentTime=void 0,this.duration=void 0,this.isPlaying=void 0,this.pauseFunc=void 0,this.playFunc=void 0,this.seekFunc=void 0,this.showPlayBtn=void 0,this.showProgress=void 0}onDocumentTouchMove(e){if(!this.isDraggingProgressBall)return;const t=e.touches[0].pageX;this.percentage=this.calcPercentage(t),this.setProgressBall(this.percentage),this.setCurrentTime(this.percentage*this.duration)}onDocumentTouchEnd(){this.isDraggingProgressBall&&(this.isDraggingProgressBall=!1,this.seekFunc(this.percentage*this.duration),this.toggleVisibility(!0))}setProgressBall(e){return d(this,null,(function*(){this.progressBallRef&&(this.progressBallRef.style.left=100*e+"%")}))}toggleVisibility(e){return d(this,null,(function*(){const t=void 0===e?!this.visible:e;t?(this.hideControlsTimer&&clearTimeout(this.hideControlsTimer),this.isPlaying&&(this.hideControlsTimer=setTimeout((()=>{this.toggleVisibility(!1)}),2e3)),this.el.style.visibility="visible"):this.el.style.visibility="hidden",this.visible=!!t}))}getIsDraggingProgressBall(){return d(this,null,(function*(){return this.isDraggingProgressBall}))}setCurrentTime(e){return d(this,null,(function*(){this.currentTimeRef.innerHTML=XS(e)}))}render(){const{controls:e,currentTime:t,duration:i,isPlaying:s,pauseFunc:r,playFunc:n,showPlayBtn:o,showProgress:a}=this,l=XS(i);let c;return c=o?wp("div",s?{class:"taro-video-control-button taro-video-control-button-pause",onClick:r}:{class:"taro-video-control-button taro-video-control-button-play",onClick:n}):null,wp(Tp,{class:"taro-video-bar taro-video-bar-full"},e&&wp("div",{class:"taro-video-controls"},c,a&&wp("div",{class:"taro-video-current-time",ref:e=>this.currentTimeRef=e},XS(t)),a&&wp("div",{class:"taro-video-progress-container",onClick:this.onClickProgress},wp("div",{class:"taro-video-progress",ref:e=>{if(!e)return;const t=e.getBoundingClientRect();this.progressDimensions.left=t.left,this.progressDimensions.width=t.width}},wp("div",{class:"taro-video-progress-buffered",style:{width:"100%"}}),wp("div",{class:"taro-video-ball",ref:e=>this.progressBallRef=e,onTouchStart:this.onDragProgressBallStart,style:{left:(l?this.currentTime/i*100:0)+"%"}},wp("div",{class:"taro-video-inner"})))),a&&wp("div",{class:"taro-video-duration"},l)),wp("slot",null))}get el(){return this}},[4,"taro-video-control",{controls:[4],currentTime:[2,"current-time"],duration:[2],isPlaying:[4,"is-playing"],pauseFunc:[16],playFunc:[16],seekFunc:[16],showPlayBtn:[4,"show-play-btn"],showProgress:[4,"show-progress"],setProgressBall:[64],toggleVisibility:[64],getIsDraggingProgressBall:[64],setCurrentTime:[64]},[[5,"touchmove","onDocumentTouchMove"],[5,"touchend","onDocumentTouchEnd"],[5,"touchcancel","onDocumentTouchEnd"]]]);function sA(){if("undefined"===typeof customElements)return;const e=["taro-video-control"];e.forEach((e=>{switch(e){case"taro-video-control":customElements.get(e)||customElements.define(e,iA);break}}))}const rA=sA,nA=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.list=[],this.danmuElList=[],this.currentTime=0,this.enable=!1,this.danmuList=[]}ensureProperties(e){const t=Object.assign({},e);return"time"in e||(t.time=this.currentTime),t.key=Math.random(),t.bottom=90*Math.random()+5+"%",t}sendDanmu(){return d(this,arguments,(function*(e=[]){if(Array.isArray(e))this.list=[...this.list,...e.map((e=>this.ensureProperties(e)))];else{const t=e;this.list=[...this.list,Object.assign({},this.ensureProperties(t))]}}))}tick(e){return d(this,null,(function*(){if(this.currentTime=e,!this.enable)return;const t=this.list,i=t.filter((({time:t})=>e-t<4&&e>t));let s=!1;const r=this.danmuList;s=i.length!==r.length||i.some((({key:e})=>r.every((t=>e!==t.key)))),s&&(this.danmuList=i)}))}componentDidUpdate(){requestAnimationFrame((()=>{setTimeout((()=>{const e=this.danmuElList.splice(0);e.forEach((e=>{e.style.left="0",e.style.webkitTransform="translateX(-100%)",e.style.transform="translateX(-100%)"}))}))}))}render(){return this.enable?wp(Tp,{class:"taro-video-danmu"},this.danmuList.map((({text:e,color:t,bottom:i,key:s})=>wp("p",{class:"taro-video-danmu-item",key:s,style:{color:t,bottom:i},ref:e=>{e&&this.danmuElList.push(e)}},e)))):""}},[0,"taro-video-danmu",{enable:[4],danmuList:[32],sendDanmu:[64],tick:[64]}]);function oA(){if("undefined"===typeof customElements)return;const e=["taro-video-danmu"];e.forEach((e=>{switch(e){case"taro-video-danmu":customElements.get(e)||customElements.define(e,nA);break}}))}const aA='.taro-video{width:100%;height:225px;line-height:0;display:inline-block;position:relative;overflow:hidden}.taro-video[hidden]{display:none}.taro-video-container{-o-object-position:inherit;object-position:inherit;background-color:#000;width:100%;height:100%;display:inline-block;position:absolute;top:0;left:0}.taro-video-container.taro-video-type-fullscreen{z-index:999;position:fixed;inset:0}.taro-video-container.taro-video-type-fullscreen.taro-video-type-rotate-left{-webkit-transform:translate(-50%,-50%)rotate(-90deg);transform:translate(-50%,-50%)rotate(-90deg)}.taro-video-container.taro-video-type-fullscreen.taro-video-type-rotate-right{-webkit-transform:translate(-50%,-50%)rotate(90deg);transform:translate(-50%,-50%)rotate(90deg)}.taro-video-video{-o-object-position:inherit;object-position:inherit;width:100%;height:100%;display:block}.taro-video-cover{z-index:1;background-color:rgba(1,1,1,.5);-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;width:100%;display:-ms-flexbox;display:flex;position:absolute;top:0;bottom:0;left:0}.taro-video-cover-play-button{background-position:50%;background-repeat:no-repeat;background-size:50%;width:40px;height:40px}.taro-video-cover-duration{color:#fff;margin-top:10px;font-size:16px;line-height:1}.taro-video-bar{visibility:hidden;z-index:1;background-color:rgba(0,0,0,.5);-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:44px;padding:0 10px;display:-ms-flexbox;display:flex;position:absolute;bottom:0;right:0;overflow:hidden}.taro-video-bar.taro-video-bar-full{left:0}.taro-video-controls{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;margin:0 8.5px;display:-ms-flexbox;display:flex}.taro-video-control-button{-webkit-box-sizing:content-box;box-sizing:content-box;width:13px;height:15px;margin-left:-8.5px;padding:14.5px 12.5px}.taro-video-control-button:after{content:"";background-position:50%;background-repeat:no-repeat;background-size:100%;width:100%;height:100%;display:block}.taro-video-control-button.taro-video-control-button-play:after,.taro-video-cover-play-button{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAeCAYAAAAy2w7YAAAAAXNSR0IArs4c6QAAAWhJREFUSA1j+P///0cgBoHjQGzCQCsAtgJB/AMy5wCxGNXtQ9iBwvoA5BUCMQvVLEQxHpNzDSjkRhXLMM3GKrIeKKpEkYVYjcUu+AMo3ALE3GRZiN1MvKKPgbIRJFuG10j8koeA0gZEW4jfLIKyf4EqpgOxMEELCRpFnIJ3QGU5QMyM00LizCFa1SWgSkeslhFtBGkKVwGVy6FYSJp+klR/A6quB2JOkIWMIK0oNlOf8xBoZDE9LAI7nYn6HsBq4l96WHQEaLUpAyiOaASeAM2NgvuPBpaACt82IEYtfKls0UagecpwXyAzqGTRdaA57sjmYrAptAjUsCkGYlYMg9EFyLQI1IiZB8Ti6Obh5JNh0QmgHlOcBuKSIMGi50C18UDMiMssvOJEWPQLqKYbiHnxGkRIkoBF24DyaoTMIEoeh0W3geI+RBlArCI0iz4D+RVAzEasfqLVAQ19AcSg5LoYiKWI1kiiQgCMBLnEEcfDSgAAAABJRU5ErkJggg==)}.taro-video-control-button.taro-video-control-button-pause:after{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAAAXNSR0IArs4c6QAAAFlJREFUSA3tksEKACAIQ7X//5zq98wOgQayum8QaGweHhMzG/6OujzKAymn+0LMqivu1XznWmX8/echTIyMyAgTwA72iIwwAexgj8gIE8CO3aMRbDPMaEy5BRGaKcZv8YxRAAAAAElFTkSuQmCC)}.taro-video-current-time,.taro-video-duration{color:#cbcbcb;height:14.5px;margin-top:15px;margin-bottom:14.5px;font-size:12px;line-height:14.5px}.taro-video-progress-container{-webkit-box-flex:2;-ms-flex-positive:2;flex-grow:2;position:relative}.taro-video-progress{background-color:rgba(255,255,255,.4);height:2px;margin:21px 12px;position:relative}.taro-video-progress-buffered{background-color:rgba(255,255,255,.8);width:0;height:100%;-webkit-transition:width .1s;transition:width .1s;position:absolute;top:0;left:0}.taro-video-ball{-webkit-box-sizing:content-box;box-sizing:content-box;width:16px;height:16px;margin-left:-22px;padding:14px;position:absolute;top:-21px;left:0}.taro-video-inner{background-color:#fff;border-radius:50%;width:100%;height:100%}.taro-video-danmu-button{color:#fff;white-space:nowrap;border:1px solid #fff;border-radius:5px;margin:0 8.5px;padding:2px 10px;font-size:13px;line-height:1}.taro-video-danmu-button.taro-video-danmu-button-active{color:#48c23d;border-color:#48c23d}.taro-video-fullscreen,.taro-video-mute{-webkit-box-sizing:content-box;box-sizing:content-box;background-position:50%;background-repeat:no-repeat;background-size:50%;width:17px;height:17px;padding:8.5px}.taro-video-fullscreen{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAhUlEQVRYR+2WSwrAMAhEnZO3PfmULLooGEFTiIXJ2s/kRY2wzQeb85sE9CRA8jSzY1YfAFzhJBnU1AVgxH2dSiArCnD9QgGzRNnOech48SRABHoSyFb5in3PSbhyo6yvCPQkEM3u7BsPe/0FIvBfAh/vhKmVbO9SWun1qk/PSVi9TcVPBG6R1YIhgWwNpQAAAABJRU5ErkJggg==)}.taro-video-fullscreen.taro-video-type-fullscreen{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABPUlEQVRYR+2Xu0pDURBF1/ZLxNcHKNiIlfhA7C0UBSEE8RNEBNFPUEQEEbGxFiSSSrCwEHsf5E/ccsSUuWfUhKQ40947+y42Z8+ZK/pcinzf9hhwD1xJ2q/qsb0JHAOzkl5y+lGAGnCWICQtZgAS6DxQk3TeLYA6cAo0JSXxjmW7CcwBdUkJurKiDhSA4kBvHbA9CqwBQx2O7BSw8ssU3ALPFRF4knT3nQLbr8B4LjLBOdAAFgJaLUkjbYC9n+zm+i4kXWbmwCqwnRMCHiXthuZAQOzPrxSA4kBxYDAcsH0EzATCfCLpJjOINoCtgFZabg7bk7AFDAeaGpKWgitZTu5N0kQbYBmYrujo9mX0CVxL+gidAdu9vY5zXhWA4sAgOND3X7NJ4AHYCaxkB8B62gslvecSFpoDOZH/PP8Cnt7hIaM5xCEAAAAASUVORK5CYII=)}.taro-video-mute{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGAGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTktMDQtMTFUMTA6MTg6MjArMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTA0LTExVDEwOjIyOjIyKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA0LTExVDEwOjIyOjIyKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk3YmE4Yjg0LTFhNTYtNGM1MS04NDVkLTNiZmYyMGI0ZDc0ZiIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjg1NGQ3MjlkLWUwNjctZjU0OC1hMTlhLTBlZjQ4OGRkYjJiOSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjA1ODY3ZDFlLWQ3NGEtNDgyNC04MDU3LTYzYmRmMTdjODk5ZSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDU4NjdkMWUtZDc0YS00ODI0LTgwNTctNjNiZGYxN2M4OTllIiBzdEV2dDp3aGVuPSIyMDE5LTA0LTExVDEwOjE4OjIwKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTdiYThiODQtMWE1Ni00YzUxLTg0NWQtM2JmZjIwYjRkNzRmIiBzdEV2dDp3aGVuPSIyMDE5LTA0LTExVDEwOjIyOjIyKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz459+FoAAABqElEQVRYhc2XPWsVQRSGnxPjF4oGRfxoRQKGWCU2Ft7CykrQWosEyf/If0hhIPgHDEmbNJZqCFxiQEgTUGxsBUVEHgvnyrjZZJO92V1fGIaZnTPvszPszNlQ6VIjnbr/DwCoDLMNak/dUVfUK0f2rQugnlcX/FevWgFQH6gf3autRgHUC+piiXHzAOmtPx9gXgug8itQx9SXwDpw47AGKXZWvXvQmNFCwE3gCXA2dY0Az4GrRzHONA9cU/vAbERsllEOyh31e8USV2mrMPdG9uyn+rDom2/BHHCm5puWKiKmgdtAnz+rvaxO5mNygEvHaZ5BfADuARvAaWBpP4DGFBHfgBngFzClTrUKkCDeA+9S837rAEnbqb7VFcCpVJ/oCmCw959aB1AfAROpudYqgDoOLKRmPyLelAF8bcD4pPoMeAtcB34AT4uDBqXXwFG8XXUU/72MIuK1OgE8Bs6l7mEvo8up7lN1Ge0n9aK6VHMFZvJTr9S3CiALaCQhqZOSvegMIAvu2UVSWpigLC1fbQ0gm6in7qpfLCQbhwGIYcyPQ53/G3YO8BtUtd35bvKcVwAAAABJRU5ErkJggg==)}.taro-video-mute.taro-video-type-mute{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAgCAYAAAB3j6rJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGAGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTktMDQtMTFUMTA6MTk6MDMrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTA0LTExVDEwOjIyOjMzKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA0LTExVDEwOjIyOjMzKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAzYjJmNjE2LTZmZTUtNDJjNC1iNTgwLTczNzZjZjI2NzdmNSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjYzZjQ2NTYzLWE0ZjktOGQ0Mi1hM2FhLTY3ODJhNDBhYWNjMSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjIyYWNjMWFlLTg4ZmMtNDBlZi1iMWM1LTNmODgwY2QzYWI2MiI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MjJhY2MxYWUtODhmYy00MGVmLWIxYzUtM2Y4ODBjZDNhYjYyIiBzdEV2dDp3aGVuPSIyMDE5LTA0LTExVDEwOjE5OjAzKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDNiMmY2MTYtNmZlNS00MmM0LWI1ODAtNzM3NmNmMjY3N2Y1IiBzdEV2dDp3aGVuPSIyMDE5LTA0LTExVDEwOjIyOjMzKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5PmxYVAAACLklEQVRYhc2XP2sVQRRHz40hKoqaQgVBCy1EozFlGiVFxMLGh4piYWEh+hkEP4YKAVFEEFTyughaCH6DqIVpAhYWEgIxoJE8cywyi5tNHu/tJmvyg2WZO3dmzt47/zZUtoJ6Nhsg09YDiYhKDzACTAFNYH9lEpUq80TdrT5wpV5n/ZV9KoGoo+pXV2uyKkipOaLuUceAt8DhUvQd1FsCYhR4ChzaSIBMHSOi7lOfsByFWiCgEBH1GHAF2JlMPcBt4GC3HUYEaj9wF3gVEVPtfNVTwAXgWX7CDKq/1piAZTSZBmim8qJ6sQ3EgDqb/L7kU3MH2NHtl3dQX3r3Ak21UYAYAj4A/cl0JB+RF+uMRj4iQ+p8zt7KYFLdXKHuRi0gacBhV6a6pd5bA6KRNagFJPU9qv5u47toLmW1HnoR8Q5oAK1CVQu4FBHj/wUkaXsb+4pzpVaQFPqXrN7Be4Fx9VztIOr1BLEtmX4A94E/qdwHTKjDWYM6lu81dSlnn3V570BtuLxaMs2rZ/IgYxsBovaoPwsQA4VoFWEm8ql5DiysNyURsQTMpOIMcDYiPhd8xoGr/FtNC2G6FKXD6ihwGdiVHMoeeh8jYlA9ANwE3kTEp3bO6vE03qOONzR1r/q4RGrquaFFxFxE3ALOA9+6jExpdb180y55AhirhaRTatq0GXEzL8+ZIuI9cBJ4WKiartJf9nWV/mty7UfUafW7erpqRGI9EBuprffvu9n6C1KOmsqwI5A1AAAAAElFTkSuQmCC)}.taro-video-danmu{width:100%;margin-top:14px;margin-bottom:44px;font-size:14px;line-height:14px;position:absolute;top:0;bottom:0;left:0;overflow:visible}.taro-video-danmu-item{color:#fff;white-space:nowrap;line-height:1;-webkit-transition-property:left,-webkit-transform;transition-property:left,-webkit-transform;transition-property:left,transform;transition-property:left,transform,-webkit-transform;-webkit-transition-duration:3s;transition-duration:3s;-webkit-transition-timing-function:linear;transition-timing-function:linear;position:absolute;left:100%;-webkit-transform:translate(0);transform:translate(0)}.taro-video-toast{visibility:hidden;pointer-events:none;color:#000;background-color:rgba(255,255,255,.8);border-radius:5px;display:block;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.taro-video-toast.taro-video-toast-volume{width:100px;height:100px;display:block}.taro-video-toast-volume .taro-video-toast-title{text-align:center;width:100%;margin-top:10px;font-size:12px;line-height:16px;display:block}.taro-video-toast-volume .taro-video-toast-icon{fill:#000;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFhklEQVR4Xu2aeaxfQxTHP1VBES0NIQitWtpaaxeCUkQtaYVa0tiClAq1ExIiQTVppaWxt8RWSa2tWkJQRGgtQaSIpUKEpG0ssbbk28yV2+mZO/e9e3vvu/e98897mZnfzPl+75mZs0wvurn06ub46SGgxwLqZaA3sB/wO/A+8G/V6tS5BU4BJgJbO9DvAMOB36okoQ4CNgAeBEYbQK8Bbm4zAdsBc4EdAyA/APZoKwHHAA8DG2UA/AnYrG0ErAVcD1yXA9gfQJ8c40obsqbPgH7AY8CROTVuFQFD3X7fJid4DWsNAWOAGZ0w58YTsDZwKzChA189PbTRBGwKzAYO6iT4srbAMHfTfAksjulS1iG4JzAH2Dy2YKS/qAVcCdzi1vgZOBZ4PWvNGAG6wgYCW0IwctzNmf06BcEXtYABwOeA4otEfgEOdnGGqV6IAAUopwM6zDYuAVjeKYpYwCjgCWOhH513+b2lhE+Avrj89NPyalzyuCIE6EN9BfQ1dHoPOAD40+9LE6D/5aoqSqtLsgiQC60DTiHzfGCFoaSsQAexZdlTgEuyCDgLuK8u5G7dEAHyKN8CBrtxLwDHAX8Z+l4N3GS0L3db4aN0X5opmc+2XZQAfb2LPd2eciG1lUSRJZ9qYHkZONwiYAjwSc3gs24BXWWWfzEVuMjQez13HljX8v7A28lvEgsInaBVcxLaAvr6sgJLtBWeNTrOB+4w2p8DRvoEnAPcXTVaY70QAbrbXwIONX7zBSAL/tvrk1+iviTllnRry2irr/QSEws4D7izCxMg1XQLLAQGGXpeCkw22kOWI49RMUujCJC+uwAfGtfcImAng4AtAMsBeg04pIkESOfbgQsMsNoGnxrtSrfv7rXrSlwXWN6kLZBgEBiB8iWUUZZPIN/AF1nMoiYSICDfAlt5iB4CxhpAzwXuMtqPBuY1lYB5wFEeqFeAwwyguvIUqvuiQO/xphJwP3Cmhyh0EKrOoGDIF7n+M5pKwEwXrqdBCaQSM77Ig7SSIicDs5pKwIvACA+pzFwZIF9OlKm36QyQV7jEqDDJk5VD58uFgGIGX1Se+6yJFqAKsqI6X84GdDb4Mh0Y5zUqjFYFakUTCXja5QLSmBQHbAL8ahAgT1AeYVreSKLLphGwF/CuAfLJQLldGSTFD75c5d4mNCoWyAqG9gYWGED1AOMKo12ZbiWA/idA++deY2DVTZ0Jh5UJPsFQtD/wDaAHGWl5EzgwaUi2gK4UXS11S0cTIjrMFBtYQdAk4DID0BnAAz4B6wNLgTKKG0VIDBHwqitwpOcW+OOB540FdeipNKbUWFrUtn06o5xOij4KyDuqU0IE3Obl/rLA63pTzm9XA8jKACjdniZAaSKFmUpB1yUhAlTsUEpMh913wEkuTe7rKTzPAHqO44vpKPkFhH3cWWBVV6ogJVYZUgz/tXtIYelzI3Ct0fExIGx6j7iKWBUUveyYBehv1RIjIEsfqziq8Xp4pSBJOYTVJFQcVY3wCFeKUjVGyYfQWB00+5bEVBECrNS+qsOKBpVHNCVWHs+LS7H5PV5pOu9v0+OKEOAXR39w1e1C7wM6AkJ1eLmkRcrpRQiQrqobXO5S3vL3/4kBKMsCknV0k+iasVLUMV3UX5SAPGtED8EOT+L9YENnCasUIXNO2goChFWHqAIRyxXN4qI1BCQg9dJESYq8LnbrCBAR8t50Lig6i0krCRBoVWhVlt45wkBrCRBuRZyPuAguxIPe9lXqhpd9DcZMXOvdkPF0Xu/8dohNUmZ/1QQkuitXr+d4fryuFx3jywQYm6suAqSX8vLTXKJDt4QqO6rtLYspXWZ/nQQkOJTAUJZGIav19q9MvKvN1RUIWKMAY5P3EBBjqO393d4C/gMVHwRQlpx21QAAAABJRU5ErkJggg==);background-position:50%;background-repeat:no-repeat;background-size:50%;width:50%;height:50%;margin-left:25%;display:block}.taro-video-toast-volume .taro-video-toast-value{width:80px;height:5px;margin-top:5px;margin-left:10px}.taro-video-toast-volume .taro-video-toast-value>.taro-video-toast-value-content{overflow:hidden}.taro-video-toast-volume-grids{width:80px;height:5px}.taro-video-toast-volume-grids-item{float:left;background-color:#000;width:7.1px;height:5px}.taro-video-toast-volume-grids-item:not(:first-child){margin-left:1px}.taro-video-toast.taro-video-toast-progress{color:#fff;background-color:rgba(0,0,0,.8);padding:6px;font-size:14px;line-height:18px}',lA=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onPlay=Rp(this,"play",7),this.onPause=Rp(this,"pause",7),this.onEnded=Rp(this,"ended",7),this.onTimeUpdate=Rp(this,"timeupdate",7),this.onError=Rp(this,"error",7),this.onFullScreenChange=Rp(this,"fullscreenchange",7),this.onProgress=Rp(this,"progress",7),this.onLoadedMetaData=Rp(this,"loadedmetadata",7),this.currentTime=0,this.isDraggingProgress=!1,this.gestureType="none",this.analyzeGesture=e=>{var t;const i={type:"none"},s=e.touches[0].screenX,r=e.touches[0].screenY,n=s-this.lastTouchScreenX,o=r-this.lastTouchScreenY,a=this.isFullScreen?this.vslideGestureInFullscreen:this.vslideGesture;if("none"===this.gestureType){const e=ZS(n,o);if(e<10)return i;if(Math.abs(o)>=Math.abs(n)){if(!a)return i;this.gestureType="adjustVolume",this.lastVolume=this.videoRef.volume}else if(Math.abs(o)<Math.abs(n)){if(!this.enableProgressGesture)return i;this.gestureType="adjustProgress",this.lastPercentage=this.currentTime/(null!==(t=this.duration)&&void 0!==t?t:this._duration)}}return i.type=this.gestureType,i.dataX=QS(n/200),i.dataY=QS(o/200),i},this.loadNativePlayer=()=>{var e,t;this.videoRef&&(this.videoRef.src=this.src,null===(t=(e=this.videoRef).load)||void 0===t||t.call(e))},this.init=()=>{const{src:e,videoRef:t}=this;tA(e)?f((()=>Promise.resolve().then((()=>O$))),void 0,import.meta.url).then((i=>{const s=i.default;this.HLS=s,s.isSupported()?(this.hls&&this.hls.destroy(),this.hls=new s,this.hls.loadSource(e),this.hls.attachMedia(t),this.hls.on(s.Events.MANIFEST_PARSED,(()=>{this.autoplay&&this.play()})),this.hls.on(s.Events.ERROR,((e,t)=>{this.handleError(t)}))):t.canPlayType("application/vnd.apple.mpegurl")?this.loadNativePlayer():console.error("\u8be5\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 HLS \u64ad\u653e")})):this.loadNativePlayer()},this.handlePlay=()=>{this.isPlaying=!0,this.isFirst=!1,this.controlsRef.toggleVisibility(!0),this.onPlay.emit()},this.handlePause=()=>{this.isPlaying=!1,this.controlsRef.toggleVisibility(!0),this.onPause.emit()},this.handleEnded=()=>{this.isFirst=!0,this.pause(),this.controlsRef.toggleVisibility(),this.onEnded.emit()},this.handleTimeUpdate=$v((e=>d(this,null,(function*(){var t,i;this.currentTime=this.videoRef.currentTime;const s=this.duration||this._duration,r=yield this.controlsRef.getIsDraggingProgressBall();this.controls&&this.showProgress&&(r||this.isDraggingProgress||(this.controlsRef.setProgressBall(this.currentTime/s),this.controlsRef.setCurrentTime(this.currentTime))),this.danmuRef.tick(this.currentTime),this.onTimeUpdate.emit({duration:null===(t=e.target)||void 0===t?void 0:t.duration,currentTime:null===(i=e.target)||void 0===i?void 0:i.currentTime}),this.duration&&this.currentTime>=this.duration&&(this.seek(0),this.handleEnded())}))),250),this.handleError=e=>{var t,i;if(this.hls)switch(e.type){case this.HLS.ErrorTypes.NETWORK_ERROR:this.onError.emit({errMsg:e.response}),this.hls.startLoad();break;case this.HLS.ErrorTypes.MEDIA_ERROR:this.onError.emit({errMsg:e.reason||"\u5a92\u4f53\u9519\u8bef,\u8bf7\u91cd\u8bd5"}),this.hls.recoverMediaError();break}else this.onError.emit({errMsg:null===(i=null===(t=e.target)||void 0===t?void 0:t.error)||void 0===i?void 0:i.message})},this.handleDurationChange=()=>{this._duration=this.videoRef.duration},this.handleProgress=()=>{this.onProgress.emit()},this.handleLoadedMetaData=e=>{const t=e.target;this.onLoadedMetaData.emit({width:t.videoWidth,height:t.videoHeight,duration:t.duration})},this._play=()=>this.videoRef.play(),this._pause=()=>this.videoRef.pause(),this._stop=()=>{this.videoRef.pause(),this._seek(0)},this._seek=e=>{this.videoRef.currentTime=e},this.onTouchStartContainer=e=>{this.lastTouchScreenX=e.touches[0].screenX,this.lastTouchScreenY=e.touches[0].screenY},this.onClickContainer=()=>{if(this.enablePlayGesture){const e=Date.now();e-this.lastClickedTime<300&&(this.isPlaying?this.pause():this.play()),this.lastClickedTime=e}this.controlsRef.toggleVisibility()},this.onClickFullScreenBtn=e=>{e.stopPropagation(),this.toggleFullScreen()},this.handleFullScreenChange=e=>{const t=(new Date).getTime();!e.detail&&this.isFullScreen&&!document[eA.fullscreenElement]&&t-this.fullScreenTimestamp>100&&this.toggleFullScreen(!1,!0)},this.toggleFullScreen=(e=!this.isFullScreen,t=!1)=>{this.isFullScreen=e,this.controlsRef.toggleVisibility(!0),this.fullScreenTimestamp=(new Date).getTime(),this.onFullScreenChange.emit({fullScreen:this.isFullScreen,direction:"vertical"}),this.isFullScreen&&!document[eA.fullscreenElement]?setTimeout((()=>{this.videoRef[eA.requestFullscreen]({navigationUI:"auto"}),PL.eventCenter.trigger("__taroEnterFullScreen",{})}),0):(t||document[eA.exitFullscreen](),PL.eventCenter.trigger("__taroExitFullScreen",{}))},this.toggleMute=e=>{e.stopPropagation(),this.videoRef.muted=!this.isMute,this.controlsRef.toggleVisibility(!0),this.isMute=!this.isMute},this.toggleDanmu=e=>{e.stopPropagation(),this.controlsRef.toggleVisibility(!0),this._enableDanmu=!this._enableDanmu},this.src=void 0,this.duration=void 0,this.controls=!0,this.autoplay=!1,this.loop=!1,this.muted=!1,this.initialTime=0,this.poster=void 0,this.objectFit="contain",this.showProgress=!0,this.showFullscreenBtn=!0,this.showPlayBtn=!0,this.showCenterPlayBtn=!0,this.showMuteBtn=!1,this.danmuList=void 0,this.danmuBtn=!1,this.enableDanmu=!1,this.enablePlayGesture=!1,this.enableProgressGesture=!0,this.vslideGesture=!1,this.vslideGestureInFullscreen=!0,this.nativeProps={},this._duration=void 0,this._enableDanmu=!1,this.isPlaying=!1,this.isFirst=!0,this.isFullScreen=!1,this.fullScreenTimestamp=(new Date).getTime(),this.isMute=!1}componentWillLoad(){this._enableDanmu=this.enableDanmu,this.isMute=this.muted}componentDidLoad(){var e,t;this.init(),this.initialTime&&(this.videoRef.currentTime=this.initialTime),null===(t=(e=this.danmuRef).sendDanmu)||void 0===t||t.call(e,this.danmuList),document.addEventListener&&document.addEventListener(eA.fullscreenchange,this.handleFullScreenChange),this.videoRef&&"iOS"===JS&&this.videoRef.addEventListener("webkitendfullscreen",this.handleFullScreenChange)}componentDidRender(){}disconnectedCallback(){document.removeEventListener&&document.removeEventListener(eA.fullscreenchange,this.handleFullScreenChange),this.videoRef&&"iOS"===JS&&this.videoRef.removeEventListener("webkitendfullscreen",this.handleFullScreenChange)}watchEnableDanmu(e){this._enableDanmu=e}watchSrc(){this.init()}onDocumentTouchMove(e){return d(this,null,(function*(){if(void 0===this.lastTouchScreenX||void 0===this.lastTouchScreenY)return;if(yield this.controlsRef.getIsDraggingProgressBall())return;const t=this.analyzeGesture(e);if("adjustVolume"===t.type){this.toastVolumeRef.style.visibility="visible";const e=Math.max(Math.min(this.lastVolume-t.dataY,1),0);this.videoRef.volume=e,this.toastVolumeBarRef.style.width=100*e+"%"}else if("adjustProgress"===t.type){this.isDraggingProgress=!0,this.nextPercentage=Math.max(Math.min(this.lastPercentage+(t.dataX||0),1),0),this.controls&&this.showProgress&&(this.controlsRef.setProgressBall(this.nextPercentage),this.controlsRef.toggleVisibility(!0));const e=this.duration||this._duration;this.toastProgressTitleRef.innerHTML=`${XS(this.nextPercentage*e)} / ${XS(e)}`,this.toastProgressRef.style.visibility="visible"}}))}onDocumentTouchEnd(){var e;"adjustVolume"===this.gestureType?this.toastVolumeRef.style.visibility="hidden":"adjustProgress"===this.gestureType&&(this.toastProgressRef.style.visibility="hidden"),this.isDraggingProgress&&(this.isDraggingProgress=!1,this.seek(this.nextPercentage*(null!==(e=this.duration)&&void 0!==e?e:this._duration))),this.gestureType="none",this.lastTouchScreenX=void 0,this.lastTouchScreenY=void 0}getHlsObject(){return d(this,null,(function*(){return this.hls}))}play(){return d(this,null,(function*(){this._play()}))}pause(){return d(this,null,(function*(){this._pause()}))}stop(){return d(this,null,(function*(){this._stop()}))}seek(e){return d(this,null,(function*(){this._seek(e)}))}requestFullScreen(){return d(this,null,(function*(){this.toggleFullScreen(!0)}))}exitFullScreen(){return d(this,null,(function*(){this.toggleFullScreen(!1)}))}render(){const{controls:e,autoplay:t,loop:i,muted:s,poster:r,objectFit:n,isFirst:o,isMute:a,isFullScreen:l,showCenterPlayBtn:c,isPlaying:d,_enableDanmu:h,showMuteBtn:u,danmuBtn:p,showFullscreenBtn:f,nativeProps:g}=this,m=this.duration||this._duration,v=XS(m);return wp(Tp,{class:vg("taro-video-container",{"taro-video-type-fullscreen":l}),onTouchStart:this.onTouchStartContainer,onClick:this.onClickContainer},wp("video",Object.assign({class:"taro-video-video",style:{"object-fit":n},ref:e=>{e&&(this.videoRef=e)},autoplay:t,loop:i,muted:s,poster:e?r:void 0,playsinline:!0,"webkit-playsinline":!0,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onTimeUpdate:this.handleTimeUpdate,onError:this.handleError,onDurationChange:this.handleDurationChange,onProgress:this.handleProgress,onLoadedMetaData:this.handleLoadedMetaData},g),"\u6682\u65f6\u4e0d\u652f\u6301\u64ad\u653e\u8be5\u89c6\u9891"),wp("taro-video-danmu",{ref:e=>{e&&(this.danmuRef=e)},enable:h}),o&&c&&!d&&wp("div",{class:"taro-video-cover"},wp("div",{class:"taro-video-cover-play-button",onClick:()=>this.play()}),wp("p",{class:"taro-video-cover-duration"},v)),wp("taro-video-control",{ref:e=>{e&&(this.controlsRef=e)},controls:e,currentTime:this.currentTime,duration:m,isPlaying:this.isPlaying,pauseFunc:this._pause,playFunc:this._play,seekFunc:this._seek,showPlayBtn:this.showPlayBtn,showProgress:this.showProgress},u&&wp("div",{class:vg("taro-video-mute",{"taro-video-type-mute":a}),onClick:this.toggleMute}),p&&wp("div",{class:vg("taro-video-danmu-button",{"taro-video-danmu-button-active":h}),onClick:this.toggleDanmu},"\u5f39\u5e55"),f&&wp("div",{class:vg("taro-video-fullscreen",{"taro-video-type-fullscreen":l}),onClick:this.onClickFullScreenBtn})),wp("div",{class:"taro-video-toast taro-video-toast-volume",ref:e=>{e&&(this.toastVolumeRef=e)}},wp("div",{class:"taro-video-toast-title"},"\u97f3\u91cf"),wp("div",{class:"taro-video-toast-icon"}),wp("div",{class:"taro-video-toast-value"},wp("div",{class:"taro-video-toast-value-content",ref:e=>{e&&(this.toastVolumeBarRef=e)}},wp("div",{class:"taro-video-toast-volume-grids"},Array(10).fill(1).map((()=>wp("div",{class:"taro-video-toast-volume-grids-item"}))))))),wp("div",{class:"taro-video-toast taro-video-toast-progress",ref:e=>{e&&(this.toastProgressRef=e)}},wp("div",{class:"taro-video-toast-title",ref:e=>{e&&(this.toastProgressTitleRef=e)}})))}get el(){return this}static get watchers(){return{enableDanmu:["watchEnableDanmu"],src:["watchSrc"]}}static get style(){return aA}},[0,"taro-video-core",{src:[1],duration:[2],controls:[4],autoplay:[4],loop:[4],muted:[4],initialTime:[2,"initial-time"],poster:[1],objectFit:[1,"object-fit"],showProgress:[4,"show-progress"],showFullscreenBtn:[4,"show-fullscreen-btn"],showPlayBtn:[4,"show-play-btn"],showCenterPlayBtn:[4,"show-center-play-btn"],showMuteBtn:[4,"show-mute-btn"],danmuList:[16],danmuBtn:[4,"danmu-btn"],enableDanmu:[4,"enable-danmu"],enablePlayGesture:[4,"enable-play-gesture"],enableProgressGesture:[4,"enable-progress-gesture"],vslideGesture:[4,"vslide-gesture"],vslideGestureInFullscreen:[4,"vslide-gesture-in-fullscreen"],nativeProps:[16],_duration:[32],_enableDanmu:[32],isPlaying:[32],isFirst:[32],isFullScreen:[32],fullScreenTimestamp:[32],isMute:[32],getHlsObject:[64],play:[64],pause:[64],stop:[64],seek:[64],requestFullScreen:[64],exitFullScreen:[64]},[[5,"touchmove","onDocumentTouchMove"],[5,"touchend","onDocumentTouchEnd"],[5,"touchcancel","onDocumentTouchEnd"]]]);function cA(){if("undefined"===typeof customElements)return;const e=["taro-video-core","taro-video-control","taro-video-danmu"];e.forEach((e=>{switch(e){case"taro-video-core":customElements.get(e)||customElements.define(e,lA);break;case"taro-video-control":customElements.get(e)||sA();break;case"taro-video-danmu":customElements.get(e)||oA();break}}))}const dA=cA,hA=oA,uA="taro-view-core{display:block}",pA=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onLongPress=Rp(this,"longpress",7),this.startTime=0,this.animation=void 0,this.hoverClass=void 0,this.hoverStartTime=50,this.hoverStayTime=400,this.hover=!1,this.touch=!1}onTouchStart(){this.hoverClass&&(this.touch=!0,setTimeout((()=>{this.touch&&(this.hover=!0)}),this.hoverStartTime)),this.timeoutEvent=setTimeout((()=>{this.onLongPress.emit()}),350),this.startTime=Date.now()}onTouchMove(){clearTimeout(this.timeoutEvent)}onTouchEnd(){const e=Date.now()-this.startTime;e<350&&clearTimeout(this.timeoutEvent),this.hoverClass&&(this.touch=!1,setTimeout((()=>{this.touch||(this.hover=!1)}),this.hoverStayTime))}componentDidRender(){Yf(this.el)}render(){const e=vg({[`${this.hoverClass}`]:this.hover});let t={};return this.animation&&(t["animation"]=this.animation,t["data-animation"]=this.animation),wp(Tp,Object.assign({class:e},t),wp("slot",null))}get el(){return this}static get style(){return uA}},[4,"taro-view-core",{animation:[1],hoverClass:[1,"hover-class"],hoverStartTime:[2,"hover-start-time"],hoverStayTime:[2,"hover-stay-time"],hover:[32],touch:[32]},[[1,"touchstart","onTouchStart"],[1,"touchmove","onTouchMove"],[1,"touchend","onTouchEnd"]]]);function fA(){if("undefined"===typeof customElements)return;const e=["taro-view-core"];e.forEach((e=>{switch(e){case"taro-view-core":customElements.get(e)||customElements.define(e,pA);break}}))}const gA=fA,mA=bf(class extends Pf{constructor(){super(),this.__registerHost()}componentDidLoad(){Vf("VoipRoom",this)}render(){return wp(Tp,null)}},[0,"taro-voip-room-core"]);function vA(){if("undefined"===typeof customElements)return;const e=["taro-voip-room-core"];e.forEach((e=>{switch(e){case"taro-voip-room-core":customElements.get(e)||customElements.define(e,mA);break}}))}const yA=vA,bA="iframe{border:none}.taro-webview{z-index:999;width:100%;height:100%;position:fixed;top:0;bottom:0}",wA=bf(class extends Pf{constructor(){super(),this.__registerHost(),this.onLoad=Rp(this,"load",7),this.onError=Rp(this,"error",7),this.src=void 0}render(){const{src:e,onLoad:t,onError:i}=this;return wp("iframe",{class:"taro-webview",onLoad:i=>{i.stopPropagation(),t.emit({src:e})},onError:t=>{t.stopPropagation(),i.emit({src:e})},src:e})}static get style(){return bA}},[0,"taro-web-view-core",{src:[1]}]);function EA(){if("undefined"===typeof customElements)return;const e=["taro-web-view-core"];e.forEach((e=>{switch(e){case"taro-web-view-core":customElements.get(e)||customElements.define(e,wA);break}}))}const TA=EA;function SA(){return SA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},SA.apply(null,arguments)}var AA;(function(e){e["Pop"]="POP",e["Push"]="PUSH",e["Replace"]="REPLACE"})(AA||(AA={}));var xA=function(e){return e},kA="beforeunload",LA="hashchange",CA="popstate";function _A(e){void 0===e&&(e={});var t=e,i=t.window,s=void 0===i?document.defaultView:i,r=s.history;function n(){var e=MA(s.location.hash.substr(1)),t=e.pathname,i=void 0===t?"/":t,n=e.search,o=void 0===n?"":n,a=e.hash,l=void 0===a?"":a,c=r.state||{};return[c.idx,xA({pathname:i,search:o,hash:l,state:c.usr||null,key:c.key||"default"})]}var o=null;function a(){if(o)p.call(o),o=null;else{var e=AA.Pop,t=n(),i=t[0],s=t[1];if(p.length){if(null!=i){var r=d-i;r&&(o={action:e,location:s,retry:function(){T(-1*r)}},T(r))}}else b(e)}}s.addEventListener(CA,a),s.addEventListener(LA,(function(){var e=n(),t=e[1];PA(t)!==PA(h)&&a()}));var l=AA.Pop,c=n(),d=c[0],h=c[1],u=IA(),p=IA();function f(){var e=document.querySelector("base"),t="";if(e&&e.getAttribute("href")){var i=s.location.href,r=i.indexOf("#");t=-1===r?i:i.slice(0,r)}return t}function g(e){return f()+"#"+("string"===typeof e?e:PA(e))}function m(e,t){return void 0===t&&(t=null),xA(SA({pathname:h.pathname,hash:"",search:""},"string"===typeof e?MA(e):e,{state:t,key:DA()}))}function v(e,t){return[{usr:e.state,key:e.key,idx:t},g(e)]}function y(e,t,i){return!p.length||(p.call({action:e,location:t,retry:i}),!1)}function b(e){l=e;var t=n();d=t[0],h=t[1],u.call({action:l,location:h})}function w(e,t){var i=AA.Push,n=m(e,t);function o(){w(e,t)}if(y(i,n,o)){var a=v(n,d+1),l=a[0],c=a[1];try{r.pushState(l,"",c)}catch(h){s.location.assign(c)}b(i)}}function E(e,t){var i=AA.Replace,s=m(e,t);function n(){E(e,t)}if(y(i,s,n)){var o=v(s,d),a=o[0],l=o[1];r.replaceState(a,"",l),b(i)}}function T(e){r.go(e)}null==d&&(d=0,r.replaceState(SA({},r.state,{idx:d}),""));var S={get action(){return l},get location(){return h},createHref:g,push:w,replace:E,go:T,back:function(){T(-1)},forward:function(){T(1)},listen:function(e){return u.push(e)},block:function(e){var t=p.push(e);return 1===p.length&&s.addEventListener(kA,RA),function(){t(),p.length||s.removeEventListener(kA,RA)}}};return S}function RA(e){e.preventDefault(),e.returnValue=""}function IA(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function DA(){return Math.random().toString(36).substr(2,8)}function PA(e){var t=e.pathname,i=void 0===t?"/":t,s=e.search,r=void 0===s?"":s,n=e.hash,o=void 0===n?"":n;return r&&"?"!==r&&(i+="?"===r.charAt(0)?r:"?"+r),o&&"#"!==o&&(i+="#"===o.charAt(0)?o:"#"+o),i}function MA(e){var t={};if(e){var i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));var s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}class OA{static set config(e){this.__config=e}static get config(){return this.__config}static get pages(){return this.config.pages||[]}static get router(){return this.config.router||{}}static get mode(){return this.router.mode||"hash"}static get customRoutes(){return this.router.customRoutes||{}}static isPage(e=""){return-1!==this.pages.findIndex((t=>Ls(t)===e))}}let NA,FA="/";function BA(e,t="/"){NA=e,FA=t}function $A(e=""){return FA.replace(/\/$/,"")+"/"+e.replace(/^\//,"")}class UA{constructor(){this.stacks=[],this.backDelta=0,this.tabs={},this.methodName=""}set delta(e){e>0?this.backDelta=e:this.backDelta>0?--this.backDelta:this.backDelta=0}get delta(){return this.backDelta}set method(e){this.methodName=e}get method(){return this.methodName}get length(){return this.stacks.length}get last(){return this.stacks[this.length-1]}get(){return this.stacks}getItem(e){return this.stacks[e]}getLastIndex(e,t=1){const i=[...this.stacks].reverse();return i.findIndex(((i,s)=>{var r;return s>=t&&(null===(r=i.path)||void 0===r?void 0:r.replace(/\?.*/g,""))===e}))}getDelta(e){if(this.backDelta>=1)return this.backDelta;const t=this.getLastIndex(e);return t>0?t:1}getPrevIndex(e,t=1){const i=this.getLastIndex(e,t);return i<0?-1:this.length-1-i}pop(){return this.stacks.pop()}push(e){return this.stacks.push(e)}getTabs(){return this.tabs}pushTab(e){this.tabs[e]=this.last,this.pop()}popTab(e){this.push(this.tabs[e]),delete this.tabs[e]}removeTab(e){delete this.tabs[e]}}const GA=new UA;class HA{constructor(){this.conf=[],this.getConfig=(e="")=>{const t=this.conf.filter((t=>t.includes(e)));return t[0]},this.getOrigin=(e="")=>{var t;return(null===(t=this.getConfig(e))||void 0===t?void 0:t[0])||e},this.getAlias=(e="")=>{var t;return(null===(t=this.getConfig(e))||void 0===t?void 0:t[1])||e},this.getAll=(e="")=>this.conf.filter((t=>t.includes(e))).reduceRight(((e,t)=>(e.unshift(t[1]),e)),[])}set(e={}){for(let t in e){const i=e[t];t=Ls(t),"string"===typeof i?this.conf.push([t,Ls(i)]):(null===i||void 0===i?void 0:i.length)>0&&this.conf.push(...i.map((e=>[t,Ls(e)])))}}}const jA=new HA,zA=me.routeChannel;function VA(e){var t;const i=MA(e.url);if(null===(t=i.pathname)||void 0===t?void 0:t.includes("./")){const e=jA.getOrigin(NA.location.pathname).split("/");e.pop(),i.pathname.split("/").forEach((t=>{"."!==t&&(".."===t?e.pop():e.push(t))})),i.pathname=e.join("/")}return i.pathname=Ls(i.pathname),i.pathname=jA.getAlias(Ls(i.pathname)),i.pathname=$A(i.pathname),i.search||(i.search=""),i}function YA(e,t){return St(this,void 0,void 0,(function*(){return new Promise(((i,s)=>{GA.method=t;const{success:r,complete:n,fail:o}=e,a=NA.listen((()=>{const s={errMsg:`${t}:ok`};"navigateTo"===t&&(s.eventChannel=zA,zA.addEvents(e.events)),null===r||void 0===r||r(s),null===n||void 0===n||n(s),i(s),a()}));try{if("url"in e){const i=VA(e),s={timestamp:Date.now()};"navigateTo"===t?NA.push(i,s):"redirectTo"===t||"switchTab"===t?NA.replace(i,s):"reLaunch"===t&&(GA.delta=GA.length,NA.replace(i,s))}else"navigateBack"===t&&(GA.delta=e.delta,GA.length>e.delta?NA.go(-e.delta):NA.go(1-GA.length))}catch(l){const e={errMsg:`${t}:fail ${l.message||l}`};return null===o||void 0===o||o(e),null===n||void 0===n||n(e),o||n?i(e):s(e)}}))}))}function WA(e){return YA(e,"navigateTo")}function KA(e){return YA(e,"redirectTo")}function qA(e={delta:1}){return(!e.delta||e.delta<1)&&(e.delta=1),YA(e,"navigateBack")}function XA(e){return YA(e,"switchTab")}function ZA(e){return YA(e,"reLaunch")}function QA(){const e=GA.get();return e.map((e=>{var t;return Object.assign(Object.assign({},e),{route:(null===(t=e.path)||void 0===t?void 0:t.replace(/\?.*/g,""))||""})}))}const JA="%[a-f0-9]{2}",ex=new RegExp("("+JA+")|([^%]+?)","gi"),tx=new RegExp("("+JA+")+","gi");function ix(e,t){try{return[decodeURIComponent(e.join(""))]}catch(N$){}if(1===e.length)return e;t=t||1;const i=e.slice(0,t),s=e.slice(t);return Array.prototype.concat.call([],ix(i),ix(s))}function sx(e){try{return decodeURIComponent(e)}catch(N$){let i=e.match(ex)||[];for(let s=1;s<i.length;s++)e=ix(i,s).join(""),i=e.match(ex)||[];return e}}function rx(e){const t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"};let i=tx.exec(e);while(i){try{t[i[0]]=decodeURIComponent(i[0])}catch(N$){const s=sx(i[0]);s!==i[0]&&(t[i[0]]=s)}i=tx.exec(e)}t["%C2"]="\ufffd";const s=Object.keys(t);for(const r of s)e=e.replace(new RegExp(r,"g"),t[r]);return e}function nx(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch(N$){return rx(e)}}function ox(e,t){const i={};if(Array.isArray(t))for(const s of t){const t=Object.getOwnPropertyDescriptor(e,s);(null==t?void 0:t.enumerable)&&Object.defineProperty(i,s,t)}else for(const s of Reflect.ownKeys(e)){const r=Object.getOwnPropertyDescriptor(e,s);if(r.enumerable){const n=e[s];t(s,n,e)&&Object.defineProperty(i,s,r)}}return i}function ax(e,t){if("string"!==typeof e||"string"!==typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===e||""===t)return[];const i=e.indexOf(t);return-1===i?[]:[e.slice(0,i),e.slice(i+t.length)]}const lx=e=>null===e||void 0===e,cx=e=>encodeURIComponent(e).replaceAll(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)),dx=Symbol("encodeFragmentIdentifier");function hx(e){switch(e.arrayFormat){case"index":return t=>(i,s)=>{const r=i.length;return void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?i:null===s?[...i,[fx(t,e),"[",r,"]"].join("")]:[...i,[fx(t,e),"[",fx(r,e),"]=",fx(s,e)].join("")]};case"bracket":return t=>(i,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?i:null===s?[...i,[fx(t,e),"[]"].join("")]:[...i,[fx(t,e),"[]=",fx(s,e)].join("")];case"colon-list-separator":return t=>(i,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?i:null===s?[...i,[fx(t,e),":list="].join("")]:[...i,[fx(t,e),":list=",fx(s,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return i=>(s,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?s:(r=null===r?"":r,0===s.length?[[fx(i,e),t,fx(r,e)].join("")]:[[s,fx(r,e)].join(e.arrayFormatSeparator)])}default:return t=>(i,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?i:null===s?[...i,fx(t,e)]:[...i,[fx(t,e),"=",fx(s,e)].join("")]}}function ux(e){let t;switch(e.arrayFormat){case"index":return(e,i,s)=>{t=/\[(\d*)]$/.exec(e),e=e.replace(/\[\d*]$/,""),t?(void 0===s[e]&&(s[e]={}),s[e][t[1]]=i):s[e]=i};case"bracket":return(e,i,s)=>{t=/(\[])$/.exec(e),e=e.replace(/\[]$/,""),t?void 0!==s[e]?s[e]=[...s[e],i]:s[e]=[i]:s[e]=i};case"colon-list-separator":return(e,i,s)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==s[e]?s[e]=[...s[e],i]:s[e]=[i]:s[e]=i};case"comma":case"separator":return(t,i,s)=>{const r="string"===typeof i&&i.includes(e.arrayFormatSeparator),n="string"===typeof i&&!r&&gx(i,e).includes(e.arrayFormatSeparator);i=n?gx(i,e):i;const o=r||n?i.split(e.arrayFormatSeparator).map((t=>gx(t,e))):null===i?i:gx(i,e);s[t]=o};case"bracket-separator":return(t,i,s)=>{const r=/(\[])$/.test(t);if(t=t.replace(/\[]$/,""),!r)return void(s[t]=i?gx(i,e):i);const n=null===i?[]:i.split(e.arrayFormatSeparator).map((t=>gx(t,e)));void 0!==s[t]?s[t]=[...s[t],...n]:s[t]=n};default:return(e,t,i)=>{void 0!==i[e]?i[e]=[...[i[e]].flat(),t]:i[e]=t}}}function px(e){if("string"!==typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function fx(e,t){return t.encode?t.strict?cx(e):encodeURIComponent(e):e}function gx(e,t){return t.decode?nx(e):e}function mx(e){return Array.isArray(e)?e.sort():"object"===typeof e?mx(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function vx(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function yx(e){let t="";const i=e.indexOf("#");return-1!==i&&(t=e.slice(i)),t}function bx(e,t,i){return"string"===i&&"string"===typeof e?e:"function"===typeof i&&"string"===typeof e?i(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()?"number"!==i||Number.isNaN(Number(e))||"string"!==typeof e||""===e.trim()?t.parseNumbers&&!Number.isNaN(Number(e))&&"string"===typeof e&&""!==e.trim()?Number(e):e:Number(e):"true"===e.toLowerCase()}function wx(e){e=vx(e);const t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function Ex(e,t){t=l({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,types:Object.create(null)},t),px(t.arrayFormatSeparator);const i=ux(t),s=Object.create(null);if("string"!==typeof e)return s;if(e=e.trim().replace(/^[?#&]/,""),!e)return s;for(const r of e.split("&")){if(""===r)continue;const e=t.decode?r.replaceAll("+"," "):r;let[n,o]=ax(e,"=");void 0===n&&(n=e),o=void 0===o?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?o:gx(o,t),i(gx(n,t),o,s)}for(const[r,n]of Object.entries(s))if("object"===typeof n&&null!==n&&"string"!==t.types[r])for(const[e,i]of Object.entries(n)){const s=t.types[r]?t.types[r].replace("[]",""):void 0;n[e]=bx(i,t,s)}else"object"===typeof n&&null!==n&&"string"===t.types[r]?s[r]=Object.values(n).join(t.arrayFormatSeparator):s[r]=bx(n,t,t.types[r]);return!1===t.sort?s:(!0===t.sort?Object.keys(s).sort():Object.keys(s).sort(t.sort)).reduce(((e,t)=>{const i=s[t];return e[t]=Boolean(i)&&"object"===typeof i&&!Array.isArray(i)?mx(i):i,e}),Object.create(null))}function Tx(e,t){if(!e)return"";t=l({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),px(t.arrayFormatSeparator);const i=i=>t.skipNull&&lx(e[i])||t.skipEmptyString&&""===e[i],s=hx(t),r={};for(const[o,a]of Object.entries(e))i(o)||(r[o]=a);const n=Object.keys(r);return!1!==t.sort&&n.sort(t.sort),n.map((i=>{const r=e[i];return void 0===r?"":null===r?fx(i,t):Array.isArray(r)?0===r.length&&"bracket-separator"===t.arrayFormat?fx(i,t)+"[]":r.reduce(s(i),[]).join("&"):fx(i,t)+"="+fx(r,t)})).filter((e=>e.length>0)).join("&")}function Sx(e,t){var i,s;t=l({decode:!0},t);let[r,n]=ax(e,"#");return void 0===r&&(r=e),l({url:null!=(s=null==(i=null==r?void 0:r.split("?"))?void 0:i[0])?s:"",query:Ex(wx(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:gx(n,t)}:{})}function Ax(e,t){t=l({encode:!0,strict:!0,[dx]:!0},t);const i=vx(e.url).split("?")[0]||"",s=wx(e.url),r=l(l({},Ex(s,{sort:!1})),e.query);let n=Tx(r,t);n&&(n=`?${n}`);let o=yx(e.url);if("string"===typeof e.fragmentIdentifier){const s=new URL(i);s.hash=e.fragmentIdentifier,o=t[dx]?s.hash:`#${e.fragmentIdentifier}`}return`${i}${n}${o}`}function xx(e,t,i){i=l({parseFragmentIdentifier:!0,[dx]:!1},i);const{url:s,query:r,fragmentIdentifier:n}=Sx(e,i);return Ax({url:s,query:ox(r,t),fragmentIdentifier:n},i)}function kx(e,t,i){const s=Array.isArray(t)?e=>!t.includes(e):(e,i)=>!t(e,i);return xx(e,s,i)}const Lx=Object.freeze(Object.defineProperty({__proto__:null,exclude:kx,extract:wx,parse:Ex,parseUrl:Sx,pick:xx,stringify:Tx,stringifyUrl:Ax},Symbol.toStringTag,{value:"Module"}));let Cx;function _x(e){Cx&&window.removeEventListener("resize",Cx),Cx=function(){if(e.onResize){const t=window.matchMedia("(orientation: portrait)");e.onResize({deviceOrientation:t.matches?"portrait":"landscape",size:{windowHeight:window.innerHeight,windowWidth:window.innerWidth,screenHeight:window.screen.height,screenWidth:window.screen.width}})}},window.addEventListener("resize",Cx,!1)}const Rx={};let Ix=window;function Dx(e,t,i=50){var s;const r=e?null===e||void 0===e?void 0:e.path:null===(s=xt.router)||void 0===s?void 0:s.path;Rx[r]&&t.removeEventListener("scroll",Rx[r]),Ix=t;let n=!1;Rx[r]=function(){var t;null===(t=e.onPageScroll)||void 0===t||t.call(e,{scrollTop:Ix instanceof Window?window.scrollY:Ix.scrollTop}),n&&Px()>i&&(n=!1),e.onReachBottom&&!n&&Px()<i&&(n=!0,e.onReachBottom())},Ix.addEventListener("scroll",Rx[r],!1)}function Px(){return Ix instanceof Window?document.documentElement.scrollHeight-window.scrollY-window.innerHeight:Ix.scrollHeight-Ix.scrollTop-Ix.clientHeight}const Mx=Rt();function Ox(e){var t=[],i=0;while(i<e.length){var s=e[i];if("*"!==s&&"+"!==s&&"?"!==s)if("\\"!==s)if("{"!==s)if("}"!==s)if(":"!==s)if("("!==s)t.push({type:"CHAR",index:i,value:e[i++]});else{var r=1,n="";a=i+1;if("?"===e[a])throw new TypeError('Pattern cannot start with "?" at '.concat(a));while(a<e.length)if("\\"!==e[a]){if(")"===e[a]){if(r--,0===r){a++;break}}else if("("===e[a]&&(r++,"?"!==e[a+1]))throw new TypeError("Capturing groups are not allowed at ".concat(a));n+=e[a++]}else n+=e[a++]+e[a++];if(r)throw new TypeError("Unbalanced pattern at ".concat(i));if(!n)throw new TypeError("Missing pattern at ".concat(i));t.push({type:"PATTERN",index:i,value:n}),i=a}else{var o="",a=i+1;while(a<e.length){var l=e.charCodeAt(a);if(!(l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||95===l))break;o+=e[a++]}if(!o)throw new TypeError("Missing parameter name at ".concat(i));t.push({type:"NAME",index:i,value:o}),i=a}else t.push({type:"CLOSE",index:i,value:e[i++]});else t.push({type:"OPEN",index:i,value:e[i++]});else t.push({type:"ESCAPED_CHAR",index:i++,value:e[i++]});else t.push({type:"MODIFIER",index:i,value:e[i++]})}return t.push({type:"END",index:i,value:""}),t}function Nx(e,t){void 0===t&&(t={});var i=Ox(e),s=t.prefixes,r=void 0===s?"./":s,n=t.delimiter,o=void 0===n?"/#?":n,a=[],l=0,c=0,d="",h=function(e){if(c<i.length&&i[c].type===e)return i[c++].value},u=function(e){var t=h(e);if(void 0!==t)return t;var s=i[c],r=s.type,n=s.index;throw new TypeError("Unexpected ".concat(r," at ").concat(n,", expected ").concat(e))},p=function(){var e,t="";while(e=h("CHAR")||h("ESCAPED_CHAR"))t+=e;return t},f=function(e){for(var t=0,i=o;t<i.length;t++){var s=i[t];if(e.indexOf(s)>-1)return!0}return!1},g=function(e){var t=a[a.length-1],i=e||(t&&"string"===typeof t?t:"");if(t&&!i)throw new TypeError('Must have text between two parameters, missing text after "'.concat(t.name,'"'));return!i||f(i)?"[^".concat($x(o),"]+?"):"(?:(?!".concat($x(i),")[^").concat($x(o),"])+?")};while(c<i.length){var m=h("CHAR"),v=h("NAME"),y=h("PATTERN");if(v||y){var b=m||"";-1===r.indexOf(b)&&(d+=b,b=""),d&&(a.push(d),d=""),a.push({name:v||l++,prefix:b,suffix:"",pattern:y||g(b),modifier:h("MODIFIER")||""})}else{var w=m||h("ESCAPED_CHAR");if(w)d+=w;else{d&&(a.push(d),d="");var E=h("OPEN");if(E){b=p();var T=h("NAME")||"",S=h("PATTERN")||"",A=p();u("CLOSE"),a.push({name:T||(S?l++:""),pattern:T&&!S?g(b):S,prefix:b,suffix:A,modifier:h("MODIFIER")||""})}else u("END")}}}return a}function Fx(e,t){var i=[],s=Vx(e,i,t);return Bx(s,i,t)}function Bx(e,t,i){void 0===i&&(i={});var s=i.decode,r=void 0===s?function(e){return e}:s;return function(i){var s=e.exec(i);if(!s)return!1;for(var n=s[0],o=s.index,a=Object.create(null),l=function(e){if(void 0===s[e])return"continue";var i=t[e-1];"*"===i.modifier||"+"===i.modifier?a[i.name]=s[e].split(i.prefix+i.suffix).map((function(e){return r(e,i)})):a[i.name]=r(s[e],i)},c=1;c<s.length;c++)l(c);return{path:n,index:o,params:a}}}function $x(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Ux(e){return e&&e.sensitive?"":"i"}function Gx(e,t){if(!t)return e;var i=/\((?:\?<(.*?)>)?(?!\?)/g,s=0,r=i.exec(e.source);while(r)t.push({name:r[1]||s++,prefix:"",suffix:"",modifier:"",pattern:""}),r=i.exec(e.source);return e}function Hx(e,t,i){var s=e.map((function(e){return Vx(e,t,i).source}));return new RegExp("(?:".concat(s.join("|"),")"),Ux(i))}function jx(e,t,i){return zx(Nx(e,i),t,i)}function zx(e,t,i){void 0===i&&(i={});for(var s=i.strict,r=void 0!==s&&s,n=i.start,o=void 0===n||n,a=i.end,l=void 0===a||a,c=i.encode,d=void 0===c?function(e){return e}:c,h=i.delimiter,u=void 0===h?"/#?":h,p=i.endsWith,f=void 0===p?"":p,g="[".concat($x(f),"]|$"),m="[".concat($x(u),"]"),v=o?"^":"",y=0,b=e;y<b.length;y++){var w=b[y];if("string"===typeof w)v+=$x(d(w));else{var E=$x(d(w.prefix)),T=$x(d(w.suffix));if(w.pattern)if(t&&t.push(w),E||T)if("+"===w.modifier||"*"===w.modifier){var S="*"===w.modifier?"?":"";v+="(?:".concat(E,"((?:").concat(w.pattern,")(?:").concat(T).concat(E,"(?:").concat(w.pattern,"))*)").concat(T,")").concat(S)}else v+="(?:".concat(E,"(").concat(w.pattern,")").concat(T,")").concat(w.modifier);else{if("+"===w.modifier||"*"===w.modifier)throw new TypeError('Can not repeat "'.concat(w.name,'" without a prefix and suffix'));v+="(".concat(w.pattern,")").concat(w.modifier)}else v+="(?:".concat(E).concat(T,")").concat(w.modifier)}}if(l)r||(v+="".concat(m,"?")),v+=i.endsWith?"(?=".concat(g,")"):"$";else{var A=e[e.length-1],x="string"===typeof A?m.indexOf(A[A.length-1])>-1:void 0===A;r||(v+="(?:".concat(m,"(?=").concat(g,"))?")),x||(v+="(?=".concat(m,"|").concat(g,")"))}return new RegExp(v,Ux(i))}function Vx(e,t,i){return e instanceof RegExp?Gx(e,t):Array.isArray(e)?Hx(e,t,i):jx(e,t,i)}function Yx(e){try{return decodeURIComponent(e)}catch(t){return e}}function Wx(e,t,i,s,r){var n,o,a=0;return{next:function(l){if(e===l)return{done:!0,value:!1};if(!n){var c=e,d=!c.children;if(c.match||(c.match=Fx(c.path||"",Object.assign({end:d},i))),n=c.match(s),n){var h=n,u=h.path;return n.path=d||"/"!==u.charAt(u.length-1)?u:u.substr(1),n.params=Object.assign({},r,n.params),{done:!1,value:{route:e,baseUrl:t,path:n.path,params:n.params}}}}if(n&&e.children)while(a<e.children.length){if(!o){var p=e.children[a];p.parent=e,o=Wx(p,t+n.path,i,s.substr(n.path.length),n.params)}var f=o.next(l);if(!f.done)return{done:!1,value:f.value};o=null,a++}return{done:!0,value:!1}}}}function Kx(e,t){if("function"===typeof e.route.action)return e.route.action(e,t)}function qx(e,t){var i=t;while(i)if(i=i.parent,i===e)return!0;return!1}Mx();var Xx=function(){function e(e,t){if(!e||"object"!==typeof e)throw new TypeError("Invalid routes");this.options=Object.assign({decode:Yx},t),this.baseUrl=this.options.baseUrl||"",this.root=Array.isArray(e)?{path:"",children:e,parent:null}:e,this.root.parent=null}var t=e.prototype;return t.resolve=function(e){var t,i,s=this,r=Object.assign({router:this},this.options.context,"string"===typeof e?{pathname:e}:e),n=Wx(this.root,this.baseUrl,this.options,r.pathname.substr(this.baseUrl.length)),o=this.options.resolveRoute||Kx,a=r;function l(e,s,c){void 0===s&&(s=!t.done&&t.value.route);var d=null===c&&!t.done&&t.value.route;if(t=i||n.next(d),i=null,!e&&(t.done||!qx(s,t.value.route)))return i=t,Promise.resolve(null);if(t.done){var h=new Error("Route not found");return h.status=404,Promise.reject(h)}return a=Object.assign({},r,t.value),Promise.resolve(o(a,t.value.params)).then((function(t){return null!==t&&void 0!==t?t:l(e,s,t)}))}return r.next=l,Promise.resolve().then((function(){return l(!0,s.root)}))["catch"]((function(e){if(s.options.errorHandler)return s.options.errorHandler(e,a);throw e}))},e}();class Zx{constructor(e){this.isLoadDdEntry=!1,this.cache={},this.pageContext=e,this.init(),wt.on("__taroH5SetNavigationBarTitle",(e=>{this.setTitle(e)})),wt.on("__taroH5setNavigationBarLoading",(e=>{this.setNavigationLoading(e)})),wt.on("__taroH5setNavigationBarColor",(({backgroundColor:e,frontColor:t})=>{"string"===typeof e&&this.setNavigationBarBackground(e),"string"===typeof t&&this.setNavigationBarTextStyle(t)}))}toHomeFn(){ZA({url:this.pageContext.originHomePage})}backFn(){qA()}get homeBtnElement(){var e;return this.navigationBarElement?null===(e=this.navigationBarElement.getElementsByClassName("taro-navigation-bar-home"))||void 0===e?void 0:e[0]:null}get backBtnElement(){var e;return this.navigationBarElement?null===(e=this.navigationBarElement.getElementsByClassName("taro-navigation-bar-back"))||void 0===e?void 0:e[0]:null}get titleElement(){var e;return this.navigationBarElement?null===(e=this.navigationBarElement.getElementsByClassName("taro-navigation-bar-title"))||void 0===e?void 0:e[0]:null}get loadingElement(){return this.navigationBarElement?this.navigationBarElement.getElementsByClassName("taro-navigation-bar-loading")[0]:null}init(){var e,t;this.setNavigationBarElement(),this.navigationBarElement&&(null===(e=this.homeBtnElement)||void 0===e||e.addEventListener("click",this.toHomeFn.bind(this)),null===(t=this.backBtnElement)||void 0===t||t.addEventListener("click",this.backFn.bind(this)))}setNavigationBarElement(){this.navigationBarElement=document.getElementById("taro-navigation-bar")}load(){this.setCacheValue(),this.setTitle(),this.setNavigationBarVisible(),this.setFnBtnState(),this.setNavigationBarBackground(),this.setNavigationBarTextStyle(),this.setNavigationLoading()}setCacheValue(){const e=this.pageContext.originPathname;"object"!==typeof this.cache[e]&&(this.cache[e]={})}setFnBtnState(){const e=this.pageContext.currentPage;this.pageContext.isTabBar(e)||this.pageContext.homePage===e?this.fnBtnToggleToNone():GA.length>1?this.fnBtnToggleToBack():this.fnBtnToggleToHome()}shiftLoadingState(e){this.loadingElement&&(e?this.loadingElement.classList.add("taro-navigation-bar-loading-show"):this.loadingElement.classList.remove("taro-navigation-bar-loading-show"))}setNavigationLoading(e){var t;if(!this.navigationBarElement)return;const i=this.pageContext.originPathname;let s;if("boolean"===typeof e)s=e,this.cache[i]&&(this.cache[i].loading=s);else{const e=null===(t=this.cache[i])||void 0===t?void 0:t.loading;"boolean"===typeof e?s=e:(s=!1,this.cache[i]&&(this.cache[i].loading=s))}this.shiftLoadingState(s)}setNavigationBarBackground(e){var t,i,s;if(!this.navigationBarElement)return;const r=this.pageContext.originPathname;let n;if("string"===typeof e)n=e,this.cache[r]&&(this.cache[r].backgroundColor=n);else{const e=null===(t=this.cache[r])||void 0===t?void 0:t.backgroundColor;"string"===typeof e?n=e:(n=(null===(s=null===(i=this.pageContext.config)||void 0===i?void 0:i.window)||void 0===s?void 0:s.navigationBarBackgroundColor)||"#000000",this.cache[r]&&(this.cache[r].backgroundColor=n))}this.navigationBarElement.style.background=n}setNavigationBarTextStyle(e){var t,i,s;if(!this.navigationBarElement)return;const r=this.pageContext.originPathname;let n;if("string"===typeof e)n=e,this.cache[r]&&(this.cache[r].fontColor=n);else{const e=null===(t=this.cache[r])||void 0===t?void 0:t.fontColor;"string"===typeof e?n=e:(n=(null===(s=null===(i=this.pageContext.config)||void 0===i?void 0:i.window)||void 0===s?void 0:s.navigationBarTextStyle)||"white",this.cache[r]&&(this.cache[r].fontColor=n))}this.navigationBarElement.style.color=n}setTitle(e){var t,i,s;const r=this.pageContext.originPathname;let n;if("string"===typeof e)n=e,this.cache[r]&&(this.cache[r].title=n);else{const e=null===(t=this.cache[r])||void 0===t?void 0:t.title;"string"===typeof e?n=e:(n=null!==(s=null===(i=this.pageContext.pageConfig)||void 0===i?void 0:i.navigationBarTitleText)&&void 0!==s?s:document.title,this.cache[r]&&(this.cache[r].title=n))}document.title=n,this.titleElement&&(this.titleElement.innerHTML=n)}fnBtnToggleToHome(){this.navigationBarElement&&(this.navigationBarElement.classList.add("taro-navigation-bar-home-icon"),this.navigationBarElement.classList.remove("taro-navigation-bar-back-icon"))}fnBtnToggleToBack(){this.navigationBarElement&&(this.navigationBarElement.classList.remove("taro-navigation-bar-home-icon"),this.navigationBarElement.classList.add("taro-navigation-bar-back-icon"))}fnBtnToggleToNone(){this.navigationBarElement&&(this.navigationBarElement.classList.remove("taro-navigation-bar-home-icon"),this.navigationBarElement.classList.remove("taro-navigation-bar-back-icon"))}setNavigationBarVisible(e){var t,i;if(!this.navigationBarElement)return;let s;"boolean"===typeof e?s=e:(s=null===(t=this.pageContext.config.window)||void 0===t?void 0:t.navigationStyle,"string"===typeof(null===(i=this.pageContext.pageConfig)||void 0===i?void 0:i.navigationStyle)&&(s=this.pageContext.pageConfig.navigationStyle)),"default"===s?(this.navigationBarElement.classList.add("taro-navigation-bar-show"),this.navigationBarElement.classList.remove("taro-navigation-bar-hide")):(this.navigationBarElement.classList.add("taro-navigation-bar-hide"),this.navigationBarElement.classList.remove("taro-navigation-bar-show"))}}class Qx{constructor(e,t){this.history=t,this.defaultAnimation={duration:300,delay:50},this.config=e,this.homePage=Ds(this.routes[0].path,this.basename,this.customRoutes,this.config.entryPagePath),this.originHomePage=this.config.entryPagePath||this.routes[0].path||this.basename,this.mount(),this.navigationBarHandler=new Zx(this)}get currentPage(){const e=Ps(this.routerMode,this.basename);return"/"===e?this.homePage:e}get appId(){return this.config.appId||"app"}get router(){return this.config.router||{}}get routerMode(){return this.router.mode||"hash"}get customRoutes(){return this.router.customRoutes||{}}get routes(){return this.config.routes||[]}get tabBarList(){var e;return(null===(e=this.config.tabBar)||void 0===e?void 0:e.list)||[]}get PullDownRefresh(){return this.config.PullDownRefresh}get animation(){var e,t;return null!==(t=null===(e=this.config)||void 0===e?void 0:e.animation)&&void 0!==t?t:this.defaultAnimation}get animationDelay(){var e;return("object"===typeof this.animation?this.animation.delay:this.animation?null===(e=this.defaultAnimation)||void 0===e?void 0:e.delay:0)||0}get animationDuration(){var e;return("object"===typeof this.animation?this.animation.duration:this.animation?null===(e=this.defaultAnimation)||void 0===e?void 0:e.duration:0)||0}set pathname(e){this.router.pathname=e}get pathname(){return this.router.pathname}get originPathname(){return jA.getOrigin(Ls(_s(this.pathname,this.basename)))}get basename(){return this.router.basename||""}get pageConfig(){const e=Ls(this.homePage);return this.routes.find((t=>{const i=Ls(t.path);return[i,e].includes(this.originPathname)}))}isTabBar(e){var t;const i=Ls(_s(e,this.basename)).split("?")[0],s=(null===(t=Object.entries(this.customRoutes).find((([,e])=>"string"===typeof e?e===i:(null===e||void 0===e?void 0:e.length)>0&&e.includes(i))))||void 0===t?void 0:t[0])||i;return!!s&&this.tabBarList.some((e=>Rs(e.pagePath)===s))}isDefaultNavigationStyle(){var e,t;let i=null===(e=this.config.window)||void 0===e?void 0:e.navigationStyle;return"string"===typeof(null===(t=this.pageConfig)||void 0===t?void 0:t.navigationStyle)&&(i=this.pageConfig.navigationStyle),"custom"!==i}isSamePage(e){const t=_s(this.pathname,this.basename),i=_s(null===e||void 0===e?void 0:e.path,this.basename);return i.startsWith(t+"?")}get search(){let e="?";if("hash"===this.routerMode){const t=location.hash.indexOf("?");t>-1&&(e=location.hash.slice(t))}else e=location.search;return e.substring(1)}get usingWindowScroll(){var e;let t=!1;"boolean"===typeof(null===(e=this.pageConfig)||void 0===e?void 0:e.usingWindowScroll)&&(t=this.pageConfig.usingWindowScroll);const i=window;return i.__taroAppConfig||(i.__taroAppConfig={}),i.__taroAppConfig.usingWindowScroll=t,t}getQuery(e="",t="",i={}){t=t?`${t}&${this.search}`:this.search;const s=t?Lx.parse(t,{decode:!1}):{};return s.stamp=e,Object.assign(Object.assign({},s),i)}mount(){BA(this.history,this.basename),this.pathname=NA.location.pathname,this.animation&&Ku(this.animationDuration),qu(this.tabBarList.length>1,this.usingWindowScroll,this.router.enhanceAnimation)}onReady(e,t=!0){var i;const s=this.getPageContainer(e);if(s&&!(null===s||void 0===s?void 0:s["__isReady"])){const r=s.firstElementChild,n=null===r||void 0===r?void 0:r["componentOnReady"];n?null===n||void 0===n||n().then((()=>{Lt((()=>{var t;null===(t=e.onReady)||void 0===t||t.call(e),s["__isReady"]=!0}))})):(null===(i=e.onReady)||void 0===i||i.call(e),s["__isReady"]=!0),t&&(s["__page"]=e)}}load(e,t={},i,s=0){var r,n;if(!e)return;GA.push(e);const o=this.getQuery(i,"",e.options);let a=this.getPageContainer(e);a?(a.classList.remove("taro_page_shade"),this.isTabBar(this.pathname)&&a.classList.add("taro_tabbar_page"),this.isDefaultNavigationStyle()&&a.classList.add("taro_navigation_page"),this.addAnimation(a,0===s),null===(r=e.onShow)||void 0===r||r.call(e),this.navigationBarHandler.load(),this.bindPageEvents(e,t),this.triggerRouterChange()):null===(n=e.onLoad)||void 0===n||n.call(e,o,(()=>{var i;a=this.getPageContainer(e),this.isTabBar(this.pathname)&&(null===a||void 0===a||a.classList.add("taro_tabbar_page")),this.isDefaultNavigationStyle()&&(null===a||void 0===a||a.classList.add("taro_navigation_page")),this.addAnimation(a,0===s),null===(i=e.onShow)||void 0===i||i.call(e),this.navigationBarHandler.load(),this.onReady(e,!0),this.bindPageEvents(e,t),this.triggerRouterChange()}))}unload(e,t=1,i=!1){var s,r,n;if(e){if(GA.delta=--t,GA.pop(),this.animation&&i){this.unloadTimer&&(clearTimeout(this.unloadTimer),null===(r=null===(s=this.lastUnloadPage)||void 0===s?void 0:s.onUnload)||void 0===r||r.call(s),this.unloadTimer=null),this.lastUnloadPage=e;const t=this.getPageContainer(e);null===t||void 0===t||t.classList.remove("taro_page_stationed"),null===t||void 0===t||t.classList.remove("taro_page_show"),t&&(t.style.zIndex="1"),this.unloadTimer=setTimeout((()=>{var e,t;this.unloadTimer=null,null===(t=null===(e=this.lastUnloadPage)||void 0===e?void 0:e.onUnload)||void 0===t||t.call(e),wt.trigger("__taroPageOnShowAfterDestroyed")}),this.animationDuration)}else{const t=this.getPageContainer(e);null===t||void 0===t||t.classList.remove("taro_page_stationed"),null===t||void 0===t||t.classList.remove("taro_page_show"),null===(n=null===e||void 0===e?void 0:e.onUnload)||void 0===n||n.call(e),setTimeout((()=>{wt.trigger("__taroPageOnShowAfterDestroyed")}),0)}t>=1&&this.unload(GA.last,t)}}show(e,t={},i=0){var s,r;if(!e)return;const n=this.getQuery(e["$taroParams"]["stamp"],"",e.options);let o=this.getPageContainer(e);o?(o.classList.remove("taro_page_shade"),this.addAnimation(o,0===i),null===(s=e.onShow)||void 0===s||s.call(e),this.navigationBarHandler.load(),this.bindPageEvents(e,t),this.triggerRouterChange()):null===(r=e.onLoad)||void 0===r||r.call(e,n,(()=>{var s;o=this.getPageContainer(e),this.addAnimation(o,0===i),null===(s=e.onShow)||void 0===s||s.call(e),this.navigationBarHandler.load(),this.onReady(e,!1),this.bindPageEvents(e,t),this.triggerRouterChange()}))}hide(e,t=!1){var i,s,r,n,o,a,l,c;if(!e)return;const d=this.getPageContainer(e);d?t?(this.hideTimer&&(clearTimeout(this.hideTimer),this.hideTimer=null,null===(r=null===(s=null===(i=this.lastHidePage)||void 0===i?void 0:i.classList)||void 0===s?void 0:s.add)||void 0===r||r.call(s,"taro_page_shade")),this.lastHidePage=d,this.hideTimer=setTimeout((()=>{this.hideTimer=null,d.classList.add("taro_page_shade")}),this.animationDuration+this.animationDelay),null===(n=e.onHide)||void 0===n||n.call(e)):(this.hideTimer&&(clearTimeout(this.hideTimer),this.hideTimer=null,null===(l=null===(a=null===(o=this.lastHidePage)||void 0===o?void 0:o.classList)||void 0===a?void 0:a.add)||void 0===l||l.call(a,"taro_page_shade")),null===(c=e.onHide)||void 0===c||c.call(e),d.classList.add("taro_page_shade"),this.lastHidePage=d):setTimeout((()=>this.hide(e)),0)}addAnimation(e,t=!1){e&&(this.animation&&!t?setTimeout((()=>{e.classList.add("taro_page_show"),setTimeout((()=>{e.classList.add("taro_page_stationed")}),this.animationDuration)}),this.animationDelay):(e.classList.add("taro_page_show"),e.classList.add("taro_page_stationed")))}getPageContainer(e){var t;const i=e?null===e||void 0===e?void 0:e.path:null===(t=xt.page)||void 0===t?void 0:t.path,s=null===i||void 0===i?void 0:i.replace(/([^a-z0-9\u00a0-\uffff_-])/gi,"\\$1");if(e)return document.querySelector(`.taro_page#${s}`);const r=s?document.querySelector(`.taro_page#${s}`):document.querySelector(".taro_page")||document.querySelector(".taro_router");return r}getScrollingElement(e){return this.usingWindowScroll?window:this.getPageContainer(e)||window}bindPageEvents(e,t={}){var i;const s=this.getScrollingElement(e),r=t.onReachBottomDistance||(null===(i=this.config.window)||void 0===i?void 0:i.onReachBottomDistance)||50;Dx(e,s,r),_x(e)}triggerRouterChange(){setTimeout((()=>{wt.trigger("__afterTaroRouterChange",{toLocation:{path:this.pathname}})}),0)}}const Jx=Rt();let ek=Jx();function tk(e,t,i,s){var r,n;"function"===typeof t.onUnhandledRejection&&window.addEventListener("unhandledrejection",t.onUnhandledRejection),OA.config=i;const o=new Qx(i,e),a={};jA.set(o.router.customRoutes);const l=o.router.basename,c=o.routes.map((e=>{const t=Ls(e.path),i=jA.getAll(t);return{path:i.length<1?t:i,action:e.load}})),d=new Xx(c,{baseUrl:l||""}),h={path:o.currentPage,query:o.getQuery(ek),scene:0,shareTicket:"",referrerInfo:{}};wt.trigger("__taroRouterLaunch",h),null===(r=t.onLaunch)||void 0===r||r.call(t,h),t.onError&&window.addEventListener("error",(e=>{var i;return null===(i=t.onError)||void 0===i?void 0:i.call(t,e.message)}));const u=e=>St(this,[e],void 0,(function*({location:e,action:r}){var n,l,c,h,u,p,f,g;const m=decodeURI(e.pathname);let v,y,b;(null===(n=window.__taroAppConfig)||void 0===n?void 0:n.usingWindowScroll)&&window.scrollTo(0,0),wt.trigger("__taroRouterChange",{toLocation:{path:m}});const w=o.router.forcePath||m;a[w]="number"===typeof a[w]?a[w]+1:1;const E=a[w];let T;try{const e=yield d.resolve(w);[v,y,b]=yield Promise.all(e),T=a[w]}catch(P){if(404===P.status){const e={isEntryPage:0===GA.length,path:m,query:o.getQuery(Jx())};null===(l=t.onPageNotFound)||void 0===l||l.call(t,e),wt.trigger("__taroRouterNotFound",e)}else{if(!/Loading hot update .* failed./.test(P.message))throw P;window.location.reload()}}if(!v||E!==T)return;o.pathname=y.pathname;const{pathname:S,pageConfig:A}=o;let x=(null===(c=null===i||void 0===i?void 0:i.window)||void 0===c?void 0:c.enablePullDownRefresh)||!1,k=(null===(h=null===i||void 0===i?void 0:i.window)||void 0===h?void 0:h.navigationStyle)||"default",L=(null===(u=null===i||void 0===i?void 0:i.window)||void 0===u?void 0:u.navigationBarTextStyle)||"white",C=(null===(p=null===i||void 0===i?void 0:i.window)||void 0===p?void 0:p.navigationBarBackgroundColor)||"#000000";A&&("boolean"===typeof A.enablePullDownRefresh&&(x=A.enablePullDownRefresh),"string"===typeof A.navigationStyle&&(k=A.navigationStyle),"string"===typeof A.navigationBarTextStyle&&(L=A.navigationBarTextStyle),"string"===typeof A.navigationBarBackgroundColor&&(C=A.navigationBarBackgroundColor)),wt.trigger("__taroSetNavigationStyle",k,L,C);const _=xt.page,R=null!==(f=GA.method)&&void 0!==f?f:"",I=GA.getTabs();let D=!1;if(GA.method="","reLaunch"===R){o.unload(_,GA.length);for(const e in I)I[e]&&(o.unload(I[e]),GA.removeTab(e));D=!0}else if(_&&o.isTabBar(S)){if(o.isSamePage(_))return;if(o.isTabBar(_.path))o.hide(_),GA.pushTab(_.path.split("?")[0]);else if(GA.length>0){const e=GA.getItem(0);o.isTabBar(e.path)?(o.unload(_,GA.length-1,!0),GA.pushTab(e.path.split("?")[0])):o.unload(_,GA.length,!0)}if(I[S])return GA.popTab(S),o.show(GA.getItem(0),A,0);D=!0}else if("POP"===r){const e=GA.getPrevIndex(S),t=GA.getDelta(S);_!==GA.getItem(e)&&(o.unload(_,t,e>-1),e>-1?wt.once("__taroPageOnShowAfterDestroyed",(()=>{o.show(GA.getItem(e),A,e)})):D=!0)}else if("REPLACE"===r){const e=GA.getDelta(S);o.unload(_,e),D=!0}else"PUSH"===r&&(o.hide(_,!0),D=!0);if(D||GA.length<1){const e=null!==(g=v.default)&&void 0!==g?g:v,t=Object.assign({},A),i=GA.length;delete t["path"],delete t["load"];let r="";ek?(r=ek,ek=""):r=Jx();const n=zs(x?ke.call("createPullDownComponent",e,S,s,o.PullDownRefresh,r):e,S+$s(o.getQuery(r)),{},t);b&&(n.options=b),o.load(n,A,r,i)}})),p=Ls(_s(e.location.pathname,o.basename));return"/"===p&&e.replace($A(o.homePage+e.location.search)),u({location:e.location,action:AA.Push}),null===(n=t.onShow)||void 0===n||n.call(t,h),window.addEventListener("visibilitychange",(()=>{var e,i,s,r,n,o,a;const l=(null===(e=xt.page)||void 0===e?void 0:e.path)||"",c=l.substring(0,l.indexOf("?")),d={};Object.assign(d,h,{path:c}),"visible"===document.visibilityState?(null===(i=t.onShow)||void 0===i||i.call(t,d),null===(r=null===(s=xt.page)||void 0===s?void 0:s.onShow)||void 0===r||r.call(s)):((null===(n=xt.page)||void 0===n?void 0:n.path)&&Bs(null===(o=xt.page)||void 0===o?void 0:o.path,"onHide"),null===(a=t.onHide)||void 0===a||a.call(t,d))})),e.listen(u)}function ik(e,t,i=e.appId||"app"){let s=document.getElementById(i),r=!0;s||(s=document.createElement("div"),s.id=i,r=!1);const n=(null===s||void 0===s?void 0:s.parentNode)||(null===s||void 0===s?void 0:s.parentElement)||document.body;s.classList.add("taro_router"),r||n.appendChild(s),tp(e,n)}class sk{constructor({name:e,success:t,fail:i,complete:s}){this.isHandlerError=!1,this.methodName=e,this.__success=t,this.__fail=i,this.__complete=s,this.isHandlerError=we(this.__complete)||we(this.__fail)}success(e={},t={}){e.errMsg||(e.errMsg=`${this.methodName}:ok`),we(this.__success)&&this.__success(e),we(this.__complete)&&this.__complete(e);const{resolve:i=Promise.resolve.bind(Promise)}=t;return i(e)}fail(e={},t={}){e.errMsg?e.errMsg=`${this.methodName}:fail ${e.errMsg}`:e.errMsg=`${this.methodName}:fail`,we(this.__fail)&&this.__fail(e),we(this.__complete)&&this.__complete(e);const{resolve:i=Promise.resolve.bind(Promise),reject:s=Promise.reject.bind(Promise)}=t;return this.isHandlerError?i(e):s(e)}}function rk(e){return e?Object.keys(e).map((t=>`${encodeURIComponent(t)}=${"object"===typeof e[t]?encodeURIComponent(JSON.stringify(e[t])):encodeURIComponent(e[t])}`)).join("&"):""}function nk(e=""){return(t={},...i)=>{const{success:s,fail:r,complete:n}=t,o=new sk({name:e,success:s,fail:r,complete:n}),a="\u4e0d\u652f\u6301 API";return Wu.eventCenter.trigger("__taroNotSupport",{name:e,args:[t,...i],type:"method",category:"permanently"}),console.warn(a),o.success({errMsg:a})}}const ok=function(){return Wu.getCurrentInstance().app},ak=Wu.getCurrentInstance,lk=Wu.nextTick;var ck="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&self||"undefined"!==typeof global&&global||{},dk={searchParams:"URLSearchParams"in ck,iterable:"Symbol"in ck&&"iterator"in Symbol,blob:"FileReader"in ck&&"Blob"in ck&&function(){try{return new Blob,!0}catch(N$){return!1}}(),formData:"FormData"in ck,arrayBuffer:"ArrayBuffer"in ck};function hk(e){return e&&DataView.prototype.isPrototypeOf(e)}if(dk.arrayBuffer)var uk=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],pk=ArrayBuffer.isView||function(e){return e&&uk.indexOf(Object.prototype.toString.call(e))>-1};function fk(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function gk(e){return"string"!==typeof e&&(e=String(e)),e}function mk(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return dk.iterable&&(t[Symbol.iterator]=function(){return t}),t}function vk(e){this.map={},e instanceof vk?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function yk(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function bk(e){return new Promise((function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}}))}function wk(e){var t=new FileReader,i=bk(t);return t.readAsArrayBuffer(e),i}function Ek(e){var t=new FileReader,i=bk(t),s=/charset=([A-Za-z0-9_-]+)/.exec(e.type),r=s?s[1]:"utf-8";return t.readAsText(e,r),i}function Tk(e){for(var t=new Uint8Array(e),i=new Array(t.length),s=0;s<t.length;s++)i[s]=String.fromCharCode(t[s]);return i.join("")}function Sk(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Ak(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:dk.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:dk.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:dk.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():dk.arrayBuffer&&dk.blob&&hk(e)?(this._bodyArrayBuffer=Sk(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):dk.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||pk(e))?this._bodyArrayBuffer=Sk(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):dk.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},dk.blob&&(this.blob=function(){var e=yk(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=yk(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(dk.blob)return this.blob().then(wk);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e=yk(this);if(e)return e;if(this._bodyBlob)return Ek(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Tk(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},dk.formData&&(this.formData=function(){return this.text().then(Ck)}),this.json=function(){return this.text().then(JSON.parse)},this}vk.prototype.append=function(e,t){e=fk(e),t=gk(t);var i=this.map[e];this.map[e]=i?i+", "+t:t},vk.prototype["delete"]=function(e){delete this.map[fk(e)]},vk.prototype.get=function(e){return e=fk(e),this.has(e)?this.map[e]:null},vk.prototype.has=function(e){return this.map.hasOwnProperty(fk(e))},vk.prototype.set=function(e,t){this.map[fk(e)]=gk(t)},vk.prototype.forEach=function(e,t){for(var i in this.map)this.map.hasOwnProperty(i)&&e.call(t,this.map[i],i,this)},vk.prototype.keys=function(){var e=[];return this.forEach((function(t,i){e.push(i)})),mk(e)},vk.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),mk(e)},vk.prototype.entries=function(){var e=[];return this.forEach((function(t,i){e.push([i,t])})),mk(e)},dk.iterable&&(vk.prototype[Symbol.iterator]=vk.prototype.entries);var xk=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function kk(e){var t=e.toUpperCase();return xk.indexOf(t)>-1?t:e}function Lk(e,t){if(!(this instanceof Lk))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{};var i=t.body;if(e instanceof Lk){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new vk(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new vk(t.headers)),this.method=kk(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in ck){var e=new AbortController;return e.signal}}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var s=/([?&])_=[^&]*/;if(s.test(this.url))this.url=this.url.replace(s,"$1_="+(new Date).getTime());else{var r=/\?/;this.url+=(r.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function Ck(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var i=e.split("="),s=i.shift().replace(/\+/g," "),r=i.join("=").replace(/\+/g," ");t.append(decodeURIComponent(s),decodeURIComponent(r))}})),t}function _k(e){var t=new vk,i=e.replace(/\r?\n[\t ]+/g," ");return i.split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var i=e.split(":"),s=i.shift().trim();if(s){var r=i.join(":").trim();try{t.append(s,r)}catch(n){console.warn("Response "+n.message)}}})),t}function Rk(e,t){if(!(this instanceof Rk))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new vk(t.headers),this.url=t.url||"",this._initBody(e)}Lk.prototype.clone=function(){return new Lk(this,{body:this._bodyInit})},Ak.call(Lk.prototype),Ak.call(Rk.prototype),Rk.prototype.clone=function(){return new Rk(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new vk(this.headers),url:this.url})},Rk.error=function(){var e=new Rk(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var Ik=[301,302,303,307,308];Rk.redirect=function(e,t){if(-1===Ik.indexOf(t))throw new RangeError("Invalid status code");return new Rk(null,{status:t,headers:{location:e}})};var Dk=ck.DOMException;try{new Dk}catch(F$){Dk=function(e,t){this.message=e,this.name=t;var i=Error(e);this.stack=i.stack},Dk.prototype=Object.create(Error.prototype),Dk.prototype.constructor=Dk}function Pk(e,t){return new Promise((function(i,s){var r=new Lk(e,t);if(r.signal&&r.signal.aborted)return s(new Dk("Aborted","AbortError"));var n=new XMLHttpRequest;function o(){n.abort()}function a(e){try{return""===e&&ck.location.href?ck.location.href:e}catch(N$){return e}}if(n.onload=function(){var e={statusText:n.statusText,headers:_k(n.getAllResponseHeaders()||"")};0===r.url.indexOf("file://")&&(n.status<200||n.status>599)?e.status=200:e.status=n.status,e.url="responseURL"in n?n.responseURL:e.headers.get("X-Request-URL");var t="response"in n?n.response:n.responseText;setTimeout((function(){i(new Rk(t,e))}),0)},n.onerror=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},n.ontimeout=function(){setTimeout((function(){s(new TypeError("Network request timed out"))}),0)},n.onabort=function(){setTimeout((function(){s(new Dk("Aborted","AbortError"))}),0)},n.open(r.method,a(r.url),!0),"include"===r.credentials?n.withCredentials=!0:"omit"===r.credentials&&(n.withCredentials=!1),"responseType"in n&&(dk.blob?n.responseType="blob":dk.arrayBuffer&&(n.responseType="arraybuffer")),t&&"object"===typeof t.headers&&!(t.headers instanceof vk||ck.Headers&&t.headers instanceof ck.Headers)){var l=[];Object.getOwnPropertyNames(t.headers).forEach((function(e){l.push(fk(e)),n.setRequestHeader(e,gk(t.headers[e]))})),r.headers.forEach((function(e,t){-1===l.indexOf(t)&&n.setRequestHeader(t,e)}))}else r.headers.forEach((function(e,t){n.setRequestHeader(t,e)}));r.signal&&(r.signal.addEventListener("abort",o),n.onreadystatechange=function(){4===n.readyState&&r.signal.removeEventListener("abort",o)}),n.send("undefined"===typeof r._bodyInit?null:r._bodyInit)}))}Pk.polyfill=!0,ck.fetch||(ck.fetch=Pk,ck.Headers=vk,ck.Request=Lk,ck.Response=Rk);const Mk=6e4;(function(e){e()})((function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function i(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}function n(e,t){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n(e,t)}function o(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(N$){return!1}}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)}function c(e){var t=o();return function(){var i,s=r(e);if(t){var n=r(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return l(this,i)}}function d(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=r(e),null===e)break;return e}function h(){return h="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var s=d(e,t);if(s){var r=Object.getOwnPropertyDescriptor(s,t);return r.get?r.get.call(arguments.length<3?e:i):r.value}},h.apply(this,arguments)}var u=function(){function t(){e(this,t),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return i(t,[{key:"addEventListener",value:function(e,t,i){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:i})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var i=this.listeners[e],s=0,r=i.length;s<r;s++)if(i[s].callback===t)return void i.splice(s,1)}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var t=this.listeners[e.type],i=t.slice(),s=0,r=i.length;s<r;s++){var n=i[s];try{n.callback.call(this,e)}catch(N$){Promise.resolve().then((function(){throw N$}))}n.options&&n.options.once&&this.removeEventListener(e.type,n.callback)}return!e.defaultPrevented}}}]),t}(),p=function(t){s(o,t);var n=c(o);function o(){var t;return e(this,o),t=n.call(this),t.listeners||u.call(a(t)),Object.defineProperty(a(t),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(a(t),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(a(t),"reason",{value:void 0,writable:!0,configurable:!0}),t}return i(o,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"===typeof this.onabort&&this.onabort.call(this,e)),h(r(o.prototype),"dispatchEvent",this).call(this,e)}}]),o}(u),f=function(){function t(){e(this,t),Object.defineProperty(this,"signal",{value:new p,writable:!0,configurable:!0})}return i(t,[{key:"abort",value:function(e){var t;try{t=new Event("abort")}catch(N$){"undefined"!==typeof document?document.createEvent?(t=document.createEvent("Event"),t.initEvent("abort",!1,!1)):(t=document.createEventObject(),t.type="abort"):t={type:"abort",bubbles:!1,cancelable:!1}}var i=e;if(void 0===i)if("undefined"===typeof document)i=new Error("This operation was aborted"),i.name="AbortError";else try{i=new DOMException("signal is aborted without reason")}catch(F$){i=new Error("This operation was aborted"),i.name="AbortError"}this.signal.reason=i,this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();function g(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"===typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}"undefined"!==typeof Symbol&&Symbol.toStringTag&&(f.prototype[Symbol.toStringTag]="AbortController",p.prototype[Symbol.toStringTag]="AbortSignal"),function(e){g(e)&&(e.AbortController=f,e.AbortSignal=p)}("undefined"!==typeof self?self:Cu)}));var Ok=Object.getOwnPropertySymbols,Nk=Object.prototype.hasOwnProperty,Fk=Object.prototype.propertyIsEnumerable;function Bk(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function $k(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;var s=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==s.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(F$){return!1}}var Uk=$k()?Object.assign:function(e,t){for(var i,s,r=Bk(e),n=1;n<arguments.length;n++){for(var o in i=Object(arguments[n]),i)Nk.call(i,o)&&(r[o]=i[o]);if(Ok){s=Ok(i);for(var a=0;a<s.length;a++)Fk.call(i,s[a])&&(r[s[a]]=i[s[a]])}}return r},Gk=encodeURIComponent;function Hk(e){return e?Object.keys(e).map((function(t){return t+"="+Gk(e[t])})).join("&"):""}function jk(e){return"function"===typeof e}function zk(e,t){e||(e=window.location.href),t=t.replace(/[[]]/g,"\\$&");var i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),s=i.exec(e);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}function Vk(e,t,i){var s=new RegExp("([?&])"+t+"=.*?(&|$)","i"),r=-1!==e.indexOf("?")?"&":"?";return e.match(s)?e.replace(s,"$1"+t+"="+i+"$2"):e+r+t+"="+i}var Yk="undefined"!==typeof window?window:global,Wk="localStorage",Kk=Yk[Wk],qk={disabled:!1,set:function(e,t){return void 0===t?qk.remove(e):(Kk.setItem(e,qk.serialize(t)),t)},get:function(e,t){var i=qk.deserialize(Kk.getItem(e));return void 0===i?t:i},remove:function(e){Kk.removeItem(e)},clear:function(){Kk.clear()},has:function(e){return void 0!==qk.get(e)},forEach:function(e){for(var t=0;t<Kk.length;t++){var i=Kk.key(t);e(i,qk.get(i))}},getAll:function(){var e={};return qk.forEach((function(t,i){e[t]=i})),e},serialize:function(e){return JSON.stringify(e)},deserialize:function(e){if("string"===typeof e)try{return JSON.parse(e)}catch(F$){return e||void 0}}};try{var Xk="__store__";qk.set(Xk,Xk),qk.get(Xk)!==Xk&&(qk.disabled=!0),qk.remove(Xk)}catch(F$){qk.disabled=!0}qk.enabled=!qk.disabled;var Zk="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qk="undefined"!==typeof window?window:global,Jk=function(){return"Promise"in Qk&&Zk(jk(Promise))}(),eL=function(){},tL=encodeURIComponent,iL=Qk.document,sL=iL?iL.head||iL.getElementsByTagName("head")[0]:null,rL=2e3,nL={timeout:rL,retryTimes:2,backup:null,params:{},jsonp:"callback",name:null,cache:!1,useStore:!1,storeCheck:null,storeSign:null,storeCheckKey:null,dataCheck:null,charset:"UTF-8"},oL=(new Date).getTime();function aL(e,t,i){if(jk(e)?(i=e,t={}):e&&"object"===("undefined"===typeof e?"undefined":Zk(e))&&(i=t,t=e||{},e=t.url),jk(t)&&(i=t,t={}),t||(t={}),t=Uk({},nL,t),e=e||t.url,i=i||eL,!e||"string"!==typeof e)return i(new Error("Param url is needed!")),!aL.promiseClose&&Jk?new Promise((function(e,t){return t(new Error("Param url is needed!"))})):void 0;var s=lL(e,t.params),r=hL({useStore:t.useStore,storeKey:s,storeCheck:t.storeCheck,storeCheckKey:t.storeCheckKey,storeSign:t.storeSign,dataCheck:t.dataCheck});return r?(i(null,r),!aL.promiseClose&&Jk?new Promise((function(e){return e(r)})):void 0):(t.originalUrl=s,!aL.promiseClose&&Jk?new Promise((function(e,r){cL(s,t,(function(t,s){if(t)return i(t),r(t);i(null,s),e(s)}))})):void cL(s,t,i))}function lL(e,t){return t="string"===typeof t?t:Hk(t),e+=(~e.indexOf("?")?"&":"?")+t,e=e.replace("?&","?"),e}function cL(e,t,i){var s=t.originalUrl,r=t.charset,n=zk(e,t.jsonp),o="?"!==n&&n||t.name||"__jsonp"+oL++,a=arguments[3]||null;n?"?"===n&&(e=Vk(e,t.jsonp,tL(o))):e+=("&"===e.split("").pop()?"":"&")+t.jsonp+"="+tL(o),t.cache||(e+=("&"===e.split("").pop()?"":"&")+"_="+(new Date).getTime()),clearTimeout(Qk["timer_"+o]);var l=Qk[o];Qk[o]=function(e){if(l&&l(e),h(o),a&&(e.__$$backupCall=a),t.dataCheck){if(!1!==t.dataCheck(e))return pL({useStore:t.useStore,storeKey:s,data:e}),i(null,e);!1===fL(s,t,i)&&i(new Error("Data check error, and no fallback"))}else pL({useStore:t.useStore,storeKey:s,data:e}),i(null,e)};var c=gL({url:e,charset:r}),d=null!=t.timeout?t.timeout:rL;function h(e){c.parentNode&&c.parentNode.removeChild(c),Qk[e]=eL,clearTimeout(Qk["timer_"+e])}Qk["timer_"+o]=setTimeout((function(){return h(o),"number"===typeof t.retryTimes&&t.retryTimes>0?(t.retryTimes--,cL(s,t,i)):!1===fL(s,t,i)?i(new Error("Timeout and no data return")):void 0}),d)}function dL(e,t,i){return!!(e&&t&&i)&&(e[t]&&e[t]===i)}function hL(e){var t=e.useStore,i=e.storeKey,s=e.storeCheck,r=e.storeCheckKey,n=e.storeSign,o=e.dataCheck;if(t=!!t&&qk.enabled,t){var a=qk.get(i);if(s=s||dL,s(a,r,n)&&(!o||a&&o&&!1!==o(a)))return a}return null}function uL(e){var t=e.useStore,i=e.storeKey,s=e.dataCheck;if(t=!!t&&qk.enabled,t){var r=qk.get(i);if(!s||r&&s&&!1!==s(r))return r}return null}function pL(e){var t=e.useStore,i=e.storeKey,s=e.data;t=!!t&&qk.enabled,t&&qk.set(i,s)}function fL(e,t,i){var s=t.backup,r=void 0;if(s){if("string"===typeof s)return delete t.backup,r=lL(s,t.params),cL(r,t,i,{backup:s});if(Array.isArray(s)&&s.length){var n=s.shift();return r=lL(n,t.params),cL(r,t,i,{backup:n})}}var o=uL({useStore:t.useStore,storeKey:e,dataCheck:t.dataCheck});return!!o&&(i(null,o),!0)}function gL(e){var t=e.url,i=e.charset;if(iL){var s=iL.createElement("script");return s.type="text/javascript",i&&(s.charset=i),s.src=t,sL.appendChild(s),s}}const{Link:mL}=Wu;function vL(e="",t){return t="string"===typeof t?t:rk(t),t&&(e+=(~e.indexOf("?")?"&":"?")+t),e=e.replace("?&","?"),e}function yL(e={}){const{success:t,complete:i,fail:s}=e,r={},n={};let{cache:o="default",credentials:a,data:l,dataType:c,header:d={},jsonp:h,method:u="GET",mode:p,responseType:f,signal:g,timeout:m,url:v=""}=e,y=Tt(e,["cache","credentials","data","dataType","header","jsonp","method","mode","responseType","signal","timeout","url"]);if("number"!==typeof m&&(m=Mk),Object.assign(r,y),h)return r.params=l,r.cache=y.jsonpCache,r.timeout=m,"string"===typeof h&&(r.name=h),aL(v,r).then((e=>(n.statusCode=200,n.data=e,we(t)&&t(n),we(i)&&i(n),n))).catch((e=>(we(s)&&s(e),we(i)&&i(n),Promise.reject(e))));r.method=u;const b=r.method.toUpperCase();if(r.cache=o,"GET"===b||"HEAD"===b)v=vL(v,l);else if(["[object Array]","[object Object]"].indexOf(Object.prototype.toString.call(l))>=0){const e=Object.keys(d).find((e=>"content-type"===e.toLowerCase()));e||(d["Content-Type"]="application/json");const t=d[e||"Content-Type"];t.indexOf("application/json")>=0?r.body=JSON.stringify(l):t.indexOf("application/x-www-form-urlencoded")>=0?r.body=rk(l):r.body=l}else r.body=l;d&&(r.headers=d),p&&(r.mode=p);let w=null,E=null;g?r.signal=g:(E=new window.AbortController,r.signal=E.signal,w=setTimeout((function(){E&&E.abort()}),m)),r.credentials=a;const T=fetch(v,r).then((e=>{if(w&&(clearTimeout(w),w=null),E&&(E=null),!e){const e={ok:!1};throw e}n.statusCode=e.status,n.header={};for(const t of e.headers.keys())n.header[t]=e.headers.get(t);return"arraybuffer"===f?e.arrayBuffer():204===n.statusCode||"json"!==c&&"undefined"!==typeof c?"text"===f||"text"===c?e.text():Promise.resolve(null):e.json().catch((()=>null))})).then((e=>(n.data=e,we(t)&&t(n),we(i)&&i(n),n))).catch((e=>(w&&(clearTimeout(w),w=null),E&&(E=null),we(s)&&s(e),we(i)&&i(n),e.statusCode=n.statusCode,e.errMsg=e.message,Promise.reject(e))));return!T.abort&&E&&(T.abort=e=>{E&&(e&&e(),E.abort(),w&&(clearTimeout(w),w=null))}),T}function bL(e){return yL(e.requestParams)}const wL=new mL(bL),EL=(...e)=>{const[t="",i={}]=e;return"string"===typeof t?i.url=t:Object.assign(i,t),wL.request(i)};wL.addInterceptor.bind(wL),wL.cleanInterceptors.bind(wL);const{Behavior:TL,getEnv:SL,ENV_TYPE:AL,Link:xL,interceptors:kL,interceptorify:LL,Current:CL,options:_L,eventCenter:RL,Events:IL,preload:DL}=Wu,PL={Behavior:TL,getEnv:SL,ENV_TYPE:AL,Link:xL,interceptors:kL,interceptorify:LL,Current:CL,getCurrentInstance:ak,options:_L,nextTick:lk,eventCenter:RL,Events:IL,preload:DL,history:NA,navigateBack:qA,navigateTo:WA,reLaunch:ZA,redirectTo:KA,getCurrentPages:QA,switchTab:XA},ML=nk("requirePlugin");function OL(){var e;return(null===this||void 0===this?void 0:this.pxTransformConfig)?this.pxTransformConfig:(e=PL).config||(e.config={})}const NL=750,FL={640:1.17,750:1,828:.905},BL=20,$L=5,UL="rem",GL=function({designWidth:e=NL,deviceRatio:t=FL,baseFontSize:i=BL,unitPrecision:s=$L,targetUnit:r=UL}){const n=OL.call(this);n.designWidth=e,n.deviceRatio=t,n.baseFontSize=i,n.targetUnit=r,n.unitPrecision=s},HL=function(e=0){const t=OL.call(this),i=t.baseFontSize||BL,s=t.deviceRatio||FL,r=((e=0)=>we(t.designWidth)?t.designWidth(e):t.designWidth)(e);if(!(r in t.deviceRatio))throw new Error(`deviceRatio \u914d\u7f6e\u4e2d\u4e0d\u5b58\u5728 ${r} \u7684\u8bbe\u7f6e\uff01`);const n=t.targetUnit||UL,o=t.unitPrecision||$L,a=~~e;let l=1/s[r];switch(n){case"vw":l=r/100;break;case"px":l*=2;break;default:l*=2*i}let c=a/l;return o>=0&&o<=100&&(c=Number(c.toFixed(o))),c+n},jL=function(){const e=document.createElement("canvas");return 0===e.toDataURL("image/webp").indexOf("data:image/webp")},zL=function(){const e=OL.call(this);return{platform:"web",taroVersion:"4.0.5",designWidth:e.designWidth}};PL.requirePlugin=ML,PL.getApp=ok,PL.pxTransform=HL,PL.initPxTransform=GL,PL.canIUseWebp=jL,PL.getAppInfo=zL;const VL=PL;VL.setGlobalDataPlugin=Eu,VL.useAddToFavorites=hu,VL.useDidHide=Jh,VL.useDidShow=Qh,VL.useError=eu,VL.useLaunch=iu,VL.setGlobalDataPlugin=Eu,VL.useLoad=ru,VL.useOptionMenuClick=uu,VL.usePageNotFound=su,VL.usePageScroll=nu,VL.usePullDownRefresh=ou,VL.usePullIntercept=au,VL.useReachBottom=lu,VL.useReady=vu,VL.useResize=cu,VL.useRouter=yu,VL.useSaveExitState=pu,VL.useShareAppMessage=fu,VL.useShareTimeline=gu,VL.useTabItemTap=bu,VL.useTitleClick=mu,VL.useUnhandledRejection=tu,VL.useUnload=du;var YL=!1;let WL;const KL=e=>WL=e,qL=Symbol();function XL(e){return e&&"object"===typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!==typeof e.toJSON}var ZL;function QL(){const e=Kr(!0),t=e.run((()=>Ro({})));let i=[],s=[];const r=ko({install(e){KL(r),r._a=e,e.provide(qL,r),e.config.globalProperties.$pinia=r,s.forEach((e=>i.push(e))),s=[]},use(e){return this._a||YL?i.push(e):s.push(e),this},_p:i,_a:null,_e:e,_s:new Map,state:t});return r}(function(e){e["direct"]="direct",e["patchObject"]="patch object",e["patchFunction"]="patch function"})(ZL||(ZL={}));const JL=()=>{};function eC(e,t,i,s=JL){e.push(t);const r=()=>{const i=e.indexOf(t);i>-1&&(e.splice(i,1),s())};return!i&&qr()&&Xr(r),r}function tC(e,...t){e.slice().forEach((e=>{e(...t)}))}const iC=e=>e(),sC=Symbol(),rC=Symbol();function nC(e,t){e instanceof Map&&t instanceof Map?t.forEach(((t,i)=>e.set(i,t))):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const i in t){if(!t.hasOwnProperty(i))continue;const s=t[i],r=e[i];XL(r)&&XL(s)&&e.hasOwnProperty(i)&&!_o(s)&&!Eo(s)?e[i]=nC(r,s):e[i]=s}return e}const oC=Symbol();function aC(e){return!XL(e)||!e.hasOwnProperty(oC)}const{assign:lC}=Object;function cC(e){return!(!_o(e)||!e.effect)}function dC(e,t,i,s){const{state:r,actions:n,getters:o}=t,a=i.state.value[e];let l;function c(){a||(i.state.value[e]=r?r():{});const t=No(i.state.value[e]);return lC(t,n,Object.keys(o||{}).reduce(((t,s)=>(t[s]=ko(Cd((()=>{KL(i);const t=i._s.get(e);return o[s].call(t,t)}))),t)),{}))}return l=hC(e,c,t,i,s,!0),l}function hC(e,t,i={},s,r,n){let o;const a=lC({actions:{}},i),l={deep:!0};let c,d,h,u=[],p=[];const f=s.state.value[e];let g;function m(t){let i;c=d=!1,"function"===typeof t?(t(s.state.value[e]),i={type:ZL.patchFunction,storeId:e,events:h}):(nC(s.state.value[e],t),i={type:ZL.patchObject,payload:t,storeId:e,events:h});const r=g=Symbol();oa().then((()=>{g===r&&(c=!0)})),d=!0,tC(u,i,s.state.value[e])}n||f||(s.state.value[e]={}),Ro({});const v=n?function(){const{state:e}=i,t=e?e():{};this.$patch((e=>{lC(e,t)}))}:JL;function y(){o.stop(),u=[],p=[],s._s.delete(e)}const b=(t,i="")=>{if(sC in t)return t[rC]=i,t;const r=function(){KL(s);const i=Array.from(arguments),n=[],o=[];function a(e){n.push(e)}function l(e){o.push(e)}let c;tC(p,{args:i,name:r[rC],store:E,after:a,onError:l});try{c=t.apply(this&&this.$id===e?this:E,i)}catch(d){throw tC(o,d),d}return c instanceof Promise?c.then((e=>(tC(n,e),e))).catch((e=>(tC(o,e),Promise.reject(e)))):(tC(n,c),c)};return r[sC]=!0,r[rC]=i,r},w={_p:s,$id:e,$onAction:eC.bind(null,p),$patch:m,$reset:v,$subscribe(t,i={}){const r=eC(u,t,i.detached,(()=>n())),n=o.run((()=>mc((()=>s.state.value[e]),(s=>{("sync"===i.flush?d:c)&&t({storeId:e,type:ZL.direct,events:h},s)}),lC({},l,i))));return r},$dispose:y},E=vo(w);s._s.set(e,E);const T=s._a&&s._a.runWithContext||iC,S=T((()=>s._e.run((()=>(o=Kr()).run((()=>t({action:b})))))));for(const A in S){const t=S[A];if(_o(t)&&!cC(t)||Eo(t))n||(f&&aC(t)&&(_o(t)?t.value=f[A]:nC(t,f[A])),s.state.value[e][A]=t);else if("function"===typeof t){const e=b(t,A);S[A]=e,a.actions[A]=t}}return lC(E,S),lC(xo(E),S),Object.defineProperty(E,"$state",{get:()=>s.state.value[e],set:e=>{m((t=>{lC(t,e)}))}}),s._p.forEach((e=>{lC(E,o.run((()=>e({store:E,app:s._a,pinia:s,options:a}))))})),f&&n&&i.hydrate&&i.hydrate(E.$state,f),c=!0,d=!0,E}function uC(e,t,i){let s,r;const n="function"===typeof t;function o(e,i){const o=$l();e=e||(o?Bl(qL,null):null),e&&KL(e),e=WL,e._s.has(s)||(n?hC(s,t,r,e):dC(s,r,e));const a=e._s.get(s);return a}return"string"===typeof e?(s=e,r=n?i:t):(r=e,s=e.id),o.$id=s,o}function pC(e){return-1!==e.type.indexOf("mouse")?e.clientX:e.touches[0].clientX}function fC(e){return-1!==e.type.indexOf("mouse")?e.clientY:e.touches[0].clientY}var gC=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(N$){}return e}(),mC={install:function(e,t){var i=Object.assign({},{disableClick:!1,tapTolerance:10,swipeTolerance:30,touchHoldTolerance:400,longTapTimeInterval:400,touchClass:"",dragFrequency:100,rollOverFrequency:100,namespace:"touch"},t);function s(e){var t=this.$$touchObj,i=e.type.indexOf("touch")>=0,s=e.type.indexOf("mouse")>=0,r=this;i&&(t.lastTouchStartTime=e.timeStamp),s&&t.lastTouchStartTime&&e.timeStamp-t.lastTouchStartTime<350||t.touchStarted||(h(this),t.touchStarted=!0,t.touchMoved=!1,t.swipeOutBounded=!1,t.startX=pC(e),t.startY=fC(e),t.currentX=0,t.currentY=0,t.touchStartTime=e.timeStamp,t.hasSwipe=c(this,"swipe")||c(this,"swipe.left")||c(this,"swipe.right")||c(this,"swipe.top")||c(this,"swipe.bottom"),c(this,"hold")&&(t.touchHoldTimer=setTimeout((function(){t.touchHoldTimer=null,d(e,r,"hold")}),t.options.touchHoldTolerance)),d(e,this,"press"))}function r(e){var t=this.$$touchObj,i=pC(e),s=fC(e),r=t.currentX!=i||t.currentY!=s;if(t.currentX=i,t.currentY=s,t.touchMoved){if(t.hasSwipe&&!t.swipeOutBounded){var n=t.options.swipeTolerance;t.swipeOutBounded=Math.abs(t.startX-t.currentX)>n&&Math.abs(t.startY-t.currentY)>n}}else{var o=t.options.tapTolerance;t.touchMoved=Math.abs(t.startX-t.currentX)>o||Math.abs(t.startY-t.currentY)>o,t.touchMoved&&(p(t),d(e,this,"drag.once"))}if(c(this,"rollover")&&r){var a=e.timeStamp,l=t.options.rollOverFrequency;(null==t.touchRollTime||a>t.touchRollTime+l)&&(t.touchRollTime=a,d(e,this,"rollover"))}if(c(this,"drag")&&t.touchStarted&&t.touchMoved&&r){a=e.timeStamp,l=t.options.dragFrequency;(null==t.touchDragTime||a>t.touchDragTime+l)&&(t.touchDragTime=a,d(e,this,"drag"))}}function n(){var e=this.$$touchObj;p(e),u(this),e.touchStarted=e.touchMoved=!1,e.startX=e.startY=0}function o(e){var t=this.$$touchObj,i=e.type.indexOf("touch")>=0,s=e.type.indexOf("mouse")>=0;i&&(t.lastTouchEndTime=e.timeStamp);var r=i&&!t.touchHoldTimer;if(p(t),t.touchStarted=!1,u(this),!(s&&t.lastTouchEndTime&&e.timeStamp-t.lastTouchEndTime<350))if(d(e,this,"release"),t.touchMoved){if(t.hasSwipe&&!t.swipeOutBounded){var n,o=t.options.swipeTolerance,a=Math.abs(t.startY-t.currentY),l=Math.abs(t.startX-t.currentX);(a>o||l>o)&&(n=a>l?t.startY>t.currentY?"top":"bottom":t.startX>t.currentX?"left":"right",c(this,"swipe."+n)?d(e,this,"swipe."+n,n):d(e,this,"swipe",n))}}else if(c(this,"longtap")&&e.timeStamp-t.touchStartTime>t.options.longTapTimeInterval)e.cancelable&&e.preventDefault(),d(e,this,"longtap");else{if(c(this,"hold")&&r)return void(e.cancelable&&e.preventDefault());d(e,this,"tap")}}function a(){h(this)}function l(){u(this)}function c(e,t){var i=e.$$touchObj.callbacks[t];return null!=i&&i.length>0}function d(e,t,i,s){var r=t.$$touchObj,n=r.callbacks[i];if(null==n||0===n.length)return null;for(var o=0;o<n.length;o++){var a=n[o];a.modifiers.stop&&e.stopPropagation(),a.modifiers.prevent&&e.preventDefault(),a.modifiers.self&&e.target!==e.currentTarget||"function"===typeof a.value&&(s?a.value(s,e):a.value(e))}}function h(e){var t=e.$$touchObj.options.touchClass;t&&e.classList.add(t)}function u(e){var t=e.$$touchObj.options.touchClass;t&&e.classList.remove(t)}function p(e){e&&e.touchHoldTimer&&(clearTimeout(e.touchHoldTimer),e.touchHoldTimer=null)}function f(e,t){var s=e.$$touchObj||{callbacks:{},hasBindTouchEvents:!1,options:i};return t&&(s.options=Object.assign({},s.options,t)),e.$$touchObj=s,e.$$touchObj}e.directive(i.namespace,{beforeMount:function(e,t){var i=f(e),c=!!gC&&{passive:!0},d=t.arg||"tap";switch(d){case"swipe":var h=t.modifiers;if(h.left||h.right||h.top||h.bottom){for(var u in t.modifiers)if(["left","right","top","bottom"].indexOf(u)>=0){var p="swipe."+u;i.callbacks[p]=i.callbacks[p]||[],i.callbacks[p].push(t)}}else i.callbacks.swipe=i.callbacks.swipe||[],i.callbacks.swipe.push(t);break;case"press":case"drag":t.modifiers.disablePassive&&(c=!1);default:i.callbacks[d]=i.callbacks[d]||[],i.callbacks[d].push(t)}i.hasBindTouchEvents||(e.addEventListener("touchstart",s,c),e.addEventListener("touchmove",r,c),e.addEventListener("touchcancel",n),e.addEventListener("touchend",o),i.options.disableClick||(e.addEventListener("mousedown",s),e.addEventListener("mousemove",r),e.addEventListener("mouseup",o),e.addEventListener("mouseenter",a),e.addEventListener("mouseleave",l)),i.hasBindTouchEvents=!0)},unmounted:function(e){p(e.$$touchObj),e.removeEventListener("touchstart",s),e.removeEventListener("touchmove",r),e.removeEventListener("touchcancel",n),e.removeEventListener("touchend",o),e.$$touchObj&&!e.$$touchObj.options.disableClick&&(e.removeEventListener("mousedown",s),e.removeEventListener("mousemove",r),e.removeEventListener("mouseup",o),e.removeEventListener("mouseenter",a),e.removeEventListener("mouseleave",l)),delete e.$$touchObj}}),e.directive(`${i.namespace}-class`,{beforeMount:function(e,t){f(e,{touchClass:t.value})}}),e.directive(`${i.namespace}-options`,{beforeMount:function(e,t){f(e,t.value)}})}};function vC(e,t={}){e.config.isCustomElement=e=>/^taro-/.test(e)||"root"===e||"block"===e,Object.entries(t).forEach((([t,i])=>{const s=null===i||void 0===i?void 0:i.displayName;"string"===typeof s&&s&&(i.name=t,e.component(s.replace(/-core$/,""),i))}))}const yC="update:modelValue",bC="modelValue",wC="routerLink",EC="navManager",TC="router",SC="aria",AC=Symbol("EMPTY_PROP"),xC={default:AC},kC=e=>(null===e||void 0===e?void 0:e.split(" "))||[],LC=(e,t,i=[])=>{var s;return[...Array.from((null===(s=e.value)||void 0===s?void 0:s.classList)||[]),...i].filter(((e,i,s)=>!t.has(e)&&s.indexOf(e)===i))},CC=(e,t,i=[],s,r,n)=>{void 0!==t&&t();const o=Ba(((t,{attrs:i,slots:o,emit:a})=>{var l;let c=t[s];const d=Ro(),h=new Set(kC(i.class)),u=e=>{if(e.el){const t=Array.isArray(r)?r:[r];t.forEach((t=>{e.el.addEventListener(t.toLowerCase(),(e=>{c=(null===e||void 0===e?void 0:e.target)[s],a(yC,c),n&&a(n,e)}))}))}},p=hd(),f=null===(l=null===p||void 0===p?void 0:p.appContext)||void 0===l?void 0:l.provides[EC],g=f?Bl(EC):void 0,m=e=>{const{routerLink:i}=t;if(i!==AC)if(void 0!==g){const i={event:e};for(const e in t){const s=t[e];t.hasOwnProperty(e)&&e.startsWith(TC)&&s!==AC&&(i[e]=s)}g.navigate(i)}else console.warn("Tried to navigate, but no router was found. Make sure you have mounted Vue Router.")};return()=>{c=t[s],kC(i.class).forEach((e=>{h.add(e)}));const n=t.onClick,l=e=>{void 0!==n&&n(e),e.defaultPrevented||m(e)};let p={ref:d,class:LC(d,h),onClick:e=>{l(e),a("tap",e)},onVnodeBeforeMount:r?u:void 0};for(const e in t){const i=t[e];(t.hasOwnProperty(e)&&i!==AC||e.startsWith(SC))&&(p[e]=i)}return s&&(t[bC]!==AC?p=Object.assign(Object.assign({},p),{[s]:t[bC]}):c!==AC&&(p=Object.assign(Object.assign({},p),{[s]:c}))),_d(e,p,o.default&&o.default())}}));return o.displayName=e,o.props={[wC]:xC},i.forEach((e=>{o.props[e]=xC})),s&&(o.props[bC]=xC,o.emits=[yC,n]),o},_C=CC("taro-ad-core",qf),RC=CC("taro-ad-custom-core",Qf),IC=CC("taro-animation-video-core",tg),DC=CC("taro-animation-view-core",rg),PC=CC("taro-ar-camera-core",ag),MC=CC("taro-audio-core",hg,["src","controls","autoplay","loop","muted","nativeProps","error","play","pause","timeupdate","ended"]),OC=CC("taro-aweme-data-core",fg),NC=Ba(((e,{slots:t})=>t.default)),FC=CC("taro-button-core",Eg,["disabled","hoverClass","type","hoverStartTime","hoverStayTime","size","plain","loading","formType","tarobuttonsubmit","tarobuttonreset"]),BC=CC("taro-camera-core",Ag),$C=CC("taro-canvas-core",_g,["canvasId","height","width","nativeProps","longtap"]),UC=CC("taro-channel-live-core",Dg),GC=CC("taro-channel-video-core",Og),HC=CC("taro-checkbox-core",$g,["name","value","color","id","checked","disabled","nativeProps","checkboxchange"]),jC=CC("taro-checkbox-group-core",Vg,["name","change"]),zC=CC("taro-comment-detail-core",Kg),VC=CC("taro-comment-list-core",Zg),YC=CC("taro-contact-button-core",em),WC=CC("taro-cover-image-core",rm,["src","nativeProps","load","error"]),KC=CC("taro-cover-view-core",lm,["animation","hoverClass","hoverStartTime","hoverStayTime","longpress"]),qC=CC("taro-custom-wrapper-core",hm),XC=CC("taro-draggable-sheet-core",fm),ZC=CC("taro-editor-core",vm),QC=CC("taro-follow-swan-core",wm),JC=CC("taro-form-core",km,["submit"]),e_=CC("taro-functional-page-navigator-core",_m),t_=CC("taro-grid-builder-core",Dm),i_=CC("taro-grid-view-core",Om),s_=CC("taro-icon-core",$m,["type","size","color"]),r_=CC("taro-image-core",jm,["src","mode","lazyLoad","nativeProps","load","error"]),n_=CC("taro-inline-payment-panel-core",Ym),o_=CC("taro-input-core",Qm,["value","type","password","placeholder","disabled","maxlength","autoFocus","confirmType","name","nativeProps","input","paste","focus","blur","confirm","change","keydown"],"value","input"),a_=CC("taro-keyboard-accessory-core",tv),l_=CC("taro-label-core",rv,["for"]),c_=CC("taro-lifestyle-core",av),d_=CC("taro-like-core",dv),h_=CC("taro-list-builder-core",pv),u_=CC("taro-list-view-core",mv),p_=CC("taro-live-player-core",bv),f_=CC("taro-live-pusher-core",Tv),g_=CC("taro-login-core",xv),m_=CC("taro-lottie-core",Cv),v_=CC("taro-map-core",Ov,["latitude","longitude","scale","minScale","maxScale","markers","polyline","circles","polygons","subkey","layerStyle","rotate","skew","showCompass","showScale","enableOverlooking","enableZoom","enableScroll","enableRotate","enableSatellite","enableTraffic","enableBuilding","enableAutoMaxOverlooking","enable3D","width","height","tap"]),y_=CC("taro-match-media-core",Bv),b_=CC("taro-movable-area-core",Yv,["scaleArea"]),w_=CC("taro-movable-view-core",Xv,["x","y","direction","outOfBounds","inertia","friction","damping","disabled","scale","scaleMin","scaleMax","scaleValue","animation","change","scale","htouchmove","vtouchmove"]),E_=CC("taro-native-slot-core",Jv),T_=CC("taro-navigation-bar-core",iy),S_=CC("taro-navigator-core",oy,["hoverClass","url","openType","isHover","delta","cuccess","fail","complete"]),A_=CC("taro-nested-scroll-body-core",cy),x_=CC("taro-nested-scroll-header-core",uy),k_=CC("taro-official-account-core",gy),L_=CC("taro-open-container-core",yy),C_=CC("taro-open-data-core",Ey),__=CC("taro-page-container-core",Ay),R_=CC("taro-page-meta-core",Ly),I_=CC("taro-picker-core",qy,["mode","disabled","range","rangeKey","value","start","end","fields","name","textProps","change","columnchange","cancel"],"value","change"),D_=CC("taro-picker-group",Xy,["mode","range","rangeKey","height","columnId","updateHeight","updateDay","columnChange"]),P_=CC("taro-picker-view-column-core",eb,["col","initialPosition","paddingVertical","onselect","onselectstart","onselectend"]),M_=CC("taro-picker-view-core",nb,["indicatorStyle","indicatorClass","value","maskStyle","maskClass","change","pickstart","pickend"]),O_=CC("taro-progress-core",cb,["percent","showInfo","borderRadius","fontSize","strokeWidth","activeColor","backgroundColor","active"]),N_=CC("taro-pull-to-refresh-core",yb,["prefixCls","distanceToRefresh","damping","indicator","refresh"]),F_=CC("taro-radio-core",Eb,["name","value","id","checked","disabled","nativeProps","radiochange"]),B_=CC("taro-radio-group-core",Lb,["name","change"]),$_=CC("taro-rich-text-core",Ib,["nodes","selectable","userSelect","space"]),U_=CC("taro-root-portal-core",Mb),G_=CC("taro-rtc-room-core",Fb),H_=CC("taro-rtc-room-item-core",Ub),j_=CC("taro-scroll-view-core",Vb,["scrollX","scrollY","upperThreshold","lowerThreshold","mpScrollTop","mpScrollLeft","mpScrollIntoView","mpScrollIntoViewAlignment","animated","scroll","scrolltoupper","scrolltolower"]),z_=CC("taro-share-element-core",Kb),V_=CC("taro-slider-core",Qb,["min","max","step","disabled","value","activeColor","backgroundColor","blockSize","blockColor","showValue","name","change","changing"],"value","change"),Y_=CC("taro-slot-core",tw),W_=CC("taro-snapshot-core",rw),K_=CC("taro-span-core",aw),q_=CC("taro-sticky-header-core",dw),X_=CC("taro-sticky-section-core",pw),Z_=CC("taro-swiper-core",uS,["indicatorDots","indicatorColor","indicatorActiveColor","autoplay","current","currentItemId","interval","duration","circular","vertical","previousMargin","nextMargin","displayMultipleItems","full","zoom","effectsProps","change","animationfinish"]),Q_=CC("taro-swiper-item-core",gS,["itemId"]),J_=CC("taro-switch-core",bS,["type","checked","color","name","disabled","nativeProps","change"],"checked","change"),eR=CC("taro-tab-item-core",TS),tR=CC("taro-tabbar",FS,["conf","longpress"]),iR=CC("taro-tabs-core",US),sR=CC("taro-text-core",zS,["selectable","userSelect","space","numberOfLines"]),rR=CC("taro-textarea-core",qS,["value","placeholder","disabled","maxlength","autoFocus","autoHeight","name","nativeProps","input","focus","blur","confirm","change","linechange","keydown"],"value","input"),nR=CC("taro-video-control",rA,["controls","currentTime","duration","isPlaying","pauseFunc","playFunc","seekFunc","showPlayBtn","showProgress"]),oR=CC("taro-video-core",dA,["src","duration","controls","autoplay","loop","muted","initialTime","poster","objectFit","showProgress","showFullscreenBtn","showPlayBtn","showCenterPlayBtn","showMuteBtn","danmuList","danmuBtn","enableDanmu","enablePlayGesture","enableProgressGesture","vslideGesture","vslideGestureInFullscreen","nativeProps","play","pause","ended","timeupdate","error","fullscreenchange","progress","loadedmetadata"]),aR=CC("taro-video-danmu",hA,["enable"]),lR=CC("taro-view-core",gA,["animation","hoverClass","hoverStartTime","hoverStayTime","longpress"]),cR=CC("taro-voip-room-core",yA),dR=CC("taro-web-view-core",TA,["src","load","error"]),hR=Object.freeze(Object.defineProperty({__proto__:null,Ad:_C,AdCustom:RC,AnimationVideo:IC,AnimationView:DC,ArCamera:PC,Audio:MC,AwemeData:OC,Block:NC,Button:FC,Camera:BC,Canvas:$C,ChannelLive:UC,ChannelVideo:GC,Checkbox:HC,CheckboxGroup:jC,CommentDetail:zC,CommentList:VC,ContactButton:YC,CoverImage:WC,CoverView:KC,CustomWrapper:qC,DraggableSheet:XC,Editor:ZC,FollowSwan:QC,Form:JC,FunctionalPageNavigator:e_,GridBuilder:t_,GridView:i_,Icon:s_,Image:r_,InlinePaymentPanel:n_,Input:o_,KeyboardAccessory:a_,Label:l_,Lifestyle:c_,Like:d_,ListBuilder:h_,ListView:u_,LivePlayer:p_,LivePusher:f_,Login:g_,Lottie:m_,Map:v_,MatchMedia:y_,MovableArea:b_,MovableView:w_,NativeSlot:E_,NavigationBar:T_,Navigator:S_,NestedScrollBody:A_,NestedScrollHeader:x_,OfficialAccount:k_,OpenContainer:L_,OpenData:C_,PageContainer:__,PageMeta:R_,Picker:I_,PickerGroup:D_,PickerView:M_,PickerViewColumn:P_,Progress:O_,PullToRefresh:N_,Radio:F_,RadioGroup:B_,RichText:$_,RootPortal:U_,RtcRoom:G_,RtcRoomItem:H_,ScrollView:j_,ShareElement:z_,Slider:V_,Slot:Y_,Snapshot:W_,Span:K_,StickyHeader:q_,StickySection:X_,Swiper:Z_,SwiperItem:Q_,Switch:J_,TabItem:eR,Tabbar:tR,Tabs:iR,Text:sR,Textarea:rR,Video:oR,VideoControl:nR,VideoDanmu:aR,View:lR,VoipRoom:cR,WebView:dR},Symbol.toStringTag,{value:"Module"}));function uR(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}var pR={exports:{}};(function(e){(function(){var t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,n={buildAbsoluteURL:function(e,t,s){if(s=s||{},e=e.trim(),t=t.trim(),!t){if(!s.alwaysNormalize)return e;var r=n.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=n.normalizePath(r.path),n.buildURLFromParts(r)}var o=n.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return s.alwaysNormalize?(o.path=n.normalizePath(o.path),n.buildURLFromParts(o)):t;var a=n.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var l=i.exec(a.path);a.netLoc=l[1],a.path=l[2]}a.netLoc&&!a.path&&(a.path="/");var c={scheme:a.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(c.netLoc=a.netLoc,"/"!==o.path[0]))if(o.path){var d=a.path,h=d.substring(0,d.lastIndexOf("/")+1)+o.path;c.path=n.normalizePath(h)}else c.path=a.path,o.params||(c.params=a.params,o.query||(c.query=a.query));return null===c.path&&(c.path=s.alwaysNormalize?n.normalizePath(o.path):o.path),n.buildURLFromParts(c)},parseURL:function(e){var i=t.exec(e);return i?{scheme:i[1]||"",netLoc:i[2]||"",path:i[3]||"",params:i[4]||"",query:i[5]||"",fragment:i[6]||""}:null},normalizePath:function(e){e=e.split("").reverse().join("").replace(s,"");while(e.length!==(e=e.replace(r,"")).length);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=n})()})(pR);var fR=pR.exports;function gR(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function mR(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?gR(Object(i),!0).forEach((function(t){bR(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):gR(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function vR(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function yR(e){var t=vR(e,"string");return"symbol"==typeof t?t:String(t)}function bR(e,t,i){return t=yR(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function wR(){return wR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},wR.apply(this,arguments)}const ER=Number.isFinite||function(e){return"number"===typeof e&&isFinite(e)},TR=Number.isSafeInteger||function(e){return"number"===typeof e&&Math.abs(e)<=SR},SR=Number.MAX_SAFE_INTEGER||9007199254740991;let AR=function(e){return e["MEDIA_ATTACHING"]="hlsMediaAttaching",e["MEDIA_ATTACHED"]="hlsMediaAttached",e["MEDIA_DETACHING"]="hlsMediaDetaching",e["MEDIA_DETACHED"]="hlsMediaDetached",e["BUFFER_RESET"]="hlsBufferReset",e["BUFFER_CODECS"]="hlsBufferCodecs",e["BUFFER_CREATED"]="hlsBufferCreated",e["BUFFER_APPENDING"]="hlsBufferAppending",e["BUFFER_APPENDED"]="hlsBufferAppended",e["BUFFER_EOS"]="hlsBufferEos",e["BUFFER_FLUSHING"]="hlsBufferFlushing",e["BUFFER_FLUSHED"]="hlsBufferFlushed",e["MANIFEST_LOADING"]="hlsManifestLoading",e["MANIFEST_LOADED"]="hlsManifestLoaded",e["MANIFEST_PARSED"]="hlsManifestParsed",e["LEVEL_SWITCHING"]="hlsLevelSwitching",e["LEVEL_SWITCHED"]="hlsLevelSwitched",e["LEVEL_LOADING"]="hlsLevelLoading",e["LEVEL_LOADED"]="hlsLevelLoaded",e["LEVEL_UPDATED"]="hlsLevelUpdated",e["LEVEL_PTS_UPDATED"]="hlsLevelPtsUpdated",e["LEVELS_UPDATED"]="hlsLevelsUpdated",e["AUDIO_TRACKS_UPDATED"]="hlsAudioTracksUpdated",e["AUDIO_TRACK_SWITCHING"]="hlsAudioTrackSwitching",e["AUDIO_TRACK_SWITCHED"]="hlsAudioTrackSwitched",e["AUDIO_TRACK_LOADING"]="hlsAudioTrackLoading",e["AUDIO_TRACK_LOADED"]="hlsAudioTrackLoaded",e["SUBTITLE_TRACKS_UPDATED"]="hlsSubtitleTracksUpdated",e["SUBTITLE_TRACKS_CLEARED"]="hlsSubtitleTracksCleared",e["SUBTITLE_TRACK_SWITCH"]="hlsSubtitleTrackSwitch",e["SUBTITLE_TRACK_LOADING"]="hlsSubtitleTrackLoading",e["SUBTITLE_TRACK_LOADED"]="hlsSubtitleTrackLoaded",e["SUBTITLE_FRAG_PROCESSED"]="hlsSubtitleFragProcessed",e["CUES_PARSED"]="hlsCuesParsed",e["NON_NATIVE_TEXT_TRACKS_FOUND"]="hlsNonNativeTextTracksFound",e["INIT_PTS_FOUND"]="hlsInitPtsFound",e["FRAG_LOADING"]="hlsFragLoading",e["FRAG_LOAD_EMERGENCY_ABORTED"]="hlsFragLoadEmergencyAborted",e["FRAG_LOADED"]="hlsFragLoaded",e["FRAG_DECRYPTED"]="hlsFragDecrypted",e["FRAG_PARSING_INIT_SEGMENT"]="hlsFragParsingInitSegment",e["FRAG_PARSING_USERDATA"]="hlsFragParsingUserdata",e["FRAG_PARSING_METADATA"]="hlsFragParsingMetadata",e["FRAG_PARSED"]="hlsFragParsed",e["FRAG_BUFFERED"]="hlsFragBuffered",e["FRAG_CHANGED"]="hlsFragChanged",e["FPS_DROP"]="hlsFpsDrop",e["FPS_DROP_LEVEL_CAPPING"]="hlsFpsDropLevelCapping",e["MAX_AUTO_LEVEL_UPDATED"]="hlsMaxAutoLevelUpdated",e["ERROR"]="hlsError",e["DESTROYING"]="hlsDestroying",e["KEY_LOADING"]="hlsKeyLoading",e["KEY_LOADED"]="hlsKeyLoaded",e["LIVE_BACK_BUFFER_REACHED"]="hlsLiveBackBufferReached",e["BACK_BUFFER_REACHED"]="hlsBackBufferReached",e["STEERING_MANIFEST_LOADED"]="hlsSteeringManifestLoaded",e}({}),xR=function(e){return e["NETWORK_ERROR"]="networkError",e["MEDIA_ERROR"]="mediaError",e["KEY_SYSTEM_ERROR"]="keySystemError",e["MUX_ERROR"]="muxError",e["OTHER_ERROR"]="otherError",e}({}),kR=function(e){return e["KEY_SYSTEM_NO_KEYS"]="keySystemNoKeys",e["KEY_SYSTEM_NO_ACCESS"]="keySystemNoAccess",e["KEY_SYSTEM_NO_SESSION"]="keySystemNoSession",e["KEY_SYSTEM_NO_CONFIGURED_LICENSE"]="keySystemNoConfiguredLicense",e["KEY_SYSTEM_LICENSE_REQUEST_FAILED"]="keySystemLicenseRequestFailed",e["KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED"]="keySystemServerCertificateRequestFailed",e["KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED"]="keySystemServerCertificateUpdateFailed",e["KEY_SYSTEM_SESSION_UPDATE_FAILED"]="keySystemSessionUpdateFailed",e["KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED"]="keySystemStatusOutputRestricted",e["KEY_SYSTEM_STATUS_INTERNAL_ERROR"]="keySystemStatusInternalError",e["MANIFEST_LOAD_ERROR"]="manifestLoadError",e["MANIFEST_LOAD_TIMEOUT"]="manifestLoadTimeOut",e["MANIFEST_PARSING_ERROR"]="manifestParsingError",e["MANIFEST_INCOMPATIBLE_CODECS_ERROR"]="manifestIncompatibleCodecsError",e["LEVEL_EMPTY_ERROR"]="levelEmptyError",e["LEVEL_LOAD_ERROR"]="levelLoadError",e["LEVEL_LOAD_TIMEOUT"]="levelLoadTimeOut",e["LEVEL_PARSING_ERROR"]="levelParsingError",e["LEVEL_SWITCH_ERROR"]="levelSwitchError",e["AUDIO_TRACK_LOAD_ERROR"]="audioTrackLoadError",e["AUDIO_TRACK_LOAD_TIMEOUT"]="audioTrackLoadTimeOut",e["SUBTITLE_LOAD_ERROR"]="subtitleTrackLoadError",e["SUBTITLE_TRACK_LOAD_TIMEOUT"]="subtitleTrackLoadTimeOut",e["FRAG_LOAD_ERROR"]="fragLoadError",e["FRAG_LOAD_TIMEOUT"]="fragLoadTimeOut",e["FRAG_DECRYPT_ERROR"]="fragDecryptError",e["FRAG_PARSING_ERROR"]="fragParsingError",e["FRAG_GAP"]="fragGap",e["REMUX_ALLOC_ERROR"]="remuxAllocError",e["KEY_LOAD_ERROR"]="keyLoadError",e["KEY_LOAD_TIMEOUT"]="keyLoadTimeOut",e["BUFFER_ADD_CODEC_ERROR"]="bufferAddCodecError",e["BUFFER_INCOMPATIBLE_CODECS_ERROR"]="bufferIncompatibleCodecsError",e["BUFFER_APPEND_ERROR"]="bufferAppendError",e["BUFFER_APPENDING_ERROR"]="bufferAppendingError",e["BUFFER_STALLED_ERROR"]="bufferStalledError",e["BUFFER_FULL_ERROR"]="bufferFullError",e["BUFFER_SEEK_OVER_HOLE"]="bufferSeekOverHole",e["BUFFER_NUDGE_ON_STALL"]="bufferNudgeOnStall",e["INTERNAL_EXCEPTION"]="internalException",e["INTERNAL_ABORTED"]="aborted",e["UNKNOWN"]="unknown",e}({});const LR=function(){},CR={trace:LR,debug:LR,log:LR,warn:LR,info:LR,error:LR};let _R=CR;function RR(e){const t=self.console[e];return t?t.bind(self.console,`[${e}] >`):LR}function IR(e,...t){t.forEach((function(t){_R[t]=e[t]?e[t].bind(e):RR(t)}))}function DR(e,t){if("object"===typeof console&&!0===e||"object"===typeof e){IR(e,"debug","log","info","warn","error");try{_R.log(`Debug logs enabled for "${t}" in hls.js version 1.5.15`)}catch(N$){_R=CR}}else _R=CR}const PR=_R,MR=/^(\d+)x(\d+)$/,OR=/(.+?)=(".*?"|.*?)(?:,|$)/g;class NR{constructor(e){"string"===typeof e&&(e=NR.parseAttrList(e)),wR(this,e)}get clientAttrs(){return Object.keys(this).filter((e=>"X-"===e.substring(0,2)))}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const i=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)i[e]=parseInt(t.slice(2*e,2*e+2),16);return i}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const i=this[e];return i?parseFloat(i):t}enumeratedString(e){return this[e]}bool(e){return"YES"===this[e]}decimalResolution(e){const t=MR.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const i={},s='"';OR.lastIndex=0;while(null!==(t=OR.exec(e))){let e=t[2];0===e.indexOf(s)&&e.lastIndexOf(s)===e.length-1&&(e=e.slice(1,-1));const r=t[1].trim();i[r]=e}return i}}function FR(e){return"ID"!==e&&"CLASS"!==e&&"START-DATE"!==e&&"DURATION"!==e&&"END-DATE"!==e&&"END-ON-NEXT"!==e}function BR(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e}class $R{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const i=t.attr;for(const t in i)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==i[t]){PR.warn(`DATERANGE tag attribute: "${t}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=t;break}e=wR(new NR({}),i,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const e=new Date(this.attr["END-DATE"]);ER(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(ER(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&ER(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class UR{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var GR={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class HR{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[GR.AUDIO]:null,[GR.VIDEO]:null,[GR.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,t){const i=e.split("@",2);let s;s=1===i.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(i[1]),this._byteRange=[s,parseInt(i[0])+s]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=fR.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class jR extends HR{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new UR,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{const e=Object.keys(this.levelkeys);if(1===e.length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;if(!ER(this.programDateTime))return null;const e=ER(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){const e=Object.keys(this.levelkeys),t=e.length;if(t>1||1===t&&this.levelkeys[e[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,i,s,r,n=!1){const{elementaryStreams:o}=this,a=o[e];a?(a.startPTS=Math.min(a.startPTS,t),a.endPTS=Math.max(a.endPTS,i),a.startDTS=Math.min(a.startDTS,s),a.endDTS=Math.max(a.endDTS,r)):o[e]={startPTS:t,endPTS:i,startDTS:s,endDTS:r,partial:n}}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[GR.AUDIO]=null,e[GR.VIDEO]=null,e[GR.AUDIOVIDEO]=null}}class zR extends HR{constructor(e,t,i,s,r){super(i),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new UR,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=s;const n=e.enumeratedString("BYTERANGE");n&&this.setByteRange(n,r),r&&(this.fragOffset=r.fragOffset+r.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}const VR=10;class YR{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&i>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return!!this.fragments.length&&ER(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||VR}get drift(){const e=this.driftEndTime-this.driftStartTime;if(e>0){const t=this.driftEnd-this.driftStart;return 1e3*t/e}return 1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function WR(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}function KR(e){const t=ZR(e).subarray(0,16),i=new Uint8Array(16);return i.set(t,16-t.length),i}function qR(e){const t=function(e,t,i){const s=e[t];e[t]=e[i],e[i]=s};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}function XR(e){const t=e.split(":");let i=null;if("data"===t[0]&&2===t.length){const e=t[1].split(";"),s=e[e.length-1].split(",");if(2===s.length){const t="base64"===s[0],r=s[1];t?(e.splice(-1,1),i=WR(r)):i=KR(r)}}return i}function ZR(e){return Uint8Array.from(unescape(encodeURIComponent(e)),(e=>e.charCodeAt(0)))}const QR="undefined"!==typeof self?self:void 0;var JR={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},eI={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function tI(e){switch(e){case eI.FAIRPLAY:return JR.FAIRPLAY;case eI.PLAYREADY:return JR.PLAYREADY;case eI.WIDEVINE:return JR.WIDEVINE;case eI.CLEARKEY:return JR.CLEARKEY}}var iI={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",FAIRPLAY:"94ce86fb07ff4f43adb893d2fa968ca2",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function sI(e){return e===iI.WIDEVINE?JR.WIDEVINE:e===iI.PLAYREADY?JR.PLAYREADY:e===iI.CENC||e===iI.CLEARKEY?JR.CLEARKEY:void 0}function rI(e){switch(e){case JR.FAIRPLAY:return eI.FAIRPLAY;case JR.PLAYREADY:return eI.PLAYREADY;case JR.WIDEVINE:return eI.WIDEVINE;case JR.CLEARKEY:return eI.CLEARKEY}}function nI(e){const{drmSystems:t,widevineLicenseUrl:i}=e,s=t?[JR.FAIRPLAY,JR.WIDEVINE,JR.PLAYREADY,JR.CLEARKEY].filter((e=>!!t[e])):[];return!s[JR.WIDEVINE]&&i&&s.push(JR.WIDEVINE),s}const oI=function(e){return null!=QR&&null!=(e=QR.navigator)&&e.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function aI(e,t,i,s){let r;switch(e){case JR.FAIRPLAY:r=["cenc","sinf"];break;case JR.WIDEVINE:case JR.PLAYREADY:r=["cenc"];break;case JR.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${e}`)}return lI(r,t,i,s)}function lI(e,t,i,s){const r={initDataTypes:e,persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",sessionTypes:s.sessionTypes||[s.sessionType||"temporary"],audioCapabilities:t.map((e=>({contentType:`audio/mp4; codecs="${e}"`,robustness:s.audioRobustness||"",encryptionScheme:s.audioEncryptionScheme||null}))),videoCapabilities:i.map((e=>({contentType:`video/mp4; codecs="${e}"`,robustness:s.videoRobustness||"",encryptionScheme:s.videoEncryptionScheme||null})))};return[r]}function cI(e,t,i){return Uint8Array.prototype.slice?e.slice(t,i):new Uint8Array(Array.prototype.slice.call(e,t,i))}const dI=(e,t)=>t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,hI=(e,t)=>t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,uI=(e,t)=>{const i=t;let s=0;while(dI(e,t)){s+=10;const i=pI(e,t+6);s+=i,hI(e,t+10)&&(s+=10),t+=s}if(s>0)return e.subarray(i,i+s)},pI=(e,t)=>{let i=0;return i=(127&e[t])<<21,i|=(127&e[t+1])<<14,i|=(127&e[t+2])<<7,i|=127&e[t+3],i},fI=(e,t)=>dI(e,t)&&pI(e,t+6)+10<=e.length-t,gI=e=>{const t=yI(e);for(let i=0;i<t.length;i++){const e=t[i];if(mI(e))return SI(e)}},mI=e=>e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info,vI=e=>{const t=String.fromCharCode(e[0],e[1],e[2],e[3]),i=pI(e,4),s=10;return{type:t,size:i,data:e.subarray(s,s+i)}},yI=e=>{let t=0;const i=[];while(dI(e,t)){const s=pI(e,t+6);t+=10;const r=t+s;while(t+8<r){const s=vI(e.subarray(t)),r=bI(s);r&&i.push(r),t+=s.size+10}hI(e,t)&&(t+=10)}return i},bI=e=>"PRIV"===e.type?wI(e):"W"===e.type[0]?TI(e):EI(e),wI=e=>{if(e.size<2)return;const t=AI(e.data,!0),i=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:i.buffer}},EI=e=>{if(e.size<2)return;if("TXXX"===e.type){let t=1;const i=AI(e.data.subarray(t),!0);t+=i.length+1;const s=AI(e.data.subarray(t));return{key:e.type,info:i,data:s}}const t=AI(e.data.subarray(1));return{key:e.type,data:t}},TI=e=>{if("WXXX"===e.type){if(e.size<2)return;let t=1;const i=AI(e.data.subarray(t),!0);t+=i.length+1;const s=AI(e.data.subarray(t));return{key:e.type,info:i,data:s}}const t=AI(e.data);return{key:e.type,data:t}},SI=e=>{if(8===e.data.byteLength){const t=new Uint8Array(e.data),i=1&t[3];let s=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return s/=45,i&&(s+=47721858.84),Math.round(s)}},AI=(e,t=!1)=>{const i=kI();if(i){const s=i.decode(e);if(t){const e=s.indexOf("\0");return-1!==e?s.substring(0,e):s}return s.replace(/\0/g,"")}const s=e.length;let r,n,o,a="",l=0;while(l<s){if(r=e[l++],0===r&&t)return a;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(r);break;case 12:case 13:n=e[l++],a+=String.fromCharCode((31&r)<<6|63&n);break;case 14:n=e[l++],o=e[l++],a+=String.fromCharCode((15&r)<<12|(63&n)<<6|63&o);break}}return a};let xI;function kI(){if(!navigator.userAgent.includes("PlayStation 4"))return xI||"undefined"===typeof self.TextDecoder||(xI=new self.TextDecoder("utf-8")),xI}const LI={hexDump:function(e){let t="";for(let i=0;i<e.length;i++){let s=e[i].toString(16);s.length<2&&(s="0"+s),t+=s}return t}},CI=Math.pow(2,32)-1,_I=[].push,RI={video:1,audio:2,id3:3,text:4};function II(e){return String.fromCharCode.apply(null,e)}function DI(e,t){const i=e[t]<<8|e[t+1];return i<0?65536+i:i}function PI(e,t){const i=OI(e,t);return i<0?4294967296+i:i}function MI(e,t){let i=PI(e,t);return i*=Math.pow(2,32),i+=PI(e,t+4),i}function OI(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function NI(e,t,i){e[t]=i>>24,e[t+1]=i>>16&255,e[t+2]=i>>8&255,e[t+3]=255&i}function FI(e){const t=e.byteLength;for(let i=0;i<t;){const s=PI(e,i);if(s>8&&109===e[i+4]&&111===e[i+5]&&111===e[i+6]&&102===e[i+7])return!0;i=s>1?i+s:t}return!1}function BI(e,t){const i=[];if(!t.length)return i;const s=e.byteLength;for(let r=0;r<s;){const n=PI(e,r),o=II(e.subarray(r+4,r+8)),a=n>1?r+n:s;if(o===t[0])if(1===t.length)i.push(e.subarray(r+8,a));else{const s=BI(e.subarray(r+8,a),t.slice(1));s.length&&_I.apply(i,s)}r=a}return i}function $I(e){const t=[],i=e[0];let s=8;const r=PI(e,s);s+=4;let n=0,o=0;0===i?(n=PI(e,s),o=PI(e,s+4),s+=8):(n=MI(e,s),o=MI(e,s+8),s+=16),s+=2;let a=e.length+o;const l=DI(e,s);s+=2;for(let c=0;c<l;c++){let i=s;const n=PI(e,i);i+=4;const o=2147483647&n,l=(2147483648&n)>>>31;if(1===l)return PR.warn("SIDX has hierarchical references (not supported)"),null;const c=PI(e,i);i+=4,t.push({referenceSize:o,subsegmentDuration:c,info:{duration:c/r,start:a,end:a+o-1}}),a+=o,i+=4,s=i}return{earliestPresentationTime:n,timescale:r,version:i,referencesCount:l,references:t}}function UI(e){const t=[],i=BI(e,["moov","trak"]);for(let r=0;r<i.length;r++){const e=i[r],s=BI(e,["tkhd"])[0];if(s){let i=s[0];const r=PI(s,0===i?12:20),n=BI(e,["mdia","mdhd"])[0];if(n){i=n[0];const s=PI(n,0===i?12:20),o=BI(e,["mdia","hdlr"])[0];if(o){const i=II(o.subarray(8,12)),n={soun:GR.AUDIO,vide:GR.VIDEO}[i];if(n){const i=BI(e,["mdia","minf","stbl","stsd"])[0],o=GI(i);t[r]={timescale:s,type:n},t[n]=mR({timescale:s,id:r},o)}}}}}const s=BI(e,["moov","mvex","trex"]);return s.forEach((e=>{const i=PI(e,4),s=t[i];s&&(s.default={duration:PI(e,12),flags:PI(e,20)})})),t}function GI(e){const t=e.subarray(8),i=t.subarray(86),s=II(t.subarray(4,8));let r=s;const n="enca"===s||"encv"===s;if(n){const e=BI(t,[s])[0],i=e.subarray("enca"===s?28:78),n=BI(i,["sinf"]);n.forEach((e=>{const t=BI(e,["schm"])[0];if(t){const i=II(t.subarray(4,8));if("cbcs"===i||"cenc"===i){const t=BI(e,["frma"])[0];t&&(r=II(t))}}}))}switch(r){case"avc1":case"avc2":case"avc3":case"avc4":{const e=BI(i,["avcC"])[0];r+="."+jI(e[1])+jI(e[2])+jI(e[3]);break}case"mp4a":{const e=BI(t,[s])[0],i=BI(e.subarray(28),["esds"])[0];if(i&&i.length>12){let e=4;if(3!==i[e++])break;e=HI(i,e),e+=2;const t=i[e++];if(128&t&&(e+=2),64&t&&(e+=i[e++]),4!==i[e++])break;e=HI(i,e);const s=i[e++];if(64!==s)break;if(r+="."+jI(s),e+=12,5!==i[e++])break;e=HI(i,e);const n=i[e++];let o=(248&n)>>3;31===o&&(o+=1+((7&n)<<3)+((224&i[e])>>5)),r+="."+o}break}case"hvc1":case"hev1":{const e=BI(i,["hvcC"])[0],t=e[1],s=["","A","B","C"][t>>6],n=31&t,o=PI(e,2),a=(32&t)>>5?"H":"L",l=e[12],c=e.subarray(6,12);r+="."+s+n,r+="."+o.toString(16).toUpperCase(),r+="."+a+l;let d="";for(let i=c.length;i--;){const e=c[i];if(e||d){const t=e.toString(16).toUpperCase();d="."+t+d}}r+=d;break}case"dvh1":case"dvhe":{const e=BI(i,["dvcC"])[0],t=e[2]>>1&127,s=e[2]<<5&32|e[3]>>3&31;r+="."+zI(t)+"."+zI(s);break}case"vp09":{const e=BI(i,["vpcC"])[0],t=e[4],s=e[5],n=e[6]>>4&15;r+="."+zI(t)+"."+zI(s)+"."+zI(n);break}case"av01":{const e=BI(i,["av1C"])[0],t=e[1]>>>5,s=31&e[1],n=e[2]>>>7?"H":"M",o=(64&e[2])>>6,a=(32&e[2])>>5,l=2===t&&o?a?12:10:o?10:8,c=(16&e[2])>>4,d=(8&e[2])>>3,h=(4&e[2])>>2,u=3&e[2],p=1,f=1,g=1,m=0;r+="."+t+"."+zI(s)+n+"."+zI(l)+"."+c+"."+d+h+u+"."+zI(p)+"."+zI(f)+"."+zI(g)+"."+m;break}}return{codec:r,encrypted:n}}function HI(e,t){const i=t+5;while(128&e[t++]&&t<i);return t}function jI(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function zI(e){return(e<10?"0":"")+e}function VI(e,t){if(!e||!t)return e;const i=t.keyId;if(i&&t.isCommonEncryption){const t=BI(e,["moov","trak"]);t.forEach((e=>{const t=BI(e,["mdia","minf","stbl","stsd"])[0],s=t.subarray(8);let r=BI(s,["enca"]);const n=r.length>0;n||(r=BI(s,["encv"])),r.forEach((e=>{const t=n?e.subarray(28):e.subarray(78),s=BI(t,["sinf"]);s.forEach((e=>{const t=YI(e);if(t){const e=t.subarray(8,24);e.some((e=>0!==e))||(PR.log(`[eme] Patching keyId in 'enc${n?"a":"v"}>sinf>>tenc' box: ${LI.hexDump(e)} -> ${LI.hexDump(i)}`),t.set(i,8))}}))}))}))}return e}function YI(e){const t=BI(e,["schm"])[0];if(t){const i=II(t.subarray(4,8));if("cbcs"===i||"cenc"===i)return BI(e,["schi","tenc"])[0]}return null}function WI(e,t){return BI(t,["moof","traf"]).reduce(((t,i)=>{const s=BI(i,["tfdt"])[0],r=s[0],n=BI(i,["tfhd"]).reduce(((t,i)=>{const n=PI(i,4),o=e[n];if(o){let e=PI(s,4);if(1===r){if(e===CI)return PR.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),t;e*=CI+1,e+=PI(s,8)}const i=o.timescale||9e4,n=e/i;if(ER(n)&&(null===t||n<t))return n}return t}),null);return null!==n&&ER(n)&&(null===t||n<t)?n:t}),null)}function KI(e,t){let i=0,s=0,r=0;const n=BI(e,["moof","traf"]);for(let o=0;o<n.length;o++){const e=n[o],a=BI(e,["tfhd"])[0],l=PI(a,4),c=t[l];if(!c)continue;const d=c.default,h=PI(a,0)|(null==d?void 0:d.flags);let u=null==d?void 0:d.duration;8&h&&(u=PI(a,2&h?12:8));const p=c.timescale||9e4,f=BI(e,["trun"]);for(let t=0;t<f.length;t++){if(i=qI(f[t]),!i&&u){const e=PI(f[t],4);i=u*e}c.type===GR.VIDEO?s+=i/p:c.type===GR.AUDIO&&(r+=i/p)}}if(0===s&&0===r){let t=1/0,i=0,s=0;const r=BI(e,["sidx"]);for(let e=0;e<r.length;e++){const n=$I(r[e]);if(null!=n&&n.references){t=Math.min(t,n.earliestPresentationTime/n.timescale);const e=n.references.reduce(((e,t)=>e+t.info.duration||0),0);i=Math.max(i,e+n.earliestPresentationTime/n.timescale),s=i-t}}if(s&&ER(s))return s}return s||r}function qI(e){const t=PI(e,0);let i=8;1&t&&(i+=4),4&t&&(i+=4);let s=0;const r=PI(e,4);for(let n=0;n<r;n++){if(256&t){const t=PI(e,i);s+=t,i+=4}512&t&&(i+=4),1024&t&&(i+=4),2048&t&&(i+=4)}return s}function XI(e,t,i){BI(t,["moof","traf"]).forEach((t=>{BI(t,["tfhd"]).forEach((s=>{const r=PI(s,4),n=e[r];if(!n)return;const o=n.timescale||9e4;BI(t,["tfdt"]).forEach((e=>{const t=e[0],s=i*o;if(s){let i=PI(e,4);if(0===t)i-=s,i=Math.max(i,0),NI(e,4,i);else{i*=Math.pow(2,32),i+=PI(e,8),i-=s,i=Math.max(i,0);const t=Math.floor(i/(CI+1)),r=Math.floor(i%(CI+1));NI(e,4,t),NI(e,8,r)}}}))}))}))}function ZI(e){const t={valid:null,remainder:null},i=BI(e,["moof"]);if(i.length<2)return t.remainder=e,t;const s=i[i.length-1];return t.valid=cI(e,0,s.byteOffset-8),t.remainder=cI(e,s.byteOffset-8),t}function QI(e,t){const i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i}function JI(e,t){const i=[],s=t.samples,r=t.timescale,n=t.id;let o=!1;const a=BI(s,["moof"]);return a.map((a=>{const l=a.byteOffset-8,c=BI(a,["traf"]);c.map((a=>{const c=BI(a,["tfdt"]).map((e=>{const t=e[0];let i=PI(e,4);return 1===t&&(i*=Math.pow(2,32),i+=PI(e,8)),i/r}))[0];return void 0!==c&&(e=c),BI(a,["tfhd"]).map((c=>{const d=PI(c,4),h=16777215&PI(c,0),u=0!==(1&h),p=0!==(2&h),f=0!==(8&h);let g=0;const m=0!==(16&h);let v=0;const y=0!==(32&h);let b=8;d===n&&(u&&(b+=8),p&&(b+=4),f&&(g=PI(c,b),b+=4),m&&(v=PI(c,b),b+=4),y&&(b+=4),"video"===t.type&&(o=eD(t.codec)),BI(a,["trun"]).map((n=>{const a=n[0],c=16777215&PI(n,0),d=0!==(1&c);let h=0;const u=0!==(4&c),p=0!==(256&c);let f=0;const m=0!==(512&c);let y=0;const b=0!==(1024&c),w=0!==(2048&c);let E=0;const T=PI(n,4);let S=8;d&&(h=PI(n,S),S+=4),u&&(S+=4);let A=h+l;for(let l=0;l<T;l++){if(p?(f=PI(n,S),S+=4):f=g,m?(y=PI(n,S),S+=4):y=v,b&&(S+=4),w&&(E=0===a?PI(n,S):OI(n,S),S+=4),t.type===GR.VIDEO){let t=0;while(t<y){const n=PI(s,A);if(A+=4,tD(o,s[A])){const t=s.subarray(A,A+n);iD(t,o?2:1,e+E/r,i)}A+=n,t+=n+4}}e+=f/r}})))}))}))})),i}function eD(e){if(!e)return!1;const t=e.indexOf("."),i=t<0?e:e.substring(0,t);return"hvc1"===i||"hev1"===i||"dvh1"===i||"dvhe"===i}function tD(e,t){if(e){const e=t>>1&63;return 39===e||40===e}{const e=31&t;return 6===e}}function iD(e,t,i,s){const r=sD(e);let n=0;n+=t;let o=0,a=0,l=0;while(n<r.length){o=0;do{if(n>=r.length)break;l=r[n++],o+=l}while(255===l);a=0;do{if(n>=r.length)break;l=r[n++],a+=l}while(255===l);const e=r.length-n;let t=n;if(a<e)n+=a;else if(a>e){PR.error(`Malformed SEI payload. ${a} is too small, only ${e} bytes left to parse.`);break}if(4===o){const e=r[t++];if(181===e){const e=DI(r,t);if(t+=2,49===e){const e=PI(r,t);if(t+=4,1195456820===e){const e=r[t++];if(3===e){const n=r[t++],a=31&n,l=64&n,c=l?2+3*a:0,d=new Uint8Array(c);if(l){d[0]=n;for(let e=1;e<c;e++)d[e]=r[t++]}s.push({type:e,payloadType:o,pts:i,bytes:d})}}}}}else if(5===o&&a>16){const e=[];for(let i=0;i<16;i++){const s=r[t++].toString(16);e.push(1==s.length?"0"+s:s),3!==i&&5!==i&&7!==i&&9!==i||e.push("-")}const n=a-16,l=new Uint8Array(n);for(let i=0;i<n;i++)l[i]=r[t++];s.push({payloadType:o,pts:i,uuid:e.join(""),userData:AI(l),userDataBytes:l})}}}function sD(e){const t=e.byteLength,i=[];let s=1;while(s<t-2)0===e[s]&&0===e[s+1]&&3===e[s+2]?(i.push(s+2),s+=2):s++;if(0===i.length)return e;const r=t-i.length,n=new Uint8Array(r);let o=0;for(s=0;s<r;o++,s++)o===i[0]&&(o++,i.shift()),n[s]=e[o];return n}function rD(e){const t=e[0];let i="",s="",r=0,n=0,a=0,l=0,c=0,d=0;if(0===t){while("\0"!==II(e.subarray(d,d+1)))i+=II(e.subarray(d,d+1)),d+=1;i+=II(e.subarray(d,d+1)),d+=1;while("\0"!==II(e.subarray(d,d+1)))s+=II(e.subarray(d,d+1)),d+=1;s+=II(e.subarray(d,d+1)),d+=1,r=PI(e,12),n=PI(e,16),l=PI(e,20),c=PI(e,24),d=28}else if(1===t){d+=4,r=PI(e,d),d+=4;const t=PI(e,d);d+=4;const n=PI(e,d);d+=4,a=o(2,32)*t+n,TR(a)||(a=Number.MAX_SAFE_INTEGER,PR.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),l=PI(e,d),d+=4,c=PI(e,d),d+=4;while("\0"!==II(e.subarray(d,d+1)))i+=II(e.subarray(d,d+1)),d+=1;i+=II(e.subarray(d,d+1)),d+=1;while("\0"!==II(e.subarray(d,d+1)))s+=II(e.subarray(d,d+1)),d+=1;s+=II(e.subarray(d,d+1)),d+=1}const h=e.subarray(d,e.byteLength);return{schemeIdUri:i,value:s,timeScale:r,presentationTime:a,presentationTimeDelta:n,eventDuration:l,id:c,payload:h}}function nD(e,...t){const i=t.length;let s=8,r=i;while(r--)s+=t[r].byteLength;const n=new Uint8Array(s);for(n[0]=s>>24&255,n[1]=s>>16&255,n[2]=s>>8&255,n[3]=255&s,n.set(e,4),r=0,s=8;r<i;r++)n.set(t[r],s),s+=t[r].byteLength;return n}function oD(e,t,i){if(16!==e.byteLength)throw new RangeError("Invalid system id");let s,r,n;if(t){s=1,r=new Uint8Array(16*t.length);for(let e=0;e<t.length;e++){const i=t[e];if(16!==i.byteLength)throw new RangeError("Invalid key");r.set(i,16*e)}}else s=0,r=new Uint8Array;s>0?(n=new Uint8Array(4),t.length>0&&new DataView(n.buffer).setUint32(0,t.length,!1)):n=new Uint8Array;const o=new Uint8Array(4);return i&&i.byteLength>0&&new DataView(o.buffer).setUint32(0,i.byteLength,!1),nD([112,115,115,104],new Uint8Array([s,0,0,0]),e,n,r,o,i||new Uint8Array)}function aD(e){const t=[];if(e instanceof ArrayBuffer){const i=e.byteLength;let s=0;while(s+32<i){const i=new DataView(e,s),r=lD(i);t.push(r),s+=r.size}}return t}function lD(e){const t=e.getUint32(0),i=e.byteOffset,s=e.byteLength;if(s<t)return{offset:i,size:s};const r=e.getUint32(4);if(1886614376!==r)return{offset:i,size:t};const n=e.getUint32(8)>>>24;if(0!==n&&1!==n)return{offset:i,size:t};const o=e.buffer,a=LI.hexDump(new Uint8Array(o,i+12,16)),l=e.getUint32(28);let c=null,d=null;if(0===n){if(t-32<l||l<22)return{offset:i,size:t};d=new Uint8Array(o,i+32,l)}else if(1===n){if(!l||s<i+32+16*l+16)return{offset:i,size:t};c=[];for(let e=0;e<l;e++)c.push(new Uint8Array(o,i+32+16*e,16))}return{version:n,systemId:a,kids:c,data:d,offset:i,size:t}}let cD={};class dD{static clearKeyUriToKeyIdMap(){cD={}}constructor(e,t,i,s=[1],r=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=i,this.keyFormatVersions=s,this.iv=r,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e}isSupported(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case eI.FAIRPLAY:case eI.WIDEVINE:case eI.PLAYREADY:case eI.CLEARKEY:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!==typeof e&&("AES-128"!==this.method||this.iv||PR.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const t=hD(e),i=new dD(this.method,this.uri,"identity",this.keyFormatVersions,t);return i}const t=XR(this.uri);if(t)switch(this.keyFormat){case eI.WIDEVINE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case eI.PLAYREADY:{const e=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=oD(e,null,t);const i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),s=String.fromCharCode.apply(null,Array.from(i)),r=s.substring(s.indexOf("<"),s.length),n=new DOMParser,o=n.parseFromString(r,"text/xml"),a=o.getElementsByTagName("KID")[0];if(a){const e=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(e){const t=WR(e).subarray(0,16);qR(t),this.keyId=t}}break}default:{let e=t.subarray(0,16);if(16!==e.length){const t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e;break}}if(!this.keyId||16!==this.keyId.byteLength){let e=cD[this.uri];if(!e){const t=Object.keys(cD).length%Number.MAX_SAFE_INTEGER;e=new Uint8Array(16);const i=new DataView(e.buffer,12,4);i.setUint32(0,t),cD[this.uri]=e}this.keyId=e}return this}}function hD(e){const t=new Uint8Array(16);for(let i=12;i<16;i++)t[i]=e>>8*(15-i)&255;return t}const uD=/\{\$([a-zA-Z0-9-_]+)\}/g;function pD(e){return uD.test(e)}function fD(e,t,i){if(null!==e.variableList||e.hasVariableRefs)for(let s=i.length;s--;){const r=i[s],n=t[r];n&&(t[r]=gD(e,n))}}function gD(e,t){if(null!==e.variableList||e.hasVariableRefs){const i=e.variableList;return t.replace(uD,(t=>{const s=t.substring(2,t.length-1),r=null==i?void 0:i[s];return void 0===r?(e.playlistParsingError||(e.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${s}"`)),t):r}))}return t}function mD(e,t,i){let s,r,n=e.variableList;if(n||(e.variableList=n={}),"QUERYPARAM"in t){s=t.QUERYPARAM;try{const e=new self.URL(i).searchParams;if(!e.has(s))throw new Error(`"${s}" does not match any query parameter in URI: "${i}"`);r=e.get(s)}catch(o){e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${o.message}`))}}else s=t.NAME,r=t.VALUE;s in n?e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${s}"`)):n[s]=r||""}function vD(e,t,i){const s=t.IMPORT;if(i&&s in i){let t=e.variableList;t||(e.variableList=t={}),t[s]=i[s]}else e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${s}"`))}function yD(e=!0){if("undefined"===typeof self)return;const t=(e||!self.MediaSource)&&self.ManagedMediaSource;return t||self.MediaSource||self.WebKitMediaSource}function bD(e){return"undefined"!==typeof self&&e===self.ManagedMediaSource}const wD={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function ED(e,t){const i=wD[t];return!!i&&!!i[e.slice(0,4)]}function TD(e,t,i=!0){return!e.split(",").some((e=>!SD(e,t,i)))}function SD(e,t,i=!0){var s;const r=yD(i);return null!=(s=null==r?void 0:r.isTypeSupported(AD(e,t)))&&s}function AD(e,t){return`${t}/mp4;codecs="${e}"`}function xD(e){if(e){const t=e.substring(0,4);return wD.video[t]}return 2}function kD(e){return e.split(",").reduce(((e,t)=>{const i=wD.video[t];return i?(2*i+e)/(e?3:2):(wD.audio[t]+e)/(e?2:1)}),0)}const LD={};function CD(e,t=!0){if(LD[e])return LD[e];const i={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[e];for(let s=0;s<i.length;s++)if(SD(i[s],"audio",t))return LD[e]=i[s],i[s];return e}const _D=/flac|opus/i;function RD(e,t=!0){return e.replace(_D,(e=>CD(e.toLowerCase(),t)))}function ID(e,t){return e&&"mp4a"!==e?e:t?t.split(",")[0]:t}function DD(e){const t=e.split(",");for(let i=0;i<t.length;i++){const e=t[i].split(".");if(e.length>2){let s=e.shift()+".";s+=parseInt(e.shift()).toString(16),s+=("000"+parseInt(e.shift()).toString(16)).slice(-4),t[i]=s}}return t.join(",")}const PD=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,MD=/#EXT-X-MEDIA:(.*)/g,OD=/^#EXT(?:INF|-X-TARGETDURATION):/m,ND=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),FD=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class BD{static findGroup(e,t){for(let i=0;i<e.length;i++){const s=e[i];if(s.id===t)return s}}static resolve(e,t){return fR.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return OD.test(e)}static parseMasterPlaylist(e,t){const i=pD(e),s={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:i},r=[];let n;PD.lastIndex=0;while(null!=(n=PD.exec(e)))if(n[1]){var o;const e=new NR(n[1]);fD(s,e,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const i=gD(s,n[2]),a={attrs:e,bitrate:e.decimalInteger("BANDWIDTH")||e.decimalInteger("AVERAGE-BANDWIDTH"),name:e.NAME,url:BD.resolve(i,t)},l=e.decimalResolution("RESOLUTION");l&&(a.width=l.width,a.height=l.height),GD(e.CODECS,a),null!=(o=a.unknownCodecs)&&o.length||r.push(a),s.levels.push(a)}else if(n[3]){const e=n[3],i=n[4];switch(e){case"SESSION-DATA":{const e=new NR(i);fD(s,e,["DATA-ID","LANGUAGE","VALUE","URI"]);const t=e["DATA-ID"];t&&(null===s.sessionData&&(s.sessionData={}),s.sessionData[t]=e);break}case"SESSION-KEY":{const e=$D(i,t,s);e.encrypted&&e.isSupported()?(null===s.sessionKeys&&(s.sessionKeys=[]),s.sessionKeys.push(e)):PR.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${i}"`);break}case"DEFINE":{const e=new NR(i);fD(s,e,["NAME","VALUE","QUERYPARAM"]),mD(s,e,t)}break;case"CONTENT-STEERING":{const e=new NR(i);fD(s,e,["SERVER-URI","PATHWAY-ID"]),s.contentSteering={uri:BD.resolve(e["SERVER-URI"],t),pathwayId:e["PATHWAY-ID"]||"."};break}case"START":s.startTimeOffset=UD(i);break}}const a=r.length>0&&r.length<s.levels.length;return s.levels=a?r:s.levels,0===s.levels.length&&(s.playlistParsingError=new Error("no levels found in manifest")),s}static parseMasterPlaylistMedia(e,t,i){let s;const r={},n=i.levels,o={AUDIO:n.map((e=>({id:e.attrs.AUDIO,audioCodec:e.audioCodec}))),SUBTITLES:n.map((e=>({id:e.attrs.SUBTITLES,textCodec:e.textCodec}))),"CLOSED-CAPTIONS":[]};let a=0;MD.lastIndex=0;while(null!==(s=MD.exec(e))){const e=new NR(s[1]),n=e.TYPE;if(n){const s=o[n],l=r[n]||[];r[n]=l,fD(i,e,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const c=e.LANGUAGE,d=e["ASSOC-LANGUAGE"],h=e.CHANNELS,u=e.CHARACTERISTICS,p=e["INSTREAM-ID"],f={attrs:e,bitrate:0,id:a++,groupId:e["GROUP-ID"]||"",name:e.NAME||c||"",type:n,default:e.bool("DEFAULT"),autoselect:e.bool("AUTOSELECT"),forced:e.bool("FORCED"),lang:c,url:e.URI?BD.resolve(e.URI,t):""};if(d&&(f.assocLang=d),h&&(f.channels=h),u&&(f.characteristics=u),p&&(f.instreamId=p),null!=s&&s.length){const e=BD.findGroup(s,f.groupId)||s[0];HD(f,e,"audioCodec"),HD(f,e,"textCodec")}l.push(f)}}return r}static parseLevelPlaylist(e,t,i,s,r,n){const o=new YR(t),a=o.fragments;let l,c,d,h=null,u=0,p=0,f=0,g=0,m=null,v=new jR(s,t),y=-1,b=!1,w=null;ND.lastIndex=0,o.m3u8=e,o.hasVariableRefs=pD(e);while(null!==(l=ND.exec(e))){b&&(b=!1,v=new jR(s,t),v.start=f,v.sn=u,v.cc=g,v.level=i,h&&(v.initSegment=h,v.rawProgramDateTime=h.rawProgramDateTime,h.rawProgramDateTime=null,w&&(v.setByteRange(w),w=null)));const e=l[1];if(e){v.duration=parseFloat(e);const t=(" "+l[2]).slice(1);v.title=t||null,v.tagList.push(t?["INF",e,t]:["INF",e])}else if(l[3]){if(ER(v.duration)){v.start=f,d&&YD(v,d,o),v.sn=u,v.level=i,v.cc=g,a.push(v);const e=(" "+l[3]).slice(1);v.relurl=gD(o,e),zD(v,m),m=v,f+=v.duration,u++,p=0,b=!0}}else if(l[4]){const e=(" "+l[4]).slice(1);m?v.setByteRange(e,m):v.setByteRange(e)}else if(l[5])v.rawProgramDateTime=(" "+l[5]).slice(1),v.tagList.push(["PROGRAM-DATE-TIME",v.rawProgramDateTime]),-1===y&&(y=a.length);else{if(l=l[0].match(FD),!l){PR.warn("No matches on slow regex match for level playlist!");continue}for(c=1;c<l.length;c++)if("undefined"!==typeof l[c])break;const e=(" "+l[c]).slice(1),r=(" "+l[c+1]).slice(1),f=l[c+2]?(" "+l[c+2]).slice(1):"";switch(e){case"PLAYLIST-TYPE":o.type=r.toUpperCase();break;case"MEDIA-SEQUENCE":u=o.startSN=parseInt(r);break;case"SKIP":{const e=new NR(r);fD(o,e,["RECENTLY-REMOVED-DATERANGES"]);const t=e.decimalInteger("SKIPPED-SEGMENTS");if(ER(t)){o.skippedSegments=t;for(let e=t;e--;)a.unshift(null);u+=t}const i=e.enumeratedString("RECENTLY-REMOVED-DATERANGES");i&&(o.recentlyRemovedDateranges=i.split("\t"));break}case"TARGETDURATION":o.targetduration=Math.max(parseInt(r),1);break;case"VERSION":o.version=parseInt(r);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":o.live=!1;break;case"#":(r||f)&&v.tagList.push(f?[r,f]:[r]);break;case"DISCONTINUITY":g++,v.tagList.push(["DIS"]);break;case"GAP":v.gap=!0,v.tagList.push([e]);break;case"BITRATE":v.tagList.push([e,r]);break;case"DATERANGE":{const e=new NR(r);fD(o,e,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),fD(o,e,e.clientAttrs);const t=new $R(e,o.dateRanges[e.ID]);t.isValid||o.skippedSegments?o.dateRanges[t.id]=t:PR.warn(`Ignoring invalid DATERANGE tag: "${r}"`),v.tagList.push(["EXT-X-DATERANGE",r]);break}case"DEFINE":{const e=new NR(r);fD(o,e,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in e?vD(o,e,n):mD(o,e,t)}break;case"DISCONTINUITY-SEQUENCE":g=parseInt(r);break;case"KEY":{const e=$D(r,t,o);if(e.isSupported()){if("NONE"===e.method){d=void 0;break}d||(d={}),d[e.keyFormat]&&(d=wR({},d)),d[e.keyFormat]=e}else PR.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${r}"`);break}case"START":o.startTimeOffset=UD(r);break;case"MAP":{const e=new NR(r);if(fD(o,e,["BYTERANGE","URI"]),v.duration){const r=new jR(s,t);VD(r,e,i,d),h=r,v.initSegment=h,h.rawProgramDateTime&&!v.rawProgramDateTime&&(v.rawProgramDateTime=h.rawProgramDateTime)}else{const t=v.byteRangeEndOffset;if(t){const e=v.byteRangeStartOffset;w=`${t-e}@${e}`}else w=null;VD(v,e,i,d),h=v,b=!0}break}case"SERVER-CONTROL":{const e=new NR(r);o.canBlockReload=e.bool("CAN-BLOCK-RELOAD"),o.canSkipUntil=e.optionalFloat("CAN-SKIP-UNTIL",0),o.canSkipDateRanges=o.canSkipUntil>0&&e.bool("CAN-SKIP-DATERANGES"),o.partHoldBack=e.optionalFloat("PART-HOLD-BACK",0),o.holdBack=e.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const e=new NR(r);o.partTarget=e.decimalFloatingPoint("PART-TARGET");break}case"PART":{let e=o.partList;e||(e=o.partList=[]);const i=p>0?e[e.length-1]:void 0,s=p++,n=new NR(r);fD(o,n,["BYTERANGE","URI"]);const a=new zR(n,v,t,s,i);e.push(a),v.duration+=a.duration;break}case"PRELOAD-HINT":{const e=new NR(r);fD(o,e,["URI"]),o.preloadHint=e;break}case"RENDITION-REPORT":{const e=new NR(r);fD(o,e,["URI"]),o.renditionReports=o.renditionReports||[],o.renditionReports.push(e);break}default:PR.warn(`line parsed but not handled: ${l}`);break}}}m&&!m.relurl?(a.pop(),f-=m.duration,o.partList&&(o.fragmentHint=m)):o.partList&&(zD(v,m),v.cc=g,o.fragmentHint=v,d&&YD(v,d,o));const E=a.length,T=a[0],S=a[E-1];if(f+=o.skippedSegments*o.targetduration,f>0&&E&&S){o.averagetargetduration=f/E;const e=S.sn;o.endSN="initSegment"!==e?e:0,o.live||(S.endList=!0),T&&(o.startCC=T.cc)}else o.endSN=0,o.startCC=0;return o.fragmentHint&&(f+=o.fragmentHint.duration),o.totalduration=f,o.endCC=g,y>0&&jD(a,y),o}}function $D(e,t,i){var s,r;const n=new NR(e);fD(i,n,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const o=null!=(s=n.METHOD)?s:"",a=n.URI,l=n.hexadecimalInteger("IV"),c=n.KEYFORMATVERSIONS,d=null!=(r=n.KEYFORMAT)?r:"identity";a&&n.IV&&!l&&PR.error(`Invalid IV: ${n.IV}`);const h=a?BD.resolve(a,t):"",u=(c||"1").split("/").map(Number).filter(Number.isFinite);return new dD(o,h,d,u,l)}function UD(e){const t=new NR(e),i=t.decimalFloatingPoint("TIME-OFFSET");return ER(i)?i:null}function GD(e,t){let i=(e||"").split(/[ ,]+/).filter((e=>e));["video","audio","text"].forEach((e=>{const s=i.filter((t=>ED(t,e)));s.length&&(t[`${e}Codec`]=s.join(","),i=i.filter((e=>-1===s.indexOf(e))))})),t.unknownCodecs=i}function HD(e,t,i){const s=t[i];s&&(e[i]=s)}function jD(e,t){let i=e[t];for(let s=t;s--;){const t=e[s];if(!t)return;t.programDateTime=i.programDateTime-1e3*t.duration,i=t}}function zD(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),ER(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function VD(e,t,i,s){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=i,e.sn="initSegment",s&&(e.levelkeys=s),e.initSegment=null}function YD(e,t,i){e.levelkeys=t;const{encryptedFragments:s}=i;s.length&&s[s.length-1].levelkeys===t||!Object.keys(t).some((e=>t[e].isCommonEncryption))||s.push(e)}var WD={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},KD={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function qD(e){const{type:t}=e;switch(t){case WD.AUDIO_TRACK:return KD.AUDIO;case WD.SUBTITLE_TRACK:return KD.SUBTITLE;default:return KD.MAIN}}function XD(e,t){let i=e.url;return void 0!==i&&0!==i.indexOf("data:")||(i=t.url),i}class ZD{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.on(AR.LEVEL_LOADING,this.onLevelLoading,this),e.on(AR.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(AR.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.off(AR.LEVEL_LOADING,this.onLevelLoading,this),e.off(AR.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(AR.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,i=t.pLoader,s=t.loader,r=i||s,n=new r(t);return this.loaders[e.type]=n,n}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:i}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:WD.MANIFEST,url:i,deliveryDirectives:null})}onLevelLoading(e,t){const{id:i,level:s,pathwayId:r,url:n,deliveryDirectives:o}=t;this.load({id:i,level:s,pathwayId:r,responseType:"text",type:WD.LEVEL,url:n,deliveryDirectives:o})}onAudioTrackLoading(e,t){const{id:i,groupId:s,url:r,deliveryDirectives:n}=t;this.load({id:i,groupId:s,level:null,responseType:"text",type:WD.AUDIO_TRACK,url:r,deliveryDirectives:n})}onSubtitleTrackLoading(e,t){const{id:i,groupId:s,url:r,deliveryDirectives:n}=t;this.load({id:i,groupId:s,level:null,responseType:"text",type:WD.SUBTITLE_TRACK,url:r,deliveryDirectives:n})}load(e){var t;const i=this.hls.config;let s,r=this.getInternalLoader(e);if(r){const t=r.context;if(t&&t.url===e.url&&t.level===e.level)return void PR.trace("[playlist-loader]: playlist request ongoing");PR.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),r.abort()}if(s=e.type===WD.MANIFEST?i.manifestLoadPolicy.default:wR({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),r=this.createInternalLoader(e),ER(null==(t=e.deliveryDirectives)?void 0:t.part)){let t;if(e.type===WD.LEVEL&&null!==e.level?t=this.hls.levels[e.level].details:e.type===WD.AUDIO_TRACK&&null!==e.id?t=this.hls.audioTracks[e.id].details:e.type===WD.SUBTITLE_TRACK&&null!==e.id&&(t=this.hls.subtitleTracks[e.id].details),t){const e=t.partTarget,i=t.targetduration;if(e&&i){const t=1e3*Math.max(3*e,.8*i);s=wR({},s,{maxTimeToFirstByteMs:Math.min(t,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,s.maxTimeToFirstByteMs)})}}}const n=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:n.maxNumRetry||0,retryDelay:n.retryDelayMs||0,maxRetryDelay:n.maxRetryDelayMs||0},a={onSuccess:(e,t,i,s)=>{const r=this.getInternalLoader(i);this.resetInternalLoader(i.type);const n=e.data;0===n.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),BD.isMediaPlaylist(n)?this.handleTrackOrLevelPlaylist(e,t,i,s||null,r):this.handleMasterPlaylist(e,t,i,s)):this.handleManifestParsingError(e,i,new Error("no EXTM3U delimiter"),s||null,t)},onError:(e,t,i,s)=>{this.handleNetworkError(t,i,!1,e,s)},onTimeout:(e,t,i)=>{this.handleNetworkError(t,i,!0,void 0,e)}};r.load(e,o,a)}handleMasterPlaylist(e,t,i,s){const r=this.hls,n=e.data,o=XD(e,i),a=BD.parseMasterPlaylist(n,o);if(a.playlistParsingError)return void this.handleManifestParsingError(e,i,a.playlistParsingError,s,t);const{contentSteering:l,levels:c,sessionData:d,sessionKeys:h,startTimeOffset:u,variableList:p}=a;this.variableList=p;const{AUDIO:f=[],SUBTITLES:g,"CLOSED-CAPTIONS":m}=BD.parseMasterPlaylistMedia(n,o,a);if(f.length){const e=f.some((e=>!e.url));e||!c[0].audioCodec||c[0].attrs.AUDIO||(PR.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),f.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new NR({}),bitrate:0,url:""}))}r.trigger(AR.MANIFEST_LOADED,{levels:c,audioTracks:f,subtitles:g,captions:m,contentSteering:l,url:o,stats:t,networkDetails:s,sessionData:d,sessionKeys:h,startTimeOffset:u,variableList:p})}handleTrackOrLevelPlaylist(e,t,i,s,r){const n=this.hls,{id:o,level:a,type:l}=i,c=XD(e,i),d=0,h=ER(a)?a:ER(o)?o:0,u=qD(i),p=BD.parseLevelPlaylist(e.data,c,h,u,d,this.variableList);if(l===WD.MANIFEST){const e={attrs:new NR({}),bitrate:0,details:p,name:"",url:c};n.trigger(AR.MANIFEST_LOADED,{levels:[e],audioTracks:[],url:c,stats:t,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),i.levelDetails=p,this.handlePlaylistLoaded(p,e,t,i,s,r)}handleManifestParsingError(e,t,i,s,r){this.hls.trigger(AR.ERROR,{type:xR.NETWORK_ERROR,details:kR.MANIFEST_PARSING_ERROR,fatal:t.type===WD.MANIFEST,url:e.url,err:i,error:i,reason:i.message,response:e,context:t,networkDetails:s,stats:r})}handleNetworkError(e,t,i=!1,s,r){let n=`A network ${i?"timeout":"error"+(s?" (status "+s.code+")":"")} occurred while loading ${e.type}`;e.type===WD.LEVEL?n+=`: ${e.level} id: ${e.id}`:e.type!==WD.AUDIO_TRACK&&e.type!==WD.SUBTITLE_TRACK||(n+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(n);PR.warn(`[playlist-loader]: ${n}`);let a=kR.UNKNOWN,l=!1;const c=this.getInternalLoader(e);switch(e.type){case WD.MANIFEST:a=i?kR.MANIFEST_LOAD_TIMEOUT:kR.MANIFEST_LOAD_ERROR,l=!0;break;case WD.LEVEL:a=i?kR.LEVEL_LOAD_TIMEOUT:kR.LEVEL_LOAD_ERROR,l=!1;break;case WD.AUDIO_TRACK:a=i?kR.AUDIO_TRACK_LOAD_TIMEOUT:kR.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case WD.SUBTITLE_TRACK:a=i?kR.SUBTITLE_TRACK_LOAD_TIMEOUT:kR.SUBTITLE_LOAD_ERROR,l=!1;break}c&&this.resetInternalLoader(e.type);const d={type:xR.NETWORK_ERROR,details:a,fatal:l,url:e.url,loader:c,context:e,error:o,networkDetails:t,stats:r};if(s){const i=(null==t?void 0:t.url)||e.url;d.response=mR({url:i,data:void 0},s)}this.hls.trigger(AR.ERROR,d)}handlePlaylistLoaded(e,t,i,s,r,n){const o=this.hls,{type:a,level:l,id:c,groupId:d,deliveryDirectives:h}=s,u=XD(t,s),p=qD(s),f="number"===typeof s.level&&p===KD.MAIN?l:void 0;if(!e.fragments.length){const e=new Error("No Segments found in Playlist");return void o.trigger(AR.ERROR,{type:xR.NETWORK_ERROR,details:kR.LEVEL_EMPTY_ERROR,fatal:!1,url:u,error:e,reason:e.message,response:t,context:s,level:f,parent:p,networkDetails:r,stats:i})}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const g=e.playlistParsingError;if(g)o.trigger(AR.ERROR,{type:xR.NETWORK_ERROR,details:kR.LEVEL_PARSING_ERROR,fatal:!1,url:u,error:g,reason:g.message,response:t,context:s,level:f,parent:p,networkDetails:r,stats:i});else switch(e.live&&n&&(n.getCacheAge&&(e.ageHeader=n.getCacheAge()||0),n.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),a){case WD.MANIFEST:case WD.LEVEL:o.trigger(AR.LEVEL_LOADED,{details:e,level:f||0,id:c||0,stats:i,networkDetails:r,deliveryDirectives:h});break;case WD.AUDIO_TRACK:o.trigger(AR.AUDIO_TRACK_LOADED,{details:e,id:c||0,groupId:d||"",stats:i,networkDetails:r,deliveryDirectives:h});break;case WD.SUBTITLE_TRACK:o.trigger(AR.SUBTITLE_TRACK_LOADED,{details:e,id:c||0,groupId:d||"",stats:i,networkDetails:r,deliveryDirectives:h});break}}}function QD(e,t){let i;try{i=new Event("addtrack")}catch(F$){i=document.createEvent("Event"),i.initEvent("addtrack",!1,!1)}i.track=e,t.dispatchEvent(i)}function JD(e,t){const i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(F$){PR.debug(`[texttrack-utils]: ${F$}`);try{const i=new self.TextTrackCue(t.startTime,t.endTime,t.text);i.id=t.id,e.addCue(i)}catch(s){PR.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${s}`)}}"disabled"===i&&(e.mode=i)}function eP(e){const t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(let i=e.cues.length;i--;)e.removeCue(e.cues[i]);"disabled"===t&&(e.mode=t)}function tP(e,t,i,s){const r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&e.cues.length>0){const r=sP(e.cues,t,i);for(let t=0;t<r.length;t++)s&&!s(r[t])||e.removeCue(r[t])}"disabled"===r&&(e.mode=r)}function iP(e,t){if(t<e[0].startTime)return 0;const i=e.length-1;if(t>e[i].endTime)return-1;let s=0,r=i;while(s<=r){const n=Math.floor((r+s)/2);if(t<e[n].startTime)r=n-1;else{if(!(t>e[n].startTime&&s<i))return n;s=n+1}}return e[s].startTime-t<t-e[r].startTime?s:r}function sP(e,t,i){const s=[],r=iP(e,t);if(r>-1)for(let n=r,o=e.length;n<o;n++){const r=e[n];if(r.startTime>=t&&r.endTime<=i)s.push(r);else if(r.startTime>i)return s}return s}function rP(e){const t=[];for(let i=0;i<e.length;i++){const s=e[i];"subtitles"!==s.kind&&"captions"!==s.kind||!s.label||t.push(e[i])}return t}var nP={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const oP=.25;function aP(){if("undefined"!==typeof self)return self.VTTCue||self.TextTrackCue}function lP(e,t,i,s,r){let n=new e(t,i,"");try{n.value=s,r&&(n.type=r)}catch(N$){n=new e(t,i,JSON.stringify(r?mR({type:r},s):s))}return n}const cP=(()=>{const e=aP();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(N$){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function dP(e,t){return e.getTime()/1e3-t}function hP(e){return Uint8Array.from(e.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class uP{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(AR.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(AR.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.on(AR.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(AR.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(AR.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(AR.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(AR.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.off(AR.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(AR.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(AR.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(eP(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const i=e[t];if("metadata"===i.kind&&"id3"===i.label)return QD(i,this.media),i}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:i,enableID3MetadataCues:s}}}=this;if(!i&&!s)return;const{samples:r}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const n=aP();if(n)for(let o=0;o<r.length;o++){const e=r[o].type;if(e===nP.emsg&&!i||!s)continue;const t=yI(r[o].data);if(t){const i=r[o].pts;let s=i+r[o].duration;s>cP&&(s=cP);const a=s-i;a<=0&&(s=i+oP);for(let r=0;r<t.length;r++){const o=t[r];if(!mI(o)){this.updateId3CueEnds(i,e);const t=lP(n,i,s,o,e);t&&this.id3Track.addCue(t)}}}}}updateId3CueEnds(e,t){var i;const s=null==(i=this.id3Track)?void 0:i.cues;if(s)for(let r=s.length;r--;){const i=s[r];i.type===t&&i.startTime<e&&i.endTime===cP&&(i.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:i,type:s}){const{id3Track:r,hls:n}=this;if(!n)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:a}}=n;if(r&&(o||a)){let e;e="audio"===s?e=>e.type===nP.audioId3&&a:"video"===s?e=>e.type===nP.emsg&&o:e=>e.type===nP.audioId3&&a||e.type===nP.emsg&&o,tP(r,t,i,e)}}onLevelUpdated(e,{details:t}){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:i,id3Track:s}=this,{dateRanges:r}=t,n=Object.keys(r);if(s){const e=Object.keys(i).filter((e=>!n.includes(e)));for(let t=e.length;t--;){const r=e[t];Object.keys(i[r].cues).forEach((e=>{s.removeCue(i[r].cues[e])})),delete i[r]}}const o=t.fragments[t.fragments.length-1];if(0===n.length||!ER(null==o?void 0:o.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=o.programDateTime/1e3-o.start,l=aP();for(let c=0;c<n.length;c++){const e=n[c],t=r[e],s=dP(t.startDate,a),o=i[e],d=(null==o?void 0:o.cues)||{};let h=(null==o?void 0:o.durationKnown)||!1,u=cP;const p=t.endDate;if(p)u=dP(p,a),h=!0;else if(t.endOnNext&&!h){const e=n.reduce(((e,i)=>{if(i!==t.id){const s=r[i];if(s.class===t.class&&s.startDate>t.startDate&&(!e||t.startDate<e.startDate))return s}return e}),null);e&&(u=dP(e.startDate,a),h=!0)}const f=Object.keys(t.attr);for(let i=0;i<f.length;i++){const r=f[i];if(!FR(r))continue;const n=d[r];if(n)h&&!o.durationKnown&&(n.endTime=u);else if(l){let i=t.attr[r];BR(r)&&(i=hP(i));const n=lP(l,s,u,{key:r,data:i},nP.dateRange);n&&(n.id=e,this.id3Track.addCue(n),d[r]=n)}}i[e]={cues:d,dateRange:t,durationKnown:h}}}}class pP{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(null===e)return null;const{holdBack:t,partHoldBack:i,targetduration:s}=e,{liveSyncDuration:r,liveSyncDurationCount:n,lowLatencyMode:o}=this.config,a=this.hls.userConfig;let l=o&&i||t;(a.liveSyncDuration||a.liveSyncDurationCount||0===l)&&(l=void 0!==r?r:n*s);const c=s,d=1;return l+Math.min(this.stallCount*d,c)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,i=this.levelDetails;if(null===e||null===t||null===i)return null;const s=i.edge,r=e-t-this.edgeStalled,n=s-i.totalduration,o=s-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(n,r),o)}get drift(){const{levelDetails:e}=this;return null===e?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(null===e)return 0;const t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const i=e.buffered.length;return(i?e.buffered.end(i-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(AR.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(AR.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(AR.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(AR.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(AR.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(AR.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(AR.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(AR.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(AR.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(AR.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){this.levelDetails=t,t.advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var i;t.details===kR.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(i=this.levelDetails)&&i.live&&PR.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const i=this.computeLatency();if(null===i)return;this._latency=i;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:r}=this.config;if(!s||1===r||!t.live)return;const n=this.targetLatency;if(null===n)return;const o=i-n,a=Math.min(this.maxLatency,n+t.targetduration),l=o<a;if(l&&o>.05&&this.forwardBufferLength>1){const t=Math.min(2,Math.max(1,r)),i=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;e.playbackRate=Math.min(t,Math.max(1,i))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return null===e?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}const fP=["NONE","TYPE-0","TYPE-1",null];function gP(e){return fP.indexOf(e)>-1}const mP=["SDR","PQ","HLG"];function vP(e){return!!e&&mP.indexOf(e)>-1}var yP={No:"",Yes:"YES",v2:"v2"};function bP(e){const{canSkipUntil:t,canSkipDateRanges:i,age:s}=e,r=s<t/2;return t&&r?i?yP.v2:yP.Yes:yP.No}class wP{constructor(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class EP{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter((e=>!!e)).map((e=>e.substring(0,4))).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return TP(this._audioGroups,e)}hasSubtitleGroup(e){return TP(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t)if("audio"===e){let e=this._audioGroups;e||(e=this._audioGroups=[]),-1===e.indexOf(t)&&e.push(t)}else if("text"===e){let e=this._subtitleGroups;e||(e=this._subtitleGroups=[]),-1===e.indexOf(t)&&e.push(t)}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return null==(e=this.audioGroups)?void 0:e[0]}get textGroupId(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}addFallback(){}}function TP(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}function SP(e,t){const i=t.startPTS;if(ER(i)){let s,r=0;t.sn>e.sn?(r=i-e.start,s=e):(r=e.start-i,s=t),s.duration!==r&&(s.duration=r)}else if(t.sn>e.sn){const i=e.cc===t.cc;i&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration}else t.start=Math.max(e.start-t.duration,0)}function AP(e,t,i,s,r,n){const o=s-i;o<=0&&(PR.warn("Fragment should have a positive duration",t),s=i+t.duration,n=r+t.duration);let a=i,l=s;const c=t.startPTS,d=t.endPTS;if(ER(c)){const e=Math.abs(c-i);ER(t.deltaPTS)?t.deltaPTS=Math.max(e,t.deltaPTS):t.deltaPTS=e,a=Math.max(i,c),i=Math.min(i,c),r=Math.min(r,t.startDTS),l=Math.min(s,d),s=Math.max(s,d),n=Math.max(n,t.endDTS)}const h=i-t.start;0!==t.start&&(t.start=i),t.duration=s-t.start,t.startPTS=i,t.maxStartPTS=a,t.startDTS=r,t.endPTS=s,t.minEndPTS=l,t.endDTS=n;const u=t.sn;if(!e||u<e.startSN||u>e.endSN)return 0;let p;const f=u-e.startSN,g=e.fragments;for(g[f]=t,p=f;p>0;p--)SP(g[p],g[p-1]);for(p=f;p<g.length-1;p++)SP(g[p],g[p+1]);return e.fragmentHint&&SP(g[g.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,h}function xP(e,t){let i=null;const s=e.fragments;for(let l=s.length-1;l>=0;l--){const e=s[l].initSegment;if(e){i=e;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;let r,n=0;if(CP(e,t,((e,s)=>{e.relurl&&(n=e.cc-s.cc),ER(e.startPTS)&&ER(e.endPTS)&&(s.start=s.startPTS=e.startPTS,s.startDTS=e.startDTS,s.maxStartPTS=e.maxStartPTS,s.endPTS=e.endPTS,s.endDTS=e.endDTS,s.minEndPTS=e.minEndPTS,s.duration=e.endPTS-e.startPTS,s.duration&&(r=s),t.PTSKnown=t.alignedSliding=!0),s.elementaryStreams=e.elementaryStreams,s.loader=e.loader,s.stats=e.stats,e.initSegment&&(s.initSegment=e.initSegment,i=e.initSegment)})),i){const e=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;e.forEach((e=>{var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=i)?void 0:t.relurl)||(e.initSegment=i)}))}if(t.skippedSegments)if(t.deltaUpdateFailed=t.fragments.some((e=>!e)),t.deltaUpdateFailed){PR.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}else t.canSkipDateRanges&&(t.dateRanges=kP(e.dateRanges,t.dateRanges,t.recentlyRemovedDateranges));const o=t.fragments;if(n){PR.warn("discontinuity sliding from playlist, take drift into account");for(let e=0;e<o.length;e++)o[e].cc+=n}t.skippedSegments&&(t.startCC=t.fragments[0].cc),LP(e.partList,t.partList,((e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),r?AP(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):_P(e,t),o.length&&(t.totalduration=t.edge-o[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;const a=t.advancedDateTime;if(t.advanced&&a){const e=t.edge;t.driftStart||(t.driftStartTime=a,t.driftStart=e),t.driftEndTime=a,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}function kP(e,t,i){const s=wR({},e);return i&&i.forEach((e=>{delete s[e]})),Object.keys(t).forEach((e=>{const i=new $R(t[e].attr,s[e]);i.isValid?s[e]=i:PR.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(t[e].attr)}"`)})),s}function LP(e,t,i){if(e&&t){let s=0;for(let r=0,n=e.length;r<=n;r++){const n=e[r],o=t[r+s];n&&o&&n.index===o.index&&n.fragment.sn===o.fragment.sn?i(n,o):s--}}}function CP(e,t,i){const s=t.skippedSegments,r=Math.max(e.startSN,t.startSN)-t.startSN,n=(e.fragmentHint?1:0)+(s?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,o=t.startSN-e.startSN,a=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let c=r;c<=n;c++){const e=l[o+c];let r=a[c];s&&!r&&c<s&&(r=t.fragments[c]=e),e&&r&&i(e,r)}}function _P(e,t){const i=t.startSN+t.skippedSegments-e.startSN,s=e.fragments;i<0||i>=s.length||RP(t,s[i].start)}function RP(e,t){if(t){const i=e.fragments;for(let s=e.skippedSegments;s<i.length;s++)i[s].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function IP(e,t=1/0){let i=1e3*e.targetduration;if(e.updated){const s=e.fragments,r=4;if(s.length&&i*r>t){const e=1e3*s[s.length-1].duration;e<i&&(i=e)}}else i/=2;return Math.round(i)}function DP(e,t,i){if(null==e||!e.details)return null;const s=e.details;let r=s.fragments[t-s.startSN];return r||(r=s.fragmentHint,r&&r.sn===t?r:t<s.startSN&&i&&i.sn===t?i:null)}function PP(e,t,i){var s;return null!=e&&e.details?MP(null==(s=e.details)?void 0:s.partList,t,i):null}function MP(e,t,i){if(e)for(let s=e.length;s--;){const r=e[s];if(r.index===i&&r.fragment.sn===t)return r}return null}function OP(e){e.forEach(((e,t)=>{const{details:i}=e;null!=i&&i.fragments&&i.fragments.forEach((e=>{e.level=t}))}))}function NP(e){switch(e.details){case kR.FRAG_LOAD_TIMEOUT:case kR.KEY_LOAD_TIMEOUT:case kR.LEVEL_LOAD_TIMEOUT:case kR.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function FP(e,t){const i=NP(t);return e.default[(i?"timeout":"error")+"Retry"]}function BP(e,t){const i="linear"===e.backoff?1:Math.pow(2,t);return Math.min(i*e.retryDelayMs,e.maxRetryDelayMs)}function $P(e){return mR(mR({},e),{errorRetry:null,timeoutRetry:null})}function UP(e,t,i,s){if(!e)return!1;const r=null==s?void 0:s.code,n=t<e.maxNumRetry&&(GP(r)||!!i);return e.shouldRetry?e.shouldRetry(e,t,i,s,n):n}function GP(e){return 0===e&&!1===navigator.onLine||!!e&&(e<400||e>499)}const HP={search:function(e,t){let i=0,s=e.length-1,r=null,n=null;while(i<=s){r=(i+s)/2|0,n=e[r];const o=t(n);if(o>0)i=r+1;else{if(!(o<0))return n;s=r-1}}return null}};function jP(e,t,i){if(null===t||!Array.isArray(e)||!e.length||!ER(t))return null;const s=e[0].programDateTime;if(t<(s||0))return null;const r=e[e.length-1].endProgramDateTime;if(t>=(r||0))return null;i=i||0;for(let n=0;n<e.length;++n){const s=e[n];if(WP(t,i,s))return s}return null}function zP(e,t,i=0,s=0,r=.005){let n=null;if(e){n=t[e.sn-t[0].sn+1]||null;const s=e.endDTS-i;s>0&&s<15e-7&&(i+=15e-7)}else 0===i&&0===t[0].start&&(n=t[0]);if(n&&((!e||e.level===n.level)&&0===YP(i,s,n)||VP(n,e,Math.min(r,s))))return n;const o=HP.search(t,YP.bind(null,i,s));return!o||o===e&&n?n:o}function VP(e,t,i){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){const s=t.tagList.reduce(((e,t)=>("INF"===t[0]&&(e+=parseFloat(t[1])),e)),i);return e.start<=s}return!1}function YP(e=0,t=0,i){if(i.start<=e&&i.start+i.duration>e)return 0;const s=Math.min(t,i.duration+(i.deltaPTS?i.deltaPTS:0));return i.start+i.duration-s<=e?1:i.start-s>e&&i.start?-1:0}function WP(e,t,i){const s=1e3*Math.min(t,i.duration+(i.deltaPTS?i.deltaPTS:0)),r=i.endProgramDateTime||0;return r-s>e}function KP(e,t){return HP.search(e,(e=>e.cc<t?1:e.cc>t?-1:0))}var qP={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},XP={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class ZP{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=PR.log.bind(PR,"[info]:"),this.warn=PR.warn.bind(PR,"[warning]:"),this.error=PR.error.bind(PR,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(AR.ERROR,this.onError,this),e.on(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.on(AR.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(AR.ERROR,this.onError,this),e.off(AR.ERROR,this.onErrorOut,this),e.off(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.off(AR.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(null==e?void 0:e.type)===KD.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var i,s;if(t.fatal)return;const r=this.hls,n=t.context;switch(t.details){case kR.FRAG_LOAD_ERROR:case kR.FRAG_LOAD_TIMEOUT:case kR.KEY_LOAD_ERROR:case kR.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case kR.FRAG_PARSING_ERROR:if(null!=(i=t.frag)&&i.gap)return void(t.errorAction={action:qP.DoNothing,flags:XP.None});case kR.FRAG_GAP:case kR.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=qP.SendAlternateToPenaltyBox);case kR.LEVEL_EMPTY_ERROR:case kR.LEVEL_PARSING_ERROR:{var o,a;const e=t.parent===KD.MAIN?t.level:r.loadLevel;t.details===kR.LEVEL_EMPTY_ERROR&&null!=(o=t.context)&&null!=(a=o.levelDetails)&&a.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case kR.LEVEL_LOAD_ERROR:case kR.LEVEL_LOAD_TIMEOUT:return void("number"===typeof(null==n?void 0:n.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,n.level)));case kR.AUDIO_TRACK_LOAD_ERROR:case kR.AUDIO_TRACK_LOAD_TIMEOUT:case kR.SUBTITLE_LOAD_ERROR:case kR.SUBTITLE_TRACK_LOAD_TIMEOUT:if(n){const e=r.levels[r.loadLevel];if(e&&(n.type===WD.AUDIO_TRACK&&e.hasAudioGroup(n.groupId)||n.type===WD.SUBTITLE_TRACK&&e.hasSubtitleGroup(n.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=qP.SendAlternateToPenaltyBox,void(t.errorAction.flags=XP.MoveAllAlternatesMatchingHost)}return;case kR.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const e=r.levels[r.loadLevel],i=null==e?void 0:e.attrs["HDCP-LEVEL"];i?t.errorAction={action:qP.SendAlternateToPenaltyBox,flags:XP.MoveAllAlternatesMatchingHDCP,hdcpLevel:i}:this.keySystemError(t)}return;case kR.BUFFER_ADD_CODEC_ERROR:case kR.REMUX_ALLOC_ERROR:case kR.BUFFER_APPEND_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,null!=(s=t.level)?s:r.loadLevel));case kR.INTERNAL_EXCEPTION:case kR.BUFFER_APPENDING_ERROR:case kR.BUFFER_FULL_ERROR:case kR.LEVEL_SWITCH_ERROR:case kR.BUFFER_STALLED_ERROR:case kR.BUFFER_SEEK_OVER_HOLE:case kR.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={action:qP.DoNothing,flags:XP.None})}t.type===xR.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const i=this.hls,s=FP(i.config.playlistLoadPolicy,e),r=this.playlistError++,n=UP(s,r,NP(e),e.response);if(n)return{action:qP.RetryRequest,flags:XP.None,retryConfig:s,retryCount:r};const o=this.getLevelSwitchAction(e,t);return s&&(o.retryConfig=s,o.retryCount=r),o}getFragRetryOrSwitchAction(e){const t=this.hls,i=this.getVariantLevelIndex(e.frag),s=t.levels[i],{fragLoadPolicy:r,keyLoadPolicy:n}=t.config,o=FP(e.details.startsWith("key")?n:r,e),a=t.levels.reduce(((e,t)=>e+t.fragmentError),0);if(s){e.details!==kR.FRAG_GAP&&s.fragmentError++;const t=UP(o,a,NP(e),e.response);if(t)return{action:qP.RetryRequest,flags:XP.None,retryConfig:o,retryCount:a}}const l=this.getLevelSwitchAction(e,i);return o&&(l.retryConfig=o,l.retryCount=a),l}getLevelSwitchAction(e,t){const i=this.hls;null!==t&&void 0!==t||(t=i.loadLevel);const s=this.hls.levels[t];if(s){var r,n;const t=e.details;s.loadError++,t===kR.BUFFER_APPEND_ERROR&&s.fragmentError++;let l=-1;const{levels:c,loadLevel:d,minAutoLevel:h,maxAutoLevel:u}=i;i.autoLevelEnabled||(i.loadLevel=-1);const p=null==(r=e.frag)?void 0:r.type,f=p===KD.AUDIO&&t===kR.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(t===kR.BUFFER_ADD_CODEC_ERROR||t===kR.BUFFER_APPEND_ERROR),g=f&&c.some((({audioCodec:e})=>s.audioCodec!==e)),m="video"===e.sourceBufferName&&(t===kR.BUFFER_ADD_CODEC_ERROR||t===kR.BUFFER_APPEND_ERROR),v=m&&c.some((({codecSet:e,audioCodec:t})=>s.codecSet!==e&&s.audioCodec===t)),{type:y,groupId:b}=null!=(n=e.context)?n:{};for(let i=c.length;i--;){const r=(i+d)%c.length;if(r!==d&&r>=h&&r<=u&&0===c[r].loadError){var o,a;const i=c[r];if(t===kR.FRAG_GAP&&p===KD.MAIN&&e.frag){const t=c[r].details;if(t){const i=zP(e.frag,t.fragments,e.frag.start);if(null!=i&&i.gap)continue}}else{if(y===WD.AUDIO_TRACK&&i.hasAudioGroup(b)||y===WD.SUBTITLE_TRACK&&i.hasSubtitleGroup(b))continue;if(p===KD.AUDIO&&null!=(o=s.audioGroups)&&o.some((e=>i.hasAudioGroup(e)))||p===KD.SUBTITLE&&null!=(a=s.subtitleGroups)&&a.some((e=>i.hasSubtitleGroup(e)))||g&&s.audioCodec===i.audioCodec||!g&&s.audioCodec!==i.audioCodec||v&&s.codecSet===i.codecSet)continue}l=r;break}}if(l>-1&&i.loadLevel!==l)return e.levelRetry=!0,this.playlistError=0,{action:qP.SendAlternateToPenaltyBox,flags:XP.None,nextAutoLevel:l}}return{action:qP.SendAlternateToPenaltyBox,flags:XP.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var i;switch(null==(i=t.errorAction)?void 0:i.action){case qP.DoNothing:break;case qP.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===kR.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError()):t.fatal=!0;break;case qP.RetryRequest:break}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,i=e.errorAction;if(!i)return;const{flags:s,hdcpLevel:r,nextAutoLevel:n}=i;switch(s){case XP.None:this.switchLevel(e,n);break;case XP.MoveAllAlternatesMatchingHDCP:r&&(t.maxHdcpLevel=fP[fP.indexOf(r)-1],i.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}i.resolved||this.switchLevel(e,n)}switchLevel(e,t){void 0!==t&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class QP{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=PR.log.bind(PR,`${t}:`),this.warn=PR.warn.bind(PR,`${t}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,i){const s=null==t?void 0:t.renditionReports;if(s){let n=-1;for(let i=0;i<s.length;i++){const o=s[i];let a;try{a=new self.URL(o.URI,t.url).href}catch(r){PR.warn(`Could not construct new URL for Rendition Report: ${r}`),a=o.URI||""}if(a===e){n=i;break}a===e.substring(0,a.length)&&(n=i)}if(-1!==n){const e=s[n],r=parseInt(e["LAST-MSN"])||(null==t?void 0:t.lastPartSn);let o=parseInt(e["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const e=Math.min(t.age-t.partTarget,t.targetduration);o>=0&&e>t.partTarget&&(o+=1)}const a=i&&bP(i);return new wP(r,o>=0?o:void 0,a)}}}loadPlaylist(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,i){const{details:s,stats:r}=t,n=self.performance.now(),o=r.loading.first?Math.max(0,n-r.loading.first):0;if(s.advancedDateTime=Date.now()-o,s.live||null!=i&&i.live){if(s.reloaded(i),i&&this.log(`live playlist ${e} ${s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:s.updated?"UPDATED":"MISSED"}`),i&&s.fragments.length>0&&xP(i,s),!this.canLoad||!s.live)return;let o,a,l;if(s.canBlockReload&&s.endSN&&s.advanced){const e=this.hls.config.lowLatencyMode,r=s.lastPartSn,n=s.endSN,c=s.lastPartIndex,d=-1!==c,h=r===n,u=e?0:c;d?(a=h?n+1:r,l=h?u:c+1):a=n+1;const p=s.age,f=p+s.ageHeader;let g=Math.min(f-s.partTarget,1.5*s.targetduration);if(g>0){if(i&&g>i.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${i.tuneInGoal} to: ${g} with playlist age: ${s.age}`),g=0;else{const e=Math.floor(g/s.targetduration);if(a+=e,void 0!==l){const e=Math.round(g%s.targetduration/s.partTarget);l+=e}this.log(`CDN Tune-in age: ${s.ageHeader}s last advanced ${p.toFixed(2)}s goal: ${g} skip sn ${e} to part ${l}`)}s.tuneInGoal=g}if(o=this.getDeliveryDirectives(s,t.deliveryDirectives,a,l),e||!h)return void this.loadPlaylist(o)}else(s.canBlockReload||s.canSkipUntil)&&(o=this.getDeliveryDirectives(s,t.deliveryDirectives,a,l));const c=this.hls.mainForwardBufferInfo,d=c?c.end-c.len:0,h=1e3*(s.edge-d),u=IP(s,h);s.updated&&n>this.requestScheduled+u&&(this.requestScheduled=r.loading.start),void 0!==a&&s.canBlockReload?this.requestScheduled=r.loading.first+u-(1e3*s.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+u<n?this.requestScheduled=n:this.requestScheduled-n<=0&&(this.requestScheduled+=u);let p=this.requestScheduled-n;p=Math.max(0,p),this.log(`reload live playlist ${e} in ${Math.round(p)} ms`),this.timer=self.setTimeout((()=>this.loadPlaylist(o)),p)}else this.clearTimer()}getDeliveryDirectives(e,t,i,s){let r=bP(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,s=t.part,r=yP.No),new wP(i,s,r)}checkRetry(e){const t=e.details,i=NP(e),s=e.errorAction,{action:r,retryCount:n=0,retryConfig:o}=s||{},a=!!s&&!!o&&(r===qP.RetryRequest||!s.resolved&&r===qP.SendAlternateToPenaltyBox);if(a){var l;if(this.requestScheduled=-1,n>=o.maxNumRetry)return!1;if(i&&null!=(l=e.context)&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${n+1}/${o.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const e=BP(o,n);this.timer=self.setTimeout((()=>this.loadPlaylist()),e),this.warn(`Retrying playlist loading ${n+1}/${o.maxNumRetry} after "${t}" in ${e}ms`)}e.levelRetry=!0,s.resolved=!0}return a}}class JP{constructor(e,t=0,i=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}sample(e,t){const i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class eM{constructor(e,t,i,s=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new JP(e),this.fast_=new JP(t),this.defaultTTFB_=s,this.ttfb_=new JP(e)}update(e,t){const{slow_:i,fast_:s,ttfb_:r}=this;i.halfLife!==e&&(this.slow_=new JP(e,i.getEstimate(),i.getTotalWeight())),s.halfLife!==t&&(this.fast_=new JP(t,s.getEstimate(),s.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new JP(e,r.getEstimate(),r.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const i=8*t,s=e/1e3,r=i/s;this.fast_.sample(s,r),this.slow_.sample(s,r)}sampleTTFB(e){const t=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(i,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const tM={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},iM={};function sM(e,t,i,s,r,n){const o=e.audioCodec?e.audioGroups:null,a=null==n?void 0:n.audioCodec,l=null==n?void 0:n.channels,c=l?parseInt(l):a?1/0:2;let d=null;if(null!=o&&o.length)try{d=1===o.length&&o[0]?t.groups[o[0]].channels:o.reduce(((e,i)=>{if(i){const s=t.groups[i];if(!s)throw new Error(`Audio track group ${i} not found`);Object.keys(s.channels).forEach((t=>{e[t]=(e[t]||0)+s.channels[t]}))}return e}),{2:0})}catch(h){return!0}return void 0!==e.videoCodec&&(e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(s,30)||"SDR"!==e.videoRange&&e.videoRange!==i||e.bitrate>Math.max(r,8e6))||!!d&&ER(c)&&Object.keys(d).some((e=>parseInt(e)>c))}function rM(e,t,i){const s=e.videoCodec,r=e.audioCodec;if(!s||!r||!i)return Promise.resolve(tM);const n={width:e.width,height:e.height,bitrate:Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)),framerate:e.frameRate||30},o=e.videoRange;"SDR"!==o&&(n.transferFunction=o.toLowerCase());const a=s.split(",").map((e=>({type:"media-source",video:mR(mR({},n),{},{contentType:AD(e,"video")})})));return r&&e.audioGroups&&e.audioGroups.forEach((e=>{var i;e&&(null==(i=t.groups[e])||i.tracks.forEach((t=>{if(t.groupId===e){const e=t.channels||"",i=parseFloat(e);ER(i)&&i>2&&a.push.apply(a,r.split(",").map((e=>({type:"media-source",audio:{contentType:AD(e,"audio"),channels:""+i}}))))}})))})),Promise.all(a.map((e=>{const t=nM(e);return iM[t]||(iM[t]=i.decodingInfo(e))}))).then((e=>({supported:!e.some((e=>!e.supported)),configurations:a,decodingInfoResults:e}))).catch((e=>({supported:!1,configurations:a,decodingInfoResults:[],error:e})))}function nM(e){const{audio:t,video:i}=e,s=i||t;if(s){const e=s.contentType.split('"')[1];if(i)return`r${i.height}x${i.width}f${Math.ceil(i.framerate)}${i.transferFunction||"sd"}_${e}_${Math.ceil(i.bitrate/1e5)}`;if(t)return`c${t.channels}${t.spatialRendering?"s":"n"}_${e}`}return""}function oM(){if("function"===typeof matchMedia){const e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}function aM(e,t){let i=!1,s=[];return e&&(i="SDR"!==e,s=[e]),t&&(s=t.allowedVideoRanges||mP.slice(0),i=void 0!==t.preferHDR?t.preferHDR:oM(),s=i?s.filter((e=>"SDR"!==e)):["SDR"]),{preferHDR:i,allowedVideoRanges:s}}function lM(e,t,i,s,r){const n=Object.keys(e),o=null==s?void 0:s.channels,a=null==s?void 0:s.audioCodec,l=o&&2===parseInt(o);let c=!0,d=!1,h=1/0,u=1/0,p=1/0,f=0,g=[];const{preferHDR:m,allowedVideoRanges:v}=aM(t,r);for(let E=n.length;E--;){const t=e[n[E]];c=t.channels[2]>0,h=Math.min(h,t.minHeight),u=Math.min(u,t.minFramerate),p=Math.min(p,t.minBitrate);const i=v.filter((e=>t.videoRanges[e]>0));i.length>0&&(d=!0,g=i)}h=ER(h)?h:0,u=ER(u)?u:0;const y=Math.max(1080,h),b=Math.max(30,u);p=ER(p)?p:i,i=Math.max(p,i),d||(t=void 0,g=[]);const w=n.reduce(((t,s)=>{const r=e[s];if(s===t)return t;if(r.minBitrate>i)return cM(s,`min bitrate of ${r.minBitrate} > current estimate of ${i}`),t;if(!r.hasDefaultAudio)return cM(s,"no renditions with default or auto-select sound found"),t;if(a&&s.indexOf(a.substring(0,4))%5!==0)return cM(s,`audio codec preference "${a}" not found`),t;if(o&&!l){if(!r.channels[o])return cM(s,`no renditions with ${o} channel sound found (channels options: ${Object.keys(r.channels)})`),t}else if((!a||l)&&c&&0===r.channels["2"])return cM(s,"no renditions with stereo sound found"),t;return r.minHeight>y?(cM(s,`min resolution of ${r.minHeight} > maximum of ${y}`),t):r.minFramerate>b?(cM(s,`min framerate of ${r.minFramerate} > maximum of ${b}`),t):g.some((e=>r.videoRanges[e]>0))?r.maxScore<f?(cM(s,`max score of ${r.maxScore} < selected max of ${f}`),t):t&&(kD(s)>=kD(t)||r.fragmentError>e[t].fragmentError)?t:(f=r.maxScore,s):(cM(s,`no variants with VIDEO-RANGE of ${JSON.stringify(g)} found`),t)}),void 0);return{codecSet:w,videoRanges:g,preferHDR:m,minFramerate:u,minBitrate:p}}function cM(e,t){PR.log(`[abr] start candidates with "${e}" ignored because ${t}`)}function dM(e){return e.reduce(((e,t)=>{let i=e.groups[t.groupId];i||(i=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),i.tracks.push(t);const s=t.channels||"2";return i.channels[s]=(i.channels[s]||0)+1,i.hasDefault=i.hasDefault||t.default,i.hasAutoSelect=i.hasAutoSelect||t.autoselect,i.hasDefault&&(e.hasDefaultAudio=!0),i.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e}),{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function hM(e,t,i,s){return e.slice(i,s+1).reduce(((e,i)=>{if(!i.codecSet)return e;const s=i.audioGroups;let r=e[i.codecSet];r||(e[i.codecSet]=r={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!s,fragmentError:0}),r.minBitrate=Math.min(r.minBitrate,i.bitrate);const n=Math.min(i.height,i.width);return r.minHeight=Math.min(r.minHeight,n),r.minFramerate=Math.min(r.minFramerate,i.frameRate),r.maxScore=Math.max(r.maxScore,i.score),r.fragmentError+=i.fragmentError,r.videoRanges[i.videoRange]=(r.videoRanges[i.videoRange]||0)+1,s&&s.forEach((e=>{if(!e)return;const i=t.groups[e];i&&(r.hasDefaultAudio=r.hasDefaultAudio||t.hasDefaultAudio?i.hasDefault:i.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(i.channels).forEach((e=>{r.channels[e]=(r.channels[e]||0)+i.channels[e]})))})),e}),{})}function uM(e,t,i){if("attrs"in e){const i=t.indexOf(e);if(-1!==i)return i}for(let s=0;s<t.length;s++){const r=t[s];if(pM(e,r,i))return s}return-1}function pM(e,t,i){const{groupId:s,name:r,lang:n,assocLang:o,characteristics:a,default:l}=e,c=e.forced;return(void 0===s||t.groupId===s)&&(void 0===r||t.name===r)&&(void 0===n||t.lang===n)&&(void 0===n||t.assocLang===o)&&(void 0===l||t.default===l)&&(void 0===c||t.forced===c)&&(void 0===a||fM(a,t.characteristics))&&(void 0===i||i(e,t))}function fM(e,t=""){const i=e.split(","),s=t.split(",");return i.length===s.length&&!i.some((e=>-1===s.indexOf(e)))}function gM(e,t){const{audioCodec:i,channels:s}=e;return(void 0===i||(t.audioCodec||"").substring(0,4)===i.substring(0,4))&&(void 0===s||s===(t.channels||"2"))}function mM(e,t,i,s,r){const n=t[s],o=t.reduce(((e,t,i)=>{const s=t.uri,r=e[s]||(e[s]=[]);return r.push(i),e}),{}),a=o[n.uri];a.length>1&&(s=Math.max.apply(Math,a));const l=n.videoRange,c=n.frameRate,d=n.codecSet.substring(0,4),h=vM(t,s,(t=>{if(t.videoRange!==l||t.frameRate!==c||t.codecSet.substring(0,4)!==d)return!1;const s=t.audioGroups,n=i.filter((e=>!s||-1!==s.indexOf(e.groupId)));return uM(e,n,r)>-1}));return h>-1?h:vM(t,s,(t=>{const s=t.audioGroups,n=i.filter((e=>!s||-1!==s.indexOf(e.groupId)));return uM(e,n,r)>-1}))}function vM(e,t,i){for(let s=t;s;s--)if(i(e[s]))return s;for(let s=t+1;s<e.length;s++)if(i(e[s]))return s;return-1}class yM{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:e,partCurrent:t,hls:i}=this,{autoLevelEnabled:s,media:r}=i;if(!e||!r)return;const n=performance.now(),o=t?t.stats:e.stats,a=t?t.duration:e.duration,l=n-o.loading.start,c=i.minAutoLevel;if(o.aborted||o.loaded&&o.loaded===o.total||e.level<=c)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!s||r.paused||!r.playbackRate||!r.readyState)return;const d=i.mainForwardBufferInfo;if(null===d)return;const h=this.bwEstimator.getEstimateTTFB(),u=Math.abs(r.playbackRate);if(l<=Math.max(h,a/(2*u)*1e3))return;const p=d.len/u,f=o.loading.first?o.loading.first-o.loading.start:-1,g=o.loaded&&f>-1,m=this.getBwEstimate(),v=i.levels,y=v[e.level],b=o.total||Math.max(o.loaded,Math.round(a*y.averageBitrate/8));let w=g?l-f:l;w<1&&g&&(w=Math.min(l,8*o.loaded/m));const E=g?1e3*o.loaded/w:0,T=E?(b-o.loaded)/E:8*b/m+h/1e3;if(T<=p)return;const S=E?8*E:m;let A,x=Number.POSITIVE_INFINITY;for(A=e.level-1;A>c;A--){const e=v[A].maxBitrate;if(x=this.getTimeToLoadFrag(h/1e3,S,a*e,!v[A].details),x<p)break}if(x>=T)return;if(x>10*a)return;i.nextLoadLevel=i.nextAutoLevel=A,g?this.bwEstimator.sample(l-Math.min(h,f),o.loaded):this.bwEstimator.sampleTTFB(l);const k=v[A].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>k&&this.resetEstimator(k),this.clearTimer(),PR.warn(`[abr] Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} is loading too slowly;\n      Time to underbuffer: ${p.toFixed(3)} s\n      Estimated load time for current fragment: ${T.toFixed(3)} s\n      Estimated load time for down switch fragment: ${x.toFixed(3)} s\n      TTFB estimate: ${0|f} ms\n      Current BW estimate: ${ER(m)?0|m:"Unknown"} bps\n      New BW estimate: ${0|this.getBwEstimate()} bps\n      Switching to level ${A} @ ${0|k} bps`),i.trigger(AR.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:o})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(PR.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new eM(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.on(AR.FRAG_LOADING,this.onFragLoading,this),e.on(AR.FRAG_LOADED,this.onFragLoaded,this),e.on(AR.FRAG_BUFFERED,this.onFragBuffered,this),e.on(AR.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(AR.LEVEL_LOADED,this.onLevelLoaded,this),e.on(AR.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(AR.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(AR.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.off(AR.FRAG_LOADING,this.onFragLoading,this),e.off(AR.FRAG_LOADED,this.onFragLoaded,this),e.off(AR.FRAG_BUFFERED,this.onFragBuffered,this),e.off(AR.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(AR.LEVEL_LOADED,this.onLevelLoaded,this),e.off(AR.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(AR.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(AR.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const i=t.frag;if(!this.ignoreFragment(i)){var s;if(!i.bitrateTest)this.fragCurrent=i,this.partCurrent=null!=(s=t.part)?s:null;this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case kR.BUFFER_ADD_CODEC_ERROR:case kR.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case kR.FRAG_LOAD_TIMEOUT:{const e=t.frag,{fragCurrent:i,partCurrent:s}=this;if(e&&i&&e.sn===i.sn&&e.level===i.level){const t=performance.now(),i=s?s.stats:e.stats,r=t-i.loading.start,n=i.loading.first?i.loading.first-i.loading.start:-1,o=i.loaded&&n>-1;if(o){const e=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(r-Math.min(e,n),i.loaded)}else this.bwEstimator.sampleTTFB(r)}break}}}getTimeToLoadFrag(e,t,i,s){const r=e+i/t,n=s?this.lastLevelLoadSec:0;return r+n}onLevelLoaded(e,t){const i=this.hls.config,{loading:s}=t.stats,r=s.end-s.start;ER(r)&&(this.lastLevelLoadSec=r/1e3),t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD)}onFragLoaded(e,{frag:t,part:i}){const s=i?i.stats:t.stats;if(t.type===KD.MAIN&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const e=i?i.duration:t.duration,r=this.hls.levels[t.level],n=(r.loaded?r.loaded.bytes:0)+s.loaded,o=(r.loaded?r.loaded.duration:0)+e;r.loaded={bytes:n,duration:o},r.realBitrate=Math.round(8*n/o)}if(t.bitrateTest){const e={stats:s,frag:t,part:i,id:t.type};this.onFragBuffered(AR.FRAG_BUFFERED,e),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:i,part:s}=t,r=null!=s&&s.stats.loaded?s.stats:i.stats;if(r.aborted)return;if(this.ignoreFragment(i))return;const n=r.parsing.end-r.loading.start-Math.min(r.loading.first-r.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(n,r.loaded),r.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==KD.MAIN||"initSegment"===e.sn}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,i=this.getBwEstimate(),s=this.hls.config.maxStarvationDelay,r=this.findBestLevel(i,t,e,0,s,1,1);if(r>-1)return r;const n=this.hls.firstLevel,o=Math.min(Math.max(n,t),e);return PR.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${n} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,t=this.bwEstimator,i=t.canEstimate(),s=this.lastLoadedFragLevel>-1;if(-1!==e&&(!i||!s||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const r=i&&s?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){const t=this.hls.levels;if(t.length>Math.max(e,r)&&t[e].loadError<=t[r].loadError)return e}return this._nextAutoLevel=r,this.nextAutoLevelKey=this.getAutoLevelKey(),r}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:i}=this,{maxAutoLevel:s,config:r,minAutoLevel:n}=i,o=t?t.duration:e?e.duration:0,a=this.getBwEstimate(),l=this.getStarvationDelay();let c=r.abrBandWidthFactor,d=r.abrBandWidthUpFactor;if(l){const e=this.findBestLevel(a,n,s,l,0,c,d);if(e>=0)return e}let h=o?Math.min(o,r.maxStarvationDelay):r.maxStarvationDelay;if(!l){const e=this.bitrateTestDelay;if(e){const t=o?Math.min(o,r.maxLoadingDelay):r.maxLoadingDelay;h=t-e,PR.info(`[abr] bitrate test took ${Math.round(1e3*e)}ms, set first fragment max fetchDuration to ${Math.round(1e3*h)} ms`),c=d=1}}const u=this.findBestLevel(a,n,s,l,h,c,d);if(PR.info(`[abr] ${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${u}`),u>-1)return u;const p=i.levels[n],f=i.levels[i.loadLevel];return(null==p?void 0:p.bitrate)<(null==f?void 0:f.bitrate)?n:i.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const i=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,s=e.mainForwardBufferInfo;return(s?s.len:0)/i}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,i,s,r,n,o){var a;const l=s+r,c=this.lastLoadedFragLevel,d=-1===c?this.hls.firstLevel:c,{fragCurrent:h,partCurrent:u}=this,{levels:p,allAudioTracks:f,loadLevel:g,config:m}=this.hls;if(1===p.length)return 0;const v=p[d],y=!(null==v||null==(a=v.details)||!a.live),b=-1===g||-1===c;let w,E="SDR",T=(null==v?void 0:v.frameRate)||0;const{audioPreference:S,videoPreference:A}=m,x=this.audioTracksByGroup||(this.audioTracksByGroup=dM(f));if(b){if(-1!==this.firstSelection)return this.firstSelection;const s=this.codecTiers||(this.codecTiers=hM(p,x,t,i)),r=lM(s,E,e,S,A),{codecSet:n,videoRanges:o,minFramerate:a,minBitrate:l,preferHDR:c}=r;w=n,E=c?o[o.length-1]:o[0],T=a,e=Math.max(e,l),PR.log(`[abr] picked start tier ${JSON.stringify(r)}`)}else w=null==v?void 0:v.codecSet,E=null==v?void 0:v.videoRange;const k=u?u.duration:h?h.duration:0,L=this.bwEstimator.getEstimateTTFB()/1e3,C=[];for(let R=i;R>=t;R--){var _;const t=p[R],a=R>d;if(!t)continue;if(m.useMediaCapabilities&&!t.supportedResult&&!t.supportedPromise){const i=navigator.mediaCapabilities;"function"===typeof(null==i?void 0:i.decodingInfo)&&sM(t,x,E,T,e,S)?(t.supportedPromise=rM(t,x,i),t.supportedPromise.then((e=>{if(!this.hls)return;t.supportedResult=e;const i=this.hls.levels,s=i.indexOf(t);e.error?PR.warn(`[abr] MediaCapabilities decodingInfo error: "${e.error}" for level ${s} ${JSON.stringify(e)}`):e.supported||(PR.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${s} ${JSON.stringify(e)}`),s>-1&&i.length>1&&(PR.log(`[abr] Removing unsupported level ${s}`),this.hls.removeLevel(s)))}))):t.supportedResult=tM}if(w&&t.codecSet!==w||E&&t.videoRange!==E||a&&T>t.frameRate||!a&&T>0&&T<t.frameRate||t.supportedResult&&(null==(_=t.supportedResult.decodingInfoResults)||!_[0].smooth)){C.push(R);continue}const h=t.details,f=(u?null==h?void 0:h.partTarget:null==h?void 0:h.averagetargetduration)||k;let A;A=a?o*e:n*e;const I=k&&s>=2*k&&0===r?p[R].averageBitrate:p[R].maxBitrate,D=this.getTimeToLoadFrag(L,A,I*f,void 0===h),P=A>=I&&(R===c||0===t.loadError&&0===t.fragmentError)&&(D<=L||!ER(D)||y&&!this.bitrateTestDelay||D<l);if(P){const e=this.forcedAutoLevel;return R===g||-1!==e&&e===g||(C.length&&PR.trace(`[abr] Skipped level(s) ${C.join(",")} of ${i} max with CODECS and VIDEO-RANGE:"${p[C[0]].codecs}" ${p[C[0]].videoRange}; not compatible with "${v.codecs}" ${E}`),PR.info(`[abr] switch candidate:${d}->${R} adjustedbw(${Math.round(A)})-bitrate=${Math.round(A-I)} ttfb:${L.toFixed(1)} avgDuration:${f.toFixed(1)} maxFetchDuration:${l.toFixed(1)} fetchDuration:${D.toFixed(1)} firstSelection:${b} codecSet:${w} videoRange:${E} hls.loadLevel:${g}`)),b&&(this.firstSelection=R),R}}return-1}set nextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:i}=this.hls,s=Math.min(Math.max(e,i),t);this._nextAutoLevel!==s&&(this.nextAutoLevelKey="",this._nextAutoLevel=s)}}class bM{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var wM={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class EM{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(AR.BUFFER_APPENDED,this.onBufferAppended,this),e.on(AR.FRAG_BUFFERED,this.onFragBuffered,this),e.on(AR.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(AR.BUFFER_APPENDED,this.onBufferAppended,this),e.off(AR.FRAG_BUFFERED,this.onFragBuffered,this),e.off(AR.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const i=this.activePartLists[t];if(i)for(let s=i.length;s--;){const t=i[s];if(!t)break;const r=t.end;if(t.start<=e&&null!==r&&e<=r)return t}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:i}=this,s=Object.keys(i);for(let r=s.length;r--;){const n=i[s[r]];if((null==n?void 0:n.body.type)===t&&n.buffered){const t=n.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,t,i,s){this.timeRanges&&(this.timeRanges[e]=t);const r=(null==s?void 0:s.fragment.sn)||-1;Object.keys(this.fragments).forEach((s=>{const n=this.fragments[s];if(!n)return;if(r>=n.body.sn)return;if(!n.buffered&&!n.loaded)return void(n.body.type===i&&this.removeFragment(n.body));const o=n.range[e];o&&o.time.some((e=>{const i=!this.isTimeBuffered(e.startPTS,e.endPTS,t);return i&&this.removeFragment(n.body),i}))}))}detectPartialFragments(e){const t=this.timeRanges,{frag:i,part:s}=e;if(!t||"initSegment"===i.sn)return;const r=SM(i),n=this.fragments[r];if(!n||n.buffered&&i.gap)return;const o=!i.relurl;if(Object.keys(t).forEach((e=>{const r=i.elementaryStreams[e];if(!r)return;const a=t[e],l=o||!0===r.partial;n.range[e]=this.getBufferedTimes(i,s,l,a)})),n.loaded=null,Object.keys(n.range).length){n.buffered=!0;const e=n.body.endList=i.endList||n.body.endList;e&&(this.endListFragments[n.body.type]=n),TM(n)||this.removeParts(i.sn-1,i.type)}else this.removeFragment(n.body)}removeParts(e,t){const i=this.activePartLists[t];i&&(this.activePartLists[t]=i.filter((t=>t.fragment.sn>=e)))}fragBuffered(e,t){const i=SM(e);let s=this.fragments[i];!s&&t&&(s=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,s.buffered=!0)}getBufferedTimes(e,t,i,s){const r={time:[],partial:i},n=e.start,o=e.end,a=e.minEndPTS||o,l=e.maxStartPTS||n;for(let c=0;c<s.length;c++){const e=s.start(c)-this.bufferPadding,t=s.end(c)+this.bufferPadding;if(l>=e&&a<=t){r.time.push({startPTS:Math.max(n,s.start(c)),endPTS:Math.min(o,s.end(c))});break}if(n<t&&o>e){const e=Math.max(n,s.start(c)),t=Math.min(o,s.end(c));t>e&&(r.partial=!0,r.time.push({startPTS:e,endPTS:t}))}else if(o<=e)break}return r}getPartialFragment(e){let t,i,s,r=null,n=0;const{bufferPadding:o,fragments:a}=this;return Object.keys(a).forEach((l=>{const c=a[l];c&&TM(c)&&(i=c.body.start-o,s=c.body.end+o,e>=i&&e<=s&&(t=Math.min(e-i,s-e),n<=t&&(r=c.body,n=t)))})),r}isEndListAppended(e){const t=this.endListFragments[e];return void 0!==t&&(t.buffered||TM(t))}getState(e){const t=SM(e),i=this.fragments[t];return i?i.buffered?TM(i)?wM.PARTIAL:wM.OK:wM.APPENDING:wM.NOT_LOADED}isTimeBuffered(e,t,i){let s,r;for(let n=0;n<i.length;n++){if(s=i.start(n)-this.bufferPadding,r=i.end(n)+this.bufferPadding,e>=s&&t<=r)return!0;if(t<=s)return!1}return!1}onFragLoaded(e,t){const{frag:i,part:s}=t;if("initSegment"===i.sn||i.bitrateTest)return;const r=s?null:t,n=SM(i);this.fragments[n]={body:i,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:i,part:s,timeRanges:r}=t;if("initSegment"===i.sn)return;const n=i.type;if(s){let e=this.activePartLists[n];e||(this.activePartLists[n]=e=[]),e.push(s)}this.timeRanges=r,Object.keys(r).forEach((e=>{const t=r[e];this.detectEvictedFragments(e,t,n,s)}))}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=SM(e);return!!this.fragments[t]}hasParts(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)}removeFragmentsInRange(e,t,i,s,r){s&&!this.hasGaps||Object.keys(this.fragments).forEach((n=>{const o=this.fragments[n];if(!o)return;const a=o.body;a.type!==i||s&&!a.gap||a.start<t&&a.end>e&&(o.buffered||r)&&this.removeFragment(a)}))}removeFragment(e){const t=SM(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const i=this.activePartLists[e.type];if(i){const t=e.sn;this.activePartLists[e.type]=i.filter((e=>e.fragment.sn!==t))}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function TM(e){var t,i,s;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(i=e.range.audio)?void 0:i.partial)||(null==(s=e.range.audiovideo)?void 0:s.partial))}function SM(e){return`${e.type}_${e.level}_${e.sn}`}const AM={length:0,start:()=>0,end:()=>0};class xM{static isBuffered(e,t){try{if(e){const i=xM.getBuffered(e);for(let e=0;e<i.length;e++)if(t>=i.start(e)&&t<=i.end(e))return!0}}catch(i){}return!1}static bufferInfo(e,t,i){try{if(e){const s=xM.getBuffered(e),r=[];let n;for(n=0;n<s.length;n++)r.push({start:s.start(n),end:s.end(n)});return this.bufferedInfo(r,t,i)}}catch(s){}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,i){t=Math.max(0,t),e.sort((function(e,t){const i=e.start-t.start;return i||t.end-e.end}));let s=[];if(i)for(let l=0;l<e.length;l++){const t=s.length;if(t){const r=s[t-1].end;e[l].start-r<i?e[l].end>r&&(s[t-1].end=e[l].end):s.push(e[l])}else s.push(e[l])}else s=e;let r,n=0,o=t,a=t;for(let l=0;l<s.length;l++){const e=s[l].start,c=s[l].end;if(t+i>=e&&t<c)o=e,a=c,n=a-t;else if(t+i<e){r=e;break}}return{len:n,start:o||0,end:a||0,nextStart:r}}static getBuffered(e){try{return e.buffered}catch(N$){return PR.log("failed to get media.buffered",N$),AM}}}class kM{constructor(e,t,i,s=0,r=-1,n=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=LM(),this.buffering={audio:LM(),video:LM(),audiovideo:LM()},this.level=e,this.sn=t,this.id=i,this.size=s,this.part=r,this.partial=n}}function LM(){return{start:0,executeStart:0,executeEnd:0,end:0}}function CM(e,t){for(let s=0,r=e.length;s<r;s++){var i;if((null==(i=e[s])?void 0:i.cc)===t)return e[s]}return null}function _M(e,t,i){return!(!t||!(i.endCC>i.startCC||e&&e.cc<i.startCC))}function RM(e,t){const i=e.fragments,s=t.fragments;if(!s.length||!i.length)return void PR.log("No fragments to align");const r=CM(i,s[0].cc);if(r&&(!r||r.startPTS))return r;PR.log("No frag in previous level to align on")}function IM(e,t){if(e){const i=e.start+t;e.start=e.startPTS=i,e.endPTS=i+e.duration}}function DM(e,t){const i=t.fragments;for(let s=0,r=i.length;s<r;s++)IM(i[s],e);t.fragmentHint&&IM(t.fragmentHint,e),t.alignedSliding=!0}function PM(e,t,i){t&&(MM(e,i,t),!i.alignedSliding&&t&&OM(i,t),i.alignedSliding||!t||i.skippedSegments||_P(t,i))}function MM(e,t,i){if(_M(e,i,t)){const e=RM(i,t);e&&ER(e.start)&&(PR.log(`Adjusting PTS using last level due to CC increase within current level ${t.url}`),DM(e.start,t))}}function OM(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;const i=e.fragments,s=t.fragments;if(!i.length||!s.length)return;let r,n;const o=Math.min(t.endCC,e.endCC);t.startCC<o&&e.startCC<o&&(r=CM(s,o),n=CM(i,o)),r&&n||(r=s[Math.floor(s.length/2)],n=CM(i,r.cc)||i[Math.floor(i.length/2)]);const a=r.programDateTime,l=n.programDateTime;if(!a||!l)return;const c=(l-a)/1e3-(n.start-r.start);DM(c,e)}const NM=Math.pow(2,17);class FM{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const i=e.url;if(!i)return Promise.reject(new UM({type:xR.NETWORK_ERROR,details:kR.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(i?"part list":"url")),networkDetails:null}));this.abort();const s=this.config,r=s.fLoader,n=s.loader;return new Promise(((o,a)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some((e=>"GAP"===e[0])))return void a($M(e));e.gap=!1}const l=this.loader=e.loader=r?new r(s):new n(s),c=BM(e),d=$P(s.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:NM};e.stats=l.stats,l.load(c,h,{onSuccess:(t,i,s,r)=>{this.resetLoader(e,l);let n=t.data;s.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(n.slice(0,16)),n=n.slice(16)),o({frag:e,part:null,payload:n,networkDetails:r})},onError:(t,s,r,n)=>{this.resetLoader(e,l),a(new UM({type:xR.NETWORK_ERROR,details:kR.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:mR({url:i,data:void 0},t),error:new Error(`HTTP Error ${t.code} ${t.text}`),networkDetails:r,stats:n}))},onAbort:(t,i,s)=>{this.resetLoader(e,l),a(new UM({type:xR.NETWORK_ERROR,details:kR.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:s,stats:t}))},onTimeout:(t,i,s)=>{this.resetLoader(e,l),a(new UM({type:xR.NETWORK_ERROR,details:kR.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:s,stats:t}))},onProgress:(i,s,r,n)=>{t&&t({frag:e,part:null,payload:r,networkDetails:n})}})}))}loadPart(e,t,i){this.abort();const s=this.config,r=s.fLoader,n=s.loader;return new Promise(((o,a)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void a($M(e,t));const l=this.loader=e.loader=r?new r(s):new n(s),c=BM(e,t),d=$P(s.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:NM};t.stats=l.stats,l.load(c,h,{onSuccess:(s,r,n,a)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,t);const c={frag:e,part:t,payload:s.data,networkDetails:a};i(c),o(c)},onError:(i,s,r,n)=>{this.resetLoader(e,l),a(new UM({type:xR.NETWORK_ERROR,details:kR.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:mR({url:c.url,data:void 0},i),error:new Error(`HTTP Error ${i.code} ${i.text}`),networkDetails:r,stats:n}))},onAbort:(i,s,r)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,l),a(new UM({type:xR.NETWORK_ERROR,details:kR.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:r,stats:i}))},onTimeout:(i,s,r)=>{this.resetLoader(e,l),a(new UM({type:xR.NETWORK_ERROR,details:kR.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:r,stats:i}))}})}))}updateStatsFromPart(e,t){const i=e.stats,s=t.stats,r=s.total;if(i.loaded+=s.loaded,r){const s=Math.round(e.duration/t.duration),n=Math.min(Math.round(i.loaded/r),s),o=s-n,a=o*Math.round(i.loaded/n);i.total=i.loaded+a}else i.total=Math.max(i.loaded,i.total);const n=i.loading,o=s.loading;n.start?n.first+=o.first-o.start:(n.start=o.start,n.first=o.first),n.end=o.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function BM(e,t=null){const i=t||e,s={frag:e,part:t,responseType:"arraybuffer",url:i.url,headers:{},rangeStart:0,rangeEnd:0},r=i.byteRangeStartOffset,n=i.byteRangeEndOffset;if(ER(r)&&ER(n)){var o;let t=r,i=n;if("initSegment"===e.sn&&"AES-128"===(null==(o=e.decryptdata)?void 0:o.method)){const e=n-r;e%16&&(i=n+(16-e%16)),0!==r&&(s.resetIV=!0,t=r-16)}s.rangeStart=t,s.rangeEnd=i}return s}function $M(e,t){const i=new Error(`GAP ${e.gap?"tag":"attribute"} found`),s={type:xR.MEDIA_ERROR,details:kR.FRAG_GAP,fatal:!1,frag:e,error:i,networkDetails:null};return t&&(s.part=t),(t||e).stats.aborted=!0,new UM(s)}class UM extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class GM{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class HM{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function jM(e){const t=e.byteLength,i=t&&new DataView(e.buffer).getUint8(t-1);return i?cI(e,0,t-i):e}class zM{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),i=new Uint32Array(4);for(let s=0;s<4;s++)i[s]=t.getUint32(4*s);return i}initTable(){const e=this.sBox,t=this.invSBox,i=this.subMix,s=i[0],r=i[1],n=i[2],o=i[3],a=this.invSubMix,l=a[0],c=a[1],d=a[2],h=a[3],u=new Uint32Array(256);let p=0,f=0,g=0;for(g=0;g<256;g++)u[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){let i=f^f<<1^f<<2^f<<3^f<<4;i=i>>>8^255&i^99,e[p]=i,t[i]=p;const a=u[p],g=u[a],m=u[g];let v=257*u[i]^16843008*i;s[p]=v<<24|v>>>8,r[p]=v<<16|v>>>16,n[p]=v<<8|v>>>24,o[p]=v,v=16843009*m^65537*g^257*a^16843008*p,l[i]=v<<24|v>>>8,c[i]=v<<16|v>>>16,d[i]=v<<8|v>>>24,h[i]=v,p?(p=a^u[u[u[m^a]]],f^=u[u[f]]):p=f=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let i=!0,s=0;while(s<t.length&&i)i=t[s]===this.key[s],s++;if(i)return;this.key=t;const r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);const n=this.ksRows=4*(r+6+1);let o,a;const l=this.keySchedule=new Uint32Array(n),c=this.invKeySchedule=new Uint32Array(n),d=this.sBox,h=this.rcon,u=this.invSubMix,p=u[0],f=u[1],g=u[2],m=u[3];let v,y;for(o=0;o<n;o++)o<r?v=l[o]=t[o]:(y=v,o%r===0?(y=y<<8|y>>>24,y=d[y>>>24]<<24|d[y>>>16&255]<<16|d[y>>>8&255]<<8|d[255&y],y^=h[o/r|0]<<24):r>6&&o%r===4&&(y=d[y>>>24]<<24|d[y>>>16&255]<<16|d[y>>>8&255]<<8|d[255&y]),l[o]=v=(l[o-r]^y)>>>0);for(a=0;a<n;a++)o=n-a,y=3&a?l[o]:l[o-4],c[a]=a<4||o<=4?y:p[d[y>>>24]]^f[d[y>>>16&255]]^g[d[y>>>8&255]]^m[d[255&y]],c[a]=c[a]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,i){const s=this.keySize+6,r=this.invKeySchedule,n=this.invSBox,o=this.invSubMix,a=o[0],l=o[1],c=o[2],d=o[3],h=this.uint8ArrayToUint32Array_(i);let u=h[0],p=h[1],f=h[2],g=h[3];const m=new Int32Array(e),v=new Int32Array(m.length);let y,b,w,E,T,S,A,x,k,L,C,_,R,I;const D=this.networkToHostOrderSwap;while(t<m.length){for(k=D(m[t]),L=D(m[t+1]),C=D(m[t+2]),_=D(m[t+3]),T=k^r[0],S=_^r[1],A=C^r[2],x=L^r[3],R=4,I=1;I<s;I++)y=a[T>>>24]^l[S>>16&255]^c[A>>8&255]^d[255&x]^r[R],b=a[S>>>24]^l[A>>16&255]^c[x>>8&255]^d[255&T]^r[R+1],w=a[A>>>24]^l[x>>16&255]^c[T>>8&255]^d[255&S]^r[R+2],E=a[x>>>24]^l[T>>16&255]^c[S>>8&255]^d[255&A]^r[R+3],T=y,S=b,A=w,x=E,R+=4;y=n[T>>>24]<<24^n[S>>16&255]<<16^n[A>>8&255]<<8^n[255&x]^r[R],b=n[S>>>24]<<24^n[A>>16&255]<<16^n[x>>8&255]<<8^n[255&T]^r[R+1],w=n[A>>>24]<<24^n[x>>16&255]<<16^n[T>>8&255]<<8^n[255&S]^r[R+2],E=n[x>>>24]<<24^n[T>>16&255]<<16^n[S>>8&255]<<8^n[255&A]^r[R+3],v[t]=D(y^u),v[t+1]=D(E^p),v[t+2]=D(w^f),v[t+3]=D(b^g),u=k,p=L,f=C,g=_,t+=4}return v.buffer}}const VM=16;class YM{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(N$){}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const i=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?jM(i):i}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,i){return this.useSoftware?new Promise(((s,r)=>{this.softwareDecrypt(new Uint8Array(e),t,i);const n=this.flush();n?s(n.buffer):r(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(e),t,i)}softwareDecrypt(e,t,i){const{currentIV:s,currentResult:r,remainderData:n}=this;this.logOnce("JS AES decrypt"),n&&(e=QI(n,e),this.remainderData=null);const o=this.getValidChunk(e);if(!o.length)return null;s&&(i=s);let a=this.softwareDecrypter;a||(a=this.softwareDecrypter=new zM),a.expandKey(t);const l=r;return this.currentResult=a.decrypt(o.buffer,0,i),this.currentIV=cI(o,-16).buffer,l||null}webCryptoDecrypt(e,t,i){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,i));this.key=t,this.fastAesKey=new HM(this.subtle,t)}return this.fastAesKey.expandKey().then((t=>{if(!this.subtle)return Promise.reject(new Error("web crypto not initialized"));this.logOnce("WebCrypto AES decrypt");const s=new GM(this.subtle,new Uint8Array(i));return s.decrypt(e.buffer,t)})).catch((s=>(PR.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(e,t,i))))}onWebCryptoError(e,t,i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,i);const s=this.flush();if(s)return s.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const i=e.length-e.length%VM;return i!==e.length&&(t=cI(e,0,i),this.remainderData=cI(e,i)),t}logOnce(e){this.logEnabled&&(PR.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const WM={toString:function(e){let t="";const i=e.length;for(let s=0;s<i;s++)t+=`[${e.start(s).toFixed(3)}-${e.end(s).toFixed(3)}]`;return t}},KM={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class qM extends bM{constructor(e,t,i,s,r){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=KM.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=r,this.logPrefix=s,this.log=PR.log.bind(PR,`${s}:`),this.warn=PR.warn.bind(PR,`${s}:`),this.hls=e,this.fragmentLoader=new FM(e.config),this.keyLoader=i,this.fragmentTracker=t,this.config=e.config,this.decrypter=new YM(e.config),e.on(AR.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=KM.STOPPED}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const i=t.partList;if(null!=i&&i.length){const e=i[i.length-1],t=xM.isBuffered(this.media,e.start+e.duration/2);return t}const s=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(s)}getLevelDetails(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levelLastLoaded)?void 0:e.details}onMediaAttached(e,t){const i=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),i.addEventListener("seeking",this.onvseeking),i.addEventListener("ended",this.onvended);const s=this.config;this.levels&&s.autoStartLoad&&this.state===KM.STOPPED&&this.startLoad(s.startPosition)}onMediaDetaching(){const e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:i,mediaBuffer:s,state:r}=this,n=i?i.currentTime:0,o=xM.bufferInfo(s||i,n,e.maxBufferHole);if(this.log(`media seeking to ${ER(n)?n.toFixed(3):n}, state: ${r}`),this.state===KM.ENDED)this.resetLoadingState();else if(t){const i=e.maxFragLookUpTolerance,s=t.start-i,r=t.start+t.duration+i;if(!o.len||r<o.start||s>o.end){const e=n>r;(n<s||e)&&(e&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}i&&(this.fragmentTracker.removeFragmentsInRange(n,1/0,this.playlistType,!0),this.lastCurrentTime=n),this.loadedmetadata||o.len||(this.nextLoadPosition=this.startPosition=n),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(AR.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=KM.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,i){this._loadFragForPlayback(e,t,i)}_loadFragForPlayback(e,t,i){const s=t=>{if(this.fragContextChanged(e))return this.warn(`Fragment ${e.sn}${t.part?" p: "+t.part.index:""} of level ${e.level} was dropped during download.`),void this.fragmentTracker.removeFragment(e);e.stats.chunkCount++,this._handleFragmentLoadProgress(t)};this._doFragLoad(e,t,i,s).then((t=>{if(!t)return;const i=this.state;this.fragContextChanged(e)?(i===KM.FRAG_LOADING||!this.fragCurrent&&i===KM.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=KM.IDLE):("payload"in t&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(AR.FRAG_LOADED,t)),this._handleFragmentLoadComplete(t))})).catch((t=>{this.state!==KM.STOPPED&&this.state!==KM.ERROR&&(this.warn(`Frag error: ${(null==t?void 0:t.message)||t}`),this.resetFragmentLoading(e))}))}clearTrackerIfNeeded(e){var t;const{fragmentTracker:i}=this,s=i.getState(e);if(s===wM.APPENDING){const t=e.type,s=this.getFwdBufferInfo(this.mediaBuffer,t),r=Math.max(e.duration,s?s.len:this.config.maxBufferLength),n=this.backtrackFragment,o=n?e.sn-n.sn:0;(1===o||this.reduceMaxBufferLength(r,e.duration))&&i.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),i.getState(e)===wM.PARTIAL&&i.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t,i=null){if(!(e-t))return;const s={startOffset:e,endOffset:t,type:i};this.hls.trigger(AR.BUFFER_FLUSHING,s)}_loadInitSegment(e,t){this._doFragLoad(e,t).then((t=>{if(!t||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return t})).then((t=>{const{hls:i}=this,{payload:s}=t,r=e.decryptdata;if(s&&s.byteLength>0&&null!=r&&r.key&&r.iv&&"AES-128"===r.method){const n=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),r.key.buffer,r.iv.buffer).catch((t=>{throw i.trigger(AR.ERROR,{type:xR.MEDIA_ERROR,details:kR.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:e}),t})).then((s=>{const r=self.performance.now();return i.trigger(AR.FRAG_DECRYPTED,{frag:e,payload:s,stats:{tstart:n,tdecrypt:r}}),t.payload=s,this.completeInitSegmentLoad(t)}))}return this.completeInitSegmentLoad(t)})).catch((t=>{this.state!==KM.STOPPED&&this.state!==KM.ERROR&&(this.warn(t),this.resetFragmentLoading(e))}))}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const i=e.frag.stats;this.state=KM.IDLE,e.frag.data=new Uint8Array(e.payload),i.parsing.start=i.buffering.start=self.performance.now(),i.parsing.end=i.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){var i,s,r,n;const o=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.playlistType===KD.MAIN?"level":"track"} ${e.level} (frag:[${(null!=(i=e.startPTS)?i:NaN).toFixed(3)}-${(null!=(s=e.endPTS)?s:NaN).toFixed(3)}] > buffer:${o?WM.toString(xM.getBuffered(o)):"(detached)"})`),"initSegment"!==e.sn){var a;if(e.type!==KD.SUBTITLE){const t=e.elementaryStreams;if(!Object.keys(t).some((e=>!!t[e])))return void(this.state=KM.IDLE)}const t=null==(a=this.levels)?void 0:a[e.level];null!=t&&t.fragmentError&&(this.log(`Resetting level fragment error count of ${t.fragmentError} on frag buffered`),t.fragmentError=0)}this.state=KM.IDLE,o&&(!this.loadedmetadata&&e.type==KD.MAIN&&o.buffered.length&&(null==(r=this.fragCurrent)?void 0:r.sn)===(null==(n=this.fragPrevious)?void 0:n.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:i,part:s,partsLoaded:r}=e,n=!r||0===r.length||r.some((e=>!e)),o=new kM(i.level,i.sn,i.stats.chunkCount+1,0,s?s.index:-1,!n);t.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,i=null,s){var r;const n=null==t?void 0:t.details;if(!this.levels||!n)throw new Error(`frag load aborted, missing level${n?"":" detail"}s`);let o=null;if(!e.encrypted||null!=(r=e.decryptdata)&&r.key?!e.encrypted&&n.encryptedFragments.length&&this.keyLoader.loadClear(e,n.encryptedFragments):(this.log(`Loading key for ${e.sn} of [${n.startSN}-${n.endSN}], ${"[stream-controller]"===this.logPrefix?"level":"track"} ${e.level}`),this.state=KM.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then((e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger(AR.KEY_LOADED,e),this.state===KM.KEY_LOADING&&(this.state=KM.IDLE),e})),this.hls.trigger(AR.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),i=Math.max(e.start,i||0),this.config.lowLatencyMode&&"initSegment"!==e.sn){const r=n.partList;if(r&&s){i>e.end&&n.fragmentHint&&(e=n.fragmentHint);const a=this.getNextPart(r,e,i);if(a>-1){const l=r[a];let c;return this.log(`Loading part sn: ${e.sn} p: ${l.index} cc: ${e.cc} of playlist [${n.startSN}-${n.endSN}] parts [0-${a}-${r.length-1}] ${"[stream-controller]"===this.logPrefix?"level":"track"}: ${e.level}, target: ${parseFloat(i.toFixed(3))}`),this.nextLoadPosition=l.start+l.duration,this.state=KM.FRAG_LOADING,c=o?o.then((i=>!i||this.fragContextChanged(i.frag)?null:this.doFragPartsLoad(e,l,t,s))).catch((e=>this.handleFragLoadError(e))):this.doFragPartsLoad(e,l,t,s).catch((e=>this.handleFragLoadError(e))),this.hls.trigger(AR.FRAG_LOADING,{frag:e,part:l,targetBufferTime:i}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):c}if(!e.url||this.loadedEndOfParts(r,i))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${n?"of ["+n.startSN+"-"+n.endSN+"] ":""}${"[stream-controller]"===this.logPrefix?"level":"track"}: ${e.level}, target: ${parseFloat(i.toFixed(3))}`),ER(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=KM.FRAG_LOADING;const a=this.config.progressive;let l;return l=a&&o?o.then((t=>!t||this.fragContextChanged(null==t?void 0:t.frag)?null:this.fragmentLoader.load(e,s))).catch((e=>this.handleFragLoadError(e))):Promise.all([this.fragmentLoader.load(e,a?s:void 0),o]).then((([e])=>(!a&&e&&s&&s(e),e))).catch((e=>this.handleFragLoadError(e))),this.hls.trigger(AR.FRAG_LOADING,{frag:e,targetBufferTime:i}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):l}doFragPartsLoad(e,t,i,s){return new Promise(((r,n)=>{var o;const a=[],l=null==(o=i.details)?void 0:o.partList,c=t=>{this.fragmentLoader.loadPart(e,t,s).then((s=>{a[t.index]=s;const n=s.part;this.hls.trigger(AR.FRAG_LOADED,s);const o=PP(i,e.sn,t.index+1)||MP(l,e.sn,t.index+1);if(!o)return r({frag:e,part:n,partsLoaded:a});c(o)})).catch(n)};c(t)}))}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===kR.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(AR.ERROR,t)}else this.hls.trigger(AR.ERROR,{type:xR.OTHER_ERROR,details:kR.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==KM.PARSING)return void(this.fragCurrent||this.state===KM.STOPPED||this.state===KM.ERROR||(this.state=KM.IDLE));const{frag:i,part:s,level:r}=t,n=self.performance.now();i.stats.parsing.end=n,s&&(s.stats.parsing.end=n),this.updateLevelTiming(i,s,r,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:i}=this,{level:s,sn:r,part:n}=e;if(null==t||!t[s])return this.warn(`Levels object was unset while buffering fragment ${r} of level ${s}. The current chunk will not be buffered.`),null;const o=t[s],a=n>-1?PP(o,r,n):null,l=a?a.fragment:DP(o,r,i);return l?(i&&i!==l&&(l.stats=i.stats),{frag:l,part:a,level:o}):null}bufferFragmentData(e,t,i,s,r){var n;if(!e||this.state!==KM.PARSING)return;const{data1:o,data2:a}=e;let l=o;if(o&&a&&(l=QI(o,a)),null==(n=l)||!n.length)return;const c={type:e.type,frag:t,part:i,chunkMeta:s,parent:t.type,data:l};if(this.hls.trigger(AR.BUFFER_APPENDING,c),e.dropped&&e.independent&&!i){if(r)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!xM.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const i=t.currentTime,s=xM.bufferInfo(t,i,0),r=e.duration,n=Math.min(2*this.config.maxFragLookUpTolerance,.25*r),o=Math.max(Math.min(e.start-n,s.end-n),i+n);e.start-o>n&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,t){const i=this.getLoadPosition();return ER(i)?this.getFwdBufferInfoAtPos(e,i,t):null}getFwdBufferInfoAtPos(e,t,i){const{config:{maxBufferHole:s}}=this,r=xM.bufferInfo(e,t,s);if(0===r.len&&void 0!==r.nextStart){const n=this.fragmentTracker.getBufferedFrag(t,i);if(n&&r.nextStart<n.end)return xM.bufferInfo(e,t,Math.max(r.nextStart,s))}return r}getMaxBufferLength(e){const{config:t}=this;let i;return i=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(i,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const i=this.config,s=Math.max(Math.min(e-t,i.maxBufferLength),t),r=Math.max(e-3*t,i.maxMaxBufferLength/2,s);return r>=s&&(i.maxMaxBufferLength=r,this.warn(`Reduce max buffer length to ${r}s`),!0)}getAppendedFrag(e,t=KD.MAIN){const i=this.fragmentTracker.getAppendedFrag(e,KD.MAIN);return i&&"fragment"in i?i.fragment:i}getNextFragment(e,t){const i=t.fragments,s=i.length;if(!s)return null;const{config:r}=this,n=i[0].start;let o;if(t.live){const a=r.initialLiveManifestSize;if(s<a)return this.warn(`Not enough fragments to start playback (have: ${s}, need: ${a})`),null;(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<n)&&(o=this.getInitialLiveFragment(t,i),this.startPosition=this.nextLoadPosition=o?this.hls.liveSyncPosition||o.start:e)}else e<=n&&(o=i[0]);if(!o){const i=r.lowLatencyMode?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,i,t)}return this.mapToInitFragWhenRequired(o)}isLoopLoading(e,t){const i=this.fragmentTracker.getState(e);return(i===wM.OK||i===wM.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,i,s,r){const n=e.gap,o=this.getNextFragment(this.nextLoadPosition,t);if(null===o)return o;if(e=o,n&&e&&!e.gap&&i.nextStart){const t=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,s);if(null!==t&&i.len+t.len>=r)return this.log(`buffer full after gaps in "${s}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,i){let s=-1,r=!1,n=!0;for(let o=0,a=e.length;o<a;o++){const a=e[o];if(n=n&&!a.independent,s>-1&&i<a.start)break;const l=a.loaded;l?s=-1:(r||a.independent||n)&&a.fragment===t&&(s=o),r=l}return s}loadedEndOfParts(e,t){const i=e[e.length-1];return i&&t>i.start&&i.loaded}getInitialLiveFragment(e,t){const i=this.fragPrevious;let s=null;if(i){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${i.programDateTime}`),s=jP(t,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!s){const r=i.sn+1;if(r>=e.startSN&&r<=e.endSN){const n=t[r-e.startSN];i.cc===n.cc&&(s=n,this.log(`Live playlist, switching playlist, load frag with next SN: ${s.sn}`))}s||(s=KP(t,i.cc),s&&this.log(`Live playlist, switching playlist, load frag with same CC: ${s.sn}`))}}else{const t=this.hls.liveSyncPosition;null!==t&&(s=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return s}getFragmentAtPosition(e,t,i){const{config:s}=this;let{fragPrevious:r}=this,{fragments:n,endSN:o}=i;const{fragmentHint:a}=i,{maxFragLookUpTolerance:l}=s,c=i.partList,d=!!(s.lowLatencyMode&&null!=c&&c.length&&a);let h;if(d&&a&&!this.bitrateTest&&(n=n.concat(a),o=a.sn),e<t){const i=e>t-l?0:l;h=zP(r,n,e,i)}else h=n[n.length-1];if(h){const e=h.sn-i.startSN,t=this.fragmentTracker.getState(h);if((t===wM.OK||t===wM.PARTIAL&&h.gap)&&(r=h),r&&h.sn===r.sn&&(!d||c[0].fragment.sn>h.sn)){const t=r&&h.level===r.level;if(t){const t=n[e+1];h=h.sn<o&&this.fragmentTracker.getState(t)!==wM.OK?t:null}}}return h}synchronizeToLiveEdge(e){const{config:t,media:i}=this;if(!i)return;const s=this.hls.liveSyncPosition,r=i.currentTime,n=e.fragments[0].start,o=e.edge,a=r>=n-t.maxFragLookUpTolerance&&r<=o;if(null!==s&&i.duration>s&&(r<s||!a)){const n=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!a&&i.readyState<4||r<o-n)&&(this.loadedmetadata||(this.nextLoadPosition=s),i.readyState&&(this.warn(`Playback: ${r.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${s.toFixed(3)}`),i.currentTime=s))}}alignPlaylists(e,t,i){const s=e.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;const r=e.fragments[0].start,n=!t,o=e.alignedSliding&&ER(r);if(n||!o&&!r){const{fragPrevious:r}=this;PM(r,i,e);const n=e.fragments[0].start;return this.log(`Live playlist sliding: ${n.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} prev-sn: ${r?r.sn:"na"} fragments: ${s}`),n}return r}waitForCdnTuneIn(e){const t=3;return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*t)}setStartPosition(e,t){let i=this.startPosition;if(i<t&&(i=-1),-1===i||-1===this.lastCurrentTime){const s=null!==this.startTimeOffset,r=s?this.startTimeOffset:e.startTimeOffset;null!==r&&ER(r)?(i=t+r,r<0&&(i+=e.totalduration),i=Math.min(Math.max(t,i),t+e.totalduration),this.log(`Start time offset ${r} found in ${s?"multivariant":"media"} playlist, adjust startPosition to ${i}`),this.startPosition=i):e.live?i=this.hls.liveSyncPosition||t:this.startPosition=i=0,this.lastCurrentTime=i}this.nextLoadPosition=i}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===KM.FRAG_LOADING_WAITING_RETRY)||(this.state=KM.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}const i=t.frag;if(!i||i.type!==e||!this.levels)return;var s;if(this.fragContextChanged(i))return void this.warn(`Frag load error must match current frag to retry ${i.url} > ${null==(s=this.fragCurrent)?void 0:s.url}`);const r=t.details===kR.FRAG_GAP;r&&this.fragmentTracker.fragBuffered(i,!0);const n=t.errorAction,{action:o,retryCount:a=0,retryConfig:l}=n||{};if(n&&o===qP.RetryRequest&&l){this.resetStartWhenNotLoaded(this.levelLastLoaded);const s=BP(l,a);this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${t.details}, retrying loading ${a+1}/${l.maxNumRetry} in ${s}ms`),n.resolved=!0,this.retryDate=self.performance.now()+s,this.state=KM.FRAG_LOADING_WAITING_RETRY}else if(l&&n){if(this.resetFragmentErrors(e),!(a<l.maxNumRetry))return void PR.warn(`${t.details} reached or exceeded max retry (${a})`);r||o===qP.RemoveAlternatePermanently||(n.resolved=!0)}else(null==n?void 0:n.action)===qP.SendAlternateToPenaltyBox?this.state=KM.WAITING_LEVEL:this.state=KM.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===KM.PARSING||this.state===KM.PARSED){const t=e.frag,i=e.parent,s=this.getFwdBufferInfo(this.mediaBuffer,i),r=s&&s.len>.5;r&&this.reduceMaxBufferLength(s.len,(null==t?void 0:t.duration)||10);const n=!r;return n&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${i} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),n}return!1}resetFragmentErrors(e){e===KD.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==KM.STOPPED&&(this.state=KM.IDLE)}afterBufferFlushed(e,t,i){if(!e)return;const s=xM.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,s,i),this.state===KM.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=KM.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=e?e.details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,i,s){var r;const n=i.details;if(!n)return void this.warn("level.details undefined");const o=Object.keys(e.elementaryStreams).reduce(((t,r)=>{const o=e.elementaryStreams[r];if(o){const a=o.endPTS-o.startPTS;if(a<=0)return this.warn(`Could not parse fragment ${e.sn} ${r} duration reliably (${a})`),t||!1;const l=s?0:AP(n,e,o.startPTS,o.endPTS,o.startDTS,o.endDTS);return this.hls.trigger(AR.LEVEL_PTS_UPDATED,{details:n,level:i,drift:l,type:r,frag:e,start:o.startPTS,end:o.endPTS}),!0}return t}),!1);if(!o&&null===(null==(r=this.transmuxer)?void 0:r.error)){const t=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(0===i.fragmentError&&(i.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(t.message),this.hls.trigger(AR.ERROR,{type:xR.MEDIA_ERROR,details:kR.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:`Found no media in msn ${e.sn} of level "${i.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=KM.PARSED,this.hls.trigger(AR.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}class XM{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let i;return e.length?(i=1===e.length?e[0]:ZM(e,t),this.reset(),i):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}function ZM(e,t){const i=new Uint8Array(t);let s=0;for(let r=0;r<e.length;r++){const t=e[r];i.set(t,s),s+=t.length}return i}function QM(){return"function"===typeof __HLS_WORKER_BUNDLE__}function JM(){const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),i=new self.Worker(t);return{worker:i,objectURL:t}}function eO(e){const t=new self.URL(e,self.location.href).href,i=new self.Worker(t);return{worker:i,scriptURL:t}}function tO(e="",t=9e4){return{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}class iO{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,i,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,i){}demux(e,t){this.cachedData&&(e=QI(this.cachedData,e),this.cachedData=null);let i,s=uI(e,0),r=s?s.length:0;const n=this._audioTrack,o=this._id3Track,a=s?gI(s):void 0,l=e.length;(null===this.basePTS||0===this.frameIndex&&ER(a))&&(this.basePTS=sO(a,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),s&&s.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:s,type:nP.audioId3,duration:Number.POSITIVE_INFINITY});while(r<l){if(this.canParse(e,r)){const t=this.appendFrame(n,e,r);t?(this.frameIndex++,this.lastPTS=t.sample.pts,r+=t.length,i=r):r=l}else fI(e,r)?(s=uI(e,r),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:s,type:nP.audioId3,duration:Number.POSITIVE_INFINITY}),r+=s.length,i=r):r++;if(r===l&&i!==l){const t=cI(e,i);this.cachedData?this.cachedData=QI(this.cachedData,t):this.cachedData=t}}return{audioTrack:n,videoTrack:tO(),id3Track:o,textTrack:tO()}}demuxSampleAes(e,t,i){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:tO(),id3Track:this._id3Track,textTrack:tO()}}destroy(){}}const sO=(e,t,i)=>{if(ER(e))return 90*e;const s=i?9e4*i.baseTime/i.timescale:0;return 9e4*t+s};function rO(e,t,i,s){let r,n,o,a;const l=navigator.userAgent.toLowerCase(),c=s,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];r=1+((192&t[i+2])>>>6);const h=(60&t[i+2])>>>2;if(!(h>d.length-1))return o=(1&t[i+2])<<2,o|=(192&t[i+3])>>>6,PR.log(`manifest codec:${s}, ADTS type:${r}, samplingIndex:${h}`),/firefox/i.test(l)?h>=6?(r=5,a=new Array(4),n=h-3):(r=2,a=new Array(2),n=h):-1!==l.indexOf("android")?(r=2,a=new Array(2),n=h):(r=5,a=new Array(4),s&&(-1!==s.indexOf("mp4a.40.29")||-1!==s.indexOf("mp4a.40.5"))||!s&&h>=6?n=h-3:((s&&-1!==s.indexOf("mp4a.40.2")&&(h>=6&&1===o||/vivaldi/i.test(l))||!s&&1===o)&&(r=2,a=new Array(2)),n=h)),a[0]=r<<3,a[0]|=(14&h)>>1,a[1]|=(1&h)<<7,a[1]|=o<<3,5===r&&(a[1]|=(14&n)>>1,a[2]=(1&n)<<7,a[2]|=8,a[3]=0),{config:a,samplerate:d[h],channelCount:o,codec:"mp4a.40."+r,manifestCodec:c};{const t=new Error(`invalid ADTS sampling index:${h}`);e.emit(AR.ERROR,AR.ERROR,{type:xR.MEDIA_ERROR,details:kR.FRAG_PARSING_ERROR,fatal:!0,error:t,reason:t.message})}}function nO(e,t){return 255===e[t]&&240===(246&e[t+1])}function oO(e,t){return 1&e[t+1]?7:9}function aO(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function lO(e,t){return t+5<e.length}function cO(e,t){return t+1<e.length&&nO(e,t)}function dO(e,t){return lO(e,t)&&nO(e,t)&&aO(e,t)<=e.length-t}function hO(e,t){if(cO(e,t)){const i=oO(e,t);if(t+i>=e.length)return!1;const s=aO(e,t);if(s<=i)return!1;const r=t+s;return r===e.length||cO(e,r)}return!1}function uO(e,t,i,s,r){if(!e.samplerate){const n=rO(t,i,s,r);if(!n)return;e.config=n.config,e.samplerate=n.samplerate,e.channelCount=n.channelCount,e.codec=n.codec,e.manifestCodec=n.manifestCodec,PR.log(`parsed codec:${e.codec}, rate:${n.samplerate}, channels:${n.channelCount}`)}}function pO(e){return 9216e4/e}function fO(e,t){const i=oO(e,t);if(t+i<=e.length){const s=aO(e,t)-i;if(s>0)return{headerLength:i,frameLength:s}}}function gO(e,t,i,s,r){const n=pO(e.samplerate),o=s+r*n,a=fO(t,i);let l;if(a){const{frameLength:s,headerLength:r}=a,n=r+s,c=Math.max(0,i+n-t.length);c?(l=new Uint8Array(n-r),l.set(t.subarray(i+r,t.length),0)):l=t.subarray(i+r,i+n);const d={unit:l,pts:o};return c||e.samples.push(d),{sample:d,length:n,missing:c}}const c=t.length-i;l=new Uint8Array(c),l.set(t.subarray(i,t.length),0);const d={unit:l,pts:o};return{sample:d,length:c,missing:-1}}let mO=null;const vO=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],yO=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],bO=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],wO=[0,1,1,4];function EO(e,t,i,s,r){if(i+24>t.length)return;const n=TO(t,i);if(n&&i+n.frameLength<=t.length){const o=9e4*n.samplesPerFrame/n.sampleRate,a=s+r*o,l={unit:t.subarray(i,i+n.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=n.channelCount,e.samplerate=n.sampleRate,e.samples.push(l),{sample:l,length:n.frameLength,missing:0}}}function TO(e,t){const i=e[t+1]>>3&3,s=e[t+1]>>1&3,r=e[t+2]>>4&15,n=e[t+2]>>2&3;if(1!==i&&0!==r&&15!==r&&3!==n){const o=e[t+2]>>1&1,a=e[t+3]>>6,l=3===i?3-s:3===s?3:4,c=1e3*vO[14*l+r-1],d=3===i?0:2===i?1:2,h=yO[3*d+n],u=3===a?1:2,p=bO[i][s],f=wO[s],g=8*p*f,m=Math.floor(p*c/h+o)*f;if(null===mO){const e=navigator.userAgent||"",t=e.match(/Chrome\/(\d+)/i);mO=t?parseInt(t[1]):0}const v=!!mO&&mO<=87;return v&&2===s&&c>=224e3&&0===a&&(e[t+3]=128|e[t+3]),{sampleRate:h,channelCount:u,frameLength:m,samplesPerFrame:g}}}function SO(e,t){return 255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1])}function AO(e,t){return t+1<e.length&&SO(e,t)}function xO(e,t){const i=4;return SO(e,t)&&i<=e.length-t}function kO(e,t){if(t+1<e.length&&SO(e,t)){const i=4,s=TO(e,t);let r=i;null!=s&&s.frameLength&&(r=s.frameLength);const n=t+r;return n===e.length||AO(e,n)}return!1}class LO extends iO{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=uI(e,0);let i=(null==t?void 0:t.length)||0;if(kO(e,i))return!1;for(let s=e.length;i<s;i++)if(hO(e,i))return PR.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return dO(e,t)}appendFrame(e,t,i){uO(e,this.observer,t,i,e.manifestCodec);const s=gO(e,t,i,this.basePTS,this.frameIndex);if(s&&0===s.missing)return s}}const CO=/\/emsg[-/]ID3/i;class _O{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,i,s){const r=this.videoTrack=tO("video",1),n=this.audioTrack=tO("audio",1),o=this.txtTrack=tO("text",1);if(this.id3Track=tO("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const a=UI(e);if(a.video){const{id:e,timescale:t,codec:i}=a.video;r.id=e,r.timescale=o.timescale=t,r.codec=i}if(a.audio){const{id:e,timescale:t,codec:i}=a.audio;n.id=e,n.timescale=t,n.codec=i}o.id=RI.text,r.sampleDuration=0,r.duration=n.duration=s}resetContiguity(){this.remainderData=null}static probe(e){return FI(e)}demux(e,t){this.timeOffset=t;let i=e;const s=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=QI(this.remainderData,e));const t=ZI(i);this.remainderData=t.remainder,s.samples=t.valid||new Uint8Array}else s.samples=i;const n=this.extractID3Track(s,t);return r.samples=JI(t,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:n,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,i=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const s=this.extractID3Track(t,this.timeOffset);return i.samples=JI(e,t),{videoTrack:t,audioTrack:tO(),id3Track:s,textTrack:tO()}}extractID3Track(e,t){const i=this.id3Track;if(e.samples.length){const s=BI(e.samples,["emsg"]);s&&s.forEach((e=>{const s=rD(e);if(CO.test(s.schemeIdUri)){const e=ER(s.presentationTime)?s.presentationTime/s.timeScale:t+s.presentationTimeDelta/s.timeScale;let r=4294967295===s.eventDuration?Number.POSITIVE_INFINITY:s.eventDuration/s.timeScale;r<=.001&&(r=Number.POSITIVE_INFINITY);const n=s.payload;i.samples.push({data:n,len:n.byteLength,dts:e,pts:e,type:nP.emsg,duration:r})}}))}return i}demuxSampleAes(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const RO=(e,t)=>{let i=0,s=5;t+=s;const r=new Uint32Array(1),n=new Uint32Array(1),o=new Uint8Array(1);while(s>0){o[0]=e[t];const a=Math.min(s,8),l=8-a;n[0]=4278190080>>>24+l<<l,r[0]=(o[0]&n[0])>>l,i=i?i<<a|r[0]:r[0],t+=1,s-=a}return i};class IO extends iO{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,i){const s=DO(e,t,i,this.basePTS,this.frameIndex);if(-1!==s){const t=e.samples[e.samples.length-1];return{sample:t,length:s,missing:0}}}static probe(e){if(!e)return!1;const t=uI(e,0);if(!t)return!1;const i=t.length;return 11===e[i]&&119===e[i+1]&&void 0!==gI(t)&&RO(e,i)<16}}function DO(e,t,i,s,r){if(i+8>t.length)return-1;if(11!==t[i]||119!==t[i+1])return-1;const n=t[i+4]>>6;if(n>=3)return-1;const o=[48e3,44100,32e3],a=o[n],l=63&t[i+4],c=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920],d=2*c[3*l+n];if(i+d>t.length)return-1;const h=t[i+6]>>5;let u=0;2===h?u+=2:(1&h&&1!==h&&(u+=2),4&h&&(u+=2));const p=(t[i+6]<<8|t[i+7])>>12-u&1,f=[2,1,2,3,3,4,4,5],g=f[h]+p,m=t[i+5]>>3,v=7&t[i+5],y=new Uint8Array([n<<6|m<<1|v>>2,(3&v)<<6|h<<3|p<<2|l>>4,l<<4&224]),b=1536/a*9e4,w=s+r*b,E=t.subarray(i,i+d);return e.config=y,e.channelCount=g,e.samplerate=a,e.samples.push({unit:E,pts:w}),d}class PO{constructor(){this.VideoSample=null}createVideoSample(e,t,i,s){return{key:e,frame:!1,pts:t,dts:i,units:[],debug:s,length:0}}getLastNalUnit(e){var t;let i,s=this.VideoSample;if(s&&0!==s.units.length||(s=e[e.length-1]),null!=(t=s)&&t.units){const e=s.units;i=e[e.length-1]}return i}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){const i=t.samples,s=i.length;if(!s)return void t.dropped++;{const t=i[s-1];e.pts=t.pts,e.dts=t.dts}}t.samples.push(e)}e.debug.length&&PR.log(e.pts+"/"+e.dts+":"+e.debug)}}class MO{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,i=e.byteLength-t,s=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");s.set(e.subarray(i,i+r)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const i=this.word>>>32-t;if(e>32&&PR.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?i<<t|this.readBits(t):i}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t,i=8,s=8;for(let r=0;r<e;r++)0!==s&&(t=this.readEG(),s=(i+t+256)%256),i=0===s?i:s}readSPS(){let e,t,i,s=0,r=0,n=0,o=0;const a=this.readUByte.bind(this),l=this.readBits.bind(this),c=this.readUEG.bind(this),d=this.readBoolean.bind(this),h=this.skipBits.bind(this),u=this.skipEG.bind(this),p=this.skipUEG.bind(this),f=this.skipScalingList.bind(this);a();const g=a();if(l(5),h(3),a(),p(),100===g||110===g||122===g||244===g||44===g||83===g||86===g||118===g||128===g){const e=c();if(3===e&&h(1),p(),p(),h(1),d())for(t=3!==e?8:12,i=0;i<t;i++)d()&&f(i<6?16:64)}p();const m=c();if(0===m)c();else if(1===m)for(h(1),u(),u(),e=c(),i=0;i<e;i++)u();p(),h(1);const v=c(),y=c(),b=l(1);0===b&&h(1),h(1),d()&&(s=c(),r=c(),n=c(),o=c());let w=[1,1];if(d()&&d()){const e=a();switch(e){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[a()<<8|a(),a()<<8|a()];break}}return{width:Math.ceil(16*(v+1)-2*s-2*r),height:(2-b)*(y+1)*16-(b?2:4)*(n+o),pixelRatio:w}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class OO extends PO{parseAVCPES(e,t,i,s,r){const n=this.parseAVCNALu(e,i.data);let o,a=this.VideoSample,l=!1;i.data=null,a&&n.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts,"")),n.forEach((s=>{var n;switch(s.type){case 1:{let t=!1;o=!0;const r=s.data;if(l&&r.length>4){const e=new MO(r).readSliceType();2!==e&&4!==e&&7!==e&&9!==e||(t=!0)}var c;if(t)null!=(c=a)&&c.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null);a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts,"")),a.frame=!0,a.key=t;break}case 5:o=!0,null!=(n=a)&&n.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts,"")),a.key=!0,a.frame=!0;break;case 6:o=!0,iD(s.data,1,i.pts,t.samples);break;case 7:{var d,h;o=!0,l=!0;const t=s.data,i=new MO(t),n=i.readSPS();if(!e.sps||e.width!==n.width||e.height!==n.height||(null==(d=e.pixelRatio)?void 0:d[0])!==n.pixelRatio[0]||(null==(h=e.pixelRatio)?void 0:h[1])!==n.pixelRatio[1]){e.width=n.width,e.height=n.height,e.pixelRatio=n.pixelRatio,e.sps=[t],e.duration=r;const i=t.subarray(1,4);let s="avc1.";for(let e=0;e<3;e++){let t=i[e].toString(16);t.length<2&&(t="0"+t),s+=t}e.codec=s}break}case 8:o=!0,e.pps=[s.data];break;case 9:o=!0,e.audFound=!0,a&&this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts,"");break;case 12:o=!0;break;default:o=!1,a&&(a.debug+="unknown NAL "+s.type+" ");break}if(a&&o){const e=a.units;e.push(s)}})),s&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}parseAVCNALu(e,t){const i=t.byteLength;let s=e.naluState||0;const r=s,n=[];let o,a,l,c=0,d=-1,h=0;-1===s&&(d=0,h=31&t[0],s=0,c=1);while(c<i)if(o=t[c++],s)if(1!==s)if(o)if(1===o){if(a=c-s-1,d>=0){const e={data:t.subarray(d,a),type:h};n.push(e)}else{const i=this.getLastNalUnit(e.samples);i&&(r&&c<=4-r&&i.state&&(i.data=i.data.subarray(0,i.data.byteLength-r)),a>0&&(i.data=QI(i.data,t.subarray(0,a)),i.state=0))}c<i?(l=31&t[c],d=c,h=l,s=0):s=-1}else s=0;else s=3;else s=o?0:2;else s=o?0:1;if(d>=0&&s>=0){const e={data:t.subarray(d,i),type:h,state:s};n.push(e)}if(0===n.length){const i=this.getLastNalUnit(e.samples);i&&(i.data=QI(i.data,t))}return e.naluState=s,n}}class NO{constructor(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new YM(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,i){const s=e[t].unit;if(s.length<=16)return;const r=s.subarray(16,s.length-s.length%16),n=r.buffer.slice(r.byteOffset,r.byteOffset+r.length);this.decryptBuffer(n).then((r=>{const n=new Uint8Array(r);s.set(n,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,i)}))}decryptAacSamples(e,t,i){for(;;t++){if(t>=e.length)return void i();if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,i),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,i=new Int8Array(t);let s=0;for(let r=32;r<e.length-16;r+=160,s+=16)i.set(e.subarray(r,r+16),s);return i}getAvcDecryptedUnit(e,t){const i=new Uint8Array(t);let s=0;for(let r=32;r<e.length-16;r+=160,s+=16)e.set(i.subarray(s,s+16),r);return e}decryptAvcSample(e,t,i,s,r){const n=sD(r.data),o=this.getAvcEncryptedData(n);this.decryptBuffer(o.buffer).then((o=>{r.data=this.getAvcDecryptedUnit(n,o),this.decrypter.isSync()||this.decryptAvcSamples(e,t,i+1,s)}))}decryptAvcSamples(e,t,i,s){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length)return void s();const r=e[t].units;for(;;i++){if(i>=r.length)break;const n=r[i];if(!(n.data.length<=48||1!==n.type&&5!==n.type)&&(this.decryptAvcSample(e,t,i,s,n),!this.decrypter.isSync()))return}}}}const FO=188;class BO{constructor(e,t,i){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.videoParser=new OO}static probe(e){const t=BO.syncOffset(e);return t>0&&PR.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),-1!==t}static syncOffset(e){const t=e.length;let i=Math.min(5*FO,t-FO)+1,s=0;while(s<i){let r=!1,n=-1,o=0;for(let a=s;a<t;a+=FO){if(71!==e[a]||t-a!==FO&&71!==e[a+FO]){if(o)return-1;break}if(o++,-1===n&&(n=a,0!==n&&(i=Math.min(n+99*FO,e.length-FO)+1)),r||(r=0===$O(e,a)),r&&o>1&&(0===n&&o>2||a+FO>i))return n}s++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:RI[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,i,s){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=BO.createTrack("video"),this._audioTrack=BO.createTrack("audio",s),this._id3Track=BO.createTrack("id3"),this._txtTrack=BO.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=i,this._duration=s}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:i}=this;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,i=!1,s=!1){let r;i||(this.sampleAes=null);const n=this._videoTrack,o=this._audioTrack,a=this._id3Track,l=this._txtTrack;let c=n.pid,d=n.pesData,h=o.pid,u=a.pid,p=o.pesData,f=a.pesData,g=null,m=this.pmtParsed,v=this._pmtId,y=e.length;if(this.remainderData&&(e=QI(this.remainderData,e),y=e.length,this.remainderData=null),y<FO&&!s)return this.remainderData=e,{audioTrack:o,videoTrack:n,id3Track:a,textTrack:l};const b=Math.max(0,BO.syncOffset(e));y-=(y-b)%FO,y<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));let w=0;for(let T=b;T<y;T+=FO)if(71===e[T]){const t=!!(64&e[T+1]),s=$O(e,T),y=(48&e[T+3])>>4;let w;if(y>1){if(w=T+5+e[T+4],w===T+FO)continue}else w=T+4;switch(s){case c:t&&(d&&(r=zO(d))&&this.videoParser.parseAVCPES(n,l,r,!1,this._duration),d={data:[],size:0}),d&&(d.data.push(e.subarray(w,T+FO)),d.size+=T+FO-w);break;case h:if(t){if(p&&(r=zO(p)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,r);break;case"mp3":this.parseMPEGPES(o,r);break;case"ac3":this.parseAC3PES(o,r);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(w,T+FO)),p.size+=T+FO-w);break;case u:t&&(f&&(r=zO(f))&&this.parseID3PES(a,r),f={data:[],size:0}),f&&(f.data.push(e.subarray(w,T+FO)),f.size+=T+FO-w);break;case 0:t&&(w+=e[w]+1),v=this._pmtId=UO(e,w);break;case v:{t&&(w+=e[w]+1);const s=GO(e,w,this.typeSupported,i,this.observer);c=s.videoPid,c>0&&(n.pid=c,n.segmentCodec=s.segmentVideoCodec),h=s.audioPid,h>0&&(o.pid=h,o.segmentCodec=s.segmentAudioCodec),u=s.id3Pid,u>0&&(a.pid=u),null===g||m||(PR.warn(`MPEG-TS PMT found at ${T} after unknown PID '${g}'. Backtracking to sync byte @${b} to parse all TS packets.`),g=null,T=b-188),m=this.pmtParsed=!0;break}case 17:case 8191:break;default:g=s;break}}else w++;w>0&&HO(this.observer,new Error(`Found ${w} TS packet/s that do not start with 0x47`)),n.pesData=d,o.pesData=p,a.pesData=f;const E={audioTrack:o,videoTrack:n,id3Track:a,textTrack:l};return s&&this.extractRemainingSamples(E),E}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:i,id3Track:s,textTrack:r}=e,n=i.pesData,o=t.pesData,a=s.pesData;let l;if(n&&(l=zO(n))?(this.videoParser.parseAVCPES(i,r,l,!0,this._duration),i.pesData=null):i.pesData=n,o&&(l=zO(o))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l);break;case"ac3":this.parseAC3PES(t,l);break}t.pesData=null}else null!=o&&o.size&&PR.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=o;a&&(l=zO(a))?(this.parseID3PES(s,l),s.pesData=null):s.pesData=a}demuxSampleAes(e,t,i){const s=this.demux(e,i,!0,!this.config.progressive),r=this.sampleAes=new NO(this.observer,this.config,t);return this.decrypt(s,r)}decrypt(e,t){return new Promise((i=>{const{audioTrack:s,videoTrack:r}=e;s.samples&&"aac"===s.segmentCodec?t.decryptAacSamples(s.samples,0,(()=>{r.samples?t.decryptAvcSamples(r.samples,0,0,(()=>{i(e)})):i(e)})):r.samples&&t.decryptAvcSamples(r.samples,0,0,(()=>{i(e)}))}))}destroy(){this._duration=0}parseAACPES(e,t){let i=0;const s=this.aacOverFlow;let r,n,o,a=t.data;if(s){this.aacOverFlow=null;const t=s.missing,r=s.sample.unit.byteLength;if(-1===t)a=QI(s.sample.unit,a);else{const n=r-t;s.sample.unit.set(a.subarray(0,t),n),e.samples.push(s.sample),i=s.missing}}for(r=i,n=a.length;r<n-1;r++)if(cO(a,r))break;if(r!==i){let e;const t=r<n-1;if(e=t?`AAC PES did not start with ADTS header,offset:${r}`:"No ADTS header found in AAC PES",HO(this.observer,new Error(e),t),!t)return}if(uO(e,this.observer,a,r,this.audioCodec),void 0!==t.pts)o=t.pts;else{if(!s)return void PR.warn("[tsdemuxer]: AAC PES unknown PTS");{const t=pO(e.samplerate);o=s.sample.pts+t}}let l,c=0;while(r<n){if(l=gO(e,a,r,o,c),r+=l.length,l.missing){this.aacOverFlow=l;break}for(c++;r<n-1;r++)if(cO(a,r))break}}parseMPEGPES(e,t){const i=t.data,s=i.length;let r=0,n=0;const o=t.pts;if(void 0!==o)while(n<s)if(AO(i,n)){const t=EO(e,i,n,o,r);if(!t)break;n+=t.length,r++}else n++;else PR.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseAC3PES(e,t){{const i=t.data,s=t.pts;if(void 0===s)return void PR.warn("[tsdemuxer]: AC3 PES unknown PTS");const r=i.length;let n,o=0,a=0;while(a<r&&(n=DO(e,i,a,s,o++))>0)a+=n}}parseID3PES(e,t){if(void 0===t.pts)return void PR.warn("[tsdemuxer]: ID3 PES unknown PTS");const i=wR({},t,{type:this._videoTrack?nP.emsg:nP.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(i)}}function $O(e,t){return((31&e[t+1])<<8)+e[t+2]}function UO(e,t){return(31&e[t+10])<<8|e[t+11]}function GO(e,t,i,s,r){const n={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(15&e[t+1])<<8|e[t+2],a=t+3+o-4,l=(15&e[t+10])<<8|e[t+11];t+=12+l;while(t<a){const o=$O(e,t),a=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!s){jO("ADTS AAC");break}case 15:-1===n.audioPid&&(n.audioPid=o);break;case 21:-1===n.id3Pid&&(n.id3Pid=o);break;case 219:if(!s){jO("H.264");break}case 27:-1===n.videoPid&&(n.videoPid=o,n.segmentVideoCodec="avc");break;case 3:case 4:i.mpeg||i.mp3?-1===n.audioPid&&(n.audioPid=o,n.segmentAudioCodec="mp3"):PR.log("MPEG audio found, not supported in this browser");break;case 193:if(!s){jO("AC-3");break}case 129:i.ac3?-1===n.audioPid&&(n.audioPid=o,n.segmentAudioCodec="ac3"):PR.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===n.audioPid&&a>0){let s=t+5,r=a;while(r>2){const t=e[s];switch(t){case 106:!0!==i.ac3?PR.log("AC-3 audio found, not supported in this browser for now"):(n.audioPid=o,n.segmentAudioCodec="ac3");break}const a=e[s+1]+2;s+=a,r-=a}}break;case 194:case 135:return HO(r,new Error("Unsupported EC-3 in M2TS found")),n;case 36:return HO(r,new Error("Unsupported HEVC in M2TS found")),n}t+=a+5}return n}function HO(e,t,i){PR.warn(`parsing error: ${t.message}`),e.emit(AR.ERROR,AR.ERROR,{type:xR.MEDIA_ERROR,details:kR.FRAG_PARSING_ERROR,fatal:!1,levelRetry:i,error:t,reason:t.message})}function jO(e){PR.log(`${e} with AES-128-CBC encryption found in unencrypted stream`)}function zO(e){let t,i,s,r,n,o=0;const a=e.data;if(!e||0===e.size)return null;while(a[0].length<19&&a.length>1)a[0]=QI(a[0],a[1]),a.splice(1,1);t=a[0];const l=(t[0]<<16)+(t[1]<<8)+t[2];if(1===l){if(i=(t[4]<<8)+t[5],i&&i>e.size-6)return null;const l=t[7];192&l&&(r=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&l?(n=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,r-n>54e5&&(PR.warn(`${Math.round((r-n)/9e4)}s delta between PTS and DTS, align them`),r=n)):n=r),s=t[8];let c=s+9;if(e.size<=c)return null;e.size-=c;const d=new Uint8Array(e.size);for(let e=0,i=a.length;e<i;e++){t=a[e];let i=t.byteLength;if(c){if(c>i){c-=i;continue}t=t.subarray(c),i-=c,c=0}d.set(t,o),o+=i}return i&&(i-=s+3),{data:d,pts:r,dts:n,len:i}}return null}class VO extends iO{resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=uI(e,0);let i=(null==t?void 0:t.length)||0;if(t&&11===e[i]&&119===e[i+1]&&void 0!==gI(t)&&RO(e,i)<=16)return!1;for(let s=e.length;i<s;i++)if(kO(e,i))return PR.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return xO(e,t)}appendFrame(e,t,i){if(null!==this.basePTS)return EO(e,t,i,this.basePTS,this.frameIndex)}}class YO{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const WO=Math.pow(2,32)-1;class KO{static init(){let e;for(e in KO.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},KO.types)KO.types.hasOwnProperty(e)&&(KO.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);KO.HDLR_TYPES={video:t,audio:i};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);KO.STTS=KO.STSC=KO.STCO=r,KO.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),KO.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),KO.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),KO.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const n=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),a=new Uint8Array([0,0,0,1]);KO.FTYP=KO.box(KO.types.ftyp,n,a,n,o),KO.DINF=KO.box(KO.types.dinf,KO.box(KO.types.dref,s))}static box(e,...t){let i=8,s=t.length;const r=s;while(s--)i+=t[s].byteLength;const n=new Uint8Array(i);for(n[0]=i>>24&255,n[1]=i>>16&255,n[2]=i>>8&255,n[3]=255&i,n.set(e,4),s=0,i=8;s<r;s++)n.set(t[s],i),i+=t[s].byteLength;return n}static hdlr(e){return KO.box(KO.types.hdlr,KO.HDLR_TYPES[e])}static mdat(e){return KO.box(KO.types.mdat,e)}static mdhd(e,t){t*=e;const i=Math.floor(t/(WO+1)),s=Math.floor(t%(WO+1));return KO.box(KO.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s,85,196,0,0]))}static mdia(e){return KO.box(KO.types.mdia,KO.mdhd(e.timescale,e.duration),KO.hdlr(e.type),KO.minf(e))}static mfhd(e){return KO.box(KO.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?KO.box(KO.types.minf,KO.box(KO.types.smhd,KO.SMHD),KO.DINF,KO.stbl(e)):KO.box(KO.types.minf,KO.box(KO.types.vmhd,KO.VMHD),KO.DINF,KO.stbl(e))}static moof(e,t,i){return KO.box(KO.types.moof,KO.mfhd(e),KO.traf(i,t))}static moov(e){let t=e.length;const i=[];while(t--)i[t]=KO.trak(e[t]);return KO.box.apply(null,[KO.types.moov,KO.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(KO.mvex(e)))}static mvex(e){let t=e.length;const i=[];while(t--)i[t]=KO.trex(e[t]);return KO.box.apply(null,[KO.types.mvex,...i])}static mvhd(e,t){t*=e;const i=Math.floor(t/(WO+1)),s=Math.floor(t%(WO+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return KO.box(KO.types.mvhd,r)}static sdtp(e){const t=e.samples||[],i=new Uint8Array(4+t.length);let s,r;for(s=0;s<t.length;s++)r=t[s].flags,i[s+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return KO.box(KO.types.sdtp,i)}static stbl(e){return KO.box(KO.types.stbl,KO.stsd(e),KO.box(KO.types.stts,KO.STTS),KO.box(KO.types.stsc,KO.STSC),KO.box(KO.types.stsz,KO.STSZ),KO.box(KO.types.stco,KO.STCO))}static avc1(e){let t,i,s,r=[],n=[];for(t=0;t<e.sps.length;t++)i=e.sps[t],s=i.byteLength,r.push(s>>>8&255),r.push(255&s),r=r.concat(Array.prototype.slice.call(i));for(t=0;t<e.pps.length;t++)i=e.pps[t],s=i.byteLength,n.push(s>>>8&255),n.push(255&s),n=n.concat(Array.prototype.slice.call(i));const o=KO.box(KO.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(n))),a=e.width,l=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return KO.box(KO.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>8&255,255&a,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,KO.box(KO.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),KO.box(KO.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0])}static mp4a(e){return KO.box(KO.types.mp4a,KO.audioStsd(e),KO.box(KO.types.esds,KO.esds(e)))}static mp3(e){return KO.box(KO.types[".mp3"],KO.audioStsd(e))}static ac3(e){return KO.box(KO.types["ac-3"],KO.audioStsd(e),KO.box(KO.types.dac3,e.config))}static stsd(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?KO.box(KO.types.stsd,KO.STSD,KO.mp3(e)):"ac3"===e.segmentCodec?KO.box(KO.types.stsd,KO.STSD,KO.ac3(e)):KO.box(KO.types.stsd,KO.STSD,KO.mp4a(e)):KO.box(KO.types.stsd,KO.STSD,KO.avc1(e))}static tkhd(e){const t=e.id,i=e.duration*e.timescale,s=e.width,r=e.height,n=Math.floor(i/(WO+1)),o=Math.floor(i%(WO+1));return KO.box(KO.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,255&s,0,0,r>>8&255,255&r,0,0]))}static traf(e,t){const i=KO.sdtp(e),s=e.id,r=Math.floor(t/(WO+1)),n=Math.floor(t%(WO+1));return KO.box(KO.types.traf,KO.box(KO.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s])),KO.box(KO.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,n>>24,n>>16&255,n>>8&255,255&n])),KO.trun(e,i.length+16+20+8+16+8+8),i)}static trak(e){return e.duration=e.duration||4294967295,KO.box(KO.types.trak,KO.tkhd(e),KO.mdia(e))}static trex(e){const t=e.id;return KO.box(KO.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const i=e.samples||[],s=i.length,r=12+16*s,n=new Uint8Array(r);let o,a,l,c,d,h;for(t+=8+r,n.set(["video"===e.type?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,255&s,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),o=0;o<s;o++)a=i[o],l=a.duration,c=a.size,d=a.flags,h=a.cts,n.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,61440&d.degradPrio,15&d.degradPrio,h>>>24&255,h>>>16&255,h>>>8&255,255&h],12+16*o);return KO.box(KO.types.trun,n)}static initSegment(e){KO.types||KO.init();const t=KO.moov(e),i=QI(KO.FTYP,t);return i}}KO.types=void 0,KO.HDLR_TYPES=void 0,KO.STTS=void 0,KO.STSC=void 0,KO.STCO=void 0,KO.STSZ=void 0,KO.VMHD=void 0,KO.SMHD=void 0,KO.STSD=void 0,KO.FTYP=void 0,KO.DINF=void 0;const qO=9e4;function XO(e,t,i=1,s=!1){const r=e*t*i;return s?Math.round(r):r}function ZO(e,t,i=1,s=!1){return XO(e,t,1/i,s)}function QO(e,t=!1){return XO(e,1e3,1/qO,t)}function JO(e,t=1){return XO(e,qO,1/t)}const eN=1e4,tN=1024,iN=1152,sN=1536;let rN,nN=null,oN=null;class aN{constructor(e,t,i,s=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.ISGenerated=!1,null===nN){const e=navigator.userAgent||"",t=e.match(/Chrome\/(\d+)/i);nN=t?parseInt(t[1]):0}if(null===oN){const e=navigator.userAgent.match(/Safari\/(\d+)/i);oN=e?parseInt(e[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){PR.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){PR.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){PR.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const i=e.reduce(((e,i)=>{const s=i.pts-e;return s<-4294967296?(t=!0,lN(e,i.pts)):s>0?e:i.pts}),e[0].pts);return t&&PR.debug("PTS rollover detected"),i}remux(e,t,i,s,r,n,o,a){let l,c,d,h,u,p,f=r,g=r;const m=e.pid>-1,v=t.pid>-1,y=t.samples.length,b=e.samples.length>0,w=o&&y>0||y>1,E=(!m||b)&&(!v||w)||this.ISGenerated||o;if(E){if(this.ISGenerated){var T,S,A,x;const e=this.videoTrackConfig;!e||t.width===e.width&&t.height===e.height&&(null==(T=t.pixelRatio)?void 0:T[0])===(null==(S=e.pixelRatio)?void 0:S[0])&&(null==(A=t.pixelRatio)?void 0:A[1])===(null==(x=e.pixelRatio)?void 0:x[1])||this.resetInitSegment()}else d=this.generateIS(e,t,r,n);const i=this.isVideoContiguous;let s,o=-1;if(w&&(o=cN(t.samples),!i&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,o>0){PR.warn(`[mp4-remuxer]: Dropped ${o} out of ${y} video samples due to a missing keyframe`);const e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(o),t.dropped+=o,g+=(t.samples[0].pts-e)/t.inputTimeScale,s=g}else-1===o&&(PR.warn(`[mp4-remuxer]: No keyframe found out of ${y} video samples`),p=!1);if(this.ISGenerated){if(b&&w){const i=this.getVideoStartPts(t.samples),s=lN(e.samples[0].pts,i)-i,r=s/t.inputTimeScale;f+=Math.max(0,r),g+=Math.max(0,-r)}if(b){if(e.samplerate||(PR.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(e,t,r,n)),c=this.remuxAudio(e,f,this.isAudioContiguous,n,v||w||a===KD.AUDIO?g:void 0),w){const s=c?c.endPTS-c.startPTS:0;t.inputTimeScale||(PR.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(e,t,r,n)),l=this.remuxVideo(t,g,i,s)}}else w&&(l=this.remuxVideo(t,g,i,0));l&&(l.firstKeyFrame=o,l.independent=-1!==o,l.firstKeyFramePTS=s)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(u=dN(i,r,this._initPTS,this._initDTS)),s.samples.length&&(h=hN(s,r,this._initPTS))),{audio:c,video:l,initSegment:d,independent:p,text:h,id3:u}}generateIS(e,t,i,s){const r=e.samples,n=t.samples,o=this.typeSupported,a={},l=this._initPTS;let c,d,h,u=!l||s,p="audio/mp4";if(u&&(c=d=1/0),e.config&&r.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(p="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}a.audio={id:"audio",container:p,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&o.mpeg?new Uint8Array(0):KO.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(h=e.inputTimeScale,l&&h===l.timescale?u=!1:c=d=r[0].pts-Math.round(h*i))}if(t.sps&&t.pps&&n.length){if(t.timescale=t.inputTimeScale,a.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:KO.initSegment([t]),metadata:{width:t.width,height:t.height}},u)if(h=t.inputTimeScale,l&&h===l.timescale)u=!1;else{const e=this.getVideoStartPts(n),t=Math.round(h*i);d=Math.min(d,lN(n[0].dts,e)-t),c=Math.min(c,e-t)}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(a).length)return this.ISGenerated=!0,u?(this._initPTS={baseTime:c,timescale:h},this._initDTS={baseTime:d,timescale:h}):c=h=void 0,{tracks:a,initPTS:c,timescale:h}}remuxVideo(e,t,i,s){const r=e.inputTimeScale,n=e.samples,o=[],a=n.length,l=this._initPTS;let c,d,h=this.nextAvcDts,u=8,p=this.videoSampleDuration,f=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,m=!1;if(!i||null===h){const e=t*r,s=n[0].pts-lN(n[0].dts,n[0].pts);nN&&null!==h&&Math.abs(e-s-h)<15e3?i=!0:h=e-s}const v=l.baseTime*r/l.timescale;for(let M=0;M<a;M++){const e=n[M];e.pts=lN(e.pts-v,h),e.dts=lN(e.dts-v,h),e.dts<n[M>0?M-1:M].dts&&(m=!0)}m&&n.sort((function(e,t){const i=e.dts-t.dts,s=e.pts-t.pts;return i||s})),c=n[0].dts,d=n[n.length-1].dts;const y=d-c,b=y?Math.round(y/(a-1)):p||e.inputTimeScale/30;if(i){const e=c-h,i=e>b,s=e<-1;if((i||s)&&(i?PR.warn(`AVC: ${QO(e,!0)} ms (${e}dts) hole between fragments detected at ${t.toFixed(3)}`):PR.warn(`AVC: ${QO(-e,!0)} ms (${e}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!s||h>=n[0].pts||nN)){c=h;const t=n[0].pts-e;if(i)n[0].dts=c,n[0].pts=t;else for(let i=0;i<n.length;i++){if(n[i].dts>t)break;n[i].dts-=e,n[i].pts-=e}PR.log(`Video: Initial PTS/DTS adjusted: ${QO(t,!0)}/${QO(c,!0)}, delta: ${QO(e,!0)} ms`)}}c=Math.max(0,c);let w=0,E=0,T=c;for(let M=0;M<a;M++){const e=n[M],t=e.units,i=t.length;let s=0;for(let r=0;r<i;r++)s+=t[r].data.length;E+=s,w+=i,e.length=s,e.dts<T?(e.dts=T,T+=b/4|0||1):T=e.dts,f=Math.min(e.pts,f),g=Math.max(e.pts,g)}d=n[a-1].dts;const S=E+4*w+8;let A;try{A=new Uint8Array(S)}catch(F$){return void this.observer.emit(AR.ERROR,AR.ERROR,{type:xR.MUX_ERROR,details:kR.REMUX_ALLOC_ERROR,fatal:!1,error:F$,bytes:S,reason:`fail allocating video mdat ${S}`})}const x=new DataView(A.buffer);x.setUint32(0,S),A.set(KO.types.mdat,4);let k=!1,L=Number.POSITIVE_INFINITY,C=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY,R=Number.NEGATIVE_INFINITY;for(let M=0;M<a;M++){const e=n[M],t=e.units;let i,l=0;for(let s=0,r=t.length;s<r;s++){const e=t[s],i=e.data,r=e.data.byteLength;x.setUint32(u,r),u+=4,A.set(i,u),u+=r,l+=4+r}if(M<a-1)p=n[M+1].dts-e.dts,i=n[M+1].pts-e.pts;else{const t=this.config,o=M>0?e.dts-n[M-1].dts:b;if(i=M>0?e.pts-n[M-1].pts:b,t.stretchShortVideoTrack&&null!==this.nextAudioPts){const i=Math.floor(t.maxBufferHole*r),n=(s?f+s*r:this.nextAudioPts)-e.pts;n>i?(p=n-o,p<0?p=o:k=!0,PR.log(`[mp4-remuxer]: It is approximately ${n/90} ms to the next segment; using duration ${p/90} ms for the last video frame.`)):p=o}else p=o}const c=Math.round(e.pts-e.dts);L=Math.min(L,p),_=Math.max(_,p),C=Math.min(C,i),R=Math.max(R,i),o.push(new uN(e.key,p,l,c))}if(o.length)if(nN){if(nN<70){const e=o[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(oN&&R-C<_-L&&b/_<.025&&0===o[0].cts){PR.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=c;for(let t=0,i=o.length;t<i;t++){const s=e+o[t].duration,r=e+o[t].cts;if(t<i-1){const e=s+o[t+1].cts;o[t].duration=e-r}else o[t].duration=t?o[t-1].duration:b;o[t].cts=0,e=s}}p=k||!p?b:p,this.nextAvcDts=h=d+p,this.videoSampleDuration=p,this.isVideoContiguous=!0;const I=KO.moof(e.sequenceNumber++,c,wR({},e,{samples:o})),D="video",P={data1:I,data2:A,startPTS:f/r,endPTS:(g+p)/r,startDTS:c/r,endDTS:h/r,type:D,hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,P}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return iN;case"ac3":return sN;default:return tN}}remuxAudio(e,t,i,s,r){const n=e.inputTimeScale,o=e.samplerate?e.samplerate:n,a=n/o,l=this.getSamplesPerFrame(e),c=l*a,d=this._initPTS,h="mp3"===e.segmentCodec&&this.typeSupported.mpeg,u=[],p=void 0!==r;let f=e.samples,g=h?0:8,m=this.nextAudioPts||-1;const v=t*n,y=d.baseTime*n/d.timescale;if(this.isAudioContiguous=i=i||f.length&&m>0&&(s&&Math.abs(v-m)<9e3||Math.abs(lN(f[0].pts-y,v)-m)<20*c),f.forEach((function(e){e.pts=lN(e.pts-y,v)})),!i||m<0){if(f=f.filter((e=>e.pts>=0)),!f.length)return;m=0===r?0:s&&!p?Math.max(0,v):f[0].pts}if("aac"===e.segmentCodec){const t=this.config.maxAudioFramesDrift;for(let i=0,s=m;i<f.length;i++){const r=f[i],o=r.pts,a=o-s,l=Math.abs(1e3*a/n);if(a<=-t*c&&p)0===i&&(PR.warn(`Audio frame @ ${(o/n).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*a/n)} ms.`),this.nextAudioPts=m=s=o);else if(a>=t*c&&l<eN&&p){let t=Math.round(a/c);s=o-t*c,s<0&&(t--,s+=c),0===i&&(this.nextAudioPts=m=s),PR.warn(`[mp4-remuxer]: Injecting ${t} audio frame @ ${(s/n).toFixed(3)}s due to ${Math.round(1e3*a/n)} ms gap.`);for(let n=0;n<t;n++){const t=Math.max(s,0);let n=YO.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);n||(PR.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),n=r.unit.subarray()),f.splice(i,0,{unit:n,pts:t}),s+=c,i++}}r.pts=s,s+=c}}let b,w=null,E=null,T=0,S=f.length;while(S--)T+=f[S].unit.byteLength;for(let I=0,D=f.length;I<D;I++){const t=f[I],s=t.unit;let r=t.pts;if(null!==E){const e=u[I-1];e.duration=Math.round((r-E)/a)}else{if(i&&"aac"===e.segmentCodec&&(r=m),w=r,!(T>0))return;T+=g;try{b=new Uint8Array(T)}catch(F$){return void this.observer.emit(AR.ERROR,AR.ERROR,{type:xR.MUX_ERROR,details:kR.REMUX_ALLOC_ERROR,fatal:!1,error:F$,bytes:T,reason:`fail allocating audio mdat ${T}`})}if(!h){const e=new DataView(b.buffer);e.setUint32(0,T),b.set(KO.types.mdat,4)}}b.set(s,g);const n=s.byteLength;g+=n,u.push(new uN(!0,l,n,0)),E=r}const A=u.length;if(!A)return;const x=u[u.length-1];this.nextAudioPts=m=E+a*x.duration;const k=h?new Uint8Array(0):KO.moof(e.sequenceNumber++,w/a,wR({},e,{samples:u}));e.samples=[];const L=w/n,C=m/n,_="audio",R={data1:k,data2:b,startPTS:L,endPTS:C,startDTS:L,endDTS:C,type:_,hasAudio:!0,hasVideo:!1,nb:A};return this.isAudioContiguous=!0,R}remuxEmptyAudio(e,t,i,s){const r=e.inputTimeScale,n=e.samplerate?e.samplerate:r,o=r/n,a=this.nextAudioPts,l=this._initDTS,c=9e4*l.baseTime/l.timescale,d=(null!==a?a:s.startDTS*r)+c,h=s.endDTS*r+c,u=o*tN,p=Math.ceil((h-d)/u),f=YO.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(PR.warn("[mp4-remuxer]: remux empty Audio"),!f)return void PR.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");const g=[];for(let m=0;m<p;m++){const e=d+m*u;g.push({unit:f,pts:e,dts:e})}return e.samples=g,this.remuxAudio(e,t,i,!1)}}function lN(e,t){let i;if(null===t)return e;i=t<e?-8589934592:8589934592;while(Math.abs(e-t)>4294967296)e+=i;return e}function cN(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}function dN(e,t,i,s){const r=e.samples.length;if(!r)return;const n=e.inputTimeScale;for(let a=0;a<r;a++){const r=e.samples[a];r.pts=lN(r.pts-i.baseTime*n/i.timescale,t*n)/n,r.dts=lN(r.dts-s.baseTime*n/s.timescale,t*n)/n}const o=e.samples;return e.samples=[],{samples:o}}function hN(e,t,i){const s=e.samples.length;if(!s)return;const r=e.inputTimeScale;for(let o=0;o<s;o++){const s=e.samples[o];s.pts=lN(s.pts-i.baseTime*r/i.timescale,t*r)/r}e.samples.sort(((e,t)=>e.pts-t.pts));const n=e.samples;return e.samples=[],{samples:n}}class uN{constructor(e,t,i,s){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=i,this.cts=s,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class pN{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,i,s){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(VI(e,s)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:i}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const s=this.initData=UI(e);s.audio&&(t=gN(s.audio,GR.AUDIO)),s.video&&(i=gN(s.video,GR.VIDEO));const r={};s.audio&&s.video?r.audiovideo={container:"video/mp4",codec:t+","+i,initSegment:e,id:"main"}:s.audio?r.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:s.video?r.video={container:"video/mp4",codec:i,initSegment:e,id:"main"}:PR.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r}remux(e,t,i,s,r,n){var o,a;let{initPTS:l,lastEndTime:c}=this;const d={audio:void 0,video:void 0,text:s,id3:i,initSegment:void 0};ER(c)||(c=this.lastEndTime=r||0);const h=t.samples;if(null==h||!h.length)return d;const u={initPTS:void 0,timescale:1};let p=this.initData;if(null!=(o=p)&&o.length||(this.generateInitSegment(h),p=this.initData),null==(a=p)||!a.length)return PR.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(u.tracks=this.initTracks,this.emitInitSegment=!1);const f=KI(h,p),g=WI(p,h),m=null===g?r:g;(fN(l,m,r,f)||u.timescale!==l.timescale&&n)&&(u.initPTS=m-r,l&&1===l.timescale&&PR.warn("Adjusting initPTS by "+(u.initPTS-l.baseTime)),this.initPTS=l={baseTime:u.initPTS,timescale:1});const v=e?m-l.baseTime/l.timescale:c,y=v+f;XI(p,h,l.baseTime/l.timescale),f>0?this.lastEndTime=y:(PR.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const b=!!p.audio,w=!!p.video;let E="";b&&(E+="audio"),w&&(E+="video");const T={data1:h,startPTS:v,startDTS:v,endPTS:y,endDTS:y,type:E,hasAudio:b,hasVideo:w,nb:1,dropped:0};return d.audio="audio"===T.type?T:void 0,d.video="audio"!==T.type?T:void 0,d.initSegment=u,d.id3=dN(i,r,l,l),s.samples.length&&(d.text=hN(s,r,l)),d}}function fN(e,t,i,s){if(null===e)return!0;const r=Math.max(s,1),n=t-e.baseTime/e.timescale;return Math.abs(n-i)>r}function gN(e,t){const i=null==e?void 0:e.codec;if(i&&i.length>4)return i;if(t===GR.AUDIO){if("ec-3"===i||"ac-3"===i||"alac"===i)return i;if("fLaC"===i||"Opus"===i){const e=!1;return RD(i,e)}const e="mp4a.40.5";return PR.info(`Parsed audio codec "${i}" or audio object type not handled. Using "${e}"`),e}return PR.warn(`Unhandled video codec "${i}"`),"hvc1"===i||"hev1"===i?"hvc1.1.6.L120.90":"av01"===i?"av01.0.04M.08":"avc1.42e01e"}try{rN=self.performance.now.bind(self.performance)}catch(F$){PR.debug("Unable to use Performance API on this environment"),rN=null==QR?void 0:QR.Date.now}const mN=[{demux:_O,remux:pN},{demux:BO,remux:aN},{demux:LO,remux:aN},{demux:VO,remux:aN}];mN.splice(2,0,{demux:IO,remux:aN});class vN{constructor(e,t,i,s,r){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=i,this.vendor=s,this.id=r}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,i,s){const r=i.transmuxing;r.executeStart=rN();let n=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:a}=this;s&&(this.currentTransmuxState=s);const{contiguous:l,discontinuity:c,trackSwitch:d,accurateTimeOffset:h,timeOffset:u,initSegmentChange:p}=s||o,{audioCodec:f,videoCodec:g,defaultInitPts:m,duration:v,initSegmentData:y}=a,b=yN(n,t);if(b&&"AES-128"===b.method){const e=this.getDecrypter();if(!e.isSync())return this.decryptionPromise=e.webCryptoDecrypt(n,b.key.buffer,b.iv.buffer).then((e=>{const t=this.push(e,null,i);return this.decryptionPromise=null,t})),this.decryptionPromise;{let t=e.softwareDecrypt(n,b.key.buffer,b.iv.buffer);const s=i.part>-1;if(s&&(t=e.flush()),!t)return r.executeEnd=rN(),bN(i);n=new Uint8Array(t)}}const w=this.needsProbing(c,d);if(w){const e=this.configureTransmuxer(n);if(e)return PR.warn(`[transmuxer] ${e.message}`),this.observer.emit(AR.ERROR,AR.ERROR,{type:xR.MEDIA_ERROR,details:kR.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),r.executeEnd=rN(),bN(i)}(c||d||p||w)&&this.resetInitSegment(y,f,g,v,t),(c||p||w)&&this.resetInitialTimestamp(m),l||this.resetContiguity();const E=this.transmux(n,b,u,h,i),T=this.currentTransmuxState;return T.contiguous=!0,T.discontinuity=!1,T.trackSwitch=!1,r.executeEnd=rN(),E}flush(e){const t=e.transmuxing;t.executeStart=rN();const{decrypter:i,currentTransmuxState:s,decryptionPromise:r}=this;if(r)return r.then((()=>this.flush(e)));const n=[],{timeOffset:o}=s;if(i){const t=i.flush();t&&n.push(this.push(t,null,e))}const{demuxer:a,remuxer:l}=this;if(!a||!l)return t.executeEnd=rN(),[bN(e)];const c=a.flush(o);return wN(c)?c.then((t=>(this.flushRemux(n,t,e),n))):(this.flushRemux(n,c,e),n)}flushRemux(e,t,i){const{audioTrack:s,videoTrack:r,id3Track:n,textTrack:o}=t,{accurateTimeOffset:a,timeOffset:l}=this.currentTransmuxState;PR.log(`[transmuxer.ts]: Flushed fragment ${i.sn}${i.part>-1?" p: "+i.part:""} of level ${i.level}`);const c=this.remuxer.remux(s,r,n,o,l,a,!0,this.id);e.push({remuxResult:c,chunkMeta:i}),i.transmuxing.executeEnd=rN()}resetInitialTimestamp(e){const{demuxer:t,remuxer:i}=this;t&&i&&(t.resetTimeStamp(e),i.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,i,s,r){const{demuxer:n,remuxer:o}=this;n&&o&&(n.resetInitSegment(e,t,i,s),o.resetInitSegment(e,t,i,r))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,i,s,r){let n;return n=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,i,s,r):this.transmuxUnencrypted(e,i,s,r),n}transmuxUnencrypted(e,t,i,s){const{audioTrack:r,videoTrack:n,id3Track:o,textTrack:a}=this.demuxer.demux(e,t,!1,!this.config.progressive),l=this.remuxer.remux(r,n,o,a,t,i,!1,this.id);return{remuxResult:l,chunkMeta:s}}transmuxSampleAes(e,t,i,s,r){return this.demuxer.demuxSampleAes(e,t,i).then((e=>{const t=this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,i,s,!1,this.id);return{remuxResult:t,chunkMeta:r}}))}configureTransmuxer(e){const{config:t,observer:i,typeSupported:s,vendor:r}=this;let n;for(let h=0,u=mN.length;h<u;h++){var o;if(null!=(o=mN[h].demux)&&o.probe(e)){n=mN[h];break}}if(!n)return new Error("Failed to find demuxer by probing fragment data");const a=this.demuxer,l=this.remuxer,c=n.remux,d=n.demux;l&&l instanceof c||(this.remuxer=new c(i,t,s,r)),a&&a instanceof d||(this.demuxer=new d(i,t,s),this.probe=d.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new YM(this.config)),e}}function yN(e,t){let i=null;return e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(i=t),i}const bN=e=>({remuxResult:{},chunkMeta:e});function wN(e){return"then"in e&&e.then instanceof Function}class EN{constructor(e,t,i,s,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=s,this.defaultInitPts=r||null}}class TN{constructor(e,t,i,s,r,n){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=s,this.timeOffset=r,this.initSegmentChange=n}}var SN={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,i="~";function s(){}function r(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function n(e,t,s,n,o){if("function"!==typeof s)throw new TypeError("The listener must be a function");var a=new r(s,n||e,o),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new s:delete e._events[t]}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),a.prototype.eventNames=function(){var e,s,r=[];if(0===this._eventsCount)return r;for(s in e=this._events)t.call(e,s)&&r.push(i?s.slice(1):s);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=i?i+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var r=0,n=s.length,o=new Array(n);r<n;r++)o[r]=s[r].fn;return o},a.prototype.listenerCount=function(e){var t=i?i+e:e,s=this._events[t];return s?s.fn?1:s.length:0},a.prototype.emit=function(e,t,s,r,n,o){var a=i?i+e:e;if(!this._events[a])return!1;var l,c,d=this._events[a],h=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,s),!0;case 4:return d.fn.call(d.context,t,s,r),!0;case 5:return d.fn.call(d.context,t,s,r,n),!0;case 6:return d.fn.call(d.context,t,s,r,n,o),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var u,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),h){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,s);break;case 4:d[c].fn.call(d[c].context,t,s,r);break;default:if(!l)for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];d[c].fn.apply(d[c].context,l)}}return!0},a.prototype.on=function(e,t,i){return n(this,e,t,i,!1)},a.prototype.once=function(e,t,i){return n(this,e,t,i,!0)},a.prototype.removeListener=function(e,t,s,r){var n=i?i+e:e;if(!this._events[n])return this;if(!t)return o(this,n),this;var a=this._events[n];if(a.fn)a.fn!==t||r&&!a.once||s&&a.context!==s||o(this,n);else{for(var l=0,c=[],d=a.length;l<d;l++)(a[l].fn!==t||r&&!a[l].once||s&&a[l].context!==s)&&c.push(a[l]);c.length?this._events[n]=1===c.length?c[0]:c:o(this,n)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&o(this,t)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,e.exports=a})(SN);var AN=SN.exports,xN=uR(AN);class kN{constructor(e,t,i,s){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const r=e.config;this.hls=e,this.id=t,this.useWorker=!!r.enableWorker,this.onTransmuxComplete=i,this.onFlush=s;const n=(e,t)=>{t=t||{},t.frag=this.frag,t.id=this.id,e===AR.ERROR&&(this.error=t.error),this.hls.trigger(e,t)};this.observer=new xN,this.observer.on(AR.FRAG_DECRYPTED,n),this.observer.on(AR.ERROR,n);const o=yD(r.preferManagedMediaSource)||{isTypeSupported:()=>!1},a={mpeg:o.isTypeSupported("audio/mpeg"),mp3:o.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:o.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&"undefined"!==typeof Worker){const e=r.workerPath||QM();if(e){try{r.workerPath?(PR.log(`loading Web Worker ${r.workerPath} for "${t}"`),this.workerContext=eO(r.workerPath)):(PR.log(`injecting Web Worker for "${t}"`),this.workerContext=JM()),this.onwmsg=e=>this.onWorkerMessage(e);const{worker:e}=this.workerContext;e.addEventListener("message",this.onwmsg),e.onerror=e=>{const i=new Error(`${e.message}  (${e.filename}:${e.lineno})`);r.enableWorker=!1,PR.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(AR.ERROR,{type:xR.OTHER_ERROR,details:kR.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:i})},e.postMessage({cmd:"init",typeSupported:a,vendor:"",id:t,config:JSON.stringify(r)})}catch(F$){PR.warn(`Error setting up "${t}" Web Worker, fallback to inline`,F$),this.resetWorker(),this.error=null,this.transmuxer=new vN(this.observer,a,r,"",t)}return}}this.transmuxer=new vN(this.observer,a,r,"",t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,i,s,r,n,o,a,l,c){var d,h;l.transmuxing.start=self.performance.now();const{transmuxer:u}=this,p=n?n.start:r.start,f=r.decryptdata,g=this.frag,m=!(g&&r.cc===g.cc),v=!(g&&l.level===g.level),y=g?l.sn-g.sn:-1,b=this.part?l.part-this.part.index:-1,w=0===y&&l.id>1&&l.id===(null==g?void 0:g.stats.chunkCount),E=!v&&(1===y||0===y&&(1===b||w&&b<=0)),T=self.performance.now();(v||y||0===r.stats.parsing.start)&&(r.stats.parsing.start=T),!n||!b&&E||(n.stats.parsing.start=T);const S=!(g&&(null==(d=r.initSegment)?void 0:d.url)===(null==(h=g.initSegment)?void 0:h.url)),A=new TN(m,E,a,v,p,S);if(!E||m||S){PR.log(`[transmuxer-interface, ${r.type}]: Starting new transmux session for sn: ${l.sn} p: ${l.part} level: ${l.level} id: ${l.id}\n        discontinuity: ${m}\n        trackSwitch: ${v}\n        contiguous: ${E}\n        accurateTimeOffset: ${a}\n        timeOffset: ${p}\n        initSegmentChange: ${S}`);const e=new EN(i,s,t,o,c);this.configureTransmuxer(e)}if(this.frag=r,this.part=n,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:f,chunkMeta:l,state:A},e instanceof ArrayBuffer?[e]:[]);else if(u){const t=u.push(e,f,l,A);wN(t)?(u.async=!0,t.then((e=>{this.handleTransmuxComplete(e)})).catch((e=>{this.transmuxerError(e,l,"transmuxer-interface push error")}))):(u.async=!1,this.handleTransmuxComplete(t))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let i=t.flush(e);const s=wN(i);s||t.async?(wN(i)||(i=Promise.resolve(i)),i.then((t=>{this.handleFlushResult(t,e)})).catch((t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")}))):this.handleFlushResult(i,e)}}transmuxerError(e,t,i){this.hls&&(this.error=e,this.hls.trigger(AR.ERROR,{type:xR.MEDIA_ERROR,details:kR.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:i}))}handleFlushResult(e,t){e.forEach((e=>{this.handleTransmuxComplete(e)})),this.onFlush(t)}onWorkerMessage(e){const t=e.data;if(null==t||!t.event)return void PR.warn("worker message received with no "+(t?"event name":"data"));const i=this.hls;if(this.hls)switch(t.event){case"init":{var s;const e=null==(s=this.workerContext)?void 0:s.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":PR[t.data.logType]&&PR[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,i.trigger(t.event,t.data);break}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}function LN(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!CN(e[i].attrs,t[i].attrs))return!1;return!0}function CN(e,t,i){const s=e["STABLE-RENDITION-ID"];return s&&!i?s===t["STABLE-RENDITION-ID"]:!(i||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some((i=>e[i]!==t[i]))}function _N(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}const RN=100;class IN extends qM{constructor(e,t,i){super(e,t,i,"[audio-stream-controller]",KD.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(AR.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(AR.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.on(AR.LEVEL_LOADED,this.onLevelLoaded,this),e.on(AR.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(AR.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(AR.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(AR.ERROR,this.onError,this),e.on(AR.BUFFER_RESET,this.onBufferReset,this),e.on(AR.BUFFER_CREATED,this.onBufferCreated,this),e.on(AR.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(AR.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(AR.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(AR.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(AR.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(AR.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.off(AR.LEVEL_LOADED,this.onLevelLoaded,this),e.off(AR.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(AR.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(AR.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(AR.ERROR,this.onError,this),e.off(AR.BUFFER_RESET,this.onBufferReset,this),e.off(AR.BUFFER_CREATED,this.onBufferCreated,this),e.off(AR.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(AR.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(AR.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(AR.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:t,id:i,initPTS:s,timescale:r}){if("main"===i){const e=t.cc;this.initPTS[t.cc]={baseTime:s,timescale:r},this.log(`InitPTS for cc: ${e} found from main: ${s}`),this.videoTrackCC=e,this.state===KM.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels)return this.startPosition=e,void(this.state=KM.STOPPED);const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(RN),t>0&&-1===e?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t,this.state=KM.IDLE):(this.loadedmetadata=!1,this.state=KM.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case KM.IDLE:this.doTickIdle();break;case KM.WAITING_TRACK:{var e;const{levels:t,trackId:i}=this,s=null==t||null==(e=t[i])?void 0:e.details;if(s){if(this.waitForCdnTuneIn(s))break;this.state=KM.WAITING_INIT_PTS}break}case KM.FRAG_LOADING_WAITING_RETRY:{var t;const e=performance.now(),i=this.retryDate;if(!i||e>=i||null!=(t=this.media)&&t.seeking){const{levels:e,trackId:t}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((null==e?void 0:e[t])||null),this.state=KM.IDLE}break}case KM.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:t,part:i,cache:s,complete:r}=e;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=KM.FRAG_LOADING;const e=s.flush(),n={frag:t,part:i,payload:e,networkDetails:null};this._handleFragmentLoadProgress(n),r&&super._handleFragmentLoadComplete(n)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${t.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const e=this.getLoadPosition(),i=xM.bufferInfo(this.mediaBuffer,e,this.config.maxBufferHole),s=YP(i.end,this.config.maxFragLookUpTolerance,t);s<0&&(this.log(`Waiting fragment cc (${t.cc}) @ ${t.start} cancelled because another fragment at ${i.end} is needed`),this.clearWaitingFragment())}}else this.state=KM.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=KM.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:i,trackId:s}=this,r=e.config;if(!i&&(this.startFragRequested||!r.startFragPrefetch)||null==t||!t[s])return;const n=t[s],o=n.details;if(!o||o.live&&this.levelLastLoaded!==n||this.waitForCdnTuneIn(o))return void(this.state=KM.WAITING_TRACK);const a=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&a&&(this.bufferFlushed=!1,this.afterBufferFlushed(a,GR.AUDIO,KD.AUDIO));const l=this.getFwdBufferInfo(a,KD.AUDIO);if(null===l)return;const{bufferedTrack:c,switchingTrack:d}=this;if(!d&&this._streamEnded(l,o))return e.trigger(AR.BUFFER_EOS,{type:"audio"}),void(this.state=KM.ENDED);const h=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,KD.MAIN),u=l.len,p=this.getMaxBufferLength(null==h?void 0:h.len),f=o.fragments,g=f[0].start;let m=this.flushing?this.getLoadPosition():l.end;if(d&&i){const e=this.getLoadPosition();c&&!CN(d.attrs,c.attrs)&&(m=e),o.PTSKnown&&e<g&&(l.end>g||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=g+.05)}if(u>=p&&!d&&m<f[f.length-1].start)return;let v=this.getNextFragment(m,o),y=!1;if(v&&this.isLoopLoading(v,m)&&(y=!!v.gap,v=this.getNextFragmentLoopLoading(v,o,l,KD.MAIN,p)),!v)return void(this.bufferFlushed=!0);const b=h&&v.start>h.end+o.targetduration;if(b||(null==h||!h.len)&&l.len){const e=this.getAppendedFrag(v.start,KD.MAIN);if(null===e)return;if(y||(y=!!e.gap||!!b&&0===h.len),b&&!y||y&&l.nextStart&&l.nextStart<e.end)return}this.loadFragment(v,n,m)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map((e=>new EP(e)))}onAudioTrackSwitching(e,t){const i=!!t.url;this.trackId=t.id;const{fragCurrent:s}=this;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),i?this.setInterval(RN):this.resetTransmuxer(),i?(this.switchingTrack=t,this.state=KM.IDLE,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=KM.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(AR.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var i;if(null==this.mainDetails)return void(this.cachedTrackLoadedData=t);const{levels:s}=this,{details:r,id:n}=t;if(!s)return void this.warn(`Audio tracks were reset while loading level ${n}`);this.log(`Audio track ${n} loaded [${r.startSN},${r.endSN}]${r.lastPartSn?`[part-${r.lastPartSn}-${r.lastPartIndex}]`:""},duration:${r.totalduration}`);const o=s[n];let a=0;if(r.live||null!=(i=o.details)&&i.live){this.checkLiveUpdate(r);const e=this.mainDetails;if(r.deltaUpdateFailed||!e)return;var l;if(!o.details&&r.hasProgramDateTime&&e.hasProgramDateTime)OM(r,e),a=r.fragments[0].start;else a=this.alignPlaylists(r,o.details,null==(l=this.levelLastLoaded)?void 0:l.details)}o.details=r,this.levelLastLoaded=o,this.startFragRequested||!this.mainDetails&&r.live||this.setStartPosition(this.mainDetails||r,a),this.state!==KM.WAITING_TRACK||this.waitForCdnTuneIn(r)||(this.state=KM.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:i,part:s,payload:r}=e,{config:n,trackId:o,levels:a}=this;if(!a)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);const l=a[o];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const c=l.details;if(!c)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(i.start);const d=n.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let h=this.transmuxer;h||(h=this.transmuxer=new kN(this.hls,KD.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const u=this.initPTS[i.cc],p=null==(t=i.initSegment)?void 0:t.data;if(void 0!==u){const e=!1,t=s?s.index:-1,n=-1!==t,o=new kM(i.level,i.sn,i.stats.chunkCount,r.byteLength,t,n);h.push(r,p,d,"",i,s,c.totalduration,e,o,u)}else{this.log(`Unknown video PTS for cc ${i.cc}, waiting for video PTS before demuxing audio frag ${i.sn} of [${c.startSN} ,${c.endSN}],track ${o}`);const{cache:e}=this.waitingData=this.waitingData||{frag:i,part:s,cache:new XM,complete:!1};e.push(new Uint8Array(r)),this.waitingVideoCC=this.videoTrackCC,this.state=KM.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const i=t.tracks.audio;i&&(this.mediaBuffer=i.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:i,part:s}=t;if(i.type===KD.AUDIO)if(this.fragContextChanged(i))this.warn(`Fragment ${i.sn}${s?" p: "+s.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if("initSegment"!==i.sn){this.fragPrevious=i;const e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger(AR.AUDIO_TRACK_SWITCHED,mR({},e)))}this.fragBufferedComplete(i,s)}else if(!this.loadedmetadata&&i.type===KD.MAIN){const e=this.videoBuffer||this.media;if(e){const t=xM.getBuffered(e);t.length&&(this.loadedmetadata=!0)}}}onError(e,t){var i;if(t.fatal)this.state=KM.ERROR;else switch(t.details){case kR.FRAG_GAP:case kR.FRAG_PARSING_ERROR:case kR.FRAG_DECRYPT_ERROR:case kR.FRAG_LOAD_ERROR:case kR.FRAG_LOAD_TIMEOUT:case kR.KEY_LOAD_ERROR:case kR.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(KD.AUDIO,t);break;case kR.AUDIO_TRACK_LOAD_ERROR:case kR.AUDIO_TRACK_LOAD_TIMEOUT:case kR.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==KM.WAITING_TRACK||(null==(i=t.context)?void 0:i.type)!==WD.AUDIO_TRACK||(this.state=KM.IDLE);break;case kR.BUFFER_APPEND_ERROR:case kR.BUFFER_FULL_ERROR:if(!t.parent||"audio"!==t.parent)return;if(t.details===kR.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case kR.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==GR.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==GR.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===KM.ENDED&&(this.state=KM.IDLE);const e=this.mediaBuffer||this.media;e&&(this.afterBufferFlushed(e,t,KD.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const i="audio",{hls:s}=this,{remuxResult:r,chunkMeta:n}=e,o=this.getCurrentContext(n);if(!o)return void this.resetWhenMissingContext(n);const{frag:a,part:l,level:c}=o,{details:d}=c,{audio:h,text:u,id3:p,initSegment:f}=r;if(!this.fragContextChanged(a)&&d){if(this.state=KM.PARSING,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),null!=f&&f.tracks){const e=a.initSegment||a;this._bufferInitSegment(c,f.tracks,e,n),s.trigger(AR.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:i,tracks:f.tracks})}if(h){const{startPTS:e,endPTS:t,startDTS:i,endDTS:s}=h;l&&(l.elementaryStreams[GR.AUDIO]={startPTS:e,endPTS:t,startDTS:i,endDTS:s}),a.setElementaryStreamInfo(GR.AUDIO,e,t,i,s),this.bufferFragmentData(h,a,l,n)}if(null!=p&&null!=(t=p.samples)&&t.length){const e=wR({id:i,frag:a,details:d},p);s.trigger(AR.FRAG_PARSING_METADATA,e)}if(u){const e=wR({id:i,frag:a,details:d},u);s.trigger(AR.FRAG_PARSING_USERDATA,e)}}else this.fragmentTracker.removeFragment(a)}_bufferInitSegment(e,t,i,s){if(this.state!==KM.PARSING)return;t.video&&delete t.video;const r=t.audio;if(!r)return;r.id="audio";const n=e.audioCodec;this.log(`Init audio buffer, container:${r.container}, codecs[level/parsed]=[${n}/${r.codec}]`),n&&1===n.split(",").length&&(r.levelCodec=n),this.hls.trigger(AR.BUFFER_CODECS,t);const o=r.initSegment;if(null!=o&&o.byteLength){const e={type:"audio",frag:i,part:null,chunkMeta:s,parent:i.type,data:o};this.hls.trigger(AR.BUFFER_APPENDING,e)}this.tickImmediate()}loadFragment(e,t,i){const s=this.fragmentTracker.getState(e);var r;if(this.fragCurrent=e,this.switchingTrack||s===wM.NOT_LOADED||s===wM.PARTIAL)if("initSegment"===e.sn)this._loadInitSegment(e,t);else if(null!=(r=t.details)&&r.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=KM.WAITING_INIT_PTS;const i=this.mainDetails;i&&i.fragments[0].start!==t.details.fragments[0].start&&OM(t.details,i)}else this.startFragRequested=!0,super.loadFragment(e,t,i);else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){const{media:t,bufferedTrack:i}=this,s=null==i?void 0:i.attrs,r=e.attrs;t&&s&&(s.CHANNELS!==r.CHANNELS||i.name!==e.name||i.lang!==e.lang)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(AR.AUDIO_TRACK_SWITCHED,mR({},e))}}class DN extends QP{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.on(AR.MANIFEST_PARSED,this.onManifestParsed,this),e.on(AR.LEVEL_LOADING,this.onLevelLoading,this),e.on(AR.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(AR.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(AR.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.off(AR.MANIFEST_PARSED,this.onManifestParsed,this),e.off(AR.LEVEL_LOADING,this.onLevelLoading,this),e.off(AR.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(AR.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(AR.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:i,groupId:s,details:r}=t,n=this.tracksInGroup[i];if(!n||n.groupId!==s)return void this.warn(`Audio track with id:${i} and group:${s} not found in active group ${null==n?void 0:n.groupId}`);const o=n.details;n.details=t.details,this.log(`Audio track ${i} "${n.name}" lang:${n.lang} group:${s} loaded [${r.startSN}-${r.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.audioGroups||null,s=this.groupIds;let r=this.currentTrack;if(!i||(null==s?void 0:s.length)!==(null==i?void 0:i.length)||null!=i&&i.some((e=>-1===(null==s?void 0:s.indexOf(e))))){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter((e=>!i||-1!==i.indexOf(e.groupId)));if(e.length)this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),e.forEach(((e,t)=>{e.id=t}));else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.audioPreference;if(!r&&t){const i=uM(t,e,gM);if(i>-1)r=e[i];else{const e=uM(t,this.tracks);r=this.tracks[e]}}let s=this.findTrackId(r);-1===s&&r&&(s=this.findTrackId(null));const o={audioTracks:e};this.log(`Updating audio tracks, ${e.length} track(s) found in group(s): ${null==i?void 0:i.join(",")}`),this.hls.trigger(AR.AUDIO_TRACKS_UPDATED,o);const a=this.trackId;if(-1!==s&&-1===a)this.setAudioTrack(s);else if(e.length&&-1===a){var n;const t=new Error(`No audio track selected for current audio group-ID(s): ${null==(n=this.groupIds)?void 0:n.join(",")} track count: ${e.length}`);this.warn(t.message),this.hls.trigger(AR.ERROR,{type:xR.MEDIA_ERROR,details:kR.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}else this.shouldReloadPlaylist(r)&&this.setAudioTrack(this.trackId)}onError(e,t){!t.fatal&&t.context&&(t.context.type!==WD.AUDIO_TRACK||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||(this.requestScheduled=-1,this.checkRetry(t)))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const i=this.allAudioTracks;if(this.selectDefaultTrack=!1,i.length){const s=this.currentTrack;if(s&&pM(e,s,gM))return s;const r=uM(e,this.tracksInGroup,gM);if(r>-1){const e=this.tracksInGroup[r];return this.setAudioTrack(r),e}if(s){let s=t.loadLevel;-1===s&&(s=t.firstAutoLevel);const r=mM(e,t.levels,i,s,gM);if(-1===r)return null;t.nextLoadLevel=r}if(e.channels||e.audioCodec){const t=uM(e,i);if(t>-1)return i[t]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn(`Invalid audio track id: ${e}`);this.clearTimer(),this.selectDefaultTrack=!1;const i=this.currentTrack,s=t[e],r=s.details&&!s.details.live;if(e===this.trackId&&s===i&&r)return;if(this.log(`Switching to audio-track ${e} "${s.name}" lang:${s.lang} group:${s.groupId} channels:${s.channels}`),this.trackId=e,this.currentTrack=s,this.hls.trigger(AR.AUDIO_TRACK_SWITCHING,mR({},s)),r)return;const n=this.switchParams(s.url,null==i?void 0:i.details,s.details);this.loadPlaylist(n)}findTrackId(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const s=t[i];if((!this.selectDefaultTrack||s.default)&&(!e||pM(e,s,gM)))return i}if(e){const{name:i,lang:s,assocLang:r,characteristics:n,audioCodec:o,channels:a}=e;for(let e=0;e<t.length;e++){const l=t[e];if(pM({name:i,lang:s,assocLang:r,characteristics:n,audioCodec:o,channels:a},l,gM))return e}for(let l=0;l<t.length;l++){const i=t[l];if(CN(e.attrs,i.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return l}for(let l=0;l<t.length;l++){const i=t[l];if(CN(e.attrs,i.attrs,["LANGUAGE"]))return l}}return-1}loadPlaylist(e){const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){super.loadPlaylist();const s=t.id,r=t.groupId;let n=t.url;if(e)try{n=e.addDirectives(n)}catch(i){this.warn(`Could not construct new URL with HLS Delivery Directives: ${i}`)}this.log(`loading audio-track playlist ${s} "${t.name}" lang:${t.lang} group:${r}`),this.clearTimer(),this.hls.trigger(AR.AUDIO_TRACK_LOADING,{url:n,id:s,groupId:r,deliveryDirectives:e||null})}}}const PN=500;class MN extends qM{constructor(e,t,i){super(e,t,i,"[subtitle-stream-controller]",KD.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(AR.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(AR.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.on(AR.LEVEL_LOADED,this.onLevelLoaded,this),e.on(AR.ERROR,this.onError,this),e.on(AR.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(AR.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(AR.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(AR.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(AR.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(AR.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(AR.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(AR.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.off(AR.LEVEL_LOADED,this.onLevelLoaded,this),e.off(AR.ERROR,this.onError,this),e.off(AR.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(AR.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(AR.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(AR.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(AR.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(AR.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=KM.IDLE,this.setInterval(PN),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:i,success:s}=t;if(this.fragPrevious=i,this.state=KM.IDLE,!s)return;const r=this.tracksBuffered[this.currentTrackId];if(!r)return;let n;const o=i.start;for(let l=0;l<r.length;l++)if(o>=r[l].start&&o<=r[l].end){n=r[l];break}const a=i.start+i.duration;n?n.end=a:(n={start:o,end:a},r.push(n)),this.fragmentTracker.fragBuffered(i),this.fragBufferedComplete(i,null)}onBufferFlushing(e,t){const{startOffset:i,endOffset:s}=t;if(0===i&&s!==Number.POSITIVE_INFINITY){const e=s-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach((t=>{for(let i=0;i<t.length;)if(t[i].end<=e)t.shift();else{if(!(t[i].start<e))break;t[i].start=e,i++}})),this.fragmentTracker.removeFragmentsInRange(i,e,KD.SUBTITLE)}}onFragBuffered(e,t){var i;this.loadedmetadata||t.frag.type!==KD.MAIN||null!=(i=this.media)&&i.buffered.length&&(this.loadedmetadata=!0)}onError(e,t){const i=t.frag;(null==i?void 0:i.type)===KD.SUBTITLE&&(t.details===kR.FRAG_GAP&&this.fragmentTracker.fragBuffered(i,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==KM.STOPPED&&(this.state=KM.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){this.levels&&LN(this.levels,t)?this.levels=t.map((e=>new EP(e))):(this.tracksBuffered=[],this.levels=t.map((e=>{const t=new EP(e);return this.tracksBuffered[t.id]=[],t})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,KD.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){var i;if(this.currentTrackId=t.id,null==(i=this.levels)||!i.length||-1===this.currentTrackId)return void this.clearInterval();const s=this.levels[this.currentTrackId];null!=s&&s.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,s&&this.setInterval(PN)}onSubtitleTrackLoaded(e,t){var i;const{currentTrackId:s,levels:r}=this,{details:n,id:o}=t;if(!r)return void this.warn(`Subtitle tracks were reset while loading level ${o}`);const a=r[o];if(o>=r.length||!a)return;this.log(`Subtitle track ${o} loaded [${n.startSN},${n.endSN}]${n.lastPartSn?`[part-${n.lastPartSn}-${n.lastPartIndex}]`:""},duration:${n.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(n.live||null!=(i=a.details)&&i.live){const e=this.mainDetails;if(n.deltaUpdateFailed||!e)return;const t=e.fragments[0];var c;if(a.details)l=this.alignPlaylists(n,a.details,null==(c=this.levelLastLoaded)?void 0:c.details),0===l&&t&&(l=t.start,RP(n,l));else n.hasProgramDateTime&&e.hasProgramDateTime?(OM(n,e),l=n.fragments[0].start):t&&(l=t.start,RP(n,l))}if(a.details=n,this.levelLastLoaded=a,o===s&&(this.startFragRequested||!this.mainDetails&&n.live||this.setStartPosition(this.mainDetails||n,l),this.tick(),n.live&&!this.fragCurrent&&this.media&&this.state===KM.IDLE)){const e=zP(null,n.fragments,this.media.currentTime,0);e||(this.warn("Subtitle playlist not aligned with playback"),a.details=void 0)}}_handleFragmentLoadComplete(e){const{frag:t,payload:i}=e,s=t.decryptdata,r=this.hls;if(!this.fragContextChanged(t)&&i&&i.byteLength>0&&null!=s&&s.key&&s.iv&&"AES-128"===s.method){const e=performance.now();this.decrypter.decrypt(new Uint8Array(i),s.key.buffer,s.iv.buffer).catch((e=>{throw r.trigger(AR.ERROR,{type:xR.MEDIA_ERROR,details:kR.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e})).then((i=>{const s=performance.now();r.trigger(AR.FRAG_DECRYPTED,{frag:t,payload:i,stats:{tstart:e,tdecrypt:s}})})).catch((e=>{this.warn(`${e.name}: ${e.message}`),this.state=KM.IDLE}))}}doTick(){if(this.media){if(this.state===KM.IDLE){const{currentTrackId:e,levels:t}=this,i=null==t?void 0:t[e];if(!i||!t.length||!i.details)return;const{config:s}=this,r=this.getLoadPosition(),n=xM.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],r,s.maxBufferHole),{end:o,len:a}=n,l=this.getFwdBufferInfo(this.media,KD.MAIN),c=i.details,d=this.getMaxBufferLength(null==l?void 0:l.len)+c.levelTargetDuration;if(a>d)return;const h=c.fragments,u=h.length,p=c.edge;let f=null;const g=this.fragPrevious;if(o<p){const e=s.maxFragLookUpTolerance,t=o>p-e?0:e;f=zP(g,h,Math.max(h[0].start,o),t),!f&&g&&g.start<h[0].start&&(f=h[0])}else f=h[u-1];if(!f)return;if(f=this.mapToInitFragWhenRequired(f),"initSegment"!==f.sn){const e=f.sn-c.startSN,t=h[e-1];t&&t.cc===f.cc&&this.fragmentTracker.getState(t)===wM.NOT_LOADED&&(f=t)}this.fragmentTracker.getState(f)===wM.NOT_LOADED&&this.loadFragment(f,i,o)}}else this.state=KM.IDLE}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,i){this.fragCurrent=e,"initSegment"===e.sn?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,i))}get mediaBufferTimeRanges(){return new ON(this.tracksBuffered[this.currentTrackId]||[])}}class ON{constructor(e){this.buffered=void 0;const t=(t,i,s)=>{if(i>>>=0,i>s-1)throw new DOMException(`Failed to execute '${t}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${s})`);return e[i][t]};this.buffered={get length(){return e.length},end(i){return t("end",i,e.length)},start(i){return t("start",i,e.length)}}}}class NN extends QP{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=null;const t=rP(this.media.textTracks);for(let s=0;s<t.length;s++)if("hidden"===t[s].mode)e=t[s];else if("showing"===t[s].mode){e=t[s];break}const i=this.findTrackForTextTrack(e);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(AR.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(AR.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.on(AR.MANIFEST_PARSED,this.onManifestParsed,this),e.on(AR.LEVEL_LOADING,this.onLevelLoading,this),e.on(AR.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(AR.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(AR.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(AR.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(AR.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.off(AR.MANIFEST_PARSED,this.onManifestParsed,this),e.off(AR.LEVEL_LOADING,this.onLevelLoading,this),e.off(AR.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(AR.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(AR.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);const e=rP(this.media.textTracks);e.forEach((e=>{eP(e)})),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:i,groupId:s,details:r}=t,n=this.tracksInGroup[i];if(!n||n.groupId!==s)return void this.warn(`Subtitle track with id:${i} and group:${s} not found in active group ${null==n?void 0:n.groupId}`);const o=n.details;n.details=t.details,this.log(`Subtitle track ${i} "${n.name}" lang:${n.lang} group:${s} loaded [${r.startSN}-${r.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.subtitleGroups||null,s=this.groupIds;let r=this.currentTrack;if(!i||(null==s?void 0:s.length)!==(null==i?void 0:i.length)||null!=i&&i.some((e=>-1===(null==s?void 0:s.indexOf(e))))){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter((e=>!i||-1!==i.indexOf(e.groupId)));if(e.length)this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),e.forEach(((e,t)=>{e.id=t}));else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.subtitlePreference;if(!r&&t){this.selectDefaultTrack=!1;const i=uM(t,e);if(i>-1)r=e[i];else{const e=uM(t,this.tracks);r=this.tracks[e]}}let s=this.findTrackId(r);-1===s&&r&&(s=this.findTrackId(null));const n={subtitleTracks:e};this.log(`Updating subtitle tracks, ${e.length} track(s) found in "${null==i?void 0:i.join(",")}" group-id`),this.hls.trigger(AR.SUBTITLE_TRACKS_UPDATED,n),-1!==s&&-1===this.trackId&&this.setSubtitleTrack(s)}else this.shouldReloadPlaylist(r)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const t=this.tracksInGroup,i=this.selectDefaultTrack;for(let s=0;s<t.length;s++){const r=t[s];if((!i||r.default)&&(i||e)&&(!e||pM(r,e)))return s}if(e){for(let i=0;i<t.length;i++){const s=t[i];if(CN(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<t.length;i++){const s=t[i];if(CN(e.attrs,s.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const s=t[i];if(_N(s,e))return i}}return-1}onError(e,t){!t.fatal&&t.context&&(t.context.type!==WD.SUBTITLE_TRACK||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const i=this.currentTrack;if(i&&pM(e,i))return i;const s=uM(e,this.tracksInGroup);if(s>-1){const e=this.tracksInGroup[s];return this.setSubtitleTrack(s),e}if(i)return null;{const i=uM(e,t);if(i>-1)return t[i]}}}return null}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){const s=t.id,r=t.groupId;let n=t.url;if(e)try{n=e.addDirectives(n)}catch(i){this.warn(`Could not construct new URL with HLS Delivery Directives: ${i}`)}this.log(`Loading subtitle playlist for id ${s}`),this.hls.trigger(AR.SUBTITLE_TRACK_LOADING,{url:n,id:s,groupId:r,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=rP(e.textTracks),i=this.currentTrack;let s;if(i&&(s=t.filter((e=>_N(i,e)))[0],s||this.warn(`Unable to find subtitle TextTrack with name "${i.name}" and language "${i.lang}"`)),[].slice.call(t).forEach((e=>{"disabled"!==e.mode&&e!==s&&(e.mode="disabled")})),s){const e=this.subtitleDisplay?"showing":"hidden";s.mode!==e&&(s.mode=e)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(e<-1||e>=t.length||!ER(e))return void this.warn(`Invalid subtitle track id: ${e}`);this.clearTimer(),this.selectDefaultTrack=!1;const i=this.currentTrack,s=t[e]||null;if(this.trackId=e,this.currentTrack=s,this.toggleTrackModes(),!s)return void this.hls.trigger(AR.SUBTITLE_TRACK_SWITCH,{id:e});const r=!!s.details&&!s.details.live;if(e===this.trackId&&s===i&&r)return;this.log(`Switching to subtitle-track ${e}`+(s?` "${s.name}" lang:${s.lang} group:${s.groupId}`:""));const{id:n,groupId:o="",name:a,type:l,url:c}=s;this.hls.trigger(AR.SUBTITLE_TRACK_SWITCH,{id:n,groupId:o,name:a,type:l,url:c});const d=this.switchParams(s.url,null==i?void 0:i.details,s.details);this.loadPlaylist(d)}}class FN{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t,i){const s=this.queues[t];s.push(e),1!==s.length||i||this.executeNext(t)}insertAbort(e,t){const i=this.queues[t];i.unshift(e),this.executeNext(t)}appendBlocker(e){let t;const i=new Promise((e=>{t=e})),s={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(s,e),i}executeNext(e){const t=this.queues[e];if(t.length){const s=t[0];try{s.execute()}catch(i){PR.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${i}`),s.onError(i);const t=this.buffers[e];null!=t&&t.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const BN=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class $N{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=e=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=e=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:e,mediaSource:t}=this;this.log("Media source opened"),e&&(e.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(AR.MEDIA_ATTACHED,{media:e,mediaSource:t})),t&&t.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:e,_objectUrl:t}=this;e!==t&&PR.error(`Media element src was set while attaching MediaSource (${t} > ${e})`)},this.hls=e;const t="[buffer-controller]";this.appendSource=bD(yD(e.config.preferManagedMediaSource)),this.log=PR.log.bind(PR,t),this.warn=PR.warn.bind(PR,t),this.error=PR.error.bind(PR,t),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(AR.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(AR.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.on(AR.MANIFEST_PARSED,this.onManifestParsed,this),e.on(AR.BUFFER_RESET,this.onBufferReset,this),e.on(AR.BUFFER_APPENDING,this.onBufferAppending,this),e.on(AR.BUFFER_CODECS,this.onBufferCodecs,this),e.on(AR.BUFFER_EOS,this.onBufferEos,this),e.on(AR.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(AR.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(AR.FRAG_PARSED,this.onFragParsed,this),e.on(AR.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(AR.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(AR.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.off(AR.MANIFEST_PARSED,this.onManifestParsed,this),e.off(AR.BUFFER_RESET,this.onBufferReset,this),e.off(AR.BUFFER_APPENDING,this.onBufferAppending,this),e.off(AR.BUFFER_CODECS,this.onBufferCodecs,this),e.off(AR.BUFFER_EOS,this.onBufferEos,this),e.off(AR.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(AR.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(AR.FRAG_PARSED,this.onFragParsed,this),e.off(AR.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new FN(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let i=2;(t.audio&&!t.video||!t.altAudio)&&(i=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=i,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,t){const i=this.media=t.media,s=yD(this.appendSource);if(i&&s){var r;const e=this.mediaSource=new s;this.log(`created media source: ${null==(r=e.constructor)?void 0:r.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming));const t=this._objectUrl=self.URL.createObjectURL(e);if(this.appendSource)try{i.removeAttribute("src");const s=self.ManagedMediaSource;i.disableRemotePlayback=i.disableRemotePlayback||s&&e instanceof s,UN(i),GN(i,t),i.load()}catch(n){i.src=t}else i.src=t;i.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:i}=this;if(t){if(this.log("media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(F$){this.warn(`onMediaDetaching: ${F$.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),i&&self.URL.revokeObjectURL(i),this.mediaSrc===i?(e.removeAttribute("src"),this.appendSource&&UN(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(AR.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach((e=>{this.resetBuffer(e)})),this._initSourceBuffer()}resetBuffer(e){const t=this.sourceBuffer[e];try{var i;if(t)this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,null!=(i=this.mediaSource)&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t)}catch(F$){this.warn(`onBufferReset ${e}`,F$)}}onBufferCodecs(e,t){const i=this.getSourceBufferTypes().length,s=Object.keys(t);if(s.forEach((e=>{if(i){const i=this.tracks[e];if(i&&"function"===typeof i.buffer.changeType){var s;const{id:r,codec:n,levelCodec:o,container:a,metadata:l}=t[e],c=ID(i.codec,i.levelCodec),d=null==c?void 0:c.replace(BN,"$1");let h=ID(n,o);const u=null==(s=h)?void 0:s.replace(BN,"$1");if(h&&d!==u){"audio"===e.slice(0,5)&&(h=RD(h,this.appendSource));const t=`${a};codecs=${h}`;this.appendChangeType(e,t),this.log(`switching codec ${c} to ${h}`),this.tracks[e]={buffer:i.buffer,codec:n,container:a,levelCodec:o,metadata:l,id:r}}}}else this.pendingTracks[e]=t[e]})),i)return;const r=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==r&&(this.log(`${r} bufferCodec event(s) expected ${s.join(",")}`),this.bufferCodecEventsExpected=r),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks()}appendChangeType(e,t){const{operationQueue:i}=this,s={execute:()=>{const s=this.sourceBuffer[e];s&&(this.log(`changing ${e} sourceBuffer type to ${t}`),s.changeType(t)),i.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{this.warn(`Failed to change ${e} SourceBuffer type`,t)}};i.append(s,e,!!this.pendingTracks[e])}onBufferAppending(e,t){const{hls:i,operationQueue:s,tracks:r}=this,{data:n,type:o,frag:a,part:l,chunkMeta:c}=t,d=c.buffering[o],h=self.performance.now();d.start=h;const u=a.stats.buffering,p=l?l.stats.buffering:null;0===u.start&&(u.start=h),p&&0===p.start&&(p.start=h);const f=r.audio;let g=!1;"audio"===o&&"audio/mpeg"===(null==f?void 0:f.container)&&(g=!this.lastMpegAudioChunk||1===c.id||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const m=a.start,v={execute:()=>{if(d.executeStart=self.performance.now(),g){const e=this.sourceBuffer[o];if(e){const t=m-e.timestampOffset;Math.abs(t)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${m} (delta: ${t}) sn: ${a.sn})`),e.timestampOffset=m)}}this.appendExecutor(n,o)},onStart:()=>{},onComplete:()=>{const e=self.performance.now();d.executeEnd=d.end=e,0===u.first&&(u.first=e),p&&0===p.first&&(p.first=e);const{sourceBuffer:t}=this,i={};for(const s in t)i[s]=xM.getBuffered(t[s]);this.appendErrors[o]=0,"audio"===o||"video"===o?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(AR.BUFFER_APPENDED,{type:o,frag:a,part:l,chunkMeta:c,parent:a.type,timeRanges:i})},onError:e=>{const t={type:xR.MEDIA_ERROR,parent:a.type,details:kR.BUFFER_APPEND_ERROR,sourceBufferName:o,frag:a,part:l,chunkMeta:c,error:e,err:e,fatal:!1};if(e.code===DOMException.QUOTA_EXCEEDED_ERR)t.details=kR.BUFFER_FULL_ERROR;else{const e=++this.appendErrors[o];t.details=kR.BUFFER_APPEND_ERROR,this.warn(`Failed ${e}/${i.config.appendErrorMaxRetry} times to append segment in "${o}" sourceBuffer`),e>=i.config.appendErrorMaxRetry&&(t.fatal=!0)}i.trigger(AR.ERROR,t)}};s.append(v,o,!!this.pendingTracks[o])}onBufferFlushing(e,t){const{operationQueue:i}=this,s=e=>({execute:this.removeExecutor.bind(this,e,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(AR.BUFFER_FLUSHED,{type:e})},onError:t=>{this.warn(`Failed to remove from ${e} SourceBuffer`,t)}});t.type?i.append(s(t.type),t.type):this.getSourceBufferTypes().forEach((e=>{i.append(s(e),e)}))}onFragParsed(e,t){const{frag:i,part:s}=t,r=[],n=s?s.elementaryStreams:i.elementaryStreams;n[GR.AUDIOVIDEO]?r.push("audiovideo"):(n[GR.AUDIO]&&r.push("audio"),n[GR.VIDEO]&&r.push("video"));const o=()=>{const e=self.performance.now();i.stats.buffering.end=e,s&&(s.stats.buffering.end=e);const t=s?s.stats:i.stats;this.hls.trigger(AR.FRAG_BUFFERED,{frag:i,part:s,stats:t,id:i.type})};0===r.length&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${i.type} level: ${i.level} sn: ${i.sn}`),this.blockBuffers(o,r)}onFragChanged(e,t){this.trimBuffers()}onBufferEos(e,t){const i=this.getSourceBufferTypes().reduce(((e,i)=>{const s=this.sourceBuffer[i];return!s||t.type&&t.type!==i||(s.ending=!0,s.ended||(s.ended=!0,this.log(`${i} sourceBuffer now EOS`))),e&&!(s&&!s.ended)}),!0);i&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers((()=>{this.getSourceBufferTypes().forEach((e=>{const t=this.sourceBuffer[e];t&&(t.ending=!1)}));const{mediaSource:e}=this;e&&"open"===e.readyState?(this.log("Calling mediaSource.endOfStream()"),e.endOfStream()):e&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${e.readyState}`)})))}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:t,media:i}=this;if(!i||null===t)return;const s=this.getSourceBufferTypes();if(!s.length)return;const r=e.config,n=i.currentTime,o=t.levelTargetDuration,a=t.live&&null!==r.liveBackBufferLength?r.liveBackBufferLength:r.backBufferLength;if(ER(a)&&a>0){const e=Math.max(a,o),t=Math.floor(n/o)*o-e;this.flushBackBuffer(n,o,t)}if(ER(r.frontBufferFlushThreshold)&&r.frontBufferFlushThreshold>0){const e=Math.max(r.maxBufferLength,r.frontBufferFlushThreshold),t=Math.max(e,o),i=Math.floor(n/o)*o+t;this.flushFrontBuffer(n,o,i)}}flushBackBuffer(e,t,i){const{details:s,sourceBuffer:r}=this,n=this.getSourceBufferTypes();n.forEach((n=>{const o=r[n];if(o){const r=xM.getBuffered(o);if(r.length>0&&i>r.start(0)){if(this.hls.trigger(AR.BACK_BUFFER_REACHED,{bufferEnd:i}),null!=s&&s.live)this.hls.trigger(AR.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i});else if(o.ended&&r.end(r.length-1)-e<2*t)return void this.log(`Cannot flush ${n} back buffer while SourceBuffer is in ended state`);this.hls.trigger(AR.BUFFER_FLUSHING,{startOffset:0,endOffset:i,type:n})}}}))}flushFrontBuffer(e,t,i){const{sourceBuffer:s}=this,r=this.getSourceBufferTypes();r.forEach((r=>{const n=s[r];if(n){const s=xM.getBuffered(n),o=s.length;if(o<2)return;const a=s.start(o-1),l=s.end(o-1);if(i>a||e>=a&&e<=l)return;if(n.ended&&e-l<2*t)return void this.log(`Cannot flush ${r} front buffer while SourceBuffer is in ended state`);this.hls.trigger(AR.BUFFER_FLUSHING,{startOffset:a,endOffset:1/0,type:r})}}))}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||"open"!==this.mediaSource.readyState)return;const{details:e,hls:t,media:i,mediaSource:s}=this,r=e.fragments[0].start+e.totalduration,n=i.duration,o=ER(s.duration)?s.duration:0;e.live&&t.config.liveDurationInfinity?(s.duration=1/0,this.updateSeekableRange(e)):(r>o&&r>n||!ER(n))&&(this.log(`Updating Media Source duration to ${r.toFixed(3)}`),s.duration=r)}updateSeekableRange(e){const t=this.mediaSource,i=e.fragments,s=i.length;if(s&&e.live&&null!=t&&t.setLiveSeekableRange){const s=Math.max(0,i[0].start),r=Math.max(s,s+e.totalduration);this.log(`Media Source duration is set to ${t.duration}. Setting seekable range to ${s}-${r}.`),t.setLiveSeekableRange(s,r)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:i}=this,s=Object.keys(i).length;if(s&&(!e||2===s||"audiovideo"in i)){this.createSourceBuffers(i),this.pendingTracks={};const e=this.getSourceBufferTypes();if(e.length)this.hls.trigger(AR.BUFFER_CREATED,{tracks:this.tracks}),e.forEach((e=>{t.executeNext(e)}));else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(AR.ERROR,{type:xR.MEDIA_ERROR,details:kR.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:i}=this;if(!i)throw Error("createSourceBuffers called when mediaSource was null");for(const r in e)if(!t[r]){var s;const n=e[r];if(!n)throw Error(`source buffer exists for track ${r}, however track does not`);let o=-1===(null==(s=n.levelCodec)?void 0:s.indexOf(","))?n.levelCodec:n.codec;o&&"audio"===r.slice(0,5)&&(o=RD(o,this.appendSource));const a=`${n.container};codecs=${o}`;this.log(`creating sourceBuffer(${a})`);try{const e=t[r]=i.addSourceBuffer(a),s=r;this.addBufferListener(s,"updatestart",this._onSBUpdateStart),this.addBufferListener(s,"updateend",this._onSBUpdateEnd),this.addBufferListener(s,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(s,"bufferedchange",((e,t)=>{const i=t.removedRanges;null!=i&&i.length&&this.hls.trigger(AR.BUFFER_FLUSHED,{type:r})})),this.tracks[r]={buffer:e,codec:o,container:n.container,levelCodec:n.levelCodec,metadata:n.metadata,id:n.id}}catch(F$){this.error(`error while trying to add sourceBuffer: ${F$.message}`),this.hls.trigger(AR.ERROR,{type:xR.MEDIA_ERROR,details:kR.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:F$,sourceBufferName:r,mimeType:a})}}}get mediaSrc(){var e,t;const i=(null==(e=this.media)||null==(t=e.querySelector)?void 0:t.call(e,"source"))||this.media;return null==i?void 0:i.src}_onSBUpdateStart(e){const{operationQueue:t}=this,i=t.current(e);i.onStart()}_onSBUpdateEnd(e){var t;if("closed"===(null==(t=this.mediaSource)?void 0:t.readyState))return void this.resetBuffer(e);const{operationQueue:i}=this,s=i.current(e);s.onComplete(),i.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){var i;const s=new Error(`${e} SourceBuffer error. MediaSource readyState: ${null==(i=this.mediaSource)?void 0:i.readyState}`);this.error(`${s}`,t),this.hls.trigger(AR.ERROR,{type:xR.MEDIA_ERROR,details:kR.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:s,fatal:!1});const r=this.operationQueue.current(e);r&&r.onError(s)}removeExecutor(e,t,i){const{media:s,mediaSource:r,operationQueue:n,sourceBuffer:o}=this,a=o[e];if(!s||!r||!a)return this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),void n.shiftAndExecuteNext(e);const l=ER(s.duration)?s.duration:1/0,c=ER(r.duration)?r.duration:1/0,d=Math.max(0,t),h=Math.min(i,l,c);h>d&&(!a.ending||a.ended)?(a.ended=!1,this.log(`Removing [${d},${h}] from the ${e} SourceBuffer`),a.remove(d,h)):n.shiftAndExecuteNext(e)}appendExecutor(e,t){const i=this.sourceBuffer[t];if(i)i.ended=!1,i.appendBuffer(e);else if(!this.pendingTracks[t])throw new Error(`Attempting to append to the ${t} SourceBuffer, but it does not exist`)}blockBuffers(e,t=this.getSourceBufferTypes()){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);const{operationQueue:i}=this,s=t.map((e=>i.appendBlocker(e)));Promise.all(s).then((()=>{e(),t.forEach((e=>{const t=this.sourceBuffer[e];null!=t&&t.updating||i.shiftAndExecuteNext(e)}))}))}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,i){const s=this.sourceBuffer[e];if(!s)return;const r=i.bind(this,e);this.listeners[e].push({event:t,listener:r}),s.addEventListener(t,r)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach((e=>{t.removeEventListener(e.event,e.listener)}))}}function UN(e){const t=e.querySelectorAll("source");[].slice.call(t).forEach((t=>{e.removeChild(t)}))}function GN(e,t){const i=self.document.createElement("source");i.type="video/mp4",i.src=t,e.appendChild(i)}const HN={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},jN=e=>String.fromCharCode(HN[e]||e),zN=15,VN=100,YN={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},WN={17:2,18:4,21:6,22:8,23:10,19:13,20:15},KN={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},qN={25:2,26:4,29:6,30:8,31:10,27:13,28:15},XN=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class ZN{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const i="function"===typeof t?t():t;PR.log(`${this.time} [${e}] ${i}`)}}}const QN=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].toString(16));return t};class JN{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let i=0;i<t.length;i++){const s=t[i];e.hasOwnProperty(s)&&(this[s]=e[s])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class eF{constructor(){this.uchar=" ",this.penState=new JN}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class tF{constructor(e){this.chars=[],this.pos=0,this.currPenState=new JN,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<VN;t++)this.chars.push(new eF);this.logger=e}equals(e){for(let t=0;t<VN;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<VN;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<VN;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>VN&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=VN)}moveCursor(e){const t=this.pos+e;if(e>1)for(let i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=jN(e);this.pos>=VN?this.logger.log(0,(()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!")):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<VN;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let i=0;i<VN;i++){const s=this.chars[i].uchar;" "!==s&&(t=!1),e.push(s)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e);const t=this.chars[this.pos];t.setPenState(this.currPenState)}}class iF{constructor(e){this.rows=[],this.currRow=zN-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<zN;t++)this.rows.push(new tF(e));this.logger=e}reset(){for(let e=0;e<zN;e++)this.rows[e].clear();this.currRow=zN-1}equals(e){let t=!0;for(let i=0;i<zN;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t}copy(e){for(let t=0;t<zN;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<zN;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){const e=this.rows[this.currRow];e.backSpace()}clearToEndOfRow(){const e=this.rows[this.currRow];e.clearToEndOfRow()}insertChar(e){const t=this.rows[this.currRow];t.insertChar(e)}setPen(e){const t=this.rows[this.currRow];t.setPenStyles(e)}moveCursor(e){const t=this.rows[this.currRow];t.moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e);const t=this.rows[this.currRow];t.setCursor(e)}setPAC(e){this.logger.log(2,(()=>"pacData = "+JSON.stringify(e)));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let t=0;t<zN;t++)this.rows[t].clear();const e=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){const s=i.rows[e].cueStartTime,r=this.logger.time;if(null!==s&&null!==r&&s<r)for(let n=0;n<this.nrRollUpRows;n++)this.rows[t-this.nrRollUpRows+n+1].copy(i.rows[e+n])}}this.currRow=t;const i=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,s=Math.max(t-1,0);i.setCursor(e.indent),e.color=i.chars[s].penState.foreground}const s={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(s)}setBkgData(e){this.logger.log(2,(()=>"bkgData = "+JSON.stringify(e))),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,(()=>this.getDisplayText()));const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let i="",s=-1;for(let r=0;r<zN;r++){const i=this.rows[r].getTextString();i&&(s=r+1,e?t.push("Row "+s+": '"+i+"'"):t.push(i.trim()))}return t.length>0&&(i=e?"["+t.join(" | ")+"]":t.join("\n")),i}getTextAndFormat(){return this.rows}}class sF{constructor(e,t,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new iF(i),this.nonDisplayedMemory=new iF(i),this.lastOutputScreen=new iF(i),this.currRollUpRow=this.displayedMemory.rows[zN-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[zN-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,(()=>"MODE="+e)),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let i=0;i<e.length;i++)this.writeScreen.insertChar(e[i]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(()=>t+": "+this.writeScreen.getDisplayText(!0))),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0))),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(()=>"DISP: "+this.displayedMemory.getDisplayText()))}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const i=Math.floor(e/2)-16,s=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=s[i]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class rF{constructor(e,t,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=aF(),this.logger=void 0;const s=this.logger=new ZN;this.channels=[null,new sF(e,t,s),new sF(e+1,i,s)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let i=0;i<t.length;i+=2){const e=127&t[i],s=127&t[i+1];let r=!1,n=null;if(0===e&&0===s)continue;this.logger.log(3,(()=>"["+QN([t[i],t[i+1]])+"] -> ("+QN([e,s])+")"));const o=this.cmdHistory,a=e>=16&&e<=31;if(a){if(oF(e,s,o)){nF(null,null,o),this.logger.log(3,(()=>"Repeated command ("+QN([e,s])+") is dropped"));continue}nF(e,s,this.cmdHistory),r=this.parseCmd(e,s),r||(r=this.parseMidrow(e,s)),r||(r=this.parsePAC(e,s)),r||(r=this.parseBackgroundAttributes(e,s))}else nF(null,null,o);if(!r&&(n=this.parseChars(e,s),n)){const e=this.currentChannel;if(e&&e>0){const t=this.channels[e];t.insertChars(n)}else this.logger.log(2,"No channel found yet. TEXT-MODE?")}r||n||this.logger.log(2,(()=>"Couldn't parse cleaned data "+QN([e,s])+" orig: "+QN([t[i],t[i+1]])))}}parseCmd(e,t){const i=(20===e||28===e||21===e||29===e)&&t>=32&&t<=47,s=(23===e||31===e)&&t>=33&&t<=35;if(!i&&!s)return!1;const r=20===e||21===e||23===e?1:2,n=this.channels[r];return 20===e||21===e||28===e||29===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),this.currentChannel=r,!0}parseMidrow(e,t){let i=0;if((17===e||25===e)&&t>=32&&t<=47){if(i=17===e?1:2,i!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const s=this.channels[i];return!!s&&(s.ccMIDROW(t),this.logger.log(3,(()=>"MIDROW ("+QN([e,t])+")")),!0)}return!1}parsePAC(e,t){let i;const s=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,r=(16===e||24===e)&&t>=64&&t<=95;if(!s&&!r)return!1;const n=e<=23?1:2;i=t>=64&&t<=95?1===n?YN[e]:KN[e]:1===n?WN[e]:qN[e];const o=this.channels[n];return!!o&&(o.setPAC(this.interpretPAC(i,t)),this.currentChannel=n,!0)}interpretPAC(e,t){let i;const s={color:null,italics:!1,indent:null,underline:!1,row:e};return i=t>95?t-96:t-64,s.underline=1===(1&i),i<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(s.italics=!0,s.color="white"):s.indent=4*Math.floor((i-16)/2),s}parseChars(e,t){let i,s=null,r=null;if(e>=25?(i=2,r=e-8):(i=1,r=e),r>=17&&r<=19){let e;e=17===r?t+80:18===r?t+112:t+144,this.logger.log(2,(()=>"Special char '"+jN(e)+"' in channel "+i)),s=[e]}else e>=32&&e<=127&&(s=0===t?[e]:[e,t]);return s&&this.logger.log(3,(()=>"Char codes =  "+QN(s).join(","))),s}parseBackgroundAttributes(e,t){const i=(16===e||24===e)&&t>=32&&t<=47,s=(23===e||31===e)&&t>=45&&t<=47;if(!i&&!s)return!1;let r;const n={};16===e||24===e?(r=Math.floor((t-32)/2),n.background=XN[r],t%2===1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0));const o=e<=23?1:2,a=this.channels[o];return a.setBkgData(n),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}nF(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const i=this.channels[t];i&&i.cueSplitAtTime(e)}}}function nF(e,t,i){i.a=e,i.b=t}function oF(e,t,i){return i.a===e&&i.b===t}function aF(){return{a:null,b:null}}class lF{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,i){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var cF=function(){if(null!=QR&&QR.VTTCue)return self.VTTCue;const e=["","lr","rl"],t=["start","middle","end","left","right"];function i(e,t){if("string"!==typeof t)return!1;if(!Array.isArray(e))return!1;const i=t.toLowerCase();return!!~e.indexOf(i)&&i}function s(t){return i(e,t)}function r(e){return i(t,e)}function n(e,...t){let i=1;for(;i<arguments.length;i++){const t=arguments[i];for(const i in t)e[i]=t[i]}return e}function o(e,t,i){const o=this,a={enumerable:!0};o.hasBeenReset=!1;let l="",c=!1,d=e,h=t,u=i,p=null,f="",g=!0,m="auto",v="start",y=50,b="middle",w=50,E="middle";Object.defineProperty(o,"id",n({},a,{get:function(){return l},set:function(e){l=""+e}})),Object.defineProperty(o,"pauseOnExit",n({},a,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(o,"startTime",n({},a,{get:function(){return d},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",n({},a,{get:function(){return h},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",n({},a,{get:function(){return u},set:function(e){u=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",n({},a,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",n({},a,{get:function(){return f},set:function(e){const t=s(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",n({},a,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",n({},a,{get:function(){return m},set:function(e){if("number"!==typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",n({},a,{get:function(){return v},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",n({},a,{get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",n({},a,{get:function(){return b},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",n({},a,{get:function(){return w},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");w=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",n({},a,{get:function(){return E},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),o.displayState=void 0}return o.prototype.getCueAsHTML=function(){const e=self.WebVTT;return e.convertCueToDOMTree(self,this.text)},o}();class dF{decode(e,t){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function hF(e){function t(e,t,i,s){return 3600*(0|e)+60*(0|t)+(0|i)+parseFloat(s||0)}const i=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return i?parseFloat(i[2])>59?t(i[2],i[3],0,i[4]):t(i[1],i[2],i[3],i[4]):null}class uF{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,i){for(let s=0;s<i.length;++s)if(t===i[s]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const i=parseFloat(t);if(i>=0&&i<=100)return this.set(e,i),!0}return!1}}function pF(e,t,i,s){const r=s?e.split(s):[e];for(const n in r){if("string"!==typeof r[n])continue;const e=r[n].split(i);if(2!==e.length)continue;const s=e[0],o=e[1];t(s,o)}}const fF=new cF(0,0,""),gF="middle"===fF.align?"middle":"center";function mF(e,t,i){const s=e;function r(){const t=hF(e);if(null===t)throw new Error("Malformed timestamp: "+s);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function n(e,t){const s=new uF;pF(e,(function(e,t){let r;switch(e){case"region":for(let r=i.length-1;r>=0;r--)if(i[r].id===t){s.set(e,i[r].region);break}break;case"vertical":s.alt(e,t,["rl","lr"]);break;case"line":r=t.split(","),s.integer(e,r[0]),s.percent(e,r[0])&&s.set("snapToLines",!1),s.alt(e,r[0],["auto"]),2===r.length&&s.alt("lineAlign",r[1],["start",gF,"end"]);break;case"position":r=t.split(","),s.percent(e,r[0]),2===r.length&&s.alt("positionAlign",r[1],["start",gF,"end","line-left","line-right","auto"]);break;case"size":s.percent(e,t);break;case"align":s.alt(e,t,["start",gF,"end","left","right"]);break}}),/:/,/\s/),t.region=s.get("region",null),t.vertical=s.get("vertical","");let r=s.get("line","auto");"auto"===r&&-1===fF.line&&(r=-1),t.line=r,t.lineAlign=s.get("lineAlign","start"),t.snapToLines=s.get("snapToLines",!0),t.size=s.get("size",100),t.align=s.get("align",gF);let n=s.get("position","auto");"auto"===n&&50===fF.position&&(n="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=n}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=r(),o(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+s);e=e.slice(3),o(),t.endTime=r(),o(),n(e,t)}function vF(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class yF{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new dF,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function i(){let e=t.buffer,i=0;e=vF(e);while(i<e.length&&"\r"!==e[i]&&"\n"!==e[i])++i;const s=e.slice(0,i);return"\r"===e[i]&&++i,"\n"===e[i]&&++i,t.buffer=e.slice(i),s}function s(e){pF(e,(function(e,t){}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;e=i();const s=e.match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(null==s||!s[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let r=!1;while(t.buffer){if(!/\r\n|\n/.test(t.buffer))return this;switch(r?r=!1:e=i(),t.state){case"HEADER":/:/.test(e)?s(e):e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new cF(0,0,""),t.state="CUE",-1===e.indexOf("--\x3e")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{mF(e,t.cue,t.regionList)}catch(N$){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const i=-1!==e.indexOf("--\x3e");if(!e||i&&(r=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}}catch(N$){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(N$){e.onparsingerror&&e.onparsingerror(N$)}return e.onflush&&e.onflush(),this}}const bF=/\r\n|\n\r|\n|\r/g,wF=function(e,t,i=0){return e.slice(i,i+t.length)===t},EF=function(e){let t=parseInt(e.slice(-3));const i=parseInt(e.slice(-6,-4)),s=parseInt(e.slice(-9,-7)),r=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!ER(t)||!ER(i)||!ER(s)||!ER(r))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*i,t+=6e4*s,t+=36e5*r,t},TF=function(e){let t=5381,i=e.length;while(i)t=33*t^e.charCodeAt(--i);return(t>>>0).toString()};function SF(e,t,i){return TF(e.toString())+TF(t.toString())+TF(i)}const AF=function(e,t,i){let s=e[t],r=e[s.prevCC];if(!r||!r.new&&s.new)return e.ccOffset=e.presentationOffset=s.start,void(s.new=!1);while(null!=(n=r)&&n.new){var n;e.ccOffset+=s.start-r.start,s.new=!1,s=r,r=e[s.prevCC]}e.presentationOffset=i};function xF(e,t,i,s,r,n,o){const a=new yF,l=AI(new Uint8Array(e)).trim().replace(bF,"\n").split("\n"),c=[],d=t?JO(t.baseTime,t.timescale):0;let h,u="00:00.000",p=0,f=0,g=!0;a.oncue=function(e){const n=i[s];let o=i.ccOffset;const a=(p-d)/9e4;if(null!=n&&n.new&&(void 0!==f?o=i.ccOffset=n.start:AF(i,s,a)),a){if(!t)return void(h=new Error("Missing initPTS for VTT MPEGTS"));o=a-i.presentationOffset}const l=e.endTime-e.startTime,u=lN(9e4*(e.startTime+o-f),9e4*r)/9e4;e.startTime=Math.max(u,0),e.endTime=Math.max(u+l,0);const g=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(g)),e.id||(e.id=SF(e.startTime,e.endTime,g)),e.endTime>0&&c.push(e)},a.onparsingerror=function(e){h=e},a.onflush=function(){h?o(h):n(c)},l.forEach((e=>{if(g){if(wF(e,"X-TIMESTAMP-MAP=")){g=!1,e.slice(16).split(",").forEach((e=>{wF(e,"LOCAL:")?u=e.slice(6):wF(e,"MPEGTS:")&&(p=parseInt(e.slice(7)))}));try{f=EF(u)/1e3}catch(t){h=t}return}""===e&&(g=!1)}a.parse(e+"\n")})),a.flush()}const kF="stpp.ttml.im1t",LF=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,CF=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,_F={left:"start",center:"center",right:"end",start:"start",end:"end"};function RF(e,t,i,s){const r=BI(new Uint8Array(e),["mdat"]);if(0===r.length)return void s(new Error("Could not parse IMSC1 mdat"));const n=r.map((e=>AI(e))),o=ZO(t.baseTime,1,t.timescale);try{n.forEach((e=>i(IF(e,o))))}catch(a){s(a)}}function IF(e,t){const i=new DOMParser,s=i.parseFromString(e,"text/xml"),r=s.getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const n={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(n).reduce(((e,t)=>(e[t]=r.getAttribute(`ttp:${t}`)||n[t],e)),{}),a="preserve"!==r.getAttribute("xml:space"),l=PF(DF(r,"styling","style")),c=PF(DF(r,"layout","region")),d=DF(r,"body","[begin]");return[].map.call(d,(e=>{const i=MF(e,a);if(!i||!e.hasAttribute("begin"))return null;const s=BF(e.getAttribute("begin"),o),r=BF(e.getAttribute("dur"),o);let n=BF(e.getAttribute("end"),o);if(null===s)throw FF(e);if(null===n){if(null===r)throw FF(e);n=s+r}const d=new cF(s-t,n-t,i);d.id=SF(d.startTime,d.endTime,d.text);const h=c[e.getAttribute("region")],u=l[e.getAttribute("style")],p=OF(h,u,l),{textAlign:f}=p;if(f){const e=_F[f];e&&(d.lineAlign=e),d.align=f}return wR(d,p),d})).filter((e=>null!==e))}function DF(e,t,i){const s=e.getElementsByTagName(t)[0];return s?[].slice.call(s.querySelectorAll(i)):[]}function PF(e){return e.reduce(((e,t)=>{const i=t.getAttribute("xml:id");return i&&(e[i]=t),e}),{})}function MF(e,t){return[].slice.call(e.childNodes).reduce(((e,i,s)=>{var r;return"br"===i.nodeName&&s?e+"\n":null!=(r=i.childNodes)&&r.length?MF(i,t):t?e+i.textContent.trim().replace(/\s+/g," "):e+i.textContent}),"")}function OF(e,t,i){const s="http://www.w3.org/ns/ttml#styling";let r=null;const n=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;return o&&i.hasOwnProperty(o)&&(r=i[o]),n.reduce(((i,n)=>{const o=NF(t,s,n)||NF(e,s,n)||NF(r,s,n);return o&&(i[n]=o),i}),{})}function NF(e,t,i){return e&&e.hasAttributeNS(t,i)?e.getAttributeNS(t,i):null}function FF(e){return new Error(`Could not parse ttml timestamp ${e}`)}function BF(e,t){if(!e)return null;let i=hF(e);return null===i&&(LF.test(e)?i=$F(e,t):CF.test(e)&&(i=UF(e,t))),i}function $F(e,t){const i=LF.exec(e),s=(0|i[4])+(0|i[5])/t.subFrameRate;return 3600*(0|i[1])+60*(0|i[2])+(0|i[3])+s/t.frameRate}function UF(e,t){const i=CF.exec(e),s=Number(i[1]),r=i[2];switch(r){case"h":return 3600*s;case"m":return 60*s;case"ms":return 1e3*s;case"f":return s/t.frameRate;case"t":return s/t.tickRate}return s}class GF{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=VF(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(AR.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(AR.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.on(AR.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(AR.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(AR.FRAG_LOADING,this.onFragLoading,this),e.on(AR.FRAG_LOADED,this.onFragLoaded,this),e.on(AR.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(AR.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(AR.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(AR.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(AR.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(AR.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(AR.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.off(AR.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(AR.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(AR.FRAG_LOADING,this.onFragLoading,this),e.off(AR.FRAG_LOADED,this.onFragLoaded,this),e.off(AR.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(AR.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(AR.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(AR.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(AR.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new lF(this,"textTrack1"),t=new lF(this,"textTrack2"),i=new lF(this,"textTrack3"),s=new lF(this,"textTrack4");this.cea608Parser1=new rF(1,e,t),this.cea608Parser2=new rF(3,i,s)}}addCues(e,t,i,s,r){let n=!1;for(let o=r.length;o--;){const e=r[o],s=zF(e[0],e[1],t,i);if(s>=0&&(e[0]=Math.min(e[0],t),e[1]=Math.max(e[1],i),n=!0,s/(i-t)>.5))return}if(n||r.push([t,i]),this.config.renderTextTracksNatively){const r=this.captionsTracks[e];this.Cues.newCue(r,t,i,s)}else{const r=this.Cues.newCue(null,t,i,s);this.hls.trigger(AR.CUES_PARSED,{type:"captions",cues:r,track:e})}}onInitPtsFound(e,{frag:t,id:i,initPTS:s,timescale:r}){const{unparsedVttFrags:n}=this;"main"===i&&(this.initPTS[t.cc]={baseTime:s,timescale:r}),n.length&&(this.unparsedVttFrags=[],n.forEach((e=>{this.onFragLoaded(AR.FRAG_LOADED,e)})))}getExistingTrack(e,t){const{media:i}=this;if(i)for(let s=0;s<i.textTracks.length;s++){const r=i.textTracks[s];if(jF(r,{name:e,lang:t,attrs:{}}))return r}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:i,media:s}=this,{label:r,languageCode:n}=t[e],o=this.getExistingTrack(r,n);if(o)i[e]=o,eP(i[e]),QD(i[e],s);else{const t=this.createTextTrack("captions",r,n);t&&(t[e]=!0,i[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const i=t.label,s={_id:e,label:i,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=s,this.hls.trigger(AR.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[s]})}createTextTrack(e,t,i){const s=this.media;if(s)return s.addTextTrack(e,t,i)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach((t=>{eP(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=VF(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let i=0;i<t.length;i++)eP(t[i])}onSubtitleTracksUpdated(e,t){const i=t.subtitleTracks||[],s=i.some((e=>e.textCodec===kF));if(this.config.enableWebVTT||s&&this.config.enableIMSC1){const e=LN(this.tracks,i);if(e)return void(this.tracks=i);if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){const e=this.media,t=e?rP(e.textTracks):null;if(this.tracks.forEach(((e,i)=>{let s;if(t){let i=null;for(let s=0;s<t.length;s++)if(t[s]&&jF(t[s],e)){i=t[s],t[s]=null;break}i&&(s=i)}if(s)eP(s);else{const t=HF(e);s=this.createTextTrack(t,e.name,e.lang),s&&(s.mode="disabled")}s&&this.textTracks.push(s)})),null!=t&&t.length){const e=t.filter((e=>null!==e)).map((e=>e.label));e.length&&PR.warn(`Media element contains unused subtitle tracks: ${e.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const e=this.tracks.map((e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e})));this.hls.trigger(AR.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((e=>{const t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;const i=`textTrack${t[1]}`,s=this.captionsProperties[i];s&&(s.label=e.name,e.lang&&(s.languageCode=e.lang),s.media=e)}))}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===KD.MAIN){var i,s;const{cea608Parser1:e,cea608Parser2:r,lastSn:n}=this,{cc:o,sn:a}=t.frag,l=null!=(i=null==(s=t.part)?void 0:s.index)?i:-1;e&&r&&(a!==n+1||a===n&&l!==this.lastPartIndex+1||o!==this.lastCc)&&(e.reset(),r.reset()),this.lastCc=o,this.lastSn=a,this.lastPartIndex=l}}onFragLoaded(e,t){const{frag:i,payload:s}=t;if(i.type===KD.SUBTITLE)if(s.byteLength){const e=i.decryptdata,r="stats"in t;if(null==e||!e.encrypted||r){const e=this.tracks[i.level],r=this.vttCCs;r[i.cc]||(r[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),e&&e.textCodec===kF?this._parseIMSC1(i,s):this._parseVTTs(t)}}else this.hls.trigger(AR.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const i=this.hls;RF(t,this.initPTS[e.cc],(t=>{this._appendCues(t,e.level),i.trigger(AR.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(t=>{PR.log(`Failed to parse IMSC1: ${t}`),i.trigger(AR.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))}_parseVTTs(e){var t;const{frag:i,payload:s}=e,{initPTS:r,unparsedVttFrags:n}=this,o=r.length-1;if(!r[i.cc]&&-1===o)return void n.push(e);const a=this.hls,l=null!=(t=i.initSegment)&&t.data?QI(i.initSegment.data,new Uint8Array(s)):s;xF(l,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,(e=>{this._appendCues(e,i.level),a.trigger(AR.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})}),(t=>{const r="Missing initPTS for VTT MPEGTS"===t.message;r?n.push(e):this._fallbackToIMSC1(i,s),PR.log(`Failed to parse VTT cue: ${t}`),r&&o>i.cc||a.trigger(AR.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:t})}))}_fallbackToIMSC1(e,t){const i=this.tracks[e.level];i.textCodec||RF(t,this.initPTS[e.cc],(()=>{i.textCodec=kF,this._parseIMSC1(e,t)}),(()=>{i.textCodec="wvtt"}))}_appendCues(e,t){const i=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||"disabled"===i.mode)return;e.forEach((e=>JD(i,e)))}else{const s=this.tracks[t];if(!s)return;const r=s.default?"default":"subtitles"+t;i.trigger(AR.CUES_PARSED,{type:"subtitles",cues:e,track:r})}}onFragDecrypted(e,t){const{frag:i}=t;i.type===KD.SUBTITLE&&this.onFragLoaded(AR.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){this.initCea608Parsers();const{cea608Parser1:i,cea608Parser2:s}=this;if(!this.enabled||!i||!s)return;const{frag:r,samples:n}=t;if(r.type!==KD.MAIN||"NONE"!==this.closedCaptionsForLevel(r))for(let o=0;o<n.length;o++){const e=n[o].bytes;if(e){const t=this.extractCea608Data(e);i.addData(n[o].pts,t[0]),s.addData(n[o].pts,t[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:i,endOffsetSubtitles:s,type:r}){const{media:n}=this;if(n&&!(n.currentTime<i)){if(!r||"video"===r){const{captionsTracks:e}=this;Object.keys(e).forEach((s=>tP(e[s],t,i)))}if(this.config.renderTextTracksNatively&&0===t&&void 0!==s){const{textTracks:e}=this;Object.keys(e).forEach((i=>tP(e[i],t,s)))}}}extractCea608Data(e){const t=[[],[]],i=31&e[0];let s=2;for(let r=0;r<i;r++){const i=e[s++],r=127&e[s++],n=127&e[s++];if(0===r&&0===n)continue;const o=0!==(4&i);if(o){const e=3&i;0!==e&&1!==e||(t[e].push(r),t[e].push(n))}}return t}}function HF(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function jF(e,t){return!!e&&e.kind===HF(t)&&_N(t,e)}function zF(e,t,i,s){return Math.min(t,s)-Math.max(e,i)}function VF(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class YF{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(AR.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(AR.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(AR.MANIFEST_PARSED,this.onManifestParsed,this),e.on(AR.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(AR.BUFFER_CODECS,this.onBufferCodecs,this),e.on(AR.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(AR.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(AR.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(AR.MANIFEST_PARSED,this.onManifestParsed,this),e.off(AR.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(AR.BUFFER_CODECS,this.onBufferCodecs,this),e.off(AR.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const i=this.hls.levels[t.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&ER(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){const i=this.hls;i.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);const e=this.hls.levels;if(e.length){const t=this.hls,i=this.getMaxLevel(e.length-1);i!==this.autoLevelCapping&&PR.log(`Setting autoLevelCapping to ${i}: ${e[i].height}p@${e[i].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=i,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const i=t.filter(((t,i)=>this.isLevelAllowed(t)&&i<=e));return this.clientRect=null,YF.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,t.width||t.height||(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(N$){}return e}isLevelAllowed(e){const t=this.restrictedLevels;return!t.some((t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height))}static getMaxLevelByMediaSize(e,t,i){if(null==e||!e.length)return-1;const s=(e,t)=>!t||(e.width!==t.width||e.height!==t.height);let r=e.length-1;const n=Math.max(t,i);for(let o=0;o<e.length;o+=1){const t=e[o];if((t.width>=n||t.height>=n)&&s(t,e[o+1])){r=o;break}}return r}}class WF{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(AR.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(AR.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const i=this.hls.config;if(i.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"===typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,i){const s=performance.now();if(t){if(this.lastTime){const e=s-this.lastTime,r=i-this.lastDroppedFrames,n=t-this.lastDecodedFrames,o=1e3*r/e,a=this.hls;if(a.trigger(AR.FPS_DROP,{currentDropped:r,currentDecoded:n,totalDroppedFrames:i}),o>0&&r>a.config.fpsDroppedMonitoringThreshold*n){let e=a.currentLevel;PR.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===a.autoLevelCapping||a.autoLevelCapping>=e)&&(e-=1,a.trigger(AR.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:a.currentLevel}),a.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=i,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const KF="[eme]";class qF{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=qF.CDMCleanupPromise?[qF.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=PR.debug.bind(PR,KF),this.log=PR.log.bind(PR,KF),this.warn=PR.warn.bind(PR,KF),this.error=PR.error.bind(PR,KF),this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(AR.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(AR.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(AR.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(AR.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(AR.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(AR.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(AR.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(AR.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:i}=this.config,s=t[e];if(s)return s.licenseUrl;if(e===JR.WIDEVINE&&i)return i;throw new Error(`no license server URL configured for key-system "${e}"`)}getServerCertificateUrl(e){const{drmSystems:t}=this.config,i=t[e];if(i)return i.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,i=(e,t,i)=>!!e&&i.indexOf(e)===t,s=t.map((e=>e.audioCodec)).filter(i),r=t.map((e=>e.videoCodec)).filter(i);return s.length+r.length===0&&r.push("avc1.42e01e"),new Promise(((t,i)=>{const n=e=>{const o=e.shift();this.getMediaKeysPromise(o,s,r).then((e=>t({keySystem:o,mediaKeys:e}))).catch((t=>{e.length?n(e):i(t instanceof XF?t:new XF({type:xR.KEY_SYSTEM_ERROR,details:kR.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))}))};n(e)}))}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:i}=this.config;if("function"!==typeof i){let e=`Configured requestMediaKeySystemAccess is not a function ${i}`;return null===oI&&"http:"===self.location.protocol&&(e=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(e))}return i(e,t)}getMediaKeysPromise(e,t,i){const s=aI(e,t,i,this.config.drmSystemOptions),r=this.keySystemAccessPromises[e];let n=null==r?void 0:r.keySystemAccess;if(!n){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(s)}`),n=this.requestMediaKeySystemAccess(e,s);const t=this.keySystemAccessPromises[e]={keySystemAccess:n};return n.catch((t=>{this.log(`Failed to obtain access to key-system "${e}": ${t}`)})),n.then((i=>{this.log(`Access for key-system "${i.keySystem}" obtained`);const s=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),t.mediaKeys=i.createMediaKeys().then((t=>(this.log(`Media-keys created for "${e}"`),s.then((i=>i?this.setMediaKeysServerCertificate(t,e,i):t))))),t.mediaKeys.catch((t=>{this.error(`Failed to create media-keys for "${e}"}: ${t}`)})),t.mediaKeys}))}return n.then((()=>r.mediaKeys))}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:i}){this.log(`Creating key-system session "${t}" keyId: ${LI.hexDump(e.keyId||[])}`);const s=i.createSession(),r={decryptdata:e,keySystem:t,mediaKeys:i,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(r),r}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const i=this.createMediaKeySessionContext(e),s=this.getKeyIdString(t),r="cenc";this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(i,r,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return LI.hexDump(e.keyId)}updateKeySession(e,t){var i;const s=e.mediaKeysSession;return this.log(`Updating key-session "${s.sessionId}" for keyID ${LI.hexDump((null==(i=e.decryptdata)?void 0:i.keyId)||[])}\n      } (data length: ${t?t.byteLength:t})`),s.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise(((t,i)=>{const s=nI(this.config),r=e.map(tI).filter((e=>!!e&&-1!==s.indexOf(e)));return this.getKeySystemSelectionPromise(r).then((({keySystem:e})=>{const s=rI(e);s?t(s):i(new Error(`Unable to find format for key-system "${e}"`))})).catch(i)}))}loadKey(e){const t=e.keyInfo.decryptdata,i=this.getKeyIdString(t),s=`(keyId: ${i} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${s}`);let r=this.keyIdToKeySessionPromise[i];return r||(r=this.keyIdToKeySessionPromise[i]=this.getKeySystemForKeyPromise(t).then((({keySystem:i,mediaKeys:r})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${s}`),this.attemptSetMediaKeys(i,r).then((()=>{this.throwIfDestroyed();const e=this.createMediaKeySessionContext({keySystem:i,mediaKeys:r,decryptdata:t}),s="cenc";return this.generateRequestWithPreferredKeySession(e,s,t.pssh,"playlist-key")}))))),r.catch((e=>this.handleError(e)))),r}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof XF?this.hls.trigger(AR.ERROR,e.data):this.hls.trigger(AR.ERROR,{type:xR.KEY_SYSTEM_ERROR,details:kR.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),i=this.keyIdToKeySessionPromise[t];if(!i){const t=tI(e.keyFormat),i=t?[t]:nI(this.config);return this.attemptKeySystemAccess(i)}return i}getKeySystemSelectionPromise(e){if(e.length||(e=nI(this.config)),0===e.length)throw new XF({type:xR.KEY_SYSTEM_ERROR,details:kR.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}_onMediaEncrypted(e){const{initDataType:t,initData:i}=e,s=`"${e.type}" event: init data type: "${t}"`;if(this.debug(s),null===i)return;let r,n;if("sinf"===t&&this.config.drmSystems[JR.FAIRPLAY]){const e=II(new Uint8Array(i));try{const t=WR(JSON.parse(e).sinf),i=YI(new Uint8Array(t));if(!i)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");r=i.subarray(8,24),n=JR.FAIRPLAY}catch(d){return void this.warn(`${s} Failed to parse sinf: ${d}`)}}else{const e=aD(i),t=e.filter((e=>e.systemId===iI.WIDEVINE))[0];if(!t)return void(0===e.length||e.some((e=>!e.systemId))?this.warn(`${s} contains incomplete or invalid pssh data`):this.log(`ignoring ${s} for ${e.map((e=>sI(e.systemId))).join(",")} pssh data in favor of playlist keys`));if(n=sI(t.systemId),0===t.version&&t.data){const e=t.data.length-22;r=t.data.subarray(e,e+16)}}if(!n||!r)return;const o=LI.hexDump(r),{keyIdToKeySessionPromise:a,mediaKeySessions:l}=this;let c=a[o];for(let h=0;h<l.length;h++){const e=l[h],s=e.decryptdata;if(!s.keyId)continue;const n=LI.hexDump(s.keyId);if(o===n||-1!==s.uri.replace(/-/g,"").indexOf(o)){if(c=a[n],s.pssh)break;delete a[n],s.pssh=new Uint8Array(i),s.keyId=r,c=a[o]=c.then((()=>this.generateRequestWithPreferredKeySession(e,t,i,"encrypted-event-key-match")));break}}c||(c=a[o]=this.getKeySystemSelectionPromise([n]).then((({keySystem:e,mediaKeys:s})=>{var n;this.throwIfDestroyed();const a=new dD("ISO-23001-7",o,null!=(n=rI(e))?n:"");return a.pssh=new Uint8Array(i),a.keyId=r,this.attemptSetMediaKeys(e,s).then((()=>{this.throwIfDestroyed();const r=this.createMediaKeySessionContext({decryptdata:a,keySystem:e,mediaKeys:s});return this.generateRequestWithPreferredKeySession(r,t,i,"encrypted-event-no-match")}))}))),c.catch((e=>this.handleError(e)))}_onWaitingForKey(e){this.log(`"${e.type}" event`)}attemptSetMediaKeys(e,t){const i=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const s=Promise.all(i).then((()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)}));return this.setMediaKeysQueue.push(s),s.then((()=>{this.log(`Media-keys set for "${e}"`),i.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter((e=>-1===i.indexOf(e)))}))}generateRequestWithPreferredKeySession(e,t,i,s){var r,n;const o=null==(r=this.config.drmSystems)||null==(n=r[e.keySystem])?void 0:n.generateRequest;if(o)try{const s=o.call(this.hls,t,i,e);if(!s)throw new Error("Invalid response from configured generateRequest filter");t=s.initDataType,i=e.decryptdata.pssh=s.initData?new Uint8Array(s.initData):null}catch(p){var a;if(this.warn(p.message),null!=(a=this.hls)&&a.config.debug)throw p}if(null===i)return this.log(`Skipping key-session request for "${s}" (no initData)`),Promise.resolve(e);const l=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${s}": ${l} (init data type: ${t} length: ${i?i.byteLength:null})`);const c=new xN,d=e._onmessage=t=>{const i=e.mediaKeysSession;if(!i)return void c.emit("error",new Error("invalid state"));const{messageType:s,message:r}=t;this.log(`"${s}" message event for session "${i.sessionId}" message size: ${r.byteLength}`),"license-request"===s||"license-renewal"===s?this.renewLicense(e,r).catch((e=>{this.handleError(e),c.emit("error",e)})):"license-release"===s?e.keySystem===JR.FAIRPLAY&&(this.updateKeySession(e,ZR("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${s}"`)},h=e._onkeystatuseschange=t=>{const i=e.mediaKeysSession;if(!i)return void c.emit("error",new Error("invalid state"));this.onKeyStatusChange(e);const s=e.keyStatus;c.emit("keyStatus",s),"expired"===s&&(this.warn(`${e.keySystem} expired for key ${l}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",d),e.mediaKeysSession.addEventListener("keystatuseschange",h);const u=new Promise(((e,t)=>{c.on("error",t),c.on("keyStatus",(i=>{i.startsWith("usable")?e():"output-restricted"===i?t(new XF({type:xR.KEY_SYSTEM_ERROR,details:kR.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===i?t(new XF({type:xR.KEY_SYSTEM_ERROR,details:kR.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${i}"`)):"expired"===i?t(new Error("key expired while generating request")):this.warn(`unhandled key status change "${i}"`)}))}));return e.mediaKeysSession.generateRequest(t,i).then((()=>{var t;this.log(`Request generated for key-session "${null==(t=e.mediaKeysSession)?void 0:t.sessionId}" keyId: ${l}`)})).catch((e=>{throw new XF({type:xR.KEY_SYSTEM_ERROR,details:kR.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},`Error generating key-session request: ${e}`)})).then((()=>u)).catch((t=>{throw c.removeAllListeners(),this.removeSession(e),t})).then((()=>(c.removeAllListeners(),e)))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach(((t,i)=>{this.log(`key status change "${t}" for keyStatuses keyId: ${LI.hexDump("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))} session keyId: ${LI.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t}))}fetchServerCertificate(e){const t=this.config,i=t.loader,s=new i(t),r=this.getServerCertificateUrl(e);return r?(this.log(`Fetching server certificate for "${e}"`),new Promise(((i,n)=>{const o={responseType:"arraybuffer",url:r},a=t.certLoadPolicy.default,l={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,s,r)=>{i(e.data)},onError:(t,i,s,a)=>{n(new XF({type:xR.KEY_SYSTEM_ERROR,details:kR.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:s,response:mR({url:o.url,data:void 0},t)},`"${e}" certificate request failed (${r}). Status: ${t.code} (${t.text})`))},onTimeout:(t,i,s)=>{n(new XF({type:xR.KEY_SYSTEM_ERROR,details:kR.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:s,response:{url:o.url,data:void 0}},`"${e}" certificate request timed out (${r})`))},onAbort:(e,t,i)=>{n(new Error("aborted"))}};s.load(o,l,c)}))):Promise.resolve()}setMediaKeysServerCertificate(e,t,i){return new Promise(((s,r)=>{e.setServerCertificate(i).then((r=>{this.log(`setServerCertificate ${r?"success":"not supported by CDM"} (${null==i?void 0:i.byteLength}) on "${t}"`),s(e)})).catch((e=>{r(new XF({type:xR.KEY_SYSTEM_ERROR,details:kR.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))}))}))}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then((t=>this.updateKeySession(e,new Uint8Array(t)).catch((e=>{throw new XF({type:xR.KEY_SYSTEM_ERROR,details:kR.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))))}unpackPlayReadyKeyMessage(e,t){const i=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!i.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const s=(new DOMParser).parseFromString(i,"application/xml"),r=s.querySelectorAll("HttpHeader");if(r.length>0){let t;for(let i=0,s=r.length;i<s;i++){var n,o;t=r[i];const s=null==(n=t.querySelector("name"))?void 0:n.textContent,a=null==(o=t.querySelector("value"))?void 0:o.textContent;s&&a&&e.setRequestHeader(s,a)}}const a=s.querySelector("Challenge"),l=null==a?void 0:a.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return ZR(atob(l))}setupLicenseXHR(e,t,i,s){const r=this.config.licenseXhrSetup;return r?Promise.resolve().then((()=>{if(!i.decryptdata)throw new Error("Key removed");return r.call(this.hls,e,t,i,s)})).catch((n=>{if(!i.decryptdata)throw n;return e.open("POST",t,!0),r.call(this.hls,e,t,i,s)})).then((i=>{e.readyState||e.open("POST",t,!0);const r=i||s;return{xhr:e,licenseChallenge:r}})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:s}))}requestLicense(e,t){const i=this.config.keyLoadPolicy.default;return new Promise(((s,r)=>{const n=this.getLicenseServerUrl(e.keySystem);this.log(`Sending license request to URL: ${n}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return r(new Error("invalid state"));if(4===o.readyState)if(200===o.status){this._requestLicenseFailureCount=0;let t=o.response;this.log(`License received ${t instanceof ArrayBuffer?t.byteLength:t}`);const i=this.config.licenseResponseCallback;if(i)try{t=i.call(this.hls,o,n,e)}catch(a){this.error(a)}s(t)}else{const a=i.errorRetry,l=a?a.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||o.status>=400&&o.status<500)r(new XF({type:xR.KEY_SYSTEM_ERROR,details:kR.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:n,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${n}). Status: ${o.status} (${o.statusText})`));else{const i=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${i} attempts left`),this.requestLicense(e,t).then(s,r)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,n,e,t).then((({xhr:t,licenseChallenge:i})=>{e.keySystem==JR.PLAYREADY&&(i=this.unpackPlayReadyKeyMessage(t,i)),t.send(i)}))}))}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const i=t.media;this.media=i,i.addEventListener("encrypted",this.onMediaEncrypted),i.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},dD.clearKeyUriToKeyIdMap();const i=t.length;qF.CDMCleanupPromise=Promise.all(t.map((e=>this.removeSession(e))).concat(null==e?void 0:e.setMediaKeys(null).catch((e=>{this.log(`Could not clear media keys: ${e}`)})))).then((()=>{i&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)})).catch((e=>{this.log(`Could not close sessions and clear media keys: ${e}`)}))}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(t&&this.config.emeEnabled&&!this.keyFormatPromise){const e=t.reduce(((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e)),[]);this.log(`Selecting key-system from session-keys ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:i}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(e);return s>-1&&this.mediaKeySessions.splice(s,1),t.remove().catch((e=>{this.log(`Could not remove session: ${e}`)})).then((()=>t.close())).catch((e=>{this.log(`Could not close session: ${e}`)}))}}}qF.CDMCleanupPromise=void 0;class XF extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}var ZF,QF,JF;(function(e){e["MANIFEST"]="m",e["AUDIO"]="a",e["VIDEO"]="v",e["MUXED"]="av",e["INIT"]="i",e["CAPTION"]="c",e["TIMED_TEXT"]="tt",e["KEY"]="k",e["OTHER"]="o"})(ZF||(ZF={})),function(e){e["DASH"]="d",e["HLS"]="h",e["SMOOTH"]="s",e["OTHER"]="o"}(QF||(QF={})),function(e){e["OBJECT"]="CMCD-Object",e["REQUEST"]="CMCD-Request",e["SESSION"]="CMCD-Session",e["STATUS"]="CMCD-Status"}(JF||(JF={}));const eB={[JF.OBJECT]:["br","d","ot","tb"],[JF.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[JF.SESSION]:["cid","pr","sf","sid","st","v"],[JF.STATUS]:["bs","rtp"]};class tB{constructor(e,t){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map((e=>e instanceof tB?e:new tB(e)))),this.value=e,this.params=t}}class iB{constructor(e){this.description=void 0,this.description=e}}const sB="Dict";function rB(e){return Array.isArray(e)?JSON.stringify(e):e instanceof Map?"Map{}":e instanceof Set?"Set{}":"object"===typeof e?JSON.stringify(e):String(e)}function nB(e,t,i,s){return new Error(`failed to ${e} "${rB(t)}" as ${i}`,{cause:s})}const oB="Bare Item",aB="Boolean",lB="Byte Sequence",cB="Decimal",dB="Integer";function hB(e){return e<-999999999999999||999999999999999<e}const uB=/[\x00-\x1f\x7f]+/,pB="Token",fB="Key";function gB(e,t,i){return nB("serialize",e,t,i)}function mB(e){if("boolean"!==typeof e)throw gB(e,aB);return e?"?1":"?0"}function vB(e){return btoa(String.fromCharCode(...e))}function yB(e){if(!1===ArrayBuffer.isView(e))throw gB(e,lB);return`:${vB(e)}:`}function bB(e){if(hB(e))throw gB(e,dB);return e.toString()}function wB(e){return`@${bB(e.getTime()/1e3)}`}function EB(e,t){if(e<0)return-EB(-e,t);const i=Math.pow(10,t),s=Math.abs(e*i%1-.5)<Number.EPSILON;if(s){const t=Math.floor(e*i);return(t%2===0?t:t+1)/i}return Math.round(e*i)/i}function TB(e){const t=EB(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw gB(e,cB);const i=t.toString();return i.includes(".")?i:`${i}.0`}const SB="String";function AB(e){if(uB.test(e))throw gB(e,SB);return`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function xB(e){return e.description||e.toString().slice(7,-1)}function kB(e){const t=xB(e);if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t))throw gB(t,pB);return t}function LB(e){switch(typeof e){case"number":if(!ER(e))throw gB(e,oB);return Number.isInteger(e)?bB(e):TB(e);case"string":return AB(e);case"symbol":return kB(e);case"boolean":return mB(e);case"object":if(e instanceof Date)return wB(e);if(e instanceof Uint8Array)return yB(e);if(e instanceof iB)return kB(e);default:throw gB(e,oB)}}function CB(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw gB(e,fB);return e}function _B(e){return null==e?"":Object.entries(e).map((([e,t])=>!0===t?`;${CB(e)}`:`;${CB(e)}=${LB(t)}`)).join("")}function RB(e){return e instanceof tB?`${LB(e.value)}${_B(e.params)}`:LB(e)}function IB(e){return`(${e.value.map(RB).join(" ")})${_B(e.params)}`}function DB(e,t={whitespace:!0}){if("object"!==typeof e)throw gB(e,sB);const i=e instanceof Map?e.entries():Object.entries(e),s=null!=t&&t.whitespace?" ":"";return Array.from(i).map((([e,t])=>{t instanceof tB===!1&&(t=new tB(t));let i=CB(e);return!0===t.value?i+=_B(t.params):(i+="=",Array.isArray(t.value)?i+=IB(t):i+=RB(t)),i})).join(`,${s}`)}function PB(e,t){return DB(e,t)}const MB=e=>"ot"===e||"sf"===e||"st"===e,OB=e=>"number"===typeof e?ER(e):null!=e&&""!==e&&!1!==e;function NB(e,t){const i=new URL(e),s=new URL(t);if(i.origin!==s.origin)return e;const r=i.pathname.split("/").slice(1),n=s.pathname.split("/").slice(1,-1);while(r[0]===n[0])r.shift(),n.shift();while(n.length)n.shift(),r.unshift("..");return r.join("/")}function FB(){try{return crypto.randomUUID()}catch(e){try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(t){let e=(new Date).getTime();const i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)}));return i}}}const BB=e=>Math.round(e),$B=(e,t)=>(null!=t&&t.baseUrl&&(e=NB(e,t.baseUrl)),encodeURIComponent(e)),UB=e=>100*BB(e/100),GB={br:BB,d:BB,bl:UB,dl:UB,mtp:UB,nor:$B,rtp:UB,tb:BB};function HB(e,t){const i={};if(null==e||"object"!==typeof e)return i;const s=Object.keys(e).sort(),r=wR({},GB,null==t?void 0:t.formatters),n=null==t?void 0:t.filter;return s.forEach((s=>{if(null!=n&&n(s))return;let o=e[s];const a=r[s];a&&(o=a(o,t)),"v"===s&&1===o||"pr"==s&&1===o||OB(o)&&(MB(s)&&"string"===typeof o&&(o=new iB(o)),i[s]=o)})),i}function jB(e,t={}){return e?PB(HB(e,t),wR({whitespace:!1},t)):""}function zB(e,t={}){if(!e)return{};const i=Object.entries(e),s=Object.entries(eB).concat(Object.entries((null==t?void 0:t.customHeaderMap)||{})),r=i.reduce(((e,t)=>{var i;const[r,n]=t,o=(null==(i=s.find((e=>e[1].includes(r))))?void 0:i[0])||JF.REQUEST;return null!=e[o]||(e[o]={}),e[o][r]=n,e}),{});return Object.entries(r).reduce(((e,[i,s])=>(e[i]=jB(s,t),e)),{})}function VB(e,t,i){return wR(e,zB(t,i))}const YB="CMCD";function WB(e,t={}){if(!e)return"";const i=jB(e,t);return`${YB}=${encodeURIComponent(i)}`}const KB=/CMCD=[^&#]+/;function qB(e,t,i){const s=WB(t,i);if(!s)return e;if(KB.test(e))return e.replace(KB,s);const r=e.includes("?")?"&":"?";return`${e}${r}${s}`}class XB{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:ZF.MANIFEST,su:!this.initialized})}catch(t){PR.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=e=>{try{const t=e.frag,i=this.hls.levels[t.level],s=this.getObjectType(t),r={d:1e3*t.duration,ot:s};s!==ZF.VIDEO&&s!==ZF.AUDIO&&s!=ZF.MUXED||(r.br=i.bitrate/1e3,r.tb=this.getTopBandwidth(s)/1e3,r.bl=this.getBufferLength(s)),this.apply(e,r)}catch(t){PR.warn("Could not generate segment CMCD data.",t)}},this.hls=e;const t=this.config=e.config,{cmcd:i}=t;null!=i&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||FB(),this.cid=i.contentId,this.useHeaders=!0===i.useHeaders,this.includeKeys=i.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(AR.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(AR.MEDIA_DETACHED,this.onMediaDetached,this),e.on(AR.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(AR.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(AR.MEDIA_DETACHED,this.onMediaDetached,this),e.off(AR.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var i,s;this.audioBuffer=null==(i=t.tracks.audio)?void 0:i.buffer,this.videoBuffer=null==(s=t.tracks.video)?void 0:s.buffer}createData(){var e;return{v:1,sf:QF.HLS,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){wR(t,this.createData());const i=t.ot===ZF.INIT||t.ot===ZF.VIDEO||t.ot===ZF.MUXED;this.starved&&i&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);const{includeKeys:s}=this;s&&(t=Object.keys(t).reduce(((e,i)=>(s.includes(i)&&(e[i]=t[i]),e)),{})),this.useHeaders?(e.headers||(e.headers={}),VB(e.headers,t)):e.url=qB(e.url,t)}getObjectType(e){const{type:t}=e;return"subtitle"===t?ZF.TIMED_TEXT:"initSegment"===e.sn?ZF.INIT:"audio"===t?ZF.AUDIO:"main"===t?this.hls.audioTracks.length?ZF.VIDEO:ZF.MUXED:void 0}getTopBandwidth(e){let t,i=0;const s=this.hls;if(e===ZF.AUDIO)t=s.audioTracks;else{const e=s.maxAutoLevel,i=e>-1?e+1:s.levels.length;t=s.levels.slice(0,i)}for(const r of t)r.bitrate>i&&(i=r.bitrate);return i>0?i:NaN}getBufferLength(e){const t=this.hls.media,i=e===ZF.AUDIO?this.audioBuffer:this.videoBuffer;if(!i||!t)return NaN;const s=xM.bufferInfo(i,t.currentTime,this.config.maxBufferHole);return 1e3*s.len}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,i=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new i(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,i,s){t(e),this.loader.load(e,i,s)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,i=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new i(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,i,s){t(e),this.loader.load(e,i,s)}}}}const ZB=3e5;class QB{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=PR.log.bind(PR,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.on(AR.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(AR.MANIFEST_PARSED,this.onManifestParsed,this),e.on(AR.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.off(AR.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(AR.MANIFEST_PARSED,this.onManifestParsed,this),e.off(AR.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter((t=>t!==e)))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:i}=t;null!==i&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:i}=t;if((null==i?void 0:i.action)===qP.SendAlternateToPenaltyBox&&i.flags===XP.MoveAllAlternatesMatchingHost){const e=this.levels;let s=this.pathwayPriority,r=this.pathwayId;if(t.context){const{groupId:i,pathwayId:s,type:n}=t.context;i&&e?r=this.getPathwayForGroupId(i,n,r):s&&(r=s)}r in this.penalizedPathways||(this.penalizedPathways[r]=performance.now()),!s&&e&&(s=e.reduce(((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e)),[])),s&&s.length>1&&(this.updatePathwayPriority(s),i.resolved=this.pathwayId!==r),i.resolved||PR.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${r} levels: ${e?e.length:e} priorities: ${JSON.stringify(s)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const i=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${i}"`),t=this.getLevelsForPathway(i),this.pathwayId=i}return t.length!==e.length?(this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t):e}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter((t=>e===t.pathwayId))}updatePathwayPriority(e){let t;this.pathwayPriority=e;const i=this.penalizedPathways,s=performance.now();Object.keys(i).forEach((e=>{s-i[e]>ZB&&delete i[e]}));for(let r=0;r<e.length;r++){const s=e[r];if(s in i)continue;if(s===this.pathwayId)return;const n=this.hls.nextLoadLevel,o=this.hls.levels[n];if(t=this.getLevelsForPathway(s),t.length>0){this.log(`Setting Pathway to "${s}"`),this.pathwayId=s,OP(t),this.hls.trigger(AR.LEVELS_UPDATED,{levels:t});const e=this.hls.levels[n];o&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==o.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==o.bitrate&&this.log(`Unstable Pathways change from bitrate ${o.bitrate} to ${e.bitrate}`),this.hls.nextLoadLevel=n);break}}}getPathwayForGroupId(e,t,i){const s=this.getLevelsForPathway(i).concat(this.levels||[]);for(let r=0;r<s.length;r++)if(t===WD.AUDIO_TRACK&&s[r].hasAudioGroup(e)||t===WD.SUBTITLE_TRACK&&s[r].hasSubtitleGroup(e))return s[r].pathwayId;return i}clonePathways(e){const t=this.levels;if(!t)return;const i={},s={};e.forEach((e=>{const{ID:r,"BASE-ID":n,"URI-REPLACEMENT":o}=e;if(t.some((e=>e.pathwayId===r)))return;const a=this.getLevelsForPathway(n).map((e=>{const t=new NR(e.attrs);t["PATHWAY-ID"]=r;const n=t.AUDIO&&`${t.AUDIO}_clone_${r}`,a=t.SUBTITLES&&`${t.SUBTITLES}_clone_${r}`;n&&(i[t.AUDIO]=n,t.AUDIO=n),a&&(s[t.SUBTITLES]=a,t.SUBTITLES=a);const l=e$(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",o),c=new EP({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:l,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(let i=1;i<e.audioGroups.length;i++)c.addGroupId("audio",`${e.audioGroups[i]}_clone_${r}`);if(e.subtitleGroups)for(let i=1;i<e.subtitleGroups.length;i++)c.addGroupId("text",`${e.subtitleGroups[i]}_clone_${r}`);return c}));t.push(...a),JB(this.audioTracks,i,o,r),JB(this.subtitleTracks,s,o,r)}))}loadSteeringManifest(e){const t=this.hls.config,i=t.loader;let s;this.loader&&this.loader.destroy(),this.loader=new i(t);try{s=new self.URL(e)}catch(c){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${e}`)}if("data:"!==s.protocol){const e=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);s.searchParams.set("_HLS_pathway",this.pathwayId),s.searchParams.set("_HLS_throughput",""+e)}const r={responseType:"json",url:s.href},n=t.steeringManifestLoadPolicy.default,o=n.errorRetry||n.timeoutRetry||{},a={loadPolicy:n,timeout:n.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},l={onSuccess:(e,t,i,r)=>{this.log(`Loaded steering manifest: "${s}"`);const n=e.data;if(1!==n.VERSION)return void this.log(`Steering VERSION ${n.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=n.TTL;const{"RELOAD-URI":o,"PATHWAY-CLONES":a,"PATHWAY-PRIORITY":l}=n;if(o)try{this.uri=new self.URL(o,s).href}catch(c){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${o}`)}this.scheduleRefresh(this.uri||i.url),a&&this.clonePathways(a);const d={steeringManifest:n,url:s.toString()};this.hls.trigger(AR.STEERING_MANIFEST_LOADED,d),l&&this.updatePathwayPriority(l)},onError:(e,t,i,s)=>{if(this.log(`Error loading steering manifest: ${e.code} ${e.text} (${t.url})`),this.stopLoad(),410===e.code)return this.enabled=!1,void this.log(`Steering manifest ${t.url} no longer available`);let r=1e3*this.timeToLoad;if(429!==e.code)this.scheduleRefresh(this.uri||t.url,r);else{const e=this.loader;if("function"===typeof(null==e?void 0:e.getResponseHeader)){const t=e.getResponseHeader("Retry-After");t&&(r=1e3*parseFloat(t))}this.log(`Steering manifest ${t.url} rate limited`)}},onTimeout:(e,t,i)=>{this.log(`Timeout loading steering manifest (${t.url})`),this.scheduleRefresh(this.uri||t.url)}};this.log(`Requesting steering manifest: ${s}`),this.loader.load(r,a,l)}scheduleRefresh(e,t=1e3*this.timeToLoad){this.clearTimeout(),this.reloadTimer=self.setTimeout((()=>{var t;const i=null==(t=this.hls)?void 0:t.media;!i||i.ended?this.scheduleRefresh(e,1e3*this.timeToLoad):this.loadSteeringManifest(e)}),t)}}function JB(e,t,i,s){e&&Object.keys(t).forEach((r=>{const n=e.filter((e=>e.groupId===r)).map((e=>{const n=wR({},e);return n.details=void 0,n.attrs=new NR(n.attrs),n.url=n.attrs.URI=e$(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",i),n.groupId=n.attrs["GROUP-ID"]=t[r],n.attrs["PATHWAY-ID"]=s,n}));e.push(...n)}))}function e$(e,t,i,s){const{HOST:r,PARAMS:n,[i]:o}=s;let a;t&&(a=null==o?void 0:o[t],a&&(e=a));const l=new self.URL(e);return r&&!a&&(l.host=r),n&&Object.keys(n).sort().forEach((e=>{e&&l.searchParams.set(e,n[e])})),l.href}const t$=/^age:\s*[\d.]+\s*$/im;class i${constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new UR,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const i=this.loader=new self.XMLHttpRequest,s=this.stats;s.loading.first=0,s.loaded=0,s.aborted=!1;const r=this.xhrSetup;r?Promise.resolve().then((()=>{if(this.loader===i&&!this.stats.aborted)return r(i,t.url)})).catch((e=>{if(this.loader===i&&!this.stats.aborted)return i.open("GET",t.url,!0),r(i,t.url)})).then((()=>{this.loader!==i||this.stats.aborted||this.openAndSendXhr(i,t,e)})).catch((e=>{this.callbacks.onError({code:i.status,text:e.message},t,i,s)})):this.openAndSendXhr(i,t,e)}openAndSendXhr(e,t,i){e.readyState||e.open("GET",t.url,!0);const s=t.headers,{maxTimeToFirstByteMs:r,maxLoadTimeMs:n}=i.loadPolicy;if(s)for(const o in s)e.setRequestHeader(o,s[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),i.timeout=r&&ER(r)?r:n,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:i}=this;if(!e||!t)return;const s=t.readyState,r=this.config;if(!i.aborted&&s>=2&&(0===i.loading.first&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),r.timeout!==r.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),r.timeout=r.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),4===s)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const s=t.status,n="text"!==t.responseType;if(s>=200&&s<300&&(n&&t.response||null!==t.responseText)){i.loading.end=Math.max(self.performance.now(),i.loading.first);const r=n?t.response:t.responseText,o="arraybuffer"===t.responseType?r.byteLength:r.length;if(i.loaded=i.total=o,i.bwEstimate=8e3*i.total/(i.loading.end-i.loading.first),!this.callbacks)return;const a=this.callbacks.onProgress;if(a&&a(i,e,r,t),!this.callbacks)return;const l={url:t.responseURL,data:r,code:s};this.callbacks.onSuccess(l,i,e,t)}else{const n=r.loadPolicy.errorRetry,o=i.retry,a={url:e.url,data:void 0,code:s};UP(n,o,!1,a)?this.retry(n):(PR.error(`${s} while loading ${e.url}`),this.callbacks.onError({code:s,text:t.statusText},e,t,i))}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(UP(e,t,!0))this.retry(e);else{var i;PR.warn(`timeout while loading ${null==(i=this.context)?void 0:i.url}`);const e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:i}=this;this.retryDelay=BP(e,i.retry),i.retry++,PR.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${null==t?void 0:t.url}, retrying ${i.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&t$.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function s$(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(N$){}return!1}const r$=/(\d+)-(\d+)\/(\d+)/;class n${constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||c$,this.controller=new self.AbortController,this.stats=new UR}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,i){const s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();const r=o$(e,this.controller.signal),n=i.onProgress,o="arraybuffer"===e.responseType,a=o?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:c}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=i,this.request=this.fetchSetup(e,r),self.clearTimeout(this.requestTimeout),t.timeout=l&&ER(l)?l:c,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),i.onTimeout(s,e,this.response)}),t.timeout),self.fetch(this.request).then((r=>{this.response=this.loader=r;const a=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=c,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),i.onTimeout(s,e,this.response)}),c-(a-s.loading.start)),!r.ok){const{status:e,statusText:t}=r;throw new d$(t||"fetch, bad network response",e,r)}return s.loading.first=a,s.total=l$(r.headers)||s.total,n&&ER(t.highWaterMark)?this.loadProgressively(r,s,e,t.highWaterMark,n):o?r.arrayBuffer():"json"===e.responseType?r.json():r.text()})).then((r=>{const o=this.response;if(!o)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const l=r[a];l&&(s.loaded=s.total=l);const c={url:o.url,data:r,code:o.status};n&&!ER(t.highWaterMark)&&n(s,e,r,o),i.onSuccess(c,s,e,o)})).catch((t=>{if(self.clearTimeout(this.requestTimeout),s.aborted)return;const r=t&&t.code||0,n=t?t.message:null;i.onError({code:r,text:n},e,t?t.details:null,s)}))}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,i,s=0,r){const n=new XM,o=e.body.getReader(),a=()=>o.read().then((o=>{if(o.done)return n.dataLength&&r(t,i,n.flush(),e),Promise.resolve(new ArrayBuffer(0));const l=o.value,c=l.length;return t.loaded+=c,c<s||n.dataLength?(n.push(l),n.dataLength>=s&&r(t,i,n.flush(),e)):r(t,i,l,e),a()})).catch((()=>Promise.reject()));return a()}}function o$(e,t){const i={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(wR({},e.headers))};return e.rangeEnd&&i.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),i}function a$(e){const t=r$.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}function l$(e){const t=e.get("Content-Range");if(t){const e=a$(t);if(ER(e))return e}const i=e.get("Content-Length");if(i)return parseInt(i)}function c$(e,t){return new self.Request(e.url,t)}class d$ extends Error{constructor(e,t,i){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=i}}const h$=/\s/,u$={newCue(e,t,i,s){const r=[];let n,o,a,l,c;const d=self.VTTCue||self.TextTrackCue;for(let u=0;u<s.rows.length;u++)if(n=s.rows[u],a=!0,l=0,c="",!n.isEmpty()){var h;for(let e=0;e<n.chars.length;e++)h$.test(n.chars[e].uchar)&&a?l++:(c+=n.chars[e].uchar,a=!1);n.cueStartTime=t,t===i&&(i+=1e-4),l>=16?l--:l++;const s=vF(c.trim()),p=SF(t,i,s);null!=e&&null!=(h=e.cues)&&h.getCueById(p)||(o=new d(t,i,s),o.id=p,o.line=u+1,o.align="left",o.position=10+Math.min(80,10*Math.floor(8*l/32)),r.push(o))}return e&&r.length&&(r.sort(((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line)),r.forEach((t=>JD(e,t)))),r}},p$={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},f$=mR(mR({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:i$,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:yM,bufferController:$N,capLevelController:YF,errorController:ZP,fpsController:WF,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:oI,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:p$},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},g$()),{},{subtitleStreamController:MN,subtitleTrackController:NN,timelineController:GF,audioStreamController:IN,audioTrackController:DN,emeController:qF,cmcdController:XB,contentSteeringController:QB});function g$(){return{cueHandler:u$,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function m$(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const i=v$(e),s=["manifest","level","frag"],r=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return s.forEach((e=>{const s=`${"level"===e?"playlist":e}LoadPolicy`,n=void 0===t[s],o=[];r.forEach((r=>{const a=`${e}Loading${r}`,l=t[a];if(void 0!==l&&n){o.push(a);const e=i[s].default;switch(t[s]={default:e},r){case"TimeOut":e.maxLoadTimeMs=l,e.maxTimeToFirstByteMs=l;break;case"MaxRetry":e.errorRetry.maxNumRetry=l,e.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":e.errorRetry.retryDelayMs=l,e.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":e.errorRetry.maxRetryDelayMs=l,e.timeoutRetry.maxRetryDelayMs=l;break}}})),o.length&&PR.warn(`hls.js config: "${o.join('", "')}" setting(s) are deprecated, use "${s}": ${JSON.stringify(t[s])}`)})),mR(mR({},i),t)}function v$(e){return e&&"object"===typeof e?Array.isArray(e)?e.map(v$):Object.keys(e).reduce(((t,i)=>(t[i]=v$(e[i]),t)),{}):e}function y$(e){const t=e.loader;if(t!==n$&&t!==i$)PR.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1;else{const t=s$();t&&(e.loader=n$,e.progressive=!0,e.enableSoftwareAES=!0,PR.log("[config]: Progressive streaming enabled, using FetchLoader"))}}let b$;class w$ extends QP{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.on(AR.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(AR.LEVEL_LOADED,this.onLevelLoaded,this),e.on(AR.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(AR.FRAG_BUFFERED,this.onFragBuffered,this),e.on(AR.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.off(AR.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(AR.LEVEL_LOADED,this.onLevelLoaded,this),e.off(AR.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(AR.FRAG_BUFFERED,this.onFragBuffered,this),e.off(AR.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){const e=this._levels;e.forEach((e=>{e.loadError=0,e.fragmentError=0})),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const i=this.hls.config.preferManagedMediaSource,s=[],r={},n={};let o=!1,a=!1,l=!1;t.levels.forEach((e=>{var t,c;const d=e.attrs;let{audioCodec:h,videoCodec:u}=e;-1!==(null==(t=h)?void 0:t.indexOf("mp4a.40.34"))&&(b$||(b$=/chrome|firefox/i.test(navigator.userAgent)),b$&&(e.audioCodec=h=void 0)),h&&(e.audioCodec=h=RD(h,i)),0===(null==(c=u)?void 0:c.indexOf("avc1"))&&(u=e.videoCodec=DD(u));const{width:p,height:f,unknownCodecs:g}=e;if(o||(o=!(!p||!f)),a||(a=!!u),l||(l=!!h),null!=g&&g.length||h&&!TD(h,"audio",i)||u&&!TD(u,"video",i))return;const{CODECS:m,"FRAME-RATE":v,"HDCP-LEVEL":y,"PATHWAY-ID":b,RESOLUTION:w,"VIDEO-RANGE":E}=d,T=`${b||"."}-`,S=`${T}${e.bitrate}-${w}-${v}-${m}-${E}-${y}`;if(r[S])if(r[S].uri===e.url||e.attrs["PATHWAY-ID"])r[S].addGroupId("audio",d.AUDIO),r[S].addGroupId("text",d.SUBTITLES);else{const t=n[S]+=1;e.attrs["PATHWAY-ID"]=new Array(t+1).join(".");const i=new EP(e);r[S]=i,s.push(i)}else{const t=new EP(e);r[S]=t,n[S]=1,s.push(t)}})),this.filterAndSortMediaOptions(s,t,o,a,l)}filterAndSortMediaOptions(e,t,i,s,r){let n=[],o=[],a=e;if((i||s)&&r&&(a=a.filter((({videoCodec:e,videoRange:t,width:i,height:s})=>(!!e||!(!i||!s))&&vP(t)))),0===a.length)return void Promise.resolve().then((()=>{if(this.hls){t.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(t.levels[0].attrs)}`);const e=new Error("no level with compatible codecs found in manifest");this.hls.trigger(AR.ERROR,{type:xR.MEDIA_ERROR,details:kR.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:e,reason:e.message})}}));if(t.audioTracks){const{preferManagedMediaSource:e}=this.hls.config;n=t.audioTracks.filter((t=>!t.audioCodec||TD(t.audioCodec,"audio",e))),E$(n)}t.subtitles&&(o=t.subtitles,E$(o));const l=a.slice(0);a.sort(((e,t)=>{if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(i&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return mP.indexOf(e.videoRange)-mP.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){const i=xD(e.videoCodec),s=xD(t.videoCodec);if(i!==s)return s-i}if(e.uri===t.uri&&e.codecSet!==t.codecSet){const i=kD(e.codecSet),s=kD(t.codecSet);if(i!==s)return s-i}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0}));let c=l[0];if(this.steering&&(a=this.steering.filterParsedLevels(a),a.length!==l.length))for(let p=0;p<l.length;p++)if(l[p].pathwayId===a[0].pathwayId){c=l[p];break}this._levels=a;for(let p=0;p<a.length;p++)if(a[p]===c){var d;this._firstLevel=p;const e=c.bitrate,t=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${a.length} level(s) found, first bitrate: ${e}`),void 0===(null==(d=this.hls.userConfig)?void 0:d.abrEwmaDefaultEstimate)){const i=Math.min(e,this.hls.config.abrEwmaDefaultEstimateMax);i>t&&t===f$.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=i)}break}const h=r&&!s,u={levels:a,audioTracks:n,subtitleTracks:o,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:r,video:s,altAudio:!h&&n.some((e=>!!e.url))};this.hls.trigger(AR.MANIFEST_PARSED,u),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return 0===this._levels.length?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){const i=new Error("invalid level idx"),s=e<0;if(this.hls.trigger(AR.ERROR,{type:xR.OTHER_ERROR,details:kR.LEVEL_SWITCH_ERROR,level:e,fatal:s,error:i,reason:i.message}),s)return;e=Math.min(e,t.length-1)}const i=this.currentLevelIndex,s=this.currentLevel,r=s?s.attrs["PATHWAY-ID"]:void 0,n=t[e],o=n.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=n,i===e&&n.details&&s&&r===o)return;this.log(`Switching to level ${e} (${n.height?n.height+"p ":""}${n.videoRange?n.videoRange+" ":""}${n.codecSet?n.codecSet+" ":""}@${n.bitrate})${o?" with Pathway "+o:""} from level ${i}${r?" with Pathway "+r:""}`);const a={level:e,attrs:n.attrs,details:n.details,bitrate:n.bitrate,averageBitrate:n.averageBitrate,maxBitrate:n.maxBitrate,realBitrate:n.realBitrate,width:n.width,height:n.height,codecSet:n.codecSet,audioCodec:n.audioCodec,videoCodec:n.videoCodec,audioGroups:n.audioGroups,subtitleGroups:n.subtitleGroups,loaded:n.loaded,loadError:n.loadError,fragmentError:n.fragmentError,name:n.name,id:n.id,uri:n.uri,url:n.url,urlId:0,audioGroupIds:n.audioGroupIds,textGroupIds:n.textGroupIds};this.hls.trigger(AR.LEVEL_SWITCHING,a);const l=n.details;if(!l||l.live){const e=this.switchParams(n.uri,null==s?void 0:s.details,l);this.loadPlaylist(e)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){const e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){!t.fatal&&t.context&&t.context.type===WD.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(void 0!==t&&t.type===KD.MAIN){const e=t.elementaryStreams;if(!Object.keys(e).some((t=>!!e[t])))return;const i=this._levels[t.level];null!=i&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,t){var i;const{level:s,details:r}=t,n=this._levels[s];var o;if(!n)return this.warn(`Invalid level index ${s}`),void(null!=(o=t.deliveryDirectives)&&o.skip&&(r.deltaUpdateFailed=!0));s===this.currentLevelIndex?(0===n.fragmentError&&(n.loadError=0),this.playlistLoaded(s,t,n.details)):null!=(i=t.deliveryDirectives)&&i.skip&&(r.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,i=this.currentLevel;if(i&&this.shouldLoadPlaylist(i)){let r=i.uri;if(e)try{r=e.addDirectives(r)}catch(s){this.warn(`Could not construct new URL with HLS Delivery Directives: ${s}`)}const n=i.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${void 0!==(null==e?void 0:e.msn)?" at sn "+e.msn+" part "+e.part:""} with${n?" Pathway "+n:""} ${r}`),this.clearTimer(),this.hls.trigger(AR.LEVEL_LOADING,{url:r,level:t,pathwayId:i.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;const i=this._levels.filter(((t,i)=>i!==e||(this.steering&&this.steering.removeLevel(t),t===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,t.details&&t.details.fragments.forEach((e=>e.level=-1))),!1)));OP(i),this._levels=i,this.currentLevelIndex>-1&&null!=(t=this.currentLevel)&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(AR.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:i}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(AR.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:i}))}}function E$(e){const t={};e.forEach((e=>{const i=e.groupId||"";e.id=t[i]=t[i]||0,t[i]++}))}class T${constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const i in this.keyUriToKeyInfo){const s=this.keyUriToKeyInfo[i].loader;if(s){var t;if(e&&e!==(null==(t=s.context)?void 0:t.frag.type))return;s.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=kR.KEY_LOAD_ERROR,i,s,r){return new UM({type:xR.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:r,error:i,networkDetails:s})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:i,cc:s}=e;for(let e=0;e<t.length;e++){const r=t[e];if(s<=r.cc&&("initSegment"===i||"initSegment"===r.sn||i<r.sn)){this.emeController.selectKeySystemFormat(r).then((e=>{r.setKeyFormat(e)}));break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then((t=>this.loadInternal(e,t))):this.loadInternal(e)}loadInternal(e,t){var i,s;t&&e.setKeyFormat(t);const r=e.decryptdata;if(!r){const i=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,kR.KEY_LOAD_ERROR,i))}const n=r.uri;if(!n)return Promise.reject(this.createKeyLoadError(e,kR.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${n}"`)));let o=this.keyUriToKeyInfo[n];if(null!=(i=o)&&i.decryptdata.key)return r.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});var a;if(null!=(s=o)&&s.keyLoadPromise)switch(null==(a=o.mediaKeySessionContext)?void 0:a.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return o.keyLoadPromise.then((t=>(r.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:o})))}switch(o=this.keyUriToKeyInfo[n]={decryptdata:r,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},r.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===r.keyFormat?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,kR.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${r.method}"`)))}}loadKeyEME(e,t){const i={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const t=this.emeController.loadKey(i);if(t)return(e.keyLoadPromise=t.then((t=>(e.mediaKeySessionContext=t,i)))).catch((t=>{throw e.keyLoadPromise=null,t}))}return Promise.resolve(i)}loadKeyHTTP(e,t){const i=this.config,s=i.loader,r=new s(i);return t.keyLoader=e.loader=r,e.keyLoadPromise=new Promise(((s,n)=>{const o={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},a=i.keyLoadPolicy.default,l={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,i,r)=>{const{frag:o,keyInfo:a,url:l}=i;if(!o.decryptdata||a!==this.keyUriToKeyInfo[l])return n(this.createKeyLoadError(o,kR.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),r));a.decryptdata.key=o.decryptdata.key=new Uint8Array(e.data),o.keyLoader=null,a.loader=null,s({frag:o,keyInfo:a})},onError:(e,i,s,r)=>{this.resetLoader(i),n(this.createKeyLoadError(t,kR.KEY_LOAD_ERROR,new Error(`HTTP Error ${e.code} loading key ${e.text}`),s,mR({url:o.url,data:void 0},e)))},onTimeout:(e,i,s)=>{this.resetLoader(i),n(this.createKeyLoadError(t,kR.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),s))},onAbort:(e,i,s)=>{this.resetLoader(i),n(this.createKeyLoadError(t,kR.INTERNAL_ABORTED,new Error("key loading aborted"),s))}};r.load(o,l,c)}))}resetLoader(e){const{frag:t,keyInfo:i,url:s}=e,r=i.loader;t.keyLoader===r&&(t.keyLoader=null,i.loader=null),delete this.keyUriToKeyInfo[s],r&&r.destroy()}}function S$(){return self.SourceBuffer||self.WebKitSourceBuffer}function A$(){const e=yD();if(!e)return!1;const t=S$();return!t||t.prototype&&"function"===typeof t.prototype.appendBuffer&&"function"===typeof t.prototype.remove}function x$(){if(!A$())return!1;const e=yD();return"function"===typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some((t=>e.isTypeSupported(AD(t,"video"))))||["mp4a.40.2","fLaC"].some((t=>e.isTypeSupported(AD(t,"audio")))))}function k$(){var e;const t=S$();return"function"===typeof(null==t||null==(e=t.prototype)?void 0:e.changeType)}const L$=250,C$=2,_$=.1,R$=.05;class I${constructor(e,t,i,s){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=i,this.hls=s}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:i,media:s,stalled:r}=this;if(null===s)return;const{currentTime:n,seeking:o}=s,a=this.seeking&&!o,l=!this.seeking&&o;if(this.seeking=o,n!==e){if(this.moved=!0,o||(this.nudgeRetry=0),null!==r){if(this.stallReported){const e=self.performance.now()-r;PR.warn(`playback not stuck anymore @${n}, after ${Math.round(e)}ms`),this.stallReported=!1}this.stalled=null}return}if(l||a)return void(this.stalled=null);if(s.paused&&!o||s.ended||0===s.playbackRate||!xM.getBuffered(s).length)return void(this.nudgeRetry=0);const c=xM.bufferInfo(s,n,0),d=c.nextStart||0;if(o){const e=c.len>C$,i=!d||t&&t.start<=n||d-n>C$&&!this.fragmentTracker.getPartialFragment(n);if(e||i)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var h;const e=c.len>0;if(!e&&!d)return;const t=Math.max(d,c.start||0)-n,i=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,r=null==i||null==(h=i.details)?void 0:h.live,o=r?2*i.details.targetduration:C$,a=this.fragmentTracker.getPartialFragment(n);if(t>0&&(t<=o||a))return void(s.paused||this._trySkipBufferHole(a))}const u=self.performance.now();if(null===r)return void(this.stalled=u);const p=u-r;if(!o&&p>=L$&&(this._reportStall(c),!this.media))return;const f=xM.bufferInfo(s,n,i.maxBufferHole);this._tryFixBufferStall(f,p)}_tryFixBufferStall(e,t){const{config:i,fragmentTracker:s,media:r}=this;if(null===r)return;const n=r.currentTime,o=s.getPartialFragment(n);if(o){const e=this._trySkipBufferHole(o);if(e||!this.media)return}(e.len>i.maxBufferHole||e.nextStart&&e.nextStart-n<i.maxBufferHole)&&t>1e3*i.highBufferWatchdogPeriod&&(PR.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:i,stallReported:s}=this;if(!s&&i){this.stallReported=!0;const s=new Error(`Playback stalling at @${i.currentTime} due to low buffer (${JSON.stringify(e)})`);PR.warn(s.message),t.trigger(AR.ERROR,{type:xR.MEDIA_ERROR,details:kR.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:i,media:s}=this;if(null===s)return 0;const r=s.currentTime,n=xM.bufferInfo(s,r,0),o=r<n.start?n.start:n.nextStart;if(o){const a=n.len<=t.maxBufferHole,l=n.len>0&&n.len<1&&s.readyState<3,c=o-r;if(c>0&&(a||l)){if(c>t.maxBufferHole){const{fragmentTracker:t}=this;let i=!1;if(0===r){const e=t.getAppendedFrag(0,KD.MAIN);e&&o<e.end&&(i=!0)}if(!i){const i=e||t.getAppendedFrag(r,KD.MAIN);if(i){let e=!1,s=i.end;while(s<o){const i=t.getPartialFragment(s);if(!i){e=!0;break}s+=i.duration}if(e)return 0}}}const n=Math.max(o+R$,r+_$);if(PR.warn(`skipping hole, adjusting currentTime from ${r} to ${n}`),this.moved=!0,this.stalled=null,s.currentTime=n,e&&!e.gap){const t=new Error(`fragment loaded with buffer holes, seeking from ${r} to ${n}`);i.trigger(AR.ERROR,{type:xR.MEDIA_ERROR,details:kR.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:t,reason:t.message,frag:e})}return n}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:i,nudgeRetry:s}=this;if(null===i)return;const r=i.currentTime;if(this.nudgeRetry++,s<e.nudgeMaxRetry){const n=r+(s+1)*e.nudgeOffset,o=new Error(`Nudging 'currentTime' from ${r} to ${n}`);PR.warn(o.message),i.currentTime=n,t.trigger(AR.ERROR,{type:xR.MEDIA_ERROR,details:kR.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1})}else{const i=new Error(`Playhead still not moving while enough data buffered @${r} after ${e.nudgeMaxRetry} nudges`);PR.error(i.message),t.trigger(AR.ERROR,{type:xR.MEDIA_ERROR,details:kR.BUFFER_STALLED_ERROR,error:i,fatal:!0})}}}const D$=100;class P$ extends qM{constructor(e,t,i){super(e,t,i,"[stream-controller]",KD.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(AR.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(AR.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.on(AR.MANIFEST_PARSED,this.onManifestParsed,this),e.on(AR.LEVEL_LOADING,this.onLevelLoading,this),e.on(AR.LEVEL_LOADED,this.onLevelLoaded,this),e.on(AR.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(AR.ERROR,this.onError,this),e.on(AR.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(AR.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(AR.BUFFER_CREATED,this.onBufferCreated,this),e.on(AR.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(AR.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(AR.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(AR.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(AR.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(AR.MANIFEST_LOADING,this.onManifestLoading,this),e.off(AR.MANIFEST_PARSED,this.onManifestParsed,this),e.off(AR.LEVEL_LOADED,this.onLevelLoaded,this),e.off(AR.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(AR.ERROR,this.onError,this),e.off(AR.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(AR.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(AR.BUFFER_CREATED,this.onBufferCreated,this),e.off(AR.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(AR.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(AR.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:i}=this;if(this.stopLoad(),this.setInterval(D$),this.level=-1,!this.startFragRequested){let e=i.startLevel;-1===e&&(i.config.testBandwidth&&this.levels.length>1?(e=0,this.bitrateTest=!0):e=i.firstAutoLevel),i.nextLoadLevel=e,this.level=i.loadLevel,this.loadedmetadata=!1}t>0&&-1===e&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t),this.state=KM.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=KM.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case KM.WAITING_LEVEL:{const{levels:e,level:t}=this,i=null==e?void 0:e[t],s=null==i?void 0:i.details;if(s&&(!s.live||this.levelLastLoaded===i)){if(this.waitForCdnTuneIn(s))break;this.state=KM.IDLE;break}if(this.hls.nextLoadLevel!==this.level){this.state=KM.IDLE;break}break}case KM.FRAG_LOADING_WAITING_RETRY:{var e;const t=self.performance.now(),i=this.retryDate;if(!i||t>=i||null!=(e=this.media)&&e.seeking){const{levels:e,level:t}=this,i=null==e?void 0:e[t];this.resetStartWhenNotLoaded(i||null),this.state=KM.IDLE}}break}this.state===KM.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:i,media:s}=this;if(null===t||!s&&(this.startFragRequested||!e.config.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;const r=e.nextLoadLevel;if(null==i||!i[r])return;const n=i[r],o=this.getMainFwdBufferInfo();if(null===o)return;const a=this.getLevelDetails();if(a&&this._streamEnded(o,a)){const e={};return this.altAudio&&(e.type="video"),this.hls.trigger(AR.BUFFER_EOS,e),void(this.state=KM.ENDED)}e.loadLevel!==r&&-1===e.manualLevel&&this.log(`Adapting to level ${r} from level ${this.level}`),this.level=e.nextLoadLevel=r;const l=n.details;if(!l||this.state===KM.WAITING_LEVEL||l.live&&this.levelLastLoaded!==n)return this.level=r,void(this.state=KM.WAITING_LEVEL);const c=o.len,d=this.getMaxBufferLength(n.maxBitrate);if(c>=d)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:o.end;let u=this.getNextFragment(h,l);if(this.couldBacktrack&&!this.fragPrevious&&u&&"initSegment"!==u.sn&&this.fragmentTracker.getState(u)!==wM.OK){var p;const e=(null!=(p=this.backtrackFragment)?p:u).sn,t=e-l.startSN,i=l.fragments[t-1];i&&u.cc===i.cc&&(u=i,this.fragmentTracker.removeFragment(i))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(u&&this.isLoopLoading(u,h)){const e=u.gap;if(!e){const e=this.audioOnly&&!this.altAudio?GR.AUDIO:GR.VIDEO,t=(e===GR.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;t&&this.afterBufferFlushed(t,e,KD.MAIN)}u=this.getNextFragmentLoopLoading(u,l,o,KD.MAIN,d)}u&&(!u.initSegment||u.initSegment.data||this.bitrateTest||(u=u.initSegment),this.loadFragment(u,n,h))}loadFragment(e,t,i){const s=this.fragmentTracker.getState(e);this.fragCurrent=e,s===wM.NOT_LOADED||s===wM.PARTIAL?"initSegment"===e.sn?this._loadInitSegment(e,t):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,i)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,KD.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(null!=t&&t.readyState){let i;const s=this.getAppendedFrag(t.currentTime);s&&s.start>1&&this.flushMainBuffer(0,s.start-1);const r=this.getLevelDetails();if(null!=r&&r.live){const e=this.getMainFwdBufferInfo();if(!e||e.len<2*r.targetduration)return}if(!t.paused&&e){const t=this.hls.nextLoadLevel,s=e[t],r=this.fragLastKbps;i=r&&this.fragCurrent?this.fragCurrent.duration*s.maxBitrate/(1e3*r)+1:0}else i=0;const n=this.getBufferedFrag(t.currentTime+i);if(n){const e=this.followingBufferedFrag(n);if(e){this.abortCurrentFrag();const t=e.maxStartPTS?e.maxStartPTS:e.start,i=e.duration,s=Math.max(n.end,t+Math.min(Math.max(i-this.config.maxFragLookUpTolerance,i*(this.couldBacktrack?.5:.125)),i*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(s,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case KM.KEY_LOADING:case KM.FRAG_LOADING:case KM.FRAG_LOADING_WAITING_RETRY:case KM.PARSING:case KM.PARSED:this.state=KM.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const i=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new I$(this.config,i,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;ER(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const i=this.getMainFwdBufferInfo();null!==i&&0!==i.len?this.tick():this.warn(`Main forward buffer length on "seeked" event ${i?i.len:"empty"})`)}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(AR.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,t){let i=!1,s=!1;t.levels.forEach((e=>{const t=e.audioCodec;t&&(i=i||-1!==t.indexOf("mp4a.40.2"),s=s||-1!==t.indexOf("mp4a.40.5"))})),this.audioCodecSwitch=i&&s&&!k$(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:i}=this;if(!i||this.state!==KM.IDLE)return;const s=i[t.level];(!s.details||s.details.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(s.details))&&(this.state=KM.WAITING_LEVEL)}onLevelLoaded(e,t){var i;const{levels:s}=this,r=t.level,n=t.details,o=n.totalduration;if(!s)return void this.warn(`Levels were reset while loading level ${r}`);this.log(`Level ${r} loaded [${n.startSN},${n.endSN}]${n.lastPartSn?`[part-${n.lastPartSn}-${n.lastPartIndex}]`:""}, cc [${n.startCC}, ${n.endCC}] duration:${o}`);const a=s[r],l=this.fragCurrent;!l||this.state!==KM.FRAG_LOADING&&this.state!==KM.FRAG_LOADING_WAITING_RETRY||l.level!==t.level&&l.loader&&this.abortCurrentFrag();let c=0;if(n.live||null!=(i=a.details)&&i.live){var d;if(this.checkLiveUpdate(n),n.deltaUpdateFailed)return;c=this.alignPlaylists(n,a.details,null==(d=this.levelLastLoaded)?void 0:d.details)}if(a.details=n,this.levelLastLoaded=a,this.hls.trigger(AR.LEVEL_UPDATED,{details:n,level:r}),this.state===KM.WAITING_LEVEL){if(this.waitForCdnTuneIn(n))return;this.state=KM.IDLE}this.startFragRequested?n.live&&this.synchronizeToLiveEdge(n):this.setStartPosition(n,c),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:i,part:s,payload:r}=e,{levels:n}=this;if(!n)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);const o=n[i.level],a=o.details;if(!a)return this.warn(`Dropping fragment ${i.sn} of level ${i.level} after level details were reset`),void this.fragmentTracker.removeFragment(i);const l=o.videoCodec,c=a.PTSKnown||!a.live,d=null==(t=i.initSegment)?void 0:t.data,h=this._getAudioCodec(o),u=this.transmuxer=this.transmuxer||new kN(this.hls,KD.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=s?s.index:-1,f=-1!==p,g=new kM(i.level,i.sn,i.stats.chunkCount,r.byteLength,p,f),m=this.initPTS[i.cc];u.push(r,d,h,l,i,s,a.totalduration,c,g,m)}onAudioTrackSwitching(e,t){const i=this.altAudio,s=!!t.url;if(!s){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const e=this.fragCurrent;e&&(this.log("Switching to main audio track, cancel main fragment load"),e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const e=this.hls;i&&(e.trigger(AR.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),e.trigger(AR.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const i=t.id,s=!!this.hls.audioTracks[i].url;if(s){const e=this.videoBuffer;e&&this.mediaBuffer!==e&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e)}this.altAudio=s,this.tick()}onBufferCreated(e,t){const i=t.tracks;let s,r,n=!1;for(const o in i){const e=i[o];if("main"===e.id){if(r=o,s=e,"video"===o){const e=i[o];e&&(this.videoBuffer=e.buffer)}}else n=!0}n&&s?(this.log(`Alternate track found, use ${r}.buffered to schedule main fragment loading`),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:i,part:s}=t;if(i&&i.type!==KD.MAIN)return;if(this.fragContextChanged(i))return this.warn(`Fragment ${i.sn}${s?" p: "+s.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}`),void(this.state===KM.PARSED&&(this.state=KM.IDLE));const r=s?s.stats:i.stats;this.fragLastKbps=Math.round(8*r.total/(r.buffering.end-r.loading.first)),"initSegment"!==i.sn&&(this.fragPrevious=i),this.fragBufferedComplete(i,s)}onError(e,t){var i;if(t.fatal)this.state=KM.ERROR;else switch(t.details){case kR.FRAG_GAP:case kR.FRAG_PARSING_ERROR:case kR.FRAG_DECRYPT_ERROR:case kR.FRAG_LOAD_ERROR:case kR.FRAG_LOAD_TIMEOUT:case kR.KEY_LOAD_ERROR:case kR.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(KD.MAIN,t);break;case kR.LEVEL_LOAD_ERROR:case kR.LEVEL_LOAD_TIMEOUT:case kR.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==KM.WAITING_LEVEL||(null==(i=t.context)?void 0:i.type)!==WD.LEVEL||(this.state=KM.IDLE);break;case kR.BUFFER_APPEND_ERROR:case kR.BUFFER_FULL_ERROR:if(!t.parent||"main"!==t.parent)return;if(t.details===kR.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case kR.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}checkBuffer(){const{media:e,gapController:t}=this;if(e&&t&&e.readyState){if(this.loadedmetadata||!xM.getBuffered(e).length){const e=this.state!==KM.IDLE?this.fragCurrent:null;t.poll(this.lastCurrentTime,e)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=KM.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==GR.AUDIO||this.audioOnly&&!this.altAudio){const e=(t===GR.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(e,t,KD.MAIN),this.tick()}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let i=this.startPosition;if(i>=0&&t<i){if(e.seeking)return void this.log(`could not seek to ${i}, already seeking at ${t}`);const s=xM.getBuffered(e),r=s.length?s.start(0):0,n=r-i;n>0&&(n<this.config.maxBufferHole||n<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${n} to match buffer start`),i+=n,this.startPosition=i),this.log(`seek to target start position ${i} from current time ${t}`),e.currentTime=i}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then((i=>{const{hls:s}=this;if(!i||this.fragContextChanged(e))return;t.fragmentError=0,this.state=KM.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const r=e.stats;r.parsing.start=r.parsing.end=r.buffering.start=r.buffering.end=self.performance.now(),s.trigger(AR.FRAG_LOADED,i),e.bitrateTest=!1}))}_handleTransmuxComplete(e){var t;const i="main",{hls:s}=this,{remuxResult:r,chunkMeta:n}=e,o=this.getCurrentContext(n);if(!o)return void this.resetWhenMissingContext(n);const{frag:a,part:l,level:c}=o,{video:d,text:h,id3:u,initSegment:p}=r,{details:f}=c,g=this.altAudio?void 0:r.audio;if(this.fragContextChanged(a))this.fragmentTracker.removeFragment(a);else{if(this.state=KM.PARSING,p){if(null!=p&&p.tracks){const e=a.initSegment||a;this._bufferInitSegment(c,p.tracks,e,n),s.trigger(AR.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:i,tracks:p.tracks})}const e=p.initPTS,t=p.timescale;ER(e)&&(this.initPTS[a.cc]={baseTime:e,timescale:t},s.trigger(AR.INIT_PTS_FOUND,{frag:a,id:i,initPTS:e,timescale:t}))}if(d&&f&&"initSegment"!==a.sn){const e=f.fragments[a.sn-1-f.startSN],t=a.sn===f.startSN,i=!e||a.cc>e.cc;if(!1!==r.independent){const{startPTS:e,endPTS:s,startDTS:r,endDTS:o}=d;if(l)l.elementaryStreams[d.type]={startPTS:e,endPTS:s,startDTS:r,endDTS:o};else if(d.firstKeyFrame&&d.independent&&1===n.id&&!i&&(this.couldBacktrack=!0),d.dropped&&d.independent){const r=this.getMainFwdBufferInfo(),n=(r?r.end:this.getLoadPosition())+this.config.maxBufferHole,l=d.firstKeyFramePTS?d.firstKeyFramePTS:e;if(!t&&n<l-this.config.maxBufferHole&&!i)return void this.backtrack(a);i&&(a.gap=!0),a.setElementaryStreamInfo(d.type,a.start,s,a.start,o,!0)}else t&&e>C$&&(a.gap=!0);a.setElementaryStreamInfo(d.type,e,s,r,o),this.backtrackFragment&&(this.backtrackFragment=a),this.bufferFragmentData(d,a,l,n,t||i)}else{if(!t&&!i)return void this.backtrack(a);a.gap=!0}}if(g){const{startPTS:e,endPTS:t,startDTS:i,endDTS:s}=g;l&&(l.elementaryStreams[GR.AUDIO]={startPTS:e,endPTS:t,startDTS:i,endDTS:s}),a.setElementaryStreamInfo(GR.AUDIO,e,t,i,s),this.bufferFragmentData(g,a,l,n)}if(f&&null!=u&&null!=(t=u.samples)&&t.length){const e={id:i,frag:a,details:f,samples:u.samples};s.trigger(AR.FRAG_PARSING_METADATA,e)}if(f&&h){const e={id:i,frag:a,details:f,samples:h.samples};s.trigger(AR.FRAG_PARSING_USERDATA,e)}}}_bufferInitSegment(e,t,i,s){if(this.state!==KM.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:r,video:n,audiovideo:o}=t;if(r){let t=e.audioCodec;const i=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");const e=r.metadata;e&&"channelCount"in e&&1!==(e.channelCount||1)&&-1===i.indexOf("firefox")&&(t="mp4a.40.5")}t&&-1!==t.indexOf("mp4a.40.5")&&-1!==i.indexOf("android")&&"audio/mpeg"!==r.container&&(t="mp4a.40.2",this.log(`Android: force audio codec to ${t}`)),e.audioCodec&&e.audioCodec!==t&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${t}"`),r.levelCodec=t,r.id="main",this.log(`Init audio buffer, container:${r.container}, codecs[selected/level/parsed]=[${t||""}/${e.audioCodec||""}/${r.codec}]`)}n&&(n.levelCodec=e.videoCodec,n.id="main",this.log(`Init video buffer, container:${n.container}, codecs[level/parsed]=[${e.videoCodec||""}/${n.codec}]`)),o&&this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),this.hls.trigger(AR.BUFFER_CODECS,t),Object.keys(t).forEach((e=>{const r=t[e],n=r.initSegment;null!=n&&n.byteLength&&this.hls.trigger(AR.BUFFER_APPENDING,{type:e,data:n,frag:i,part:null,chunkMeta:s,parent:i.type})})),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,KD.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=KM.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&!1===e.seeking){const i=e.currentTime;if(xM.isBuffered(e,i)?t=this.getAppendedFrag(i):xM.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){this.backtrackFragment=null;const e=this.fragPlaying,i=t.level;e&&t.sn===e.sn&&e.level===i||(this.fragPlaying=t,this.hls.trigger(AR.FRAG_CHANGED,{frag:t}),e&&e.level===i||this.hls.trigger(AR.LEVEL_SWITCHED,{level:i}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,i=this.currentFrag;if(i&&ER(t)&&ER(i.programDateTime)){const e=i.programDateTime+1e3*(t-i.start);return new Date(e)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class M${static get version(){return"1.5.15"}static isMSESupported(){return A$()}static isSupported(){return x$()}static getMediaSource(){return yD()}static get Events(){return AR}static get ErrorTypes(){return xR}static get ErrorDetails(){return kR}static get DefaultConfig(){return M$.defaultConfig?M$.defaultConfig:f$}static set DefaultConfig(e){M$.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new xN,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,DR(e.debug||!1,"Hls instance");const t=this.config=m$(M$.DefaultConfig,e);this.userConfig=e,t.progressive&&y$(t);const{abrController:i,bufferController:s,capLevelController:r,errorController:n,fpsController:o}=t,a=new n(this),l=this.abrController=new i(this),c=this.bufferController=new s(this),d=this.capLevelController=new r(this),h=new o(this),u=new ZD(this),p=new uP(this),f=t.contentSteeringController,g=f?new f(this):null,m=this.levelController=new w$(this,g),v=new EM(this),y=new T$(this.config),b=this.streamController=new P$(this,v,y);d.setStreamController(b),h.setStreamController(b);const w=[u,m,b];g&&w.splice(1,0,g),this.networkControllers=w;const E=[l,c,d,h,p,v];this.audioTrackController=this.createController(t.audioTrackController,w);const T=t.audioStreamController;T&&w.push(new T(this,v,y)),this.subtitleTrackController=this.createController(t.subtitleTrackController,w);const S=t.subtitleStreamController;S&&w.push(new S(this,v,y)),this.createController(t.timelineController,E),y.emeController=this.emeController=this.createController(t.emeController,E),this.cmcdController=this.createController(t.cmcdController,E),this.latencyController=this.createController(pP,E),this.coreComponents=E,w.push(a);const A=a.onErrorOut;"function"===typeof A&&this.on(AR.ERROR,A,a)}createController(e,t){if(e){const i=new e(this);return t&&t.push(i),i}return null}on(e,t,i=this){this._emitter.on(e,t,i)}once(e,t,i=this){this._emitter.once(e,t,i)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,i=this,s){this._emitter.off(e,t,i,s)}listeners(e){return this._emitter.listeners(e)}emit(e,t,i){return this._emitter.emit(e,t,i)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(i){if(PR.error("An internal error happened while handling event "+e+'. Error message: "'+i.message+'". Here is a stacktrace:',i),!this.triggeringException){this.triggeringException=!0;const t=e===AR.ERROR;this.trigger(AR.ERROR,{type:xR.OTHER_ERROR,details:kR.INTERNAL_EXCEPTION,fatal:t,event:e,error:i}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){PR.log("destroy"),this.trigger(AR.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((e=>e.destroy())),this.networkControllers.length=0,this.coreComponents.forEach((e=>e.destroy())),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){PR.log("attachMedia"),this._media=e,this.trigger(AR.MEDIA_ATTACHING,{media:e})}detachMedia(){PR.log("detachMedia"),this.trigger(AR.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,i=this.url,s=this.url=fR.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,PR.log(`loadSource:${s}`),t&&i&&(i!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(AR.MANIFEST_LOADING,{url:e})}startLoad(e=-1){PR.log(`startLoad(${e})`),this.started=!0,this.networkControllers.forEach((t=>{t.startLoad(e)}))}stopLoad(){PR.log("stopLoad"),this.started=!1,this.networkControllers.forEach((e=>{e.stopLoad()}))}resumeBuffering(){this.started&&this.networkControllers.forEach((e=>{"fragmentLoader"in e&&e.startLoad(-1)}))}pauseBuffering(){this.networkControllers.forEach((e=>{"fragmentLoader"in e&&e.stopLoad()}))}swapAudioCodec(){PR.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){PR.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){PR.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){PR.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){PR.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){PR.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return-1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){PR.log(`set startLevel:${e}`),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(PR.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){gP(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const i=e.length;for(let s=0;s<i;s++)if(e[s].maxBitrate>=t)return s;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:i}=this;let s;if(s=-1===t&&null!=e&&e.length?e.length-1:t,i)for(let r=s;r--;){const t=e[r].attrs["HDCP-LEVEL"];if(t&&t<=i)return r}return s}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var t;return null==(t=this.audioTrackController)?void 0:t.setAudioOption(e)}setSubtitleOption(e){var t;return null==(t=this.subtitleTrackController)||t.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}M$.defaultConfig=void 0;const O$=Object.freeze(Object.defineProperty({__proto__:null,AbrController:yM,AttrList:NR,AudioStreamController:IN,AudioTrackController:DN,BasePlaylistController:QP,BaseSegment:HR,BaseStreamController:qM,BufferController:$N,CMCDController:XB,CapLevelController:YF,ChunkMetadata:kM,ContentSteeringController:QB,DateRange:$R,EMEController:qF,ErrorActionFlags:XP,ErrorController:ZP,ErrorDetails:kR,ErrorTypes:xR,Events:AR,FPSController:WF,Fragment:jR,Hls:M$,HlsSkip:yP,HlsUrlParameters:wP,KeySystemFormats:eI,KeySystems:JR,Level:EP,LevelDetails:YR,LevelKey:dD,LoadStats:UR,MetadataSchema:nP,NetworkErrorAction:qP,Part:zR,PlaylistLevelType:KD,SubtitleStreamController:MN,SubtitleTrackController:NN,TimelineController:GF,default:M$,getMediaSource:yD,isMSESupported:A$,isSupported:x$},Symbol.toStringTag,{value:"Module"}));export{ed as A,Fr as B,PL as C,oa as D,al as E,zc as F,EL as G,Uh as H,Dc as I,ul as J,Hr as K,Xa as L,ak as M,Vd as T,f as _,QL as a,yb as b,Kh as c,uC as d,ku as e,_A as f,tk as g,ik as h,vC as i,GL as j,_d as k,hR as l,jc as m,qc as n,Bc as o,Dr as p,cl as q,Ro as r,Xc as s,Ct as t,ya as u,mC as v,mc as w,Po as x,td as y,ba as z};
